function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,a=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{TV7p:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe})),n.d(t,"b",(function(){return ce}));var i=n("XDzf"),r=n("Do6i"),a=n("a/z7"),s=n("h3hP"),o=n("aLb1"),c=n("WI1B"),u=n("MfEj"),l=n("tAww"),f=n("rCAV"),h=n("MhyI"),p=n("ObUu"),b=n("PvCH"),m=n("2Vo4"),g=n("8Y7J"),d=n("8UBS"),v=n("SVse"),y=n("HQV3"),k=n("sARG"),w=n("IAdc"),T=n("JFlR"),O=n("7HWn"),A=n("H4pW"),S=n("nznZ"),I=n("sifq"),_=n("5Wk5"),F=n("Aeop"),P=n("yL40");function z(e,t){1&e&&g.Pb(0)}var R=function(e){return{$implicit:e}};function E(e,t){if(1&e&&(g.Rb(0),g.Fc(1,z,1,0,"ng-container",19),g.Qb()),2&e){var n=t.$implicit;g.dc(4);var i=g.uc(4);g.zb(1),g.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",g.nc(2,R,n))}}function C(e,t){if(1&e&&(g.Tb(0,"div",16),g.Tb(1,"h2",17),g.Hc(2),g.Sb(),g.Fc(3,E,2,4,"ng-container",18),g.Sb()),2&e){var n=g.dc(3);g.zb(2),g.Ic(n.i18n.user.profile.banking),g.zb(1),g.kc("ngForOf",n.bankingActions)}}function L(e,t){1&e&&g.Pb(0)}function H(e,t){if(1&e&&(g.Rb(0),g.Fc(1,L,1,0,"ng-container",19),g.Qb()),2&e){var n=t.$implicit;g.dc(4);var i=g.uc(4);g.zb(1),g.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",g.nc(2,R,n))}}function N(e,t){if(1&e&&(g.Tb(0,"div",16),g.Tb(1,"h2",17),g.Hc(2),g.Sb(),g.Fc(3,H,2,4,"ng-container",18),g.Sb()),2&e){var n=g.dc(3);g.zb(2),g.Ic(n.i18n.user.profile.management),g.zb(1),g.kc("ngForOf",n.managementActions)}}function $(e,t){if(1&e&&(g.Rb(0),g.Tb(1,"div",14),g.Fc(2,C,4,2,"div",15),g.Fc(3,N,4,2,"div",15),g.Sb(),g.Ob(4,"hr"),g.Qb()),2&e){var n=g.dc(2);g.zb(2),g.kc("ngIf",n.bankingActions.length>0),g.zb(1),g.kc("ngIf",n.managementActions.length>0)}}function M(e,t){if(1&e&&g.Ob(0,"profile-images",20),2&e){var n=g.dc(2);g.kc("image",n.user.image)("additionalImages",n.user.additionalImages)}}function U(e,t){if(1&e&&g.Ob(0,"profile-images",21),2&e){var n=g.dc(2);g.kc("image",n.user.image)("additionalImages",n.user.additionalImages)}}function x(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Ob(1,"user-link",23),g.Sb()),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.operatorOwner),g.zb(1),g.kc("user",n.user.user)}}function D(e,t){if(1&e&&g.Ob(0,"label-value",24),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.groupSet)("value",n.user.groupSet.name)}}function V(e,t){if(1&e&&g.Ob(0,"label-value",24),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.group)("value",n.user.group.name)}}function B(e,t){if(1&e&&g.Ob(0,"label-value",24),2&e){var n=g.dc(2);g.kc("label",n.i18n.general.status)("value",n.userHelper.userStatus(n.user.status))}}function j(e,t){if(1&e&&g.Ob(0,"label-value",24),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.name)("value",n.user.name)}}function W(e,t){if(1&e&&g.Ob(0,"label-value",24),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.username)("value",n.user.username)}}function G(e,t){if(1&e&&(g.Ob(0,"label-value",24),g.ec(1,"date")),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.registrationDate)("value",g.fc(1,2,n.user.registrationDate))}}function J(e,t){if(1&e&&(g.Ob(0,"label-value",24),g.ec(1,"date")),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.activationDate)("value",g.fc(1,2,n.user.activationDate))}}function K(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Tb(1,"a",25),g.Ob(2,"icon",26),g.Tb(3,"span"),g.Hc(4),g.Sb(),g.Sb(),g.Sb()),2&e){var n=g.dc(2);g.kc("label",n.i18n.user.email),g.zb(1),g.kc("href","mailto:"+n.user.email,g.yc),g.zb(3),g.Ic(n.user.email)}}function Y(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Tb(1,"a",25),g.Ob(2,"icon",27),g.Tb(3,"span"),g.Hc(4),g.Sb(),g.Sb(),g.Sb()),2&e){var n=g.dc(2);g.kc("label",n.i18n.phone.mobile),g.zb(1),g.kc("href","tel:"+n.mobilePhone.normalizedNumber,g.yc),g.zb(3),g.Ic(n.mobilePhone.number)}}function q(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Tb(1,"a",25),g.Ob(2,"icon",27),g.Tb(3,"span"),g.Hc(4),g.Sb(),g.Sb(),g.Sb()),2&e){var n=t.$implicit;g.kc("label",n.name),g.zb(1),g.kc("href","tel:"+n.normalizedNumber,g.yc),g.zb(3),g.Ic(n.number)}}function Q(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Tb(1,"a",25),g.Ob(2,"icon",28),g.Tb(3,"span"),g.Hc(4),g.Sb(),g.Sb(),g.Sb()),2&e){var n=g.dc(2);g.kc("label",n.i18n.phone.landLine),g.zb(1),g.kc("href","tel:"+n.landLinePhone.normalizedNumber,g.yc),g.zb(3),g.Ic(n.landLinePhone.number)}}function X(e,t){if(1&e&&(g.Tb(0,"label-value",22),g.Tb(1,"a",25),g.Ob(2,"icon",28),g.Tb(3,"span"),g.Hc(4),g.Sb(),g.Sb(),g.Sb()),2&e){var n=t.$implicit;g.kc("label",n.name),g.zb(1),g.kc("href","tel:"+n.normalizedNumber,g.yc),g.zb(3),g.Ic(n.number)}}function Z(e,t){1&e&&g.Ob(0,"custom-field-value",29),2&e&&g.kc("fieldValue",t.$implicit)}function ee(e,t){if(1&e&&(g.Tb(0,"a",36),g.Hc(1),g.Sb()),2&e){var n=g.dc().$implicit;g.kc("href","mailto:"+n.email,g.yc),g.zb(1),g.Jc(" ",n.email," ")}}function te(e,t){if(1&e&&(g.Tb(0,"div"),g.Ob(1,"format-field-value",29),g.Sb()),2&e){var n=t.$implicit;g.zb(1),g.kc("fieldValue",n)}}function ne(e,t){if(1&e&&(g.Tb(0,"div",38),g.Tb(1,"span",39),g.Hc(2),g.Sb(),g.Hc(3),g.Sb()),2&e){var n=g.dc().$implicit,i=g.dc(3);g.zb(2),g.Ic(i.i18n.user.contactInfoAtAddress),g.zb(1),g.Jc(" ",n.address.name," ")}}function ie(e,t){if(1&e&&(g.Tb(0,"div",32),g.Ob(1,"avatar",33),g.Tb(2,"div",34),g.Hc(3),g.Sb(),g.Fc(4,ee,2,2,"a",35),g.Tb(5,"a",36),g.Hc(6),g.Sb(),g.Tb(7,"a",36),g.Hc(8),g.Sb(),g.Fc(9,te,2,1,"div",18),g.Fc(10,ne,4,2,"div",37),g.Sb()),2&e){var n=t.$implicit;g.zb(1),g.kc("image",n.image),g.zb(2),g.Ic(n.name),g.zb(1),g.kc("ngIf",n.email),g.zb(1),g.kc("href","tel:"+n.normalizedMobilePhone,g.yc),g.zb(1),g.Jc(" ",n.mobilePhone," "),g.zb(1),g.kc("href","tel:"+n.normalizedLandLinePhone,g.yc),g.zb(1),g.Jc(" ",n.landLinePhone," "),g.zb(1),g.kc("ngForOf",n.customValues),g.zb(1),g.kc("ngIf",n.address)}}function re(e,t){if(1&e&&(g.Rb(0),g.Tb(1,"h2",30),g.Hc(2),g.Sb(),g.Tb(3,"div",14),g.Fc(4,ie,11,9,"div",31),g.Sb(),g.Qb()),2&e){var n=g.dc(2);g.zb(2),g.Ic(n.i18n.user.contactInfo),g.zb(2),g.kc("ngForOf",n.user.contactInfos)}}function ae(e,t){if(1&e&&(g.Tb(0,"page-content",3),g.ec(1,"async"),g.Fc(2,$,5,2,"ng-container",4),g.ec(3,"async"),g.Fc(4,M,1,2,"profile-images",5),g.ec(5,"async"),g.Tb(6,"div",6),g.Fc(7,U,1,2,"profile-images",7),g.ec(8,"async"),g.Tb(9,"div",8),g.Fc(10,x,2,2,"label-value",9),g.Fc(11,D,1,2,"label-value",10),g.Fc(12,V,1,2,"label-value",10),g.Fc(13,B,1,2,"label-value",10),g.Fc(14,j,1,2,"label-value",10),g.Fc(15,W,1,2,"label-value",10),g.Fc(16,G,2,4,"label-value",10),g.Fc(17,J,2,4,"label-value",10),g.Fc(18,K,5,3,"label-value",9),g.Fc(19,Y,5,3,"label-value",9),g.Fc(20,q,5,3,"label-value",11),g.Fc(21,Q,5,3,"label-value",9),g.Fc(22,X,5,3,"label-value",11),g.Fc(23,Z,1,1,"custom-field-value",12),g.Sb(),g.Sb(),g.Tb(24,"div",8),g.Ob(25,"profile-addresses",13),g.Fc(26,re,5,2,"ng-container",4),g.Sb(),g.Sb()),2&e){var n=g.dc();g.kc("heading",n.title)("mobileHeading",n.mobileTitle)("headingActions",g.fc(1,22,n.headingActions$)),g.zb(2),g.kc("ngIf",g.fc(3,24,n.showActions$)),g.zb(2),g.kc("ngIf",n.imageEnabled&&n.user.image&&g.fc(5,26,n.layout.ltsm$)),g.zb(3),g.kc("ngIf",n.imageEnabled&&g.fc(8,28,n.layout.gtxs$)),g.zb(3),g.kc("ngIf",n.showOperatorOwner),g.zb(1),g.kc("ngIf",n.user.groupSet),g.zb(1),g.kc("ngIf",n.user.group),g.zb(1),g.kc("ngIf",n.user.status),g.zb(1),g.kc("ngIf",n.user.name),g.zb(1),g.kc("ngIf",n.user.username),g.zb(1),g.kc("ngIf",n.user.registrationDate),g.zb(1),g.kc("ngIf",n.showActivationDate),g.zb(1),g.kc("ngIf",n.user.email),g.zb(1),g.kc("ngIf",n.mobilePhone),g.zb(1),g.kc("ngForOf",n.mobilePhones),g.zb(1),g.kc("ngIf",n.landLinePhone),g.zb(1),g.kc("ngForOf",n.landLinePhones),g.zb(1),g.kc("ngForOf",n.user.customValues),g.zb(2),g.kc("addresses",n.user.addresses),g.zb(1),g.kc("ngIf",(null==n.user.contactInfos?null:n.user.contactInfos.length)>0)}}function se(e,t){if(1&e&&(g.Tb(0,"div",40),g.Ob(1,"heading-action-button",41),g.Sb()),2&e){var n=t.$implicit;g.zb(1),g.kc("action",n)}}var oe=25,ce=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,c){var u;return _classCallCheck(this,n),(u=t.call(this,e)).usersService=i,u.contactsService=r,u.operationsHelper=a,u.recordsHelper=s,u.maps=o,u.userHelper=c,u.showActions$=new m.a(!1),u.bankingActions=[],u.managementActions=[],u}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.stateManager.manageValue(this.showActions$,"showActions"),this.param=this.route.snapshot.params.user||f.a.SELF,this.errorHandler.requestWithCustomErrorHandler((function(t){e.addSub(e.usersService.viewUser({user:e.param}).subscribe((function(t){e.data=t}),(function(n){[a.a.FORBIDDEN,a.a.UNAUTHORIZED].includes(n.status)?(e.notification.error(e.i18n.user.profile.noPermission),e.breadcrumb.back(),e.data={}):t(n)})))}))}},{key:"onDataInitialized",value:function(e){var t=this;this.shortName=Object(p.G)(e.name||e.display,oe);var n=e.enabledProfileFields;this.imageEnabled=null==n||n.includes(i.j.IMAGE),this.mobilePhones=e.phones.filter((function(e){return e.type===i.X.MOBILE})),this.landLinePhones=e.phones.filter((function(e){return e.type===i.X.LAND_LINE})),1===this.mobilePhones.length&&(this.mobilePhone=this.mobilePhones[0],this.mobilePhones=[]),1===this.landLinePhones.length&&(this.landLinePhone=this.landLinePhones[0],this.landLinePhones=[]);var r=e.role===i.eb.OPERATOR,a=e.permissions||{},s=a.profile||{},o=a.passwords||{},c=a.identityProviders||{},u=(a.accounts||[]).map((function(e){return e.type})),h=a.contact||{},b=a.payment||{},m=a.scheduledPayments||{},g=a.authorizedPayments||{},d=a.marketplace||{},v=d.simple||{},y=d.webshop||{},k=a.notificationSettings||{},w=a.status||{},T=a.group||{},O=a.agreements||{},A=a.operators||{},S=a.brokering||{},I=a.vouchers||{},_=a.documents||{},F=a.tokens||[];if(e.relationship===i.Eb.SELF){if(s.editProfile){var P=new l.c("edit",this.i18n.general.edit,(function(){t.router.navigateByUrl(t.router.url+"/edit")}),!0);this.headingActions=[P]}}else{var z,R=[i.Eb.ADMINISTRATOR,i.Eb.BROKER,i.Eb.OWNER,i.Eb.SAME_OWNER].includes(e.relationship),E=_createForOfIteratorHelper(u);try{var C=function(){var e=z.value;t.bankingActions.push(new l.c("account_balance",t.i18n.user.profile.viewAccount(e.name),(function(){t.router.navigate(["/banking",t.param,"account",f.a.internalNameOrId(e)])})))};for(E.s();!(z=E.n()).done;)C()}catch(j){E.e(j)}finally{E.f()}b.systemToUser&&this.bankingActions.push(new l.c("payment",this.i18n.user.profile.paySystemToUser,(function(){t.router.navigate(["/banking",f.a.SYSTEM,"payment",t.param])}))),b.asUserToUser&&this.bankingActions.push(new l.c("payment",this.i18n.user.profile.payAsUserToUser,(function(){t.router.navigate(["/banking",t.param,"payment"])}))),b.asUserToSelf&&this.bankingActions.push(new l.c("payment",this.i18n.user.profile.payAsUserToSelf,(function(){t.router.navigate(["/banking",t.param,"payment",f.a.SELF])}))),b.asUserToSystem&&this.bankingActions.push(new l.c("payment",this.i18n.user.profile.payAsUserToSystem,(function(){t.router.navigate(["/banking",t.param,"payment",f.a.SYSTEM])}))),m.view&&this.bankingActions.push(new l.c("schedule",this.i18n.user.profile.viewScheduledPayments,(function(){t.router.navigate(["/banking",t.param,"installments"])}))),g.view&&this.bankingActions.push(new l.c("assignment_turned_in",this.i18n.user.profile.viewAuthorizedPayments,(function(){t.router.navigate(["/banking",t.param,"authorized-payments"])}))),I.viewBought&&this.bankingActions.push(new l.c("local_play",this.i18n.user.profile.viewBoughtVouchers,(function(){t.router.navigate(["/banking",t.param,"vouchers","bought"])}))),I.buy&&this.bankingActions.push(new l.c("confirmation_number",this.i18n.user.profile.buyVouchers,(function(){t.router.navigate(["/banking",t.param,"vouchers","buy"])}))),I.viewRedeemed&&this.bankingActions.push(new l.c("search",this.i18n.user.profile.viewRedeemedVouchers,(function(){t.router.navigate(["/banking",t.param,"vouchers","redeemed"])}))),I.redeem&&this.bankingActions.push(new l.c("payment",this.i18n.user.profile.redeemVoucher,(function(){t.router.navigate(["/banking",t.param,"vouchers","redeem"])}))),s.editProfile&&this.managementActions.push(new l.c("edit",this.i18n.user.profile.edit,(function(){t.router.navigateByUrl(t.router.url+"/edit")}))),o.manage&&this.managementActions.push(new l.c("vpn_key",this.i18n.user.profile.managePasswords,(function(){t.router.navigate(["/users",t.param,"passwords"])}))),c.view&&this.managementActions.push(new l.c("perm_identity",this.i18n.user.profile.viewIdentityProviders,(function(){t.router.navigate(["/users",t.param,"identity-providers"])}))),w.view&&this.managementActions.push(new l.c("how_to_reg",r?this.i18n.user.profile.statusOperator:this.i18n.user.profile.statusUser,(function(){t.router.navigate(["/users",t.param,"status"])}))),T.view&&this.managementActions.push(new l.c("supervised_user_circle",r?this.i18n.user.profile.groupOperator:this.i18n.user.profile.groupUser,(function(){t.router.navigate(["/users",t.param,"group"])}))),O.view&&this.managementActions.push(new l.c("ballot",this.i18n.user.profile.agreements,(function(){t.router.navigate(["/users",t.param,"agreements"])}))),S.viewMembers&&this.managementActions.push(new l.c("assignment_ind",this.i18n.user.profile.viewBrokerings,(function(){t.router.navigate(["/users",t.param,"brokerings"])}))),S.viewBrokers&&this.managementActions.push(new l.c("assignment_ind",this.i18n.user.profile.viewBrokers,(function(){t.router.navigate(["/users",t.param,"brokers"])}))),A.viewOperators&&this.managementActions.push(new l.c("supervisor_account",this.i18n.user.profile.viewOperators,(function(){t.router.navigate(["/users",t.param,"operators"])})));var L=R?this.managementActions:[];h.add&&L.push(new l.c("add_circle_outline",this.i18n.user.profile.addContact,(function(){t.addContact()}))),h.remove&&L.push(new l.c("remove_circle_outline",this.i18n.user.profile.removeContact,(function(){t.removeContact()}))),b.userToUser&&L.push(new l.c("payment",this.i18n.user.profile.pay,(function(){t.router.navigate(["/banking",f.a.SELF,"payment",t.param])}))),v.view&&L.push(new l.c("shopping_basket",this.i18n.user.profile.viewAds,(function(){t.router.navigate(["/marketplace",t.param,i.c.SIMPLE,"list"])}))),y.view&&L.push(new l.c("shopping_basket",this.i18n.user.profile.viewWebshop,(function(){t.router.navigate(["/marketplace",t.param,i.c.WEBSHOP,"list"])}))),y.viewPurchases&&this.managementActions.push(new l.c("shop_two",this.i18n.user.profile.purchases,(function(){t.router.navigate(["/marketplace",t.param,"purchases"])}))),y.viewSales&&this.managementActions.push(new l.c("local_offer",this.i18n.user.profile.sales,(function(){t.router.navigate(["/marketplace",t.param,"sales"])}))),d.viewInterests&&this.managementActions.push(new l.c("star",this.i18n.user.profile.adInterests,(function(){t.router.navigate(["/marketplace",t.param,"ad-interests"])}))),y.viewSettings&&(this.managementActions.push(new l.c("local_shipping",this.i18n.user.profile.deliveryMethods,(function(){t.router.navigate(["/marketplace",t.param,"delivery-methods"])}))),this.managementActions.push(new l.c("store",this.i18n.user.profile.webshopSettings,(function(){t.router.navigate(["/marketplace",t.param,"webshop-settings","view"])}))));var H,N=_createForOfIteratorHelper(F);try{var $=function(){var e=H.value;t.managementActions.push(new l.c("vpn_key",e.type.pluralName,(function(){t.router.navigate(["/users",t.param,"tokens",e.type.id])})))};for(N.s();!(H=N.n()).done;)$()}catch(j){N.e(j)}finally{N.f()}k.view&&this.managementActions.push(new l.c("notifications_off",this.i18n.user.profile.notificationSettings,(function(){t.router.navigate(["/users",t.param,"notification-settings"])}))),_.view&&this.managementActions.push(new l.c("library_books",this.i18n.document.title.list,(function(){t.router.navigate(["/users",t.param,"documents","search"])})));var M,U=_createForOfIteratorHelper(a.records||[]);try{var x=function(){var e=M.value,n=e.type,r=n.userProfileSection===i.Cb.BANKING?t.bankingActions:t.managementActions,a=t.recordsHelper.icon(n);r.push(new l.c(a,t.i18n.record.action({type:n.pluralName,count:e.count}),(function(){t.router.navigateByUrl(t.recordsHelper.resolvePath(e,t.param))})))};for(U.s();!(M=U.n()).done;)x()}catch(j){U.e(j)}finally{U.f()}var D,V=_createForOfIteratorHelper(a.operations||[]);try{for(V.s();!(D=V.n()).done;){var B=D.value;(B.userProfileSection===i.Cb.BANKING?this.bankingActions:this.managementActions).push(this.operationsHelper.headingAction(B,e.id))}}catch(j){V.e(j)}finally{V.f()}!Object(p.h)(L)&&L.length<6?this.headingActions=L:Object(p.h)(this.bankingActions)&&Object(p.h)(this.managementActions)||this.updateHeadingActions()}}},{key:"updateHeadingActions",value:function(){var e=this,t=!this.showActions$.value,n=new l.c(t?"play_circle_outline":"clear",t?this.i18n.user.profile.showActions:this.i18n.user.profile.hideActions,(function(){e.showActions$.next(t),e.updateHeadingActions()}),!0);this.headingActions=[n]}},{key:"addContact",value:function(){var e=this;this.addSub(this.contactsService.createContact({user:f.a.SELF,body:{contact:this.user.id}}).subscribe((function(){e.notification.snackBar(e.i18n.user.profile.addContactDone(e.shortName)),e.reload()})))}},{key:"removeContact",value:function(){var e=this;this.addSub(this.contactsService.deleteContact({id:this.user.contact.id}).subscribe((function(){e.notification.snackBar(e.i18n.user.profile.removeContactDone(e.shortName)),e.reload()})))}},{key:"resolveMenu",value:function(e){switch(e.relationship){case i.Eb.OWNER:case i.Eb.SAME_OWNER:return b.b.MY_OPERATORS;case i.Eb.BROKER:return b.b.MY_BROKERED_USERS;default:return this.login.user?b.b.SEARCH_USERS:b.b.PUBLIC_DIRECTORY}}},{key:"user",get:function(){return this.data}},{key:"myProfile",get:function(){return!!this.user&&(this.login.user||{}).id===this.user.id}},{key:"title",get:function(){return this.myProfile?this.i18n.user.title.myProfile:this.shortName}},{key:"mobileTitle",get:function(){return this.myProfile?this.i18n.user.mobileTitle.myProfile:this.i18n.user.mobileTitle.userProfile}},{key:"showActivationDate",get:function(){return this.user.activationDate&&this.format.formatAsDate(this.user.activationDate)!==this.format.formatAsDate(this.user.registrationDate)}},{key:"showOperatorOwner",get:function(){return this.user.role===i.eb.OPERATOR&&![i.Eb.OWNER,i.Eb.SAME_OWNER].includes(this.user.relationship)}}]),n}(h.a);return e.\u0275fac=function(t){return new(t||e)(g.Nb(g.r),g.Nb(r.K),g.Nb(r.i),g.Nb(o.a),g.Nb(c.a),g.Nb(s.a),g.Nb(u.a))},e.\u0275cmp=g.Hb({type:e,selectors:[["view-profile"]],features:[g.wb],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["actionTpl",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["icon","user",3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[3,"fieldValue",4,"ngFor","ngForOf"],[3,"addresses"],[1,"row","no-gutters"],["class","col-12 col-sm-6",4,"ngIf"],[1,"col-12","col-sm-6"],[1,"border-0"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"image","additionalImages"],["icon","user",3,"image","additionalImages"],[3,"label"],[3,"user"],[3,"label","value"],[1,"link-with-icon",3,"href"],["icon","email"],["icon","smartphone"],["icon","phone"],[3,"fieldValue"],[1,"mt-3"],["class","text-center col-12 col-sm-6 col-md-4 col-lg-3 pb-3",4,"ngFor","ngForOf"],[1,"text-center","col-12","col-sm-6","col-md-4","col-lg-3","pb-3"],["size","140","useLightbox","",1,"mb-2",3,"image"],[1,"font-weight-bold"],["class","d-block",3,"href",4,"ngIf"],[1,"d-block",3,"href"],["class","text-accent",4,"ngIf"],[1,"text-accent"],[1,"inline-label"],[1,"profile-action"],[3,"action"]],template:function(e,t){1&e&&(g.Tb(0,"page-layout",0),g.ec(1,"async"),g.Fc(2,ae,27,30,"page-content",1),g.Sb(),g.Fc(3,se,2,1,"ng-template",null,2,g.Gc)),2&e&&(g.kc("ready",g.fc(1,2,t.data$)),g.zb(2),g.kc("ngIf",t.data))},directives:[d.a,v.t,y.a,v.s,k.a,v.A,w.a,T.a,O.a,A.a,S.a,I.a,_.a,F.a],pipes:[v.b,P.a],styles:[".profile-action[_ngcontent-%COMP%]{margin-left:-.75rem;overflow:hidden}"],changeDetection:0}),e}()},tVPo:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("s7LF"),r=n("mwYl"),a=n("tAww"),s=n("rCAV"),o=n("x6mR"),c=n("Ky6R"),u=n("75v4"),l=n("LvDl"),f=n("2Vo4"),h=n("Kj3r"),p=n("8Y7J"),b=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;_classCallCheck(this,n),(a=t.call(this,e)).ResultType=u.a,a.resultType$=new f.a(null),a.resultTypeControl=new i.j(null),a.results$=new f.a(null),a.allowedResultTypes$=new f.a([u.a.LIST]),a.rendering$=new f.a(!1),a.moreFilters$=new f.a(!1),a.ignoreNextUpdate=!1,a.nextRequestState=e.get(r.a);var s={page:0};s.resultType=a.getInitialResultType();var o,c=_createForOfIteratorHelper(a.getFormControlNames()||[]);try{for(c.s();!(o=c.n()).done;){s[o.value]=null}}catch(l){c.e(l)}finally{c.f()}return a.form=a.formBuilder.group(s),a}return _createClass(n,[{key:"getInitialFormValue",value:function(e){return e.query||{}}},{key:"onDataInitialized",value:function(e){var t=this;this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe((function(e){var n=t.previousResultType;t.previousResultType=e,t.resultType$.next(e),t.shouldUpdateOnResultTypeChange(e,n)&&t.update(),null!=n&&n===e||(t.rendering=!0,t.stateManager.set("resultType",e),t.onResultTypeChanged(e,n))}))),setTimeout((function(){t.addSub(t.form.valueChanges.pipe(Object(h.a)(s.a.DEBOUNCE_TIME)).subscribe((function(e){t.shouldUpdateOnChange(e)&&t.update(),t.previousValue=e})),!0),t.previousResultType!==u.a.CATEGORIES&&t.update()}),1)}},{key:"shouldUpdateOnResultTypeChange",value:function(e,t){return e!==u.a.CATEGORIES&&([u.a.LIST,u.a.TILES].includes(t)!==[u.a.LIST,u.a.TILES].includes(e)||t===u.a.MAP!=(e===u.a.MAP))}},{key:"shouldUpdateOnChange",value:function(e){return!Object(l.isEqual)(this.previousValue,e)}},{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.resultType=this.getInitialResultType()}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showMoreFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.showLessFilters}},{key:"showMoreFiltersIcon",value:function(){return"filter_list"}},{key:"showLessFiltersIcon",value:function(){return"filter_list"}},{key:"onResultTypeChanged",value:function(e,t){}},{key:"getInitialResultType",value:function(){return u.a.LIST}},{key:"update",value:function(e){var t=this;if(!this.ignoreNextUpdate){e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;var n=this.form.value;n.pageSize=this.layout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(n)).subscribe((function(e){t.resultType===u.a.CATEGORIES&&(t.resultType=t.allowedResultTypes.find((function(e){return e!==u.a.CATEGORIES}))),t.results=c.a.from(e)})))}}},{key:"resetPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.patchValue({page:0},{emitEvent:e})}},{key:"doIgnoringUpdate",value:function(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}},{key:"results",get:function(){return this.results$.value},set:function(e){this.results$.next(e)}},{key:"rendering",get:function(){return this.rendering$.value},set:function(e){this.rendering$.next(e)}},{key:"allowedResultTypes",get:function(){return this.allowedResultTypes$.value},set:function(e){this.allowedResultTypes$.next(e)}},{key:"moreFilters",get:function(){return this.moreFilters$.value},set:function(e){this.moreFilters$.next(e)}},{key:"pageData",get:function(){var e=this.form.value;return{page:e.page,pageSize:e.pageSize}},set:function(e){this.form.patchValue(e)}},{key:"resultType",get:function(){return this.resultTypeControl.value},set:function(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}},{key:"moreFiltersAction",get:function(){var e=this;return this._moreFiltersAction||(this._moreFiltersAction=new a.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),(function(){e.moreFilters=!e.moreFilters,e._moreFiltersAction.icon=e.moreFilters?e.showLessFiltersIcon():e.showMoreFiltersIcon(),e._moreFiltersAction.label=e.moreFilters?e.showLessFiltersLabel():e.showMoreFiltersLabel()}),!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}}]),n}(o.a);return e.\u0275fac=function(t){return new(t||e)(p.Nb(p.r))},e.\u0275dir=p.Ib({type:e,features:[p.wb]}),e}()}}]);