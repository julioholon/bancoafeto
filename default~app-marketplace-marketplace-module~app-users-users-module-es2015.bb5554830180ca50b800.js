(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{TV7p:function(e,t,i){"use strict";i.d(t,"a",(function(){return oe})),i.d(t,"b",(function(){return le}));var s=i("XDzf"),n=i("Do6i"),a=i("a/z7"),r=i("h3hP"),o=i("aLb1"),l=i("WI1B"),c=i("MfEj"),u=i("tAww"),h=i("rCAV"),b=i("MhyI"),p=i("ObUu"),m=i("PvCH"),g=i("2Vo4"),d=i("8Y7J"),f=i("8UBS"),v=i("SVse"),w=i("HQV3"),y=i("sARG"),k=i("IAdc"),T=i("JFlR"),A=i("7HWn"),S=i("H4pW"),I=i("nznZ"),F=i("sifq"),O=i("5Wk5"),z=i("Aeop"),E=i("yL40");function R(e,t){1&e&&d.Pb(0)}const P=function(e){return{$implicit:e}};function _(e,t){if(1&e&&(d.Rb(0),d.Fc(1,R,1,0,"ng-container",19),d.Qb()),2&e){const e=t.$implicit;d.dc(4);const i=d.uc(4);d.zb(1),d.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.nc(2,P,e))}}function L(e,t){if(1&e&&(d.Tb(0,"div",16),d.Tb(1,"h2",17),d.Hc(2),d.Sb(),d.Fc(3,_,2,4,"ng-container",18),d.Sb()),2&e){const e=d.dc(3);d.zb(2),d.Ic(e.i18n.user.profile.banking),d.zb(1),d.kc("ngForOf",e.bankingActions)}}function C(e,t){1&e&&d.Pb(0)}function N(e,t){if(1&e&&(d.Rb(0),d.Fc(1,C,1,0,"ng-container",19),d.Qb()),2&e){const e=t.$implicit;d.dc(4);const i=d.uc(4);d.zb(1),d.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.nc(2,P,e))}}function H(e,t){if(1&e&&(d.Tb(0,"div",16),d.Tb(1,"h2",17),d.Hc(2),d.Sb(),d.Fc(3,N,2,4,"ng-container",18),d.Sb()),2&e){const e=d.dc(3);d.zb(2),d.Ic(e.i18n.user.profile.management),d.zb(1),d.kc("ngForOf",e.managementActions)}}function $(e,t){if(1&e&&(d.Rb(0),d.Tb(1,"div",14),d.Fc(2,L,4,2,"div",15),d.Fc(3,H,4,2,"div",15),d.Sb(),d.Ob(4,"hr"),d.Qb()),2&e){const e=d.dc(2);d.zb(2),d.kc("ngIf",e.bankingActions.length>0),d.zb(1),d.kc("ngIf",e.managementActions.length>0)}}function M(e,t){if(1&e&&d.Ob(0,"profile-images",20),2&e){const e=d.dc(2);d.kc("image",e.user.image)("additionalImages",e.user.additionalImages)}}function U(e,t){if(1&e&&d.Ob(0,"profile-images",21),2&e){const e=d.dc(2);d.kc("image",e.user.image)("additionalImages",e.user.additionalImages)}}function x(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Ob(1,"user-link",23),d.Sb()),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.operatorOwner),d.zb(1),d.kc("user",e.user.user)}}function D(e,t){if(1&e&&d.Ob(0,"label-value",24),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.groupSet)("value",e.user.groupSet.name)}}function V(e,t){if(1&e&&d.Ob(0,"label-value",24),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.group)("value",e.user.group.name)}}function B(e,t){if(1&e&&d.Ob(0,"label-value",24),2&e){const e=d.dc(2);d.kc("label",e.i18n.general.status)("value",e.userHelper.userStatus(e.user.status))}}function W(e,t){if(1&e&&d.Ob(0,"label-value",24),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.name)("value",e.user.name)}}function j(e,t){if(1&e&&d.Ob(0,"label-value",24),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.username)("value",e.user.username)}}function G(e,t){if(1&e&&(d.Ob(0,"label-value",24),d.ec(1,"date")),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.registrationDate)("value",d.fc(1,2,e.user.registrationDate))}}function J(e,t){if(1&e&&(d.Ob(0,"label-value",24),d.ec(1,"date")),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.activationDate)("value",d.fc(1,2,e.user.activationDate))}}function K(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Tb(1,"a",25),d.Ob(2,"icon",26),d.Tb(3,"span"),d.Hc(4),d.Sb(),d.Sb(),d.Sb()),2&e){const e=d.dc(2);d.kc("label",e.i18n.user.email),d.zb(1),d.kc("href","mailto:"+e.user.email,d.yc),d.zb(3),d.Ic(e.user.email)}}function Y(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Tb(1,"a",25),d.Ob(2,"icon",27),d.Tb(3,"span"),d.Hc(4),d.Sb(),d.Sb(),d.Sb()),2&e){const e=d.dc(2);d.kc("label",e.i18n.phone.mobile),d.zb(1),d.kc("href","tel:"+e.mobilePhone.normalizedNumber,d.yc),d.zb(3),d.Ic(e.mobilePhone.number)}}function q(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Tb(1,"a",25),d.Ob(2,"icon",27),d.Tb(3,"span"),d.Hc(4),d.Sb(),d.Sb(),d.Sb()),2&e){const e=t.$implicit;d.kc("label",e.name),d.zb(1),d.kc("href","tel:"+e.normalizedNumber,d.yc),d.zb(3),d.Ic(e.number)}}function Q(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Tb(1,"a",25),d.Ob(2,"icon",28),d.Tb(3,"span"),d.Hc(4),d.Sb(),d.Sb(),d.Sb()),2&e){const e=d.dc(2);d.kc("label",e.i18n.phone.landLine),d.zb(1),d.kc("href","tel:"+e.landLinePhone.normalizedNumber,d.yc),d.zb(3),d.Ic(e.landLinePhone.number)}}function X(e,t){if(1&e&&(d.Tb(0,"label-value",22),d.Tb(1,"a",25),d.Ob(2,"icon",28),d.Tb(3,"span"),d.Hc(4),d.Sb(),d.Sb(),d.Sb()),2&e){const e=t.$implicit;d.kc("label",e.name),d.zb(1),d.kc("href","tel:"+e.normalizedNumber,d.yc),d.zb(3),d.Ic(e.number)}}function Z(e,t){1&e&&d.Ob(0,"custom-field-value",29),2&e&&d.kc("fieldValue",t.$implicit)}function ee(e,t){if(1&e&&(d.Tb(0,"a",36),d.Hc(1),d.Sb()),2&e){const e=d.dc().$implicit;d.kc("href","mailto:"+e.email,d.yc),d.zb(1),d.Jc(" ",e.email," ")}}function te(e,t){if(1&e&&(d.Tb(0,"div"),d.Ob(1,"format-field-value",29),d.Sb()),2&e){const e=t.$implicit;d.zb(1),d.kc("fieldValue",e)}}function ie(e,t){if(1&e&&(d.Tb(0,"div",38),d.Tb(1,"span",39),d.Hc(2),d.Sb(),d.Hc(3),d.Sb()),2&e){const e=d.dc().$implicit,t=d.dc(3);d.zb(2),d.Ic(t.i18n.user.contactInfoAtAddress),d.zb(1),d.Jc(" ",e.address.name," ")}}function se(e,t){if(1&e&&(d.Tb(0,"div",32),d.Ob(1,"avatar",33),d.Tb(2,"div",34),d.Hc(3),d.Sb(),d.Fc(4,ee,2,2,"a",35),d.Tb(5,"a",36),d.Hc(6),d.Sb(),d.Tb(7,"a",36),d.Hc(8),d.Sb(),d.Fc(9,te,2,1,"div",18),d.Fc(10,ie,4,2,"div",37),d.Sb()),2&e){const e=t.$implicit;d.zb(1),d.kc("image",e.image),d.zb(2),d.Ic(e.name),d.zb(1),d.kc("ngIf",e.email),d.zb(1),d.kc("href","tel:"+e.normalizedMobilePhone,d.yc),d.zb(1),d.Jc(" ",e.mobilePhone," "),d.zb(1),d.kc("href","tel:"+e.normalizedLandLinePhone,d.yc),d.zb(1),d.Jc(" ",e.landLinePhone," "),d.zb(1),d.kc("ngForOf",e.customValues),d.zb(1),d.kc("ngIf",e.address)}}function ne(e,t){if(1&e&&(d.Rb(0),d.Tb(1,"h2",30),d.Hc(2),d.Sb(),d.Tb(3,"div",14),d.Fc(4,se,11,9,"div",31),d.Sb(),d.Qb()),2&e){const e=d.dc(2);d.zb(2),d.Ic(e.i18n.user.contactInfo),d.zb(2),d.kc("ngForOf",e.user.contactInfos)}}function ae(e,t){if(1&e&&(d.Tb(0,"page-content",3),d.ec(1,"async"),d.Fc(2,$,5,2,"ng-container",4),d.ec(3,"async"),d.Fc(4,M,1,2,"profile-images",5),d.ec(5,"async"),d.Tb(6,"div",6),d.Fc(7,U,1,2,"profile-images",7),d.ec(8,"async"),d.Tb(9,"div",8),d.Fc(10,x,2,2,"label-value",9),d.Fc(11,D,1,2,"label-value",10),d.Fc(12,V,1,2,"label-value",10),d.Fc(13,B,1,2,"label-value",10),d.Fc(14,W,1,2,"label-value",10),d.Fc(15,j,1,2,"label-value",10),d.Fc(16,G,2,4,"label-value",10),d.Fc(17,J,2,4,"label-value",10),d.Fc(18,K,5,3,"label-value",9),d.Fc(19,Y,5,3,"label-value",9),d.Fc(20,q,5,3,"label-value",11),d.Fc(21,Q,5,3,"label-value",9),d.Fc(22,X,5,3,"label-value",11),d.Fc(23,Z,1,1,"custom-field-value",12),d.Sb(),d.Sb(),d.Tb(24,"div",8),d.Ob(25,"profile-addresses",13),d.Fc(26,ne,5,2,"ng-container",4),d.Sb(),d.Sb()),2&e){const e=d.dc();d.kc("heading",e.title)("mobileHeading",e.mobileTitle)("headingActions",d.fc(1,22,e.headingActions$)),d.zb(2),d.kc("ngIf",d.fc(3,24,e.showActions$)),d.zb(2),d.kc("ngIf",e.imageEnabled&&e.user.image&&d.fc(5,26,e.layout.ltsm$)),d.zb(3),d.kc("ngIf",e.imageEnabled&&d.fc(8,28,e.layout.gtxs$)),d.zb(3),d.kc("ngIf",e.showOperatorOwner),d.zb(1),d.kc("ngIf",e.user.groupSet),d.zb(1),d.kc("ngIf",e.user.group),d.zb(1),d.kc("ngIf",e.user.status),d.zb(1),d.kc("ngIf",e.user.name),d.zb(1),d.kc("ngIf",e.user.username),d.zb(1),d.kc("ngIf",e.user.registrationDate),d.zb(1),d.kc("ngIf",e.showActivationDate),d.zb(1),d.kc("ngIf",e.user.email),d.zb(1),d.kc("ngIf",e.mobilePhone),d.zb(1),d.kc("ngForOf",e.mobilePhones),d.zb(1),d.kc("ngIf",e.landLinePhone),d.zb(1),d.kc("ngForOf",e.landLinePhones),d.zb(1),d.kc("ngForOf",e.user.customValues),d.zb(2),d.kc("addresses",e.user.addresses),d.zb(1),d.kc("ngIf",(null==e.user.contactInfos?null:e.user.contactInfos.length)>0)}}function re(e,t){if(1&e&&(d.Tb(0,"div",40),d.Ob(1,"heading-action-button",41),d.Sb()),2&e){const e=t.$implicit;d.zb(1),d.kc("action",e)}}const oe=25;let le=(()=>{class e extends b.a{constructor(e,t,i,s,n,a,r){super(e),this.usersService=t,this.contactsService=i,this.operationsHelper=s,this.recordsHelper=n,this.maps=a,this.userHelper=r,this.showActions$=new g.a(!1),this.bankingActions=[],this.managementActions=[]}get user(){return this.data}ngOnInit(){super.ngOnInit(),this.stateManager.manageValue(this.showActions$,"showActions"),this.param=this.route.snapshot.params.user||h.a.SELF,this.errorHandler.requestWithCustomErrorHandler(e=>{this.addSub(this.usersService.viewUser({user:this.param}).subscribe(e=>{this.data=e},t=>{[a.a.FORBIDDEN,a.a.UNAUTHORIZED].includes(t.status)?(this.notification.error(this.i18n.user.profile.noPermission),this.breadcrumb.back(),this.data={}):e(t)}))})}onDataInitialized(e){this.shortName=Object(p.G)(e.name||e.display,oe);const t=e.enabledProfileFields;this.imageEnabled=null==t||t.includes(s.j.IMAGE),this.mobilePhones=e.phones.filter(e=>e.type===s.X.MOBILE),this.landLinePhones=e.phones.filter(e=>e.type===s.X.LAND_LINE),1===this.mobilePhones.length&&(this.mobilePhone=this.mobilePhones[0],this.mobilePhones=[]),1===this.landLinePhones.length&&(this.landLinePhone=this.landLinePhones[0],this.landLinePhones=[]);const i=e.role===s.eb.OPERATOR,n=e.permissions||{},a=n.profile||{},r=n.passwords||{},o=n.identityProviders||{},l=(n.accounts||[]).map(e=>e.type),c=n.contact||{},b=n.payment||{},m=n.scheduledPayments||{},g=n.authorizedPayments||{},d=n.marketplace||{},f=d.simple||{},v=d.webshop||{},w=n.notificationSettings||{},y=n.status||{},k=n.group||{},T=n.agreements||{},A=n.operators||{},S=n.brokering||{},I=n.vouchers||{},F=n.documents||{},O=n.tokens||[];if(e.relationship===s.Eb.SELF){if(a.editProfile){const e=new u.c("edit",this.i18n.general.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")},!0);this.headingActions=[e]}}else{const t=[s.Eb.ADMINISTRATOR,s.Eb.BROKER,s.Eb.OWNER,s.Eb.SAME_OWNER].includes(e.relationship);for(const e of l)this.bankingActions.push(new u.c("account_balance",this.i18n.user.profile.viewAccount(e.name),()=>{this.router.navigate(["/banking",this.param,"account",h.a.internalNameOrId(e)])}));b.systemToUser&&this.bankingActions.push(new u.c("payment",this.i18n.user.profile.paySystemToUser,()=>{this.router.navigate(["/banking",h.a.SYSTEM,"payment",this.param])})),b.asUserToUser&&this.bankingActions.push(new u.c("payment",this.i18n.user.profile.payAsUserToUser,()=>{this.router.navigate(["/banking",this.param,"payment"])})),b.asUserToSelf&&this.bankingActions.push(new u.c("payment",this.i18n.user.profile.payAsUserToSelf,()=>{this.router.navigate(["/banking",this.param,"payment",h.a.SELF])})),b.asUserToSystem&&this.bankingActions.push(new u.c("payment",this.i18n.user.profile.payAsUserToSystem,()=>{this.router.navigate(["/banking",this.param,"payment",h.a.SYSTEM])})),m.view&&this.bankingActions.push(new u.c("schedule",this.i18n.user.profile.viewScheduledPayments,()=>{this.router.navigate(["/banking",this.param,"installments"])})),g.view&&this.bankingActions.push(new u.c("assignment_turned_in",this.i18n.user.profile.viewAuthorizedPayments,()=>{this.router.navigate(["/banking",this.param,"authorized-payments"])})),I.viewBought&&this.bankingActions.push(new u.c("local_play",this.i18n.user.profile.viewBoughtVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","bought"])})),I.buy&&this.bankingActions.push(new u.c("confirmation_number",this.i18n.user.profile.buyVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","buy"])})),I.viewRedeemed&&this.bankingActions.push(new u.c("search",this.i18n.user.profile.viewRedeemedVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeemed"])})),I.redeem&&this.bankingActions.push(new u.c("payment",this.i18n.user.profile.redeemVoucher,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeem"])})),a.editProfile&&this.managementActions.push(new u.c("edit",this.i18n.user.profile.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")})),r.manage&&this.managementActions.push(new u.c("vpn_key",this.i18n.user.profile.managePasswords,()=>{this.router.navigate(["/users",this.param,"passwords"])})),o.view&&this.managementActions.push(new u.c("perm_identity",this.i18n.user.profile.viewIdentityProviders,()=>{this.router.navigate(["/users",this.param,"identity-providers"])})),y.view&&this.managementActions.push(new u.c("how_to_reg",i?this.i18n.user.profile.statusOperator:this.i18n.user.profile.statusUser,()=>{this.router.navigate(["/users",this.param,"status"])})),k.view&&this.managementActions.push(new u.c("supervised_user_circle",i?this.i18n.user.profile.groupOperator:this.i18n.user.profile.groupUser,()=>{this.router.navigate(["/users",this.param,"group"])})),T.view&&this.managementActions.push(new u.c("ballot",this.i18n.user.profile.agreements,()=>{this.router.navigate(["/users",this.param,"agreements"])})),S.viewMembers&&this.managementActions.push(new u.c("assignment_ind",this.i18n.user.profile.viewBrokerings,()=>{this.router.navigate(["/users",this.param,"brokerings"])})),S.viewBrokers&&this.managementActions.push(new u.c("assignment_ind",this.i18n.user.profile.viewBrokers,()=>{this.router.navigate(["/users",this.param,"brokers"])})),A.viewOperators&&this.managementActions.push(new u.c("supervisor_account",this.i18n.user.profile.viewOperators,()=>{this.router.navigate(["/users",this.param,"operators"])}));const z=t?this.managementActions:[];c.add&&z.push(new u.c("add_circle_outline",this.i18n.user.profile.addContact,()=>{this.addContact()})),c.remove&&z.push(new u.c("remove_circle_outline",this.i18n.user.profile.removeContact,()=>{this.removeContact()})),b.userToUser&&z.push(new u.c("payment",this.i18n.user.profile.pay,()=>{this.router.navigate(["/banking",h.a.SELF,"payment",this.param])})),f.view&&z.push(new u.c("shopping_basket",this.i18n.user.profile.viewAds,()=>{this.router.navigate(["/marketplace",this.param,s.c.SIMPLE,"list"])})),v.view&&z.push(new u.c("shopping_basket",this.i18n.user.profile.viewWebshop,()=>{this.router.navigate(["/marketplace",this.param,s.c.WEBSHOP,"list"])})),v.viewPurchases&&this.managementActions.push(new u.c("shop_two",this.i18n.user.profile.purchases,()=>{this.router.navigate(["/marketplace",this.param,"purchases"])})),v.viewSales&&this.managementActions.push(new u.c("local_offer",this.i18n.user.profile.sales,()=>{this.router.navigate(["/marketplace",this.param,"sales"])})),d.viewInterests&&this.managementActions.push(new u.c("star",this.i18n.user.profile.adInterests,()=>{this.router.navigate(["/marketplace",this.param,"ad-interests"])})),v.viewSettings&&(this.managementActions.push(new u.c("local_shipping",this.i18n.user.profile.deliveryMethods,()=>{this.router.navigate(["/marketplace",this.param,"delivery-methods"])})),this.managementActions.push(new u.c("store",this.i18n.user.profile.webshopSettings,()=>{this.router.navigate(["/marketplace",this.param,"webshop-settings","view"])})));for(const e of O)this.managementActions.push(new u.c("vpn_key",e.type.pluralName,()=>{this.router.navigate(["/users",this.param,"tokens",e.type.id])}));w.view&&this.managementActions.push(new u.c("notifications_off",this.i18n.user.profile.notificationSettings,()=>{this.router.navigate(["/users",this.param,"notification-settings"])})),F.view&&this.managementActions.push(new u.c("library_books",this.i18n.document.title.list,()=>{this.router.navigate(["/users",this.param,"documents","search"])}));for(const e of n.records||[]){const t=e.type,i=t.userProfileSection===s.Cb.BANKING?this.bankingActions:this.managementActions,n=this.recordsHelper.icon(t);i.push(new u.c(n,this.i18n.record.action({type:t.pluralName,count:e.count}),()=>{this.router.navigateByUrl(this.recordsHelper.resolvePath(e,this.param))}))}for(const i of n.operations||[])(i.userProfileSection===s.Cb.BANKING?this.bankingActions:this.managementActions).push(this.operationsHelper.headingAction(i,e.id));!Object(p.h)(z)&&z.length<6?this.headingActions=z:Object(p.h)(this.bankingActions)&&Object(p.h)(this.managementActions)||this.updateHeadingActions()}}updateHeadingActions(){const e=!this.showActions$.value,t=new u.c(e?"play_circle_outline":"clear",e?this.i18n.user.profile.showActions:this.i18n.user.profile.hideActions,()=>{this.showActions$.next(e),this.updateHeadingActions()},!0);this.headingActions=[t]}addContact(){this.addSub(this.contactsService.createContact({user:h.a.SELF,body:{contact:this.user.id}}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.addContactDone(this.shortName)),this.reload()}))}removeContact(){this.addSub(this.contactsService.deleteContact({id:this.user.contact.id}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.removeContactDone(this.shortName)),this.reload()}))}get myProfile(){return!!this.user&&(this.login.user||{}).id===this.user.id}get title(){return this.myProfile?this.i18n.user.title.myProfile:this.shortName}get mobileTitle(){return this.myProfile?this.i18n.user.mobileTitle.myProfile:this.i18n.user.mobileTitle.userProfile}get showActivationDate(){return this.user.activationDate&&this.format.formatAsDate(this.user.activationDate)!==this.format.formatAsDate(this.user.registrationDate)}get showOperatorOwner(){return this.user.role===s.eb.OPERATOR&&![s.Eb.OWNER,s.Eb.SAME_OWNER].includes(this.user.relationship)}resolveMenu(e){switch(e.relationship){case s.Eb.OWNER:case s.Eb.SAME_OWNER:return m.b.MY_OPERATORS;case s.Eb.BROKER:return m.b.MY_BROKERED_USERS;default:return this.login.user?m.b.SEARCH_USERS:m.b.PUBLIC_DIRECTORY}}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(d.r),d.Nb(n.K),d.Nb(n.i),d.Nb(o.a),d.Nb(l.a),d.Nb(r.a),d.Nb(c.a))},e.\u0275cmp=d.Hb({type:e,selectors:[["view-profile"]],features:[d.wb],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["actionTpl",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["icon","user",3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[3,"fieldValue",4,"ngFor","ngForOf"],[3,"addresses"],[1,"row","no-gutters"],["class","col-12 col-sm-6",4,"ngIf"],[1,"col-12","col-sm-6"],[1,"border-0"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"image","additionalImages"],["icon","user",3,"image","additionalImages"],[3,"label"],[3,"user"],[3,"label","value"],[1,"link-with-icon",3,"href"],["icon","email"],["icon","smartphone"],["icon","phone"],[3,"fieldValue"],[1,"mt-3"],["class","text-center col-12 col-sm-6 col-md-4 col-lg-3 pb-3",4,"ngFor","ngForOf"],[1,"text-center","col-12","col-sm-6","col-md-4","col-lg-3","pb-3"],["size","140","useLightbox","",1,"mb-2",3,"image"],[1,"font-weight-bold"],["class","d-block",3,"href",4,"ngIf"],[1,"d-block",3,"href"],["class","text-accent",4,"ngIf"],[1,"text-accent"],[1,"inline-label"],[1,"profile-action"],[3,"action"]],template:function(e,t){1&e&&(d.Tb(0,"page-layout",0),d.ec(1,"async"),d.Fc(2,ae,27,30,"page-content",1),d.Sb(),d.Fc(3,re,2,1,"ng-template",null,2,d.Gc)),2&e&&(d.kc("ready",d.fc(1,2,t.data$)),d.zb(2),d.kc("ngIf",t.data))},directives:[f.a,v.t,w.a,v.s,y.a,v.A,k.a,T.a,A.a,S.a,I.a,F.a,O.a,z.a],pipes:[v.b,E.a],styles:[".profile-action[_ngcontent-%COMP%]{margin-left:-.75rem;overflow:hidden}"],changeDetection:0}),e})()},tVPo:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("s7LF"),n=i("mwYl"),a=i("tAww"),r=i("rCAV"),o=i("x6mR"),l=i("Ky6R"),c=i("75v4"),u=i("LvDl"),h=i("2Vo4"),b=i("Kj3r"),p=i("8Y7J");let m=(()=>{class e extends o.a{constructor(e){super(e),this.ResultType=c.a,this.resultType$=new h.a(null),this.resultTypeControl=new s.j(null),this.results$=new h.a(null),this.allowedResultTypes$=new h.a([c.a.LIST]),this.rendering$=new h.a(!1),this.moreFilters$=new h.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=e.get(n.a);const t={page:0};t.resultType=this.getInitialResultType();for(const i of this.getFormControlNames()||[])t[i]=null;this.form=this.formBuilder.group(t)}getInitialFormValue(e){return e.query||{}}onDataInitialized(e){this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(e=>{const t=this.previousResultType;this.previousResultType=e,this.resultType$.next(e),this.shouldUpdateOnResultTypeChange(e,t)&&this.update(),null!=t&&t===e||(this.rendering=!0,this.stateManager.set("resultType",e),this.onResultTypeChanged(e,t))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(b.a)(r.a.DEBOUNCE_TIME)).subscribe(e=>{this.shouldUpdateOnChange(e)&&this.update(),this.previousValue=e}),!0),this.previousResultType!==c.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(e,t){return e!==c.a.CATEGORIES&&([c.a.LIST,c.a.TILES].includes(t)!==[c.a.LIST,c.a.TILES].includes(e)||t===c.a.MAP!=(e===c.a.MAP))}shouldUpdateOnChange(e){return!Object(u.isEqual)(this.previousValue,e)}get results(){return this.results$.value}set results(e){this.results$.next(e)}get rendering(){return this.rendering$.value}set rendering(e){this.rendering$.next(e)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(e){this.allowedResultTypes$.next(e)}get moreFilters(){return this.moreFilters$.value}set moreFilters(e){this.moreFilters$.next(e)}get pageData(){const e=this.form.value;return{page:e.page,pageSize:e.pageSize}}set pageData(e){this.form.patchValue(e)}get resultType(){return this.resultTypeControl.value}set resultType(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new a.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return"filter_list"}showLessFiltersIcon(){return"filter_list"}onResultTypeChanged(e,t){}getInitialResultType(){return c.a.LIST}update(e){if(this.ignoreNextUpdate)return;e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const t=this.form.value;t.pageSize=this.layout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(t)).subscribe(e=>{this.resultType===c.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(e=>e!==c.a.CATEGORIES)),this.results=l.a.from(e)}))}resetPage(e=!1){this.form.patchValue({page:0},{emitEvent:e})}doIgnoringUpdate(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}}return e.\u0275fac=function(t){return new(t||e)(p.Nb(p.r))},e.\u0275dir=p.Ib({type:e,features:[p.wb]}),e})()}}]);