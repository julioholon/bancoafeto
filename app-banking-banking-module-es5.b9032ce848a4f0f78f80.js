function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var c,o=e[Symbol.iterator]();!(a=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(l){i=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=_superPropBase(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{tVPo:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("s7LF"),i=n("mwYl"),r=n("tAww"),c=n("rCAV"),o=n("x6mR"),l=n("Ky6R"),s=n("75v4"),u=n("LvDl"),b=n("2Vo4"),f=n("Kj3r"),d=n("8Y7J"),m=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).ResultType=s.a,r.resultType$=new b.a(null),r.resultTypeControl=new a.j(null),r.results$=new b.a(null),r.allowedResultTypes$=new b.a([s.a.LIST]),r.rendering$=new b.a(!1),r.moreFilters$=new b.a(!1),r.ignoreNextUpdate=!1,r.nextRequestState=e.get(i.a);var c={page:0};c.resultType=r.getInitialResultType();var o,l=_createForOfIteratorHelper(r.getFormControlNames()||[]);try{for(l.s();!(o=l.n()).done;){c[o.value]=null}}catch(u){l.e(u)}finally{l.f()}return r.form=r.formBuilder.group(c),r}return _createClass(n,[{key:"getInitialFormValue",value:function(e){return e.query||{}}},{key:"onDataInitialized",value:function(e){var t=this;this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe((function(e){var n=t.previousResultType;t.previousResultType=e,t.resultType$.next(e),t.shouldUpdateOnResultTypeChange(e,n)&&t.update(),null!=n&&n===e||(t.rendering=!0,t.stateManager.set("resultType",e),t.onResultTypeChanged(e,n))}))),setTimeout((function(){t.addSub(t.form.valueChanges.pipe(Object(f.a)(c.a.DEBOUNCE_TIME)).subscribe((function(e){t.shouldUpdateOnChange(e)&&t.update(),t.previousValue=e})),!0),t.previousResultType!==s.a.CATEGORIES&&t.update()}),1)}},{key:"shouldUpdateOnResultTypeChange",value:function(e,t){return e!==s.a.CATEGORIES&&([s.a.LIST,s.a.TILES].includes(t)!==[s.a.LIST,s.a.TILES].includes(e)||t===s.a.MAP!=(e===s.a.MAP))}},{key:"shouldUpdateOnChange",value:function(e){return!Object(u.isEqual)(this.previousValue,e)}},{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.resultType=this.getInitialResultType()}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showMoreFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.showLessFilters}},{key:"showMoreFiltersIcon",value:function(){return"filter_list"}},{key:"showLessFiltersIcon",value:function(){return"filter_list"}},{key:"onResultTypeChanged",value:function(e,t){}},{key:"getInitialResultType",value:function(){return s.a.LIST}},{key:"update",value:function(e){var t=this;if(!this.ignoreNextUpdate){e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;var n=this.form.value;n.pageSize=this.layout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(n)).subscribe((function(e){t.resultType===s.a.CATEGORIES&&(t.resultType=t.allowedResultTypes.find((function(e){return e!==s.a.CATEGORIES}))),t.results=l.a.from(e)})))}}},{key:"resetPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.patchValue({page:0},{emitEvent:e})}},{key:"doIgnoringUpdate",value:function(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}},{key:"results",get:function(){return this.results$.value},set:function(e){this.results$.next(e)}},{key:"rendering",get:function(){return this.rendering$.value},set:function(e){this.rendering$.next(e)}},{key:"allowedResultTypes",get:function(){return this.allowedResultTypes$.value},set:function(e){this.allowedResultTypes$.next(e)}},{key:"moreFilters",get:function(){return this.moreFilters$.value},set:function(e){this.moreFilters$.next(e)}},{key:"pageData",get:function(){var e=this.form.value;return{page:e.page,pageSize:e.pageSize}},set:function(e){this.form.patchValue(e)}},{key:"resultType",get:function(){return this.resultTypeControl.value},set:function(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}},{key:"moreFiltersAction",get:function(){var e=this;return this._moreFiltersAction||(this._moreFiltersAction=new r.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),(function(){e.moreFilters=!e.moreFilters,e._moreFiltersAction.icon=e.moreFilters?e.showLessFiltersIcon():e.showMoreFiltersIcon(),e._moreFiltersAction.label=e.moreFilters?e.showLessFiltersLabel():e.showMoreFiltersLabel()}),!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}}]),n}(o.a);return e.\u0275fac=function(t){return new(t||e)(d.Nb(d.r))},e.\u0275dir=d.Ib({type:e,features:[d.wb]}),e}()},uWZ6:function(e,t,n){"use strict";n.r(t),n.d(t,"BankingModule",(function(){return as}));var a=n("XDzf"),i=n("Do6i"),r=n("i+BT"),c=n("rCAV"),o=n("tVPo"),l=n("ObUu"),s=n("PvCH"),u=n("2Vo4"),b=n("vkgz"),f=n("8Y7J"),d=n("8UBS"),m=n("SVse"),p=n("HQV3"),h=n("2KYv"),g=n("n1JJ"),v=n("DAJ4"),y=n("s7LF"),k=n("JFlR"),S=n("7HWn"),T=n("WYBn"),z=n("chz4"),w=n("6g1M"),I=n("iXUt"),F=n("JbOn"),O=n("DIHi"),C=n("Aw04"),P=n("qCwG"),H=n("I9hm");function x(e,t){1&e&&f.Ob(0,"hr",7)}function D(e,t){if(1&e&&(f.Tb(0,"div",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.Jc(" ",n.account.type.name," ")}}function N(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",9),f.Hc(2),f.Sb(),f.Tb(3,"div",10),f.Ob(4,"user-link",11),f.Sb(),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.Jc(" ",n.i18n.general.user," "),f.zb(2),f.kc("user",n.account.user)}}function A(e,t){1&e&&f.Ob(0,"hr")}function _(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.ec(2,"currency"),f.Qb()),2&e){var n=f.dc().$implicit,a=f.dc(2);f.zb(1),f.Jc(" ",f.gc(2,1,n.amount,a.currency)," ")}}var $=function(e,t,n){return{negative:e,positive:t,"status-value-last":n}};function E(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",12),f.Tb(2,"span",13),f.Hc(3),f.Sb(),f.Sb(),f.Tb(4,"div",14),f.Fc(5,_,3,4,"ng-container",5),f.Sb(),f.Qb()),2&e){var n=t.$implicit,a=t.last,i=f.dc(2);f.zb(1),f.kc("ngClass",a?"status-label-last":""),f.zb(2),f.Ic(n.label),f.zb(1),f.kc("ngClass",f.pc(4,$,n.alwaysNegative||i.format.isNegative(n.amount),!n.alwaysNegative&&i.format.isPositive(n.amount),a)),f.zb(1),f.kc("ngIf",n.amount)}}function R(e,t){if(1&e&&(f.Tb(0,"div",1),f.Fc(1,x,1,0,"hr",2),f.Tb(2,"div",3),f.Fc(3,D,2,1,"div",4),f.Fc(4,N,5,2,"ng-container",5),f.Fc(5,A,1,0,"hr",5),f.Fc(6,E,6,8,"ng-container",6),f.Sb(),f.Sb()),2&e){var n=f.dc();f.zb(1),f.kc("ngIf",n.showSeparator),f.zb(2),f.kc("ngIf",n.showAccount),f.zb(1),f.kc("ngIf",n.account.user&&n.showUser),f.zb(1),f.kc("ngIf",n.showAccount||n.account.user&&n.showUser),f.zb(1),f.kc("ngForOf",n.indicators$.value)}}var U,M=((U=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,e)).mode="current",a._showAccount=!1,a._showUser=!1,a._showSeparator=!1,a.indicators$=new u.a(null),a}return _createClass(n,[{key:"ngOnInit",value:function(){this.updateIndicators()}},{key:"updateIndicators",value:function(){var e=this,t=[],n=this.status,a=function(n,a){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&t.push({label:a,amount:n,alwaysNegative:!e.format.isZero(n)&&i})};if("current"===this.mode)a(n.balance,this.i18n.account.balance),n.availableBalance!==n.balance&&a(n.availableBalance,this.i18n.account.availableBalance),n.reservedAmount&&!this.format.isZero(n.reservedAmount)&&a(n.reservedAmount,this.i18n.account.reservedAmount,!0),n.creditLimit&&!this.format.isZero(n.creditLimit)&&a(n.creditLimit,this.i18n.account.negativeLimit),n.upperCreditLimit&&!this.format.isZero(n.upperCreditLimit)&&a(n.upperCreditLimit,this.i18n.account.positiveLimit);else{if(this.layout.gtxxs&&null!=n.balanceAtBegin&&a(n.balanceAtBegin,this.i18n.account.balanceOn(this.format.formatAsDate(n.beginDate))),this.layout.gtxxs&&null!=n.balanceAtEnd&&a(n.balanceAtEnd,this.i18n.account.balanceOn(this.format.formatAsDate(n.endDate))),null!=n.incoming&&n.incoming.sum&&a(n.incoming.sum,this.i18n.account.totalIncome),null!=n.outgoing&&n.outgoing.sum){var i=n.outgoing.sum;this.format.isZero(i)||(i="-"+i),a(i,this.i18n.account.totalOutflow)}null!=n.netInflow&&a(n.netInflow,this.i18n.account.netInflow)}this.indicators$.next(t)}},{key:"ngOnChanges",value:function(e){(e.mode||e.account||e.showAccount)&&this.updateIndicators()}},{key:"showAccount",get:function(){return this._showAccount},set:function(e){this._showAccount=Object(l.E)(e)}},{key:"showUser",get:function(){return this._showUser},set:function(e){this._showUser=Object(l.E)(e)}},{key:"showSeparator",get:function(){return this._showSeparator},set:function(e){this._showSeparator=Object(l.E)(e)}},{key:"status",get:function(){return this.account.status}},{key:"currency",get:function(){return this.account.currency}}]),n}(P.a)).\u0275fac=function(e){return new(e||U)(f.Nb(f.r))},U.\u0275cmp=f.Hb({type:U,selectors:[["account-status-view"]],inputs:{account:"account",mode:"mode",showAccount:"showAccount",showUser:"showUser",showSeparator:"showSeparator"},features:[f.wb,f.xb],decls:2,vars:3,consts:[["class","container mw-100 px-0",4,"ngIf"],[1,"container","mw-100","px-0"],["class","mt-0",4,"ngIf"],[1,"row","no-gutters"],["class","status-label col-12",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-0"],[1,"status-label","col-12"],[1,"status-label","col-6","col-md-3","mb-0"],[1,"status-label","col-6","col-md-9","mb-0"],[3,"user"],[1,"status-label","col-6","col-sm-3",3,"ngClass"],[1,"ellipsis"],[1,"status-value","col-6","col-sm-3",3,"ngClass"]],template:function(e,t){if(1&e&&(f.Fc(0,R,7,5,"div",0),f.ec(1,"async")),2&e){var n,a=(null==(n=f.fc(1,1,t.indicators$))?null:n.length)>0;f.kc("ngIf",a)}},directives:[m.t,m.s,S.a,m.q],pipes:[m.b,H.a],styles:[".status-label[_ngcontent-%COMP%], .status-value[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;margin:0;line-height:1em;min-height:1.4rem;display:flex;align-items:center}.status-label[_ngcontent-%COMP%]:not(.status-label-last), .status-value[_ngcontent-%COMP%]:not(.status-value-last){margin-bottom:.2rem}.status-label[_ngcontent-%COMP%]{color:#495057}.status-value[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end}.container[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:.8rem;margin-bottom:.9rem}@media (min-width:316px){.status-label[_ngcontent-%COMP%]{padding-left:.4rem}.status-label[_ngcontent-%COMP%]:not(.status-label-last), .status-value[_ngcontent-%COMP%]:not(.status-value-last){margin-bottom:.4rem}}@media (min-width:576px){.container[_ngcontent-%COMP%]{padding:1em 0}.status-label[_ngcontent-%COMP%], .status-label-last[_ngcontent-%COMP%]:not(.status-label-last), .status-value[_ngcontent-%COMP%], .status-value[_ngcontent-%COMP%]:not(.status-value-last){padding:0}.status-value[_ngcontent-%COMP%]{justify-content:flex-start}}body.dark   [_nghost-%COMP%]     .status-label{color:#d7d7d7}"],changeDetection:0}),U),L=n("oj/z"),j=n("wwxf"),B=n("sifq"),J=n("iInd"),V=n("yL40");function G(e,t){1&e&&f.Pb(0)}function q(e,t){1&e&&f.Ob(0,"div",15)}function Q(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",15),f.Tb(2,"label-value",16),f.Ob(3,"user-link",17),f.Sb(),f.Sb(),f.Fc(4,q,1,0,"div",12),f.Qb()),2&e){var n=f.dc(3);f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("user",n.data.account.user),f.zb(1),f.kc("ngIf",n.layout.gtsm$)}}function Y(e,t){if(1&e&&f.Ob(0,"field-option",20),2&e){var n=t.$implicit;f.kc("id",n.id)("value",n)("text",n.name)}}function W(e,t){if(1&e&&(f.Tb(0,"div",15),f.Tb(1,"single-selection-field",18),f.Fc(2,Y,1,3,"field-option",19),f.Sb(),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.period),f.zb(1),f.kc("ngForOf",n.data.preselectedPeriods)}}function K(e,t){if(1&e&&f.Ob(0,"field-option",20),2&e){var n=t.$implicit;f.kc("id",n.id)("value",n)("text",n.name)}}function Z(e,t){if(1&e&&(f.Tb(0,"div",15),f.Tb(1,"single-selection-field",21),f.Fc(2,K,1,3,"field-option",19),f.Sb(),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.account.transferFilter)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.data.transferFilters)}}function X(e,t){1&e&&f.Ob(0,"div",15)}function ee(e,t){if(1&e&&f.Fc(0,X,1,0,"div",12),2&e){var n=f.dc(3);f.kc("ngIf",n.layout.gtsm$)}}function te(e,t){if(1&e&&(f.Tb(0,"div",15),f.Ob(1,"date-field",22),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.beginDate)}}function ne(e,t){if(1&e&&(f.Tb(0,"div",15),f.Ob(1,"date-field",23),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.endDate)}}function ae(e,t){if(1&e&&(f.Tb(0,"div",15),f.Ob(1,"input-field",35),f.Sb()),2&e){var n=f.dc(4);f.zb(1),f.kc("mask",n.data.transactionNumberMask)("label",n.i18n.transaction.number)}}function ie(e,t){if(1&e&&f.Ob(0,"field-option",38),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.display)}}function re(e,t){if(1&e&&(f.Tb(0,"div",15),f.Tb(1,"single-selection-field",36),f.Fc(2,ie,1,2,"field-option",37),f.Sb(),f.Sb()),2&e){var n=f.dc(4);f.zb(1),f.kc("label",n.i18n.general.operator)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.data.operators)}}function ce(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",15),f.Ob(2,"decimal-field",24),f.Sb(),f.Tb(3,"div",15),f.Ob(4,"decimal-field",25),f.Sb(),f.Tb(5,"div",15),f.Tb(6,"single-selection-field",26),f.Ob(7,"field-option",27),f.Ob(8,"field-option",28),f.Sb(),f.Sb(),f.Tb(9,"div",15),f.Ob(10,"user-field",29),f.Sb(),f.Fc(11,ae,2,2,"div",12),f.Fc(12,re,3,3,"div",12),f.Tb(13,"div",15),f.Tb(14,"single-selection-field",30),f.Ob(15,"field-option",31),f.Ob(16,"field-option",32),f.Ob(17,"field-option",33),f.Ob(18,"field-option",34),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc(3);f.zb(2),f.kc("label",n.i18n.account.minAmount)("prefix",n.currency.prefix)("suffix",n.currency.suffix)("scale",n.currency.decimalDigits),f.zb(2),f.kc("label",n.i18n.account.maxAmount)("prefix",n.currency.prefix)("suffix",n.currency.suffix)("scale",n.currency.decimalDigits),f.zb(2),f.kc("label",n.i18n.account.direction)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("text",n.i18n.account.incoming),f.zb(1),f.kc("text",n.i18n.account.outgoing),f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("ngIf",n.data.transactionNumberMask),f.zb(1),f.kc("ngIf",(null==n.data.operators?null:n.data.operators.length)>0),f.zb(2),f.kc("label",n.i18n.general.orderBy),f.zb(1),f.kc("text",n.i18n.account.orderBy.dateDesc),f.zb(1),f.kc("text",n.i18n.account.orderBy.dateAsc),f.zb(1),f.kc("text",n.i18n.account.orderBy.amountAsc),f.zb(1),f.kc("text",n.i18n.account.orderBy.amountDesc)}}var oe=function(e){return{"border-0":e}};function le(e,t){if(1&e&&(f.Tb(0,"form",10),f.ec(1,"async"),f.Tb(2,"div",11),f.Fc(3,Q,5,3,"ng-container",6),f.Fc(4,W,3,2,"div",12),f.Fc(5,Z,3,3,"div",13),f.ec(6,"async"),f.Fc(7,ee,1,1,"ng-template",null,14,f.Gc),f.Fc(9,te,2,1,"div",12),f.ec(10,"async"),f.Fc(11,ne,2,1,"div",12),f.ec(12,"async"),f.Fc(13,ce,19,20,"ng-container",6),f.ec(14,"async"),f.Sb(),f.Sb()),2&e){var n,a,i=f.uc(8),r=f.dc(2),c=null==(null==(n=r.form.value||f.fc(10,13,r.form.valueChanges))||null==n.preselectedPeriod?null:n.preselectedPeriod.begin),o=null==(null==(a=r.form.value||f.fc(12,15,r.form.valueChanges))||null==a.preselectedPeriod?null:a.preselectedPeriod.end);f.kc("formGroup",r.form)("ngClass",f.nc(19,oe,f.fc(1,9,r.noStatus$))),f.zb(3),f.kc("ngIf",r.data.account.user&&!r.self),f.zb(1),f.kc("ngIf",(null==r.data.preselectedPeriods?null:r.data.preselectedPeriods.length)>1),f.zb(1),f.kc("ngIf",f.fc(6,11,r.layout.gtxxs$)&&(null==r.data.transferFilters?null:r.data.transferFilters.length)>1)("ngIfElse",i),f.zb(4),f.kc("ngIf",c),f.zb(2),f.kc("ngIf",o),f.zb(2),f.kc("ngIf",f.fc(14,17,r.layout.gtxxs$))}}function se(e,t){if(1&e&&(f.Ob(0,"account-status-view",40),f.ec(1,"async"),f.ec(2,"async"),f.ec(3,"async"),f.ec(4,"async")),2&e){var n=f.dc(3);f.kc("account",n.status$.value)("mode",f.fc(1,5,n.moreFilters$)?"period":"current")("showSeparator",f.fc(2,7,n.showForm$))("showAccount",f.fc(3,9,n.layout.ltsm$)&&n.multipleAccounts)("showUser",!n.self&&!1===f.fc(4,11,n.showForm$))}}function ue(e,t){1&e&&f.Ob(0,"spinner")}function be(e,t){if(1&e&&(f.Rb(0),f.Fc(1,se,5,13,"account-status-view",39),f.ec(2,"async"),f.ec(3,"async"),f.Fc(4,ue,1,0,"spinner",6),f.ec(5,"async"),f.Qb()),2&e){var n=f.dc(2);f.zb(1),f.kc("ngIf",f.fc(2,2,n.status$)&&(f.fc(3,4,n.layout.gtxxs$)||0===(null==n.results?null:n.results.page))),f.zb(3),f.kc("ngIf",null===f.fc(5,6,n.status$))}}function fe(e,t){if(1&e&&(f.Tb(0,"mobile-result",41),f.Tb(1,"div",42),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("avatarImage",a.avatarImage(n))("avatarIcon",a.avatarIcon(n))("date",n.date)("amount",n.amount)("currency",a.currency),f.zb(2),f.Jc(" ",a.subjectName(n)," ")}}function de(e,t){if(1&e&&(f.Tb(0,"th",48),f.Hc(1),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.Ic(n.i18n.general.description)}}function me(e,t){if(1&e&&(f.Tb(0,"a",54),f.Hc(1),f.Sb()),2&e){var n=f.dc(2).$implicit,a=f.dc(3);f.kc("routerLink",a.path(n)),f.zb(1),f.Jc(" ",n.description," ")}}function pe(e,t){if(1&e&&(f.Tb(0,"td"),f.Fc(1,me,2,2,"a",53),f.Sb()),2&e){var n=f.dc().$implicit;f.zb(1),f.kc("ngIf",n.description)}}var he=function(e,t){return{positive:e,negative:t}};function ge(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",49),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(2,"td",44),f.Ob(3,"avatar",50),f.Sb(),f.Tb(4,"td"),f.Tb(5,"a",51),f.Hc(6),f.ec(7,"date"),f.Sb(),f.Sb(),f.Tb(8,"td"),f.Tb(9,"a",51),f.Hc(10),f.Sb(),f.Sb(),f.Fc(11,pe,2,1,"td",6),f.ec(12,"async"),f.Tb(13,"td",46),f.Tb(14,"a",52),f.Hc(15),f.ec(16,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("image",i.avatarImage(a))("icon",i.avatarIcon(a)),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.fc(7,10,a.date)," "),f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",i.subjectName(a)," "),f.zb(1),f.kc("ngIf",f.fc(12,12,i.layout.gtsm$)),f.zb(3),f.kc("routerLink",i.path(a))("ngClass",f.oc(18,he,i.format.isPositive(a.amount),i.format.isNegative(a.amount))),f.zb(1),f.Jc(" ",f.hc(16,14,a.amount,i.currency,!0)," ")}}function ve(e,t){if(1&e&&(f.Tb(0,"table",43),f.Tb(1,"thead"),f.Ob(2,"th",44),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Fc(7,de,2,1,"th",45),f.ec(8,"async"),f.Tb(9,"th",46),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"tbody"),f.Fc(12,ge,17,21,"ng-container",47),f.ec(13,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(13,7,a.results$))?null:n.results;f.zb(4),f.Ic(a.i18n.general.date),f.zb(2),f.Ic(a.i18n.transaction.fromTo),f.zb(1),f.kc("ngIf",f.fc(8,5,a.layout.gtsm$)),f.zb(3),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function ye(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",4),f.ec(1,"async"),f.Fc(2,le,15,21,"form",5),f.ec(3,"async"),f.Fc(4,be,6,8,"ng-container",6),f.ec(5,"async"),f.Sb(),f.Tb(6,"results-layout",7),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(7,"async"),f.Fc(8,fe,3,6,"mobile-result",8),f.Fc(9,ve,14,9,"table",9),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.title)("mobileHeading",a.i18n.account.mobileTitle)("headingActions",f.fc(1,8,a.headingActions$)),f.zb(2),f.kc("ngIf",f.fc(3,10,a.showForm$)),f.zb(2),f.kc("ngIf",!1===f.fc(5,12,a.noStatus$)),f.zb(2),f.kc("results",f.fc(7,14,a.results$))("toLink",a.toLink)("rendering$",a.rendering$)}}function ke(e,t){1&e&&f.Ob(0,"spinner",55)}var Se,Te=((Se=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).accountsService=a,r.bankingHelper=i,r.status$=new u.a(null),r.noStatus$=new u.a(!1),r.showForm$=new u.a(!1),r}return _createClass(n,[{key:"getFormControlNames",value:function(){return["transferFilter","preselectedPeriod","periodBegin","periodEnd","minAmount","maxAmount","transactionNumber","direction","user","by","orderBy"]}},{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.params;this.ownerParam=t.owner,this.typeParam=t.type,this.self=this.authHelper.isSelf(this.ownerParam),this.multipleAccounts=this.accountTypes.length>1,this.stateManager.cache("data",this.accountsService.getAccountHistoryDataByOwnerAndType({owner:this.ownerParam,accountType:this.typeParam})).subscribe((function(t){e.data=t}))}},{key:"onDataInitialized",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"onDataInitialized",this).call(this,e),this.exportActions=this.exportHelper.headingActions(e.exportFormats,(function(e){return t.accountsService.exportAccountHistory$Response(Object.assign({format:e.internalName},t.toSearchParams(t.form.value)))})),this.bankingHelper.preProcessPreselectedPeriods(e,this.form),this.addSub(this.layout.xxs$.subscribe((function(){return t.updateShowForm(e)}))),this.addSub(this.moreFilters$.subscribe((function(){return t.updateShowForm(e)}))),this.updateShowForm(e)}},{key:"updateShowForm",value:function(e){this.showForm$.next(this.layout.xxs&&!Object(l.h)(e.preselectedPeriods)||this.moreFilters)}},{key:"toSearchParams",value:function(e){var t=e;return t.transferFilters=null==e.transferFilter?[]:[e.transferFilter.id],t.datePeriod=this.bankingHelper.resolveDatePeriod(e),t.amountRange=c.a.rangeFilter(e.minAmount,e.maxAmount),t.fields=[],t.owner=this.ownerParam,t.accountType=this.typeParam,t}},{key:"doSearch",value:function(e){var t=this;return this.accountsService.searchAccountHistory$Response(e).pipe(Object(b.a)((function(){e.fields=["status"],t.addSub(t.accountsService.getAccountStatusByOwnerAndType(e).subscribe((function(e){var n=Object.assign(Object.assign({},t.data.account),{status:(e||{}).status});null==n.status?(t.noStatus$.next(!0),t.moreFilters=!0,t.headingActions=t.exportActions):t.headingActions=[t.moreFiltersAction].concat(_toConsumableArray(t.exportActions)),t.status$.next(n)})))})))}},{key:"subjectName",value:function(e){return this.bankingHelper.subjectName(e.relatedAccount)}},{key:"path",value:function(e){return["/banking","transfer",this.data.account.id,this.bankingHelper.transactionNumberOrId(e)]}},{key:"avatarIcon",value:function(e){return"user"===e.relatedAccount.kind?"user":"account_balance_circle"}},{key:"avatarImage",value:function(e){return"user"===e.relatedAccount.kind?e.relatedAccount.user.image:null}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.hideFilters}},{key:"resolveMenu",value:function(e){var t=new s.a(s.b.ACCOUNT_HISTORY,{accountType:e.account.type});return e.account.kind===a.a.SYSTEM?t:this.authHelper.userMenu(e.account.user,t)}},{key:"type",get:function(){return null==this.data?null:this.data.account.type}},{key:"number",get:function(){return null==this.data?null:this.data.account.number}},{key:"currency",get:function(){return null==this.data?null:this.data.account.currency}},{key:"preselectedPeriods",get:function(){return null==this.data?null:this.data.preselectedPeriods}},{key:"transferFilters",get:function(){return null==this.data?null:this.data.transferFilters}},{key:"title",get:function(){var e=this.type;if(null==e)return null;var t=this.layout.ltsm?null:this.number;return null==t?e.name:e.name+" - "+t}},{key:"accountTypes",get:function(){return(((this.login.auth||{}).permissions||{}).banking.accounts.filter((function(e){return!1!==e.visible}))||[]).map((function(e){return e.account.type}))}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Se)(f.Nb(f.r),f.Nb(i.a),f.Nb(r.a))},Se.\u0275cmp=f.Hb({type:Se,selectors:[["account-history"]],features:[f.wb],decls:8,vars:7,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["loadingIndicators",""],["mode","filters",3,"heading","mobileHeading","headingActions"],["class","filters-form",3,"formGroup","ngClass",4,"ngIf"],[4,"ngIf"],["resultType","list",3,"results","toLink","rendering$","update"],["forceSign","",3,"avatarImage","avatarIcon","date","amount","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"filters-form",3,"formGroup","ngClass"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],["class","col-12 col-md-6",4,"ngIf","ngIfElse"],["noTransferFilters",""],[1,"col-12","col-md-6"],["labelPosition","side","kind","fieldView",3,"label"],[3,"user"],["labelPosition","side","formControlName","preselectedPeriod",3,"label"],[3,"id","value","text",4,"ngFor","ngForOf"],[3,"id","value","text"],["labelPosition","side","formControlName","transferFilter",3,"label","emptyOption"],["labelPosition","side","formControlName","periodBegin","minDate","past5","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past5","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","minAmount","fieldSize","full",3,"label","prefix","suffix","scale"],["labelPosition","side","formControlName","maxAmount","fieldSize","full",3,"label","prefix","suffix","scale"],["labelPosition","side","formControlName","direction",3,"label","emptyOption"],["value","credit",3,"text"],["value","debit",3,"text"],["labelPosition","side","formControlName","user",3,"label"],["labelPosition","side","formControlName","orderBy",3,"label"],["value","dateDesc",3,"text"],["value","dateAsc",3,"text"],["value","amountAsc",3,"text"],["value","amountDesc",3,"text"],["labelPosition","side","formControlName","transactionNumber",3,"mask","label"],["labelPosition","side","formControlName","by",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],[3,"account","mode","showSeparator","showAccount","showUser",4,"ngIf"],[3,"account","mode","showSeparator","showAccount","showUser"],["forceSign","",3,"avatarImage","avatarIcon","date","amount","currency"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","30%",4,"ngIf"],[1,"amount"],[4,"ngFor","ngForOf"],["width","30%"],[3,"click"],[3,"image","icon"],[3,"routerLink"],[3,"routerLink","ngClass"],["class","d-inline-block",3,"routerLink",4,"ngIf"],[1,"d-inline-block",3,"routerLink"],[1,"p-3"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.ec(2,"async"),f.Fc(3,G,1,0,"ng-container",1),f.Sb(),f.Fc(4,ye,10,16,"ng-template",null,2,f.Gc),f.Fc(6,ke,1,0,"ng-template",null,3,f.Gc)),2&e){var n=f.uc(5);f.kc("ready",f.fc(1,3,t.noStatus$)||f.fc(2,5,t.status$)),f.zb(3),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,h.a,g.a,v.a,y.I,y.w,y.n,m.q,k.a,S.a,T.a,y.v,y.l,m.s,z.a,w.a,I.a,F.a,O.a,C.a,M,L.a,j.a,B.a,J.h],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),Se),ze=n("dVyd"),we=n("x6mR"),Ie=n("9d5G"),Fe=n("LvDl"),Oe=n("SxV6");function Ce(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",4),f.ec(1,"async"),f.Tb(2,"payment-step-form",5),f.bc("availablePaymentTypes",(function(e){return f.wc(n),f.dc().availablePaymentTypes=e})),f.ec(3,"async"),f.Sb(),f.Tb(4,"actions",6),f.Tb(5,"action-button",7),f.bc("action",(function(){return f.wc(n),f.dc().toConfirm()})),f.ec(6,"async"),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.title)("mobileHeading",a.mobileTitle)("mode",f.fc(1,11,a.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("data",a.data)("pos",a.pos)("form",a.form)("currency",f.fc(3,13,a.currency$))("paymentTypeData$",a.paymentTypeData$)("customValuesControlGetter",a.customValuesControlGetter),f.zb(3),f.kc("disabled",f.fc(6,15,a.requesting$))("label",a.i18n.general.next)}}function Pe(e,t){if(1&e){var n=f.Ub();f.Tb(0,"action-button",7),f.bc("action",(function(){return f.wc(n),f.dc(2).perform()})),f.ec(1,"async"),f.Sb()}if(2&e){var a=f.dc(2);f.kc("disabled",!a.canConfirm||f.fc(1,2,a.requesting$))("label",a.i18n.general.confirm)}}function He(e,t){1&e&&f.Hc(0,"\xa0")}var xe=function(){return[]};function De(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",8),f.ec(1,"async"),f.Tb(2,"payment-step-confirm",9),f.bc("confirmationModeChanged",(function(e){return f.wc(n),f.dc().confirmationMode$.next(e)}))("confirmed",(function(e){return f.wc(n),f.dc().perform(e)})),f.Sb(),f.Tb(3,"actions",6),f.Fc(4,Pe,2,4,"action-button",10),f.ec(5,"async"),f.Fc(6,He,1,0,"ng-template",null,11,f.Gc),f.Tb(8,"button",12),f.bc("click",(function(){return f.wc(n),f.dc().backToForm()})),f.Hc(9),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.uc(7),i=f.dc();f.kc("heading",i.i18n.transaction.title.paymentConfirmation)("mobileHeading",i.i18n.transaction.mobileTitle.paymentConfirmation)("mode",f.fc(1,10,i.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("pos",i.pos)("preview",i.preview)("confirmationPassword",i.confirmationPassword)("showPaymentType",(i.availablePaymentTypes||f.mc(14,xe)).length>1),f.zb(2),f.kc("ngIf",f.fc(5,12,i.confirmationMode$)!=i.ConfirmationMode.Device)("ngIfElse",a),f.zb(5),f.Jc(" ",i.i18n.general.previous," ")}}function Ne(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",8),f.ec(1,"async"),f.Ob(2,"payment-step-done",13),f.Tb(3,"actions",6),f.Tb(4,"button",14),f.bc("click",(function(){return f.wc(n),f.dc().viewPerformed()})),f.Hc(5),f.Sb(),f.Tb(6,"button",12),f.bc("click",(function(){return f.wc(n),f.dc().reload()})),f.Hc(7),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.doneTitle)("mobileHeading",a.doneMobileTitle)("mode",f.fc(1,6,a.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("performed",a.performed),f.zb(3),f.Jc(" ",a.i18n.transaction.doneView," "),f.zb(2),f.Jc(" ",a.i18n.transaction.doneNew," ")}}function Ae(e,t){1&e&&(f.Tb(0,"page-content"),f.Ob(1,"spinner"),f.Sb())}var _e,$e=function(e){var t=e.parent;if(t){var n=t.get("scheduling").value,i=t.get("firstInstallmentIsNow").value;if(Object(l.h)(e.value)&&("futureDate"===n||n===a.W.SCHEDULED&&!i))return{required:!0}}return null},Ee=function(e){var t=e.parent;if(t){var n=t.get("scheduling").value,i=t.get("repeatUntilCanceled").value;if(n===a.W.RECURRING&&!i){var r=parseInt(e.value,10);return isNaN(r)?{required:!0}:y.G.min(2)(e)}}return null},Re=function(e){var t=e.parent;if(t){var n=t.get("scheduling").value,i=t.get("firstOccurrenceIsNow").value;if(Object(l.h)(e.value)&&n===a.W.RECURRING&&!i)return{required:!0}}return null},Ue=((_e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r,c){var o;return _classCallCheck(this,n),(o=t.call(this,e)).bankingHelper=a,o.paymentsService=i,o.posService=r,o.changeDetector=c,o.ConfirmationMode=Ie.a,o.steps=["form","confirm","done"],o.step$=new u.a(null),o.currency$=new u.a(null),o.paymentTypeData$=new u.a(null),o.customValuesControls=new Map,o.confirmationMode$=new u.a(null),o}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot;this.pos="pos"===t.url[t.url.length-1].path,this.pos||(this.fromParam=t.params.from,this.fromSelf=this.authHelper.isSelf(this.fromParam),this.fromSystem=this.authHelper.isSystem(this.fromParam),this.toParam=t.params.to,this.toSelf=null!=this.toParam&&this.authHelper.isSelf(this.toParam),this.toSystem=null!=this.toParam&&this.authHelper.isSystem(this.toParam)),this.pos?(this.title=this.i18n.transaction.title.pos,this.mobileTitle=this.i18n.transaction.mobileTitle.pos):this.fromSystem?this.toSystem?(this.title=this.i18n.transaction.title.paymentSystemToSystem,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentSystemToSystem):(this.title=this.i18n.transaction.title.paymentSystemToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentSystemToUser):this.toSelf?(this.title=this.i18n.transaction.title.paymentToSelf,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToSelf):this.toSystem?(this.title=this.i18n.transaction.title.paymentToSystem,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToSystem):(this.title=this.i18n.transaction.title.paymentToUser,this.mobileTitle=this.i18n.transaction.mobileTitle.paymentToUser),this.form=this.buildForm(),this.confirmationPassword=this.formBuilder.control(null),this.addSub(this.pos?this.posService.dataForReceivePayment({}).subscribe((function(t){return e.data=t})):this.paymentsService.dataForPerformPayment({owner:this.fromParam,to:this.toParam}).subscribe((function(t){return e.data=t}))),this.addSub(this.form.get("account").valueChanges.subscribe((function(t){return e.updateCurrency(e.data,t)}))),this.addSub(this.paymentTypeData$.subscribe((function(t){null!=e.lastPaymentTypeData&&Object(Fe.isEqual)(e.lastPaymentTypeData,t)||e.adjustForm(t),e.lastPaymentTypeData=t}))),this.addSub(this.form.valueChanges.subscribe((function(t){return e.adjustFormValidators(t)})))}},{key:"buildForm",value:function(){return this.formBuilder.group({account:null,subject:[this.pos?null:this.toParam,y.G.required],type:[null,y.G.required],amount:[null,y.G.required],description:null,scheduling:[a.W.DIRECT,y.G.required],installmentsCount:null,firstInstallmentIsNow:!0,firstInstallmentDate:[null,$e],repeatUntilCanceled:!0,occurrencesCount:[null,Ee],firstOccurrenceIsNow:!0,firstOccurrenceDate:[null,Re]})}},{key:"updateCurrency",value:function(e,t){var n=null;!Object(l.h)(t)&&e&&e.accounts&&(n=e.accounts.find((function(e){return e.type.id===t}))),this.currency=n?n.currency:null}},{key:"adjustForm",value:function(e){var t=this.form.get("description");(e||{}).descriptionAvailability===a.i.REQUIRED?t.setValidators(y.G.required):Object(l.c)(t)}},{key:"adjustFormValidators",value:function(e){if(!this.lastValue||!Object(Fe.isEqual)(this.lastValue,e)){this.lastValue=e;var t=this.form.get("firstInstallmentDate");"futureDate"===e.scheduling||e.scheduling===a.W.SCHEDULED&&!e.firstInstallmentIsNow?t.setValidators(y.G.required):Object(l.c)(t);var n=this.form.get("installmentsCount");e.scheduling===a.W.SCHEDULED?n.setValidators(y.G.compose([y.G.required,y.G.min(2)])):Object(l.c)(n);var i=this.form.get("occurrencesCount"),r=this.form.get("firstOccurrenceDate");e.scheduling===a.W.RECURRING?(e.repeatUntilCanceled?Object(l.c)(i):i.setValidators(y.G.compose([y.G.required,y.G.min(2)])),e.firstOccurrenceIsNow?Object(l.c)(r):r.setValidators(y.G.required)):(Object(l.c)(i),Object(l.c)(r)),this.changeDetector.detectChanges()}}},{key:"onDataInitialized",value:function(e){if(Object(l.h)(e.accounts))this.notification.error(this.i18n.transaction.noAccounts);else{this.step="form";var t=e.accounts[0].type.id;this.form.patchValue({account:t},{emitEvent:!1}),this.updateCurrency(e,t)}}},{key:"updatePaymentTypeData",value:function(e){var t=this.form.get("amount");e&&e.fixedAmount?(t.setValue(e.fixedAmount),t.disable()):t.disabled&&t.enable()}},{key:"backToForm",value:function(){this.step="form"}},{key:"toConfirm",value:function(){var e=this,t={},n=this.paymentTypeData;if(n&&n.customFields){var a,i=_createForOfIteratorHelper(n.customFields);try{for(i.s();!(a=i.n()).done;){var r=a.value;t[r.internalName]=this.customValuesControlGetter(r)}}catch(c){i.e(c)}finally{i.f()}}this.form.setControl("customValues",new y.m(t)),Object(l.F)(this.form)&&this.addSub(this.confirmDataRequest().subscribe((function(t){e.preview=t,e.step="confirm",e.canConfirm=e.authHelper.canConfirm(t.confirmationPasswordInput),e.canConfirm||e.notification.warning(e.authHelper.getConfirmationMessage(t.confirmationPasswordInput)),e.confirmationPassword.setValidators(t.confirmationPasswordInput?y.G.required:null),Object(l.y)()})))}},{key:"perform",value:function(e){var t=this;e&&this.confirmationPassword.setValue(e),Object(l.F)(this.confirmationPassword)&&(this.pos?this.posService.receivePayment({body:this.preview.payment,confirmationPassword:this.confirmationPassword.value}):this.paymentsService.performPayment({owner:this.fromParam,body:this.preview.payment,confirmationPassword:this.confirmationPassword.value})).pipe(Object(Oe.a)()).subscribe((function(e){t.performed=e,t.step="done",Object(l.y)()}))}},{key:"confirmDataRequest",value:function(){var e=Object(Fe.cloneDeep)(this.form.value),t=e;switch(e.scheduling){case"futureDate":t.scheduling=a.W.SCHEDULED,t.installmentsCount=1;break;case a.W.SCHEDULED:e.firstInstallmentIsNow&&(t.firstInstallmentDate=null);break;case a.W.RECURRING:e.repeatUntilCanceled&&(t.occurrencesCount=null),e.firstOccurrenceIsNow&&(t.firstOccurrenceDate=null)}return delete e.firstInstallmentIsNow,delete e.repeatUntilCanceled,delete e.firstOccurrenceIsNow,this.pos?this.posService.previewReceivePayment({body:t}):this.paymentsService.previewPayment({owner:this.fromParam,body:t})}},{key:"viewPerformed",value:function(){this.router.navigate(["banking","transaction",this.bankingHelper.transactionNumberOrId(this.performed)])}},{key:"reload",value:function(){this.step=null,this.currency=null,this.paymentTypeData=null,_get(_getPrototypeOf(n.prototype),"reload",this).call(this)}},{key:"locateControl",value:function(e){return Object(l.t)(this.form,e)}},{key:"resolveMenu",value:function(e){return this.pos?s.b.POS:this.fromSystem?this.toSystem?s.b.PAYMENT_TO_SYSTEM:s.b.PAYMENT_TO_USER:this.authHelper.userMenu(e.fromUser,this.toSystem?s.b.PAYMENT_TO_SYSTEM:this.toSelf?s.b.PAYMENT_TO_SELF:s.b.PAYMENT_TO_USER)}},{key:"step",get:function(){return this.step$.value},set:function(e){this.step$.next(e)}},{key:"currency",get:function(){return this.currency$.value},set:function(e){this.currency$.next(e)}},{key:"paymentTypeData",get:function(){return this.paymentTypeData$.value},set:function(e){this.paymentTypeData$.next(e),this.updatePaymentTypeData(e)}},{key:"doneTitle",get:function(){if(this.performed)return this.performed.authorizationStatus===a.rb.PENDING?this.i18n.transaction.title.pendingPayment:this.i18n.transaction.title.processedPayment}},{key:"doneMobileTitle",get:function(){if(this.performed)return this.performed.authorizationStatus===a.rb.PENDING?this.i18n.transaction.mobileTitle.pendingPayment:this.i18n.transaction.mobileTitle.processedPayment}},{key:"customValuesControlGetter",get:function(){var e=this;return function(t){var n=t.internalName,a=e.customValuesControls.get(n);return null==a&&(a=e.formBuilder.control(t.defaultValue,t.required?y.G.required:null),e.customValuesControls.set(n,a)),a}}}]),n}(we.a)).\u0275fac=function(e){return new(e||_e)(f.Nb(f.r),f.Nb(r.a),f.Nb(i.z),f.Nb(ze.a),f.Nb(f.h))},_e.\u0275cmp=f.Hb({type:_e,selectors:[["payment"]],features:[f.wb],decls:7,vars:9,consts:[[3,"ready","ngSwitch"],["last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],["hideBack","","last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1","d-flex","flex-column",3,"data","pos","form","currency","paymentTypeData$","customValuesControlGetter","availablePaymentTypes"],["forceRow",""],[3,"disabled","label","action"],["hideBack","","last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1","d-flex","flex-column",3,"pos","preview","confirmationPassword","showPaymentType","confirmationModeChanged","confirmed"],[3,"disabled","label","action",4,"ngIf","ngIfElse"],["spacer",""],[1,"btn","btn-outline-primary",3,"click"],[1,"flex-grow-1","d-flex","flex-column",3,"performed"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.ec(2,"async"),f.Fc(3,Ce,7,17,"page-content",1),f.Fc(4,De,10,15,"page-content",2),f.Fc(5,Ne,8,8,"page-content",2),f.Fc(6,Ae,2,0,"page-content",3),f.Sb()),2&e&&(f.kc("ready",f.fc(1,5,t.data$))("ngSwitch",f.fc(2,7,t.step$)),f.zb(3),f.kc("ngSwitchCase","form"),f.zb(1),f.kc("ngSwitchCase","confirm"),f.zb(1),f.kc("ngSwitchCase","done"))},encapsulation:2,changeDetection:0}),_e),Me=n("/q9M"),Le=n("/uUt");function je(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",4),f.ec(1,"async"),f.Ob(2,"receive-qr-payment-step-form",5),f.ec(3,"async"),f.ec(4,"async"),f.ec(5,"async"),f.Tb(6,"actions",6),f.Tb(7,"action-button",7),f.bc("action",(function(){return f.wc(n),f.dc().toPending()})),f.ec(8,"async"),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.i18n.transaction.title.receiveQrPayment)("mobileHeading",a.i18n.transaction.mobileTitle.receiveQrPayment)("mode",f.fc(1,10,a.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("data",a.data)("form",a.form)("transferTypes",f.fc(3,12,a.paymentTypes$))("type",f.fc(4,14,a.paymentType$))("typeData",f.fc(5,16,a.paymentTypeData$)),f.zb(5),f.kc("disabled",f.fc(8,18,a.requesting$))("label",a.i18n.general.next)}}function Be(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",13),f.bc("click",(function(){return f.wc(n),f.dc(2).share()})),f.ec(1,"async"),f.Hc(2),f.Sb()}if(2&e){var a=f.dc(2);f.kc("disabled",f.fc(1,2,a.requesting$)),f.zb(2),f.Ic(a.i18n.general.share)}}function Je(e,t){1&e&&f.Ob(0,"span")}function Ve(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",8),f.ec(1,"async"),f.Ob(2,"receive-qr-payment-step-pending",9),f.ec(3,"async"),f.ec(4,"async"),f.Tb(5,"actions",6),f.Fc(6,Be,3,4,"button",10),f.Fc(7,Je,1,0,"ng-template",null,11,f.Gc),f.Tb(9,"button",12),f.bc("click",(function(){return f.wc(n),f.dc().reload()})),f.Hc(10),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.uc(8),i=f.dc();f.kc("heading",i.i18n.transaction.title.receiveQrPayment)("mobileHeading",i.i18n.transaction.mobileTitle.receiveQrPayment)("mode",f.fc(1,8,i.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("ticket",f.fc(3,10,i.ticket$))("qrCodeUrl",f.fc(4,12,i.qrCodeUrl$)),f.zb(4),f.kc("ngIf",i.supportsShare)("ngIfElse",a),f.zb(4),f.Jc(" ",i.i18n.general.previous," ")}}function Ge(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",8),f.ec(1,"async"),f.Ob(2,"receive-qr-payment-step-done",14),f.ec(3,"async"),f.Tb(4,"actions",6),f.Tb(5,"button",15),f.bc("click",(function(){return f.wc(n),f.dc().viewPerformed()})),f.Hc(6),f.Sb(),f.Tb(7,"button",12),f.bc("click",(function(){return f.wc(n),f.dc().reload()})),f.Hc(8),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.i18n.transaction.title.receiveQrPayment)("mobileHeading",a.i18n.transaction.mobileTitle.receiveQrPayment)("mode",f.fc(1,6,a.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("payment",f.fc(3,8,a.payment$)),f.zb(4),f.Jc(" ",a.i18n.transaction.doneView," "),f.zb(2),f.Jc(" ",a.i18n.transaction.doneNew," ")}}function qe(e,t){1&e&&(f.Tb(0,"page-content"),f.Ob(1,"spinner"),f.Sb())}var Qe,Ye=((Qe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).ticketsService=a,c.pushNotifications=i,c.bankingHelper=r,c.step$=new u.a(null),c.ticket$=new u.a(null),c.paymentTypes$=new u.a([]),c.paymentType$=new u.a(null),c.paymentTypeData$=new u.a(null),c.payment$=new u.a(null),c.paymentTypeDataCache=new Map,c.qrCodeUrl$=new u.a(null),c.supportsShare=Object(l.C)(),c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.addSub(this.ticketsService.dataForNewTicket().subscribe((function(t){return e.data=t}))),this.addSub(this.step$.subscribe((function(t){return e.onStepChanged(t)})))}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this.unsubscribePush(),this.destroyQrCode()}},{key:"onDataInitialized",value:function(e){var t=this;Object(l.h)(e.accounts)||Object(l.h)(e.paymentTypes)?this.notification.error(this.i18n.transaction.noAccounts):(this.form=this.formBuilder.group({account:[null,y.G.required],type:[null,y.G.required],amount:[null,y.G.required],description:null}),this.paymentTypeDataCache.set(e.paymentTypes[0].id,e.paymentTypeData),this.addSub(this.form.controls.type.valueChanges.pipe(Object(Le.a)()).subscribe((function(e){return t.onPaymentTypeChange(e)}))),this.addSub(this.form.controls.account.valueChanges.pipe(Object(Le.a)()).subscribe((function(n){return t.onAccountChange(n,e)}))),this.form.patchValue({account:e.accounts[0].id}),this.step$.next("form"))}},{key:"onAccountChange",value:function(e,t){var n=t.accounts.find((function(t){return t.id===e})),a=n?t.paymentTypes.filter((function(e){return e.to.id===n.type.id})):[];this.paymentTypes$.next(a),this.form.patchValue({type:0===a.length?null:a[0].id})}},{key:"onPaymentTypeChange",value:function(e){var t=this,n=(this.paymentTypes$.value||[]).find((function(t){return t.id===e}));if(n){var i=function(i){(t.paymentType$.value||{}).id!==e&&(t.paymentTypeDataCache.set(e,i),t.paymentType$.next(n),t.paymentTypeData$.next(i),t.form.setControl("customValues",t.fieldHelper.customValuesFormGroup(i.customFields)),t.form.controls.type.setValidators(i.descriptionAvailability===a.i.REQUIRED?y.G.required:null))},r=this.paymentTypeDataCache.get(e);r?i(r):this.addSub(this.ticketsService.dataForNewTicket({type:e}).subscribe((function(e){i(e.paymentTypeData)})))}else this.notification.error(this.i18n.transaction.noTypes)}},{key:"toPending",value:function(){var e=this;Object(l.F)(this.form)&&this.addSub(this.ticketsService.newTicket({body:this.form.value}).subscribe((function(t){e.ticket$.next(t),e.addSub(e.ticketsService.getTicketQrCode({ticket:t.ticketNumber,size:a.D.MEDIUM}).subscribe((function(t){e.qrCodeUrl$.next(URL.createObjectURL(t))}))),e.step$.next("pending")})))}},{key:"viewPerformed",value:function(){this.router.navigate(["banking","transaction",this.bankingHelper.transactionNumberOrId(this.payment$.value)])}},{key:"onStepChanged",value:function(e){var t=this;"pending"===e?this.pushSub=this.pushNotifications.ticket$.subscribe((function(e){var n=t.ticket$.value;n&&n.id===e.id&&(t.payment$.next(e.transaction),t.step$.next("done"))})):(this.unsubscribePush(),this.destroyQrCode())}},{key:"unsubscribePush",value:function(){this.pushSub&&(this.pushSub.unsubscribe(),this.pushSub=null)}},{key:"destroyQrCode",value:function(){this.qrCodeUrl$.value&&(URL.revokeObjectURL(this.qrCodeUrl$.value),this.qrCodeUrl$.next(null))}},{key:"share",value:function(){var e=this.ticket$.value;navigator.share&&navigator.share({url:e.approveUrl,title:this.i18n.transaction.ticketShareTitle,text:this.i18n.transaction.ticketShareText({user:e.to.user.display,amount:this.format.formatAsCurrency(e.currency,e.amount)})})}},{key:"resolveMenu",value:function(){return s.b.RECEIVE_QR_PAYMENT}}]),n}(we.a)).\u0275fac=function(e){return new(e||Qe)(f.Nb(f.r),f.Nb(i.F),f.Nb(Me.a),f.Nb(r.a))},Qe.\u0275cmp=f.Hb({type:Qe,selectors:[["receive-qr-payment"]],features:[f.wb],decls:7,vars:9,consts:[[3,"ready","ngSwitch"],["last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],["hideBack","","last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1","d-flex","flex-column",3,"data","form","transferTypes","type","typeData"],["forceRow",""],[3,"disabled","label","action"],["hideBack","","last","",3,"heading","mobileHeading","mode"],[3,"ticket","qrCodeUrl"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["empty",""],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],[3,"payment"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.ec(2,"async"),f.Fc(3,je,9,20,"page-content",1),f.Fc(4,Ve,11,14,"page-content",2),f.Fc(5,Ge,9,10,"page-content",2),f.Fc(6,qe,2,0,"page-content",3),f.Sb()),2&e&&(f.kc("ready",f.fc(1,5,t.data$))("ngSwitch",f.fc(2,7,t.step$)),f.zb(3),f.kc("ngSwitchCase","form"),f.zb(1),f.kc("ngSwitchCase","pending"),f.zb(1),f.kc("ngSwitchCase","done"))},encapsulation:2,changeDetection:0}),Qe),We=n("c/PD");function Ke(e,t){1&e&&f.Pb(0)}function Ze(e,t){1&e&&f.Ob(0,"div",7)}function Xe(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",7),f.Tb(2,"label-value",16),f.Ob(3,"user-link",17),f.Sb(),f.Sb(),f.Fc(4,Ze,1,0,"div",9),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("user",n.data.user),f.zb(1),f.kc("ngIf",n.layout.gtsm$)}}function et(e,t){if(1&e&&f.Ob(0,"field-option",20),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.name)}}function tt(e,t){if(1&e&&(f.Tb(0,"div",7),f.Tb(1,"single-selection-field",18),f.Fc(2,et,1,2,"field-option",19),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.transaction.account)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.data.accountTypes)}}function nt(e,t){if(1&e&&(f.Tb(0,"mobile-result",21),f.Tb(1,"div",22),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("date",n.date)("amount",n.amount)("avatarImage",a.bankingHelper.avatarImage(n.transaction.related))("avatarIcon",a.bankingHelper.avatarIcon(n.transaction.related))("currency",a.currencies.get(n.currency)),f.zb(2),f.Jc(" ",a.bankingHelper.subjectName(n.transaction.related)," ")}}var at=function(e){return{"pb-0":e}},it=function(e,t){return{positive:e,negative:t}};function rt(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",27),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.bankingHelper.transactionPath(e.transaction))})),f.Tb(2,"td",28),f.ec(3,"async"),f.Ob(4,"avatar",29),f.Sb(),f.Tb(5,"td"),f.Tb(6,"a",30),f.Hc(7),f.ec(8,"date"),f.Sb(),f.Sb(),f.Tb(9,"td"),f.Tb(10,"a",30),f.Hc(11),f.Sb(),f.Sb(),f.Tb(12,"td"),f.Tb(13,"a",31),f.Hc(14),f.Sb(),f.Sb(),f.Tb(15,"td",25),f.Tb(16,"a",32),f.Hc(17),f.ec(18,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(2),f.kc("ngClass",f.nc(20,at,f.fc(3,12,i.layout.xxs$))),f.zb(2),f.kc("image",i.bankingHelper.avatarImage(a.transaction.related))("icon",i.bankingHelper.avatarIcon(a.transaction.related)),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a.transaction)),f.zb(1),f.Jc(" ",f.fc(8,14,a.dueDate)," "),f.zb(3),f.kc("routerLink",i.bankingHelper.transactionPath(a.transaction)),f.zb(1),f.Jc(" ",i.bankingHelper.subjectName(a.transaction.related)," "),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a.transaction)),f.zb(1),f.Jc(" ",i.number(a)," "),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a.transaction))("ngClass",f.oc(22,it,i.format.isPositive(a.amount),i.format.isNegative(a.amount))),f.zb(1),f.Jc(" ",f.hc(18,16,a.amount,i.currencies.get(a.transaction.currency),!0)," ")}}function ct(e,t){if(1&e&&(f.Tb(0,"table",23),f.Tb(1,"thead"),f.Ob(2,"th",24),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Tb(7,"th"),f.Hc(8),f.Sb(),f.Tb(9,"th",25),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"tbody"),f.Fc(12,rt,19,25,"ng-container",26),f.ec(13,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(13,5,a.results$))?null:n.results;f.zb(4),f.Ic(a.i18n.transaction.dueDate),f.zb(2),f.Ic(a.i18n.transaction.fromTo),f.zb(2),f.Ic(a.i18n.transaction.installmentNumber),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function ot(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",3),f.Tb(1,"form",4),f.Tb(2,"div",5),f.Fc(3,Xe,5,3,"ng-container",6),f.Tb(4,"div",7),f.Ob(5,"single-selection-field",8),f.Sb(),f.Fc(6,tt,3,3,"div",9),f.Tb(7,"div",7),f.Ob(8,"date-field",10),f.Sb(),f.Tb(9,"div",7),f.Ob(10,"date-field",11),f.Sb(),f.Tb(11,"div",7),f.Ob(12,"user-field",12),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(13,"results-layout",13),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(14,"async"),f.Fc(15,nt,3,6,"mobile-result",14),f.Fc(16,ct,14,7,"table",15),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.i18n.transaction.title.scheduled)("mobileHeading",a.i18n.transaction.mobileTitle.scheduled),f.zb(1),f.kc("formGroup",a.form),f.zb(2),f.kc("ngIf",a.data.user&&!a.self),f.zb(2),f.kc("label",a.i18n.general.status)("fieldOptions",a.statusOptions),f.zb(1),f.kc("ngIf",(null==a.data.accountTypes?null:a.data.accountTypes.length)>1),f.zb(2),f.kc("label",a.i18n.general.beginDate),f.zb(2),f.kc("label",a.i18n.general.endDate),f.zb(2),f.kc("label",a.i18n.general.user),f.zb(1),f.kc("results",f.fc(14,13,a.results$))("toLink",a.toLink)("rendering$",a.rendering$)}}var lt,st=((lt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).installmentsService=a,c.bankingHelper=i,c.transactionStatusService=r,c.currencies=new Map,c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.param=this.route.snapshot.params.owner,this.self=this.authHelper.isSelf(this.param),this.stateManager.cache("data",this.installmentsService.getInstallmentsDataForSearch({owner:this.param,fields:["user","accountTypes","query"]})).subscribe((function(t){e.bankingHelper.preProcessPreselectedPeriods(t,e.form),(t.accountTypes||[]).forEach((function(t){var n=t.currency;e.currencies.set(n.id,n),Object(l.h)(n.internalName)||e.currencies.set(n.internalName,n)})),e.data=t}))}},{key:"getFormControlNames",value:function(){return["status","accountType","transferFilter","user","preselectedPeriod","periodBegin","periodEnd"]}},{key:"getInitialFormValue",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getInitialFormValue",this).call(this,e);return t.status=a.G.SCHEDULED,t}},{key:"toSearchParams",value:function(e){var t=e;return t.owner=this.param,t.accountTypes=e.accountType?[e.accountType]:null,t.transferFilters=e.transferFilter?[e.transferFilter]:null,t.datePeriod=this.bankingHelper.resolveDatePeriod(e),t.statuses=[e.status],t}},{key:"resolveMenu",value:function(e){return this.authHelper.userMenu(e.user,s.b.SCHEDULED_PAYMENTS)}},{key:"doSearch",value:function(e){return this.installmentsService.searchInstallments$Response(e)}},{key:"number",value:function(e){return e.totalInstallments?this.i18n.transaction.installmentNumberOfTotal({number:e.number,total:e.totalInstallments}):String(e.number)}},{key:"statusOptions",get:function(){var e=this;return Object.values(a.G).map((function(t){return{value:t,text:e.transactionStatusService.installmentStatus(t)}}))}},{key:"toLink",get:function(){var e=this;return function(t){return e.bankingHelper.transactionPath(t.transaction)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||lt)(f.Nb(f.r),f.Nb(i.q),f.Nb(r.a),f.Nb(We.a))},lt.\u0275cmp=f.Hb({type:lt,selectors:[["search-owner-installments"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form",3,"formGroup"],[1,"row"],[4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","status",3,"label","fieldOptions"],["class","col-12 col-md-6",4,"ngIf"],["labelPosition","side","formControlName","periodBegin","minDate","past5","maxDate","future5","fieldSize","full",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past5","maxDate","future5","fieldSize","full",3,"label"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","toLink","rendering$","update"],["forceSign","",3,"date","amount","avatarImage","avatarIcon","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["kind","fieldView",3,"label"],[3,"user"],["labelPosition","side","formControlName","accountType",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["forceSign","",3,"date","amount","avatarImage","avatarIcon","currency"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar",3,"ngClass"],[3,"image","icon"],[3,"routerLink"],[1,"d-inline-block",3,"routerLink"],[3,"routerLink","ngClass"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Ke,1,0,"ng-container",1),f.Sb(),f.Fc(3,ot,17,15,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,T.a,y.v,y.l,w.a,F.a,h.a,g.a,v.a,k.a,S.a,m.s,z.a,j.a,m.q,B.a,J.h],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),lt);function ut(e,t){1&e&&f.Pb(0)}function bt(e,t){1&e&&f.Ob(0,"div",7)}function ft(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",7),f.Tb(2,"label-value",14),f.Ob(3,"user-link",15),f.Sb(),f.Sb(),f.Fc(4,bt,1,0,"div",9),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("user",n.data.user),f.zb(1),f.kc("ngIf",n.layout.gtsm$)}}function dt(e,t){if(1&e&&f.Ob(0,"field-option",18),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.name)}}function mt(e,t){if(1&e&&(f.Tb(0,"div",7),f.Tb(1,"single-selection-field",16),f.Fc(2,dt,1,2,"field-option",17),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.transaction.account)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.data.accountTypes)}}function pt(e,t){if(1&e&&f.Ob(0,"field-option",21),2&e){var n=t.$implicit;f.kc("id",n.id)("value",n)("text",n.name)}}function ht(e,t){if(1&e&&(f.Tb(0,"div",7),f.Tb(1,"single-selection-field",19),f.Fc(2,pt,1,3,"field-option",20),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.period),f.zb(1),f.kc("ngForOf",n.data.preselectedPeriods)}}function gt(e,t){if(1&e&&f.Ob(0,"field-option",24),2&e){var n=t.$implicit;f.kc("value",n)("id",n.id)("text",n.name)}}function vt(e,t){if(1&e&&(f.Tb(0,"div",7),f.Tb(1,"single-selection-field",22),f.Fc(2,gt,1,3,"field-option",23),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.account.transferFilter)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.transferFilters$.value)}}function yt(e,t){if(1&e&&(f.Tb(0,"div",7),f.Ob(1,"date-field",25),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.beginDate)}}function kt(e,t){if(1&e&&(f.Tb(0,"div",7),f.Ob(1,"date-field",26),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.endDate)}}function St(e,t){if(1&e&&(f.Tb(0,"mobile-result",27),f.Tb(1,"div",28),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("avatarImage",a.bankingHelper.avatarImage(n.related))("avatarIcon",a.bankingHelper.avatarIcon(n.related))("date",n.date)("amount",n.amount)("currency",a.currencies.get(n.currency)),f.zb(2),f.Jc(" ",a.bankingHelper.subjectName(n.related)," ")}}var Tt=function(e){return{"pb-0":e}},zt=function(e,t){return{positive:e,negative:t}};function wt(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",33),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.bankingHelper.transactionPath(e))})),f.Tb(2,"td",30),f.Ob(3,"avatar",34),f.Sb(),f.Tb(4,"td"),f.Tb(5,"a",35),f.Hc(6),f.ec(7,"date"),f.Sb(),f.Sb(),f.Tb(8,"td"),f.Tb(9,"a",35),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"td"),f.Tb(12,"a",36),f.Hc(13),f.Sb(),f.Sb(),f.Tb(14,"td",37),f.ec(15,"async"),f.Tb(16,"a",38),f.Hc(17),f.ec(18,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("image",i.bankingHelper.avatarImage(a.related))("icon",i.bankingHelper.avatarIcon(a.related)),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",f.fc(7,12,a.date)," "),f.zb(3),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",i.bankingHelper.subjectName(a.related)," "),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",i.bankingHelper.scheduling(a)," "),f.zb(1),f.kc("ngClass",f.nc(20,Tt,f.fc(15,14,i.layout.xxs$))),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a))("ngClass",f.oc(22,zt,i.format.isPositive(a.amount),i.format.isNegative(a.amount))),f.zb(1),f.Jc(" ",f.hc(18,16,a.amount,i.currencies.get(a.currency),!0)," ")}}function It(e,t){if(1&e&&(f.Tb(0,"table",29),f.Tb(1,"thead"),f.Ob(2,"th",30),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Tb(7,"th"),f.Hc(8),f.Sb(),f.Tb(9,"th",31),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"tbody"),f.Fc(12,wt,19,25,"ng-container",32),f.ec(13,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(13,5,a.results$))?null:n.results;f.zb(4),f.Ic(a.i18n.general.date),f.zb(2),f.Ic(a.i18n.transaction.fromTo),f.zb(2),f.Ic(a.i18n.transaction.scheduling),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function Ft(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",3),f.Tb(1,"form",4),f.Tb(2,"div",5),f.Fc(3,ft,5,3,"ng-container",6),f.Tb(4,"div",7),f.Ob(5,"single-selection-field",8),f.Sb(),f.Fc(6,mt,3,3,"div",9),f.Fc(7,ht,3,2,"div",9),f.Fc(8,vt,3,3,"div",9),f.ec(9,"async"),f.Fc(10,yt,2,1,"div",9),f.ec(11,"async"),f.Fc(12,kt,2,1,"div",9),f.ec(13,"async"),f.Tb(14,"div",7),f.Ob(15,"user-field",10),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(16,"results-layout",11),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(17,"async"),f.Fc(18,St,3,6,"mobile-result",12),f.Fc(19,It,14,7,"table",13),f.Sb()}if(2&e){var a,i,r=f.dc(),c=null==(null==(a=r.form.value||f.fc(11,17,r.form.valueChanges))||null==a.preselectedPeriod?null:a.preselectedPeriod.begin),o=null==(null==(i=r.form.value||f.fc(13,19,r.form.valueChanges))||null==i.preselectedPeriod?null:i.preselectedPeriod.end);f.kc("heading",r.heading)("mobileHeading",r.mobileHeading),f.zb(1),f.kc("formGroup",r.form),f.zb(2),f.kc("ngIf",r.data.user&&!r.self),f.zb(2),f.kc("label",r.i18n.general.status)("fieldOptions",r.statusOptions),f.zb(1),f.kc("ngIf",(null==r.data.accountTypes?null:r.data.accountTypes.length)>1),f.zb(1),f.kc("ngIf",(null==r.data.preselectedPeriods?null:r.data.preselectedPeriods.length)>0),f.zb(1),f.kc("ngIf",f.fc(9,15,r.transferFilters$).length>0),f.zb(2),f.kc("ngIf",c),f.zb(2),f.kc("ngIf",o),f.zb(3),f.kc("label",r.i18n.general.user),f.zb(1),f.kc("results",f.fc(17,21,r.results$))("toLink",r.toLink)("rendering$",r.rendering$)}}var Ot,Ct=((Ot=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).transactionsService=a,c.transactionStatusService=i,c.bankingHelper=r,c.transferFilters$=new u.a([]),c.currencies=new Map,c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot;switch(this.kind=t.data.kind,this.param=t.params.owner,this.self=this.authHelper.isSelf(this.param),this.kind){case"authorized":this.heading=this.i18n.transaction.title.authorizations,this.mobileHeading=this.i18n.transaction.mobileTitle.authorizations}this.stateManager.cache("data",this.transactionsService.getTransactionsDataForSearch({owner:this.param,fields:["user","accountTypes","visibleKinds","transferFilters","preselectedPeriods","query"]})).subscribe((function(t){e.bankingHelper.preProcessPreselectedPeriods(t,e.form),(t.accountTypes||[]).forEach((function(t){var n=t.currency;e.currencies.set(n.id,n),Object(l.h)(n.internalName)||e.currencies.set(n.internalName,n)})),e.data=t})),this.addSub(this.form.get("accountType").valueChanges.subscribe((function(t){e.form.patchValue({transferFilter:null},{emitEvent:!1});var n=e.data.transferFilters.filter((function(e){return e.accountType.id===t}));e.transferFilters$.next(n)})))}},{key:"onDataInitialized",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"onDataInitialized",this).call(this,e),this.headingActions=this.exportHelper.headingActions(e.exportFormats,(function(e){return t.transactionsService.exportTransactions$Response(Object.assign({format:e.internalName},t.toSearchParams(t.form.value)))}))}},{key:"doSearch",value:function(e){return this.transactionsService.searchTransactions$Response(e)}},{key:"getFormControlNames",value:function(){return["status","accountType","transferFilter","user","preselectedPeriod","periodBegin","periodEnd"]}},{key:"getInitialFormValue",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getInitialFormValue",this).call(this,e);switch(this.kind){case"authorized":t.status=a.rb.PENDING}return t}},{key:"toSearchParams",value:function(e){var t=e;switch(t.owner=this.param,t.accountTypes=e.accountType?[e.accountType]:null,t.transferFilters=e.transferFilter?[e.transferFilter]:null,t.datePeriod=this.bankingHelper.resolveDatePeriod(e),this.kind){case"authorized":t.authorizationStatuses=[e.status],t.authorized=!0}return t}},{key:"resolveMenu",value:function(e){var t;switch(this.kind){case"authorized":t=s.b.AUTHORIZED_PAYMENTS}return this.authHelper.userMenu(e.user,t)}},{key:"statusOptions",get:function(){var e=this;switch(this.kind){case"authorized":return Object.values(a.rb).map((function(t){return{value:t,text:e.transactionStatusService.authorizationStatus(t)}}))}}},{key:"toLink",get:function(){var e=this;return function(t){return e.bankingHelper.transactionPath(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Ot)(f.Nb(f.r),f.Nb(i.H),f.Nb(We.a),f.Nb(r.a))},Ot.\u0275cmp=f.Hb({type:Ot,selectors:[["search-owner-transactions"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form",3,"formGroup"],[1,"row"],[4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","status",3,"label","fieldOptions"],["class","col-12 col-md-6",4,"ngIf"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","toLink","rendering$","update"],["forceSign","",3,"avatarImage","avatarIcon","date","amount","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["kind","fieldView",3,"label"],[3,"user"],["labelPosition","side","formControlName","accountType",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["labelPosition","side","formControlName","preselectedPeriod",3,"label"],[3,"id","value","text",4,"ngFor","ngForOf"],[3,"id","value","text"],["labelPosition","side","formControlName","transferFilter",3,"label","emptyOption"],[3,"value","id","text",4,"ngFor","ngForOf"],[3,"value","id","text"],["labelPosition","side","formControlName","periodBegin","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["forceSign","",3,"avatarImage","avatarIcon","date","amount","currency"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[3,"image","icon"],[3,"routerLink"],[1,"d-inline-block",3,"routerLink"],[1,"amount",3,"ngClass"],[3,"routerLink","ngClass"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,ut,1,0,"ng-container",1),f.Sb(),f.Fc(3,Ft,20,23,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,T.a,y.v,y.l,F.a,h.a,g.a,v.a,k.a,S.a,m.s,z.a,w.a,j.a,B.a,J.h,m.q],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),Ot);function Pt(e,t){1&e&&f.Pb(0)}function Ht(e,t){if(1&e&&(f.Tb(0,"div",8),f.Ob(1,"single-selection-field",13),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.status)("fieldOptions",n.statusOptions)}}function xt(e,t){if(1&e&&f.Ob(0,"field-option",16),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.name)}}function Dt(e,t){if(1&e&&(f.Tb(0,"div",8),f.Tb(1,"single-selection-field",14),f.Fc(2,xt,1,2,"field-option",15),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.currency)("emptyOption",n.i18n.general.notApplied),f.zb(1),f.kc("ngForOf",n.currencies)}}function Nt(e,t){if(1&e&&f.Ob(0,"field-option",19),2&e){var n=t.$implicit;f.kc("id",n.id)("value",n)("text",n.name)}}function At(e,t){if(1&e&&(f.Tb(0,"div",8),f.Tb(1,"single-selection-field",17),f.Fc(2,Nt,1,3,"field-option",18),f.Sb(),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.period),f.zb(1),f.kc("ngForOf",n.data.preselectedPeriods)}}function _t(e,t){if(1&e&&(f.Tb(0,"div",8),f.Ob(1,"date-field",20),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.beginDate)}}function $t(e,t){if(1&e&&(f.Tb(0,"div",8),f.Ob(1,"date-field",21),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.kc("label",n.i18n.general.endDate)}}function Et(e,t){if(1&e&&(f.Rb(0),f.Fc(1,At,3,2,"div",6),f.Fc(2,_t,2,1,"div",6),f.ec(3,"async"),f.Fc(4,$t,2,1,"div",6),f.ec(5,"async"),f.Qb()),2&e){var n,a,i=f.dc(2),r=null==(null==(n=i.form.value||f.fc(3,3,i.form.valueChanges))||null==n.preselectedPeriod?null:n.preselectedPeriod.begin),c=null==(null==(a=i.form.value||f.fc(5,5,i.form.valueChanges))||null==a.preselectedPeriod?null:a.preselectedPeriod.end);f.zb(1),f.kc("ngIf",(null==i.data.preselectedPeriods?null:i.data.preselectedPeriods.length)>0),f.zb(1),f.kc("ngIf",r),f.zb(2),f.kc("ngIf",c)}}var Rt=function(e,t){return{from:e,to:t}};function Ut(e,t){if(1&e&&(f.Tb(0,"mobile-result",22),f.Tb(1,"div",23),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("date",n.date)("amount",n.amount)("currency",a.currenciesByKey.get(n.currency)),f.zb(2),f.Jc(" ",a.i18n.transaction.fromToText(f.oc(4,Rt,a.bankingHelper.subjectName(n.from),a.bankingHelper.subjectName(n.to)))," ")}}var Mt=function(e){return{"pb-0":e}};function Lt(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",27),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.bankingHelper.transactionPath(e))})),f.Tb(2,"td"),f.Tb(3,"a",28),f.Hc(4),f.ec(5,"date"),f.Sb(),f.Sb(),f.Tb(6,"td"),f.Tb(7,"a",28),f.Hc(8),f.Sb(),f.Sb(),f.Tb(9,"td"),f.Tb(10,"a",28),f.Hc(11),f.Sb(),f.Sb(),f.Tb(12,"td"),f.Tb(13,"a",29),f.Hc(14),f.Sb(),f.Sb(),f.Tb(15,"td",30),f.ec(16,"async"),f.Tb(17,"a",28),f.Hc(18),f.ec(19,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",f.fc(5,11,a.date)," "),f.zb(3),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",i.bankingHelper.subjectName(a.from)," "),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",i.bankingHelper.subjectName(a.to)," "),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",i.bankingHelper.scheduling(a)," "),f.zb(1),f.kc("ngClass",f.nc(18,Mt,f.fc(16,13,i.layout.xxs$))),f.zb(2),f.kc("routerLink",i.bankingHelper.transactionPath(a)),f.zb(1),f.Jc(" ",f.gc(19,15,a.amount,i.currenciesByKey.get(a.currency))," ")}}function jt(e,t){if(1&e&&(f.Tb(0,"table",24),f.Tb(1,"thead"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Tb(4,"th"),f.Hc(5),f.Sb(),f.Tb(6,"th"),f.Hc(7),f.Sb(),f.Tb(8,"th"),f.Hc(9),f.Sb(),f.Tb(10,"th",25),f.Hc(11),f.Sb(),f.Sb(),f.Tb(12,"tbody"),f.Fc(13,Lt,20,20,"ng-container",26),f.ec(14,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(14,6,a.results$))?null:n.results;f.zb(3),f.Ic(a.i18n.general.date),f.zb(2),f.Ic(a.i18n.transaction.from),f.zb(2),f.Ic(a.i18n.transaction.to),f.zb(2),f.Ic(a.i18n.transaction.scheduling),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function Bt(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",3),f.Tb(1,"form",4),f.Tb(2,"div",5),f.Fc(3,Ht,2,2,"div",6),f.Fc(4,Dt,3,3,"div",6),f.Fc(5,Et,6,7,"ng-container",7),f.Tb(6,"div",8),f.Ob(7,"user-field",9),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(8,"results-layout",10),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(9,"async"),f.Fc(10,Ut,3,7,"mobile-result",11),f.Fc(11,jt,15,8,"table",12),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.heading)("mobileHeading",a.mobileHeading),f.zb(1),f.kc("formGroup",a.form),f.zb(2),f.kc("ngIf",(null==a.statusOptions?null:a.statusOptions.length)>0),f.zb(1),f.kc("ngIf",(null==a.currencies?null:a.currencies.length)>1),f.zb(1),f.kc("ngIf",a.usePeriod),f.zb(2),f.kc("label",a.i18n.general.user),f.zb(1),f.kc("results",f.fc(9,10,a.results$))("toLink",a.toLink)("rendering$",a.rendering$)}}var Jt,Vt=((Jt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).transactionsService=a,c.transactionStatusService=i,c.bankingHelper=r,c.usePeriod=!0,c.currenciesByKey=new Map,c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;switch(_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.kind=this.route.snapshot.data.kind,this.kind){case"authorized":this.heading=this.i18n.transaction.title.authorizations,this.mobileHeading=this.i18n.transaction.mobileTitle.authorizations;break;case"myAuth":this.heading=this.i18n.transaction.title.pendingMyAuthorization,this.mobileHeading=this.i18n.transaction.mobileTitle.pendingMyAuthorization,this.usePeriod=!1}this.stateManager.cache("data",this.transactionsService.getTransactionsOverviewDataForSearch({fields:["user","accountTypes"].concat(_toConsumableArray(this.usePeriod?["preselectedPeriods"]:[]),["query"])})).subscribe((function(t){e.usePeriod&&e.bankingHelper.preProcessPreselectedPeriods(t,e.form),e.data=t}))}},{key:"onDataInitialized",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"onDataInitialized",this).call(this,e),this.currencies=_toConsumableArray(new Set(e.accountTypes.map((function(e){return e.currency})))),this.currencies.sort((function(e,t){return e.name.localeCompare(t.name)})),this.currenciesByKey=new Map,this.currencies.forEach((function(e){return t.currenciesByKey.set(e.id,e)})),this.headingActions=this.exportHelper.headingActions(e.exportFormats,(function(e){return t.transactionsService.exportTransactionsOverview$Response(Object.assign({format:e.internalName},t.toSearchParams(t.form.value)))}))}},{key:"doSearch",value:function(e){return this.transactionsService.searchTransactionsOverview$Response(e)}},{key:"getFormControlNames",value:function(){return["status","currency","user","preselectedPeriod","periodBegin","periodEnd"]}},{key:"getInitialFormValue",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getInitialFormValue",this).call(this,e);switch(this.kind){case"authorized":t.status=a.rb.PENDING}return t}},{key:"toSearchParams",value:function(e){var t=e;switch(t.currencies=e.currency?[e.currency]:[],this.usePeriod&&(t.datePeriod=this.bankingHelper.resolveDatePeriod(e)),this.kind){case"authorized":t.authorizationStatuses=[e.status],t.authorized=!0;break;case"myAuth":t.pendingMyAuthorization=!0}return t}},{key:"resolveMenu",value:function(e){var t;switch(this.kind){case"authorized":t=this.dataForUiHolder.role===a.eb.BROKER?s.b.BROKER_AUTHORIZED_PAYMENTS_OVERVIEW:s.b.AUTHORIZED_PAYMENTS_OVERVIEW;break;case"myAuth":t=s.b.PENDING_MY_AUTHORIZATION}return this.authHelper.userMenu(e.user,t)}},{key:"statusOptions",get:function(){var e=this;switch(this.kind){case"authorized":return Object.values(a.rb).map((function(t){return{value:t,text:e.transactionStatusService.authorizationStatus(t)}}));case"myAuth":return null}}},{key:"toLink",get:function(){var e=this;return function(t){return e.bankingHelper.transactionPath(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Jt)(f.Nb(f.r),f.Nb(i.H),f.Nb(We.a),f.Nb(r.a))},Jt.\u0275cmp=f.Hb({type:Jt,selectors:[["search-transactions-overview"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","toLink","rendering$","update"],[3,"date","amount","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","formControlName","status",3,"label","fieldOptions"],["labelPosition","side","formControlName","currency",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["labelPosition","side","formControlName","preselectedPeriod",3,"label"],[3,"id","value","text",4,"ngFor","ngForOf"],[3,"id","value","text"],["labelPosition","side","formControlName","periodBegin","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past5","maxDate","today","fieldSize","full",3,"label"],[3,"date","amount","currency"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"],[1,"d-inline-block",3,"routerLink"],[1,"amount",3,"ngClass"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Pt,1,0,"ng-container",1),f.Sb(),f.Fc(3,Bt,12,12,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,F.a,y.v,y.l,h.a,g.a,v.a,T.a,m.s,z.a,w.a,j.a,J.h,m.q],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),Jt),Gt=n("MhyI"),qt=n("/kmK");function Qt(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"label-value",5),f.Hc(2),f.Sb(),f.Ob(3,"hr"),f.Qb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.transaction.number),f.zb(1),f.Jc(" ",n.transaction.transactionNumber," ")}}function Yt(e,t){1&e&&f.Ob(0,"hr")}function Wt(e,t){if(1&e&&(f.Tb(0,"label-value",5),f.Hc(1),f.Sb()),2&e){var n=f.dc().$implicit,a=f.dc(2);f.kc("label",a.i18n.general.performedBy),f.zb(1),f.Jc(" ",n.by.display," ")}}function Kt(e,t){if(1&e&&f.Ob(0,"label-value",8),2&e){var n=f.dc().$implicit,a=f.dc(2);f.kc("label",a.i18n.general.comments)("value",n.comments)}}function Zt(e,t){if(1&e&&(f.Rb(0),f.Fc(1,Yt,1,0,"hr",3),f.Tb(2,"label-value",5),f.Hc(3),f.Sb(),f.Fc(4,Wt,2,2,"label-value",6),f.Tb(5,"label-value",5),f.Hc(6),f.ec(7,"dateTime"),f.Sb(),f.Fc(8,Kt,1,2,"label-value",7),f.Qb()),2&e){var n=t.$implicit,a=t.first,i=f.dc(2);f.zb(1),f.kc("ngIf",!a),f.zb(1),f.kc("label",i.i18n.general.action),f.zb(1),f.Jc(" ",i.actionLabel(n)," "),f.zb(1),f.kc("ngIf",n.by),f.zb(1),f.kc("label",i.i18n.general.date),f.zb(1),f.Jc(" ",f.fc(7,7,n.date)," "),f.zb(2),f.kc("ngIf",n.comments)}}function Xt(e,t){if(1&e&&(f.Tb(0,"page-content",2),f.Fc(1,Qt,4,2,"ng-container",3),f.Fc(2,Zt,9,9,"ng-container",4),f.Sb()),2&e){var n=f.dc();f.kc("heading",n.i18n.transaction.title.authorizationHistory)("mobileHeading",n.i18n.transaction.mobileTitle.authorizationHistory),f.zb(1),f.kc("ngIf",n.transaction.transactionNumber),f.zb(1),f.kc("ngForOf",n.transaction.authorizations)}}var en,tn=((en=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).transactionsService=a,r.transactionStatusService=i,r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.paramMap.get("key");this.addSub(this.transactionsService.viewTransaction({key:t,fields:["transactionNumber","date","amount","kind","type","from","to","authorizations"]}).subscribe((function(t){e.data=t})))}},{key:"actionLabel",value:function(e){return this.transactionStatusService.authorizationAction(e.action)}},{key:"resolveMenu",value:function(e){return this.authHelper.accountMenu(e.from,e.to)}},{key:"transaction",get:function(){return this.data}}]),n}(Gt.a)).\u0275fac=function(e){return new(e||en)(f.Nb(f.r),f.Nb(i.H),f.Nb(We.a))},en.\u0275cmp=f.Hb({type:en,selectors:[["view-authorization-history"]],features:[f.wb],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading",4,"ngIf"],[3,"heading","mobileHeading"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"label"],[3,"label",4,"ngIf"],["valueFormat","break",3,"label","value",4,"ngIf"],["valueFormat","break",3,"label","value"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Xt,3,4,"page-content",1),f.Sb()),2&e&&(f.kc("ready",f.fc(1,2,t.data$)),f.zb(2),f.kc("ngIf",t.data))},directives:[d.a,m.t,p.a,m.s,k.a],pipes:[m.b,qt.a],encapsulation:2,changeDetection:0}),en),nn=n("w0j7"),an=n("Bp6V"),rn=n("0D+q"),cn=n("aLb1"),on=n("tAww"),ln=n("nznZ"),sn=n("UXR7");function un(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.number),f.zb(1),f.Jc(" ",n.transfer.transactionNumber,"\n")}}function bn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Tb(1,"a",7),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.chargedBackBy),f.zb(1),f.kc("routerLink",n.path(n.transfer.chargedBackBy)),f.zb(1),f.Jc(" ",n.transfer.chargedBackBy.display," ")}}function fn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Tb(1,"a",7),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.chargebackOf),f.zb(1),f.kc("routerLink",n.path(n.transfer.chargebackOf)),f.zb(1),f.Jc(" ",n.transfer.chargebackOf.display," ")}}function dn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.general.performedBy),f.zb(1),f.Jc(" ",n.transfer.transaction.by.display,"\n")}}function mn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.receivedBy),f.zb(1),f.Jc(" ",n.transfer.transaction.receivedBy.display,"\n")}}function pn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.channel),f.zb(1),f.Jc(" ",n.transfer.transaction.channel.name,"\n")}}function hn(e,t){1&e&&f.Ob(0,"custom-field-value",8),2&e&&f.kc("fieldValue",t.$implicit)}function gn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=t.$implicit;f.kc("label",n.flow.name),f.zb(1),f.Jc(" ",n.name,"\n")}}function vn(e,t){if(1&e&&f.Ob(0,"label-value",9),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.authorizationComments)("value",n.lastAuthComment)}}function yn(e,t){if(1&e&&f.Ob(0,"label-value",9),2&e){var n=f.dc();f.kc("label",n.i18n.general.description)("value",n.transfer.transaction.description)}}function kn(e,t){if(1&e&&(f.Tb(0,"label-value",1),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.number),f.zb(1),f.Jc(" ",n.transfer.parent.transactionNumber," ")}}function Sn(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"h2",10),f.Hc(2),f.ec(3,"async"),f.Sb(),f.Fc(4,kn,2,2,"label-value",0),f.Tb(5,"label-value",1),f.Hc(6),f.ec(7,"dateTime"),f.Sb(),f.Tb(8,"label-value",1),f.Hc(9),f.ec(10,"currency"),f.Sb(),f.Tb(11,"label-value",1),f.Ob(12,"user-link",2),f.Sb(),f.Tb(13,"label-value",1),f.Ob(14,"user-link",2),f.Sb(),f.Tb(15,"label-value",1),f.Hc(16),f.Sb(),f.Tb(17,"actions"),f.Tb(18,"a",11),f.Hc(19),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc();f.zb(2),f.Ic(f.fc(3,14,n.layout.gtxs$)?n.i18n.transaction.title.parentTransfer:n.i18n.transaction.mobileTitle.parentTransfer),f.zb(2),f.kc("ngIf",n.transfer.parent.transactionNumber),f.zb(1),f.kc("label",n.i18n.general.date),f.zb(1),f.Jc(" ",f.fc(7,16,n.transfer.parent.date)," "),f.zb(2),f.kc("label",n.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(10,18,n.transfer.parent.amount,n.transfer.parent.currency)," "),f.zb(2),f.kc("label",n.i18n.transaction.from),f.zb(1),f.kc("account",n.transfer.parent.from),f.zb(1),f.kc("label",n.i18n.transaction.to),f.zb(1),f.kc("account",n.transfer.parent.to),f.zb(1),f.kc("label",n.i18n.transaction.type),f.zb(1),f.Jc(" ",n.transfer.parent.type.name," "),f.zb(2),f.kc("routerLink",n.path(n.transfer.parent)),f.zb(1),f.Jc(" ",n.i18n.transaction.viewThisTransfer," ")}}function Tn(e,t){if(1&e&&(f.Tb(0,"div"),f.Hc(1),f.Ob(2,"user-link",2),f.Sb()),2&e){var n=f.dc().$implicit,a=f.dc(2);f.zb(1),f.Jc(" ",a.i18n.transaction.from," "),f.zb(1),f.kc("account",n.from)}}function zn(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.Qb()),2&e){var n=f.dc(3);f.zb(1),f.Jc(" ",n.i18n.transaction.to,"")}}function wn(e,t){if(1&e&&(f.Tb(0,"mobile-result",16),f.Tb(1,"div",17),f.Fc(2,Tn,3,2,"div",6),f.Tb(3,"div"),f.Fc(4,zn,2,1,"ng-container",6),f.Ob(5,"user-link",2),f.Sb(),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("date",n.date)("amount",((null==n.from.user?null:n.from.user.id)===(null==a.login.user?null:a.login.user.id)?"-":"")+n.amount)("amountColor",(null==n.from.user?null:n.from.user.id)===(null==a.login.user?null:a.login.user.id))("currency",n.currency),f.zb(2),f.kc("ngIf",(null==n.from.user?null:n.from.user.id)!==(null==a.login.user?null:a.login.user.id)),f.zb(2),f.kc("ngIf",(null==n.from.user?null:n.from.user.id)!==(null==a.login.user?null:a.login.user.id)),f.zb(1),f.kc("account",n.to)}}function In(e,t){if(1&e){var n=f.Ub();f.Tb(0,"tr",21),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(1,"td"),f.Tb(2,"a",7),f.Hc(3),f.ec(4,"date"),f.Sb(),f.Sb(),f.Tb(5,"td"),f.Tb(6,"a",7),f.Ob(7,"user-link",2),f.Sb(),f.Sb(),f.Tb(8,"td"),f.Tb(9,"a",7),f.Ob(10,"user-link",2),f.Sb(),f.Sb(),f.Tb(11,"td",19),f.Tb(12,"a",7),f.Hc(13),f.ec(14,"currency"),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.fc(4,8,a.date)," "),f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.kc("account",a.from),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.kc("account",a.to),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.gc(14,10,a.amount,a.currency)," ")}}function Fn(e,t){if(1&e&&(f.Tb(0,"table",18),f.Tb(1,"thead"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Tb(4,"th"),f.Hc(5),f.Sb(),f.Tb(6,"th"),f.Hc(7),f.Sb(),f.Tb(8,"th",19),f.Hc(9),f.Sb(),f.Sb(),f.Tb(10,"tbody"),f.Fc(11,In,15,13,"tr",20),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(3),f.Ic(n.i18n.general.date),f.zb(2),f.Ic(n.i18n.transaction.from),f.zb(2),f.Ic(n.i18n.transaction.to),f.zb(2),f.Ic(n.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",n.transfer.children)}}function On(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"h2",12),f.Hc(2),f.ec(3,"async"),f.Sb(),f.Tb(4,"results-layout",13),f.Fc(5,wn,6,7,"mobile-result",14),f.Fc(6,Fn,12,5,"table",15),f.Sb(),f.Qb()),2&e){var n=f.dc();f.zb(2),f.Ic(f.fc(3,3,n.layout.gtxs$)?n.i18n.transaction.title.childTransfers:n.i18n.transaction.mobileTitle.childTransfers),f.zb(2),f.kc("results",n.transfer.children)("toLink",n.toLink)}}var Cn,Pn=((Cn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).bankingHelper=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var e=this.transfer.transaction||{};Object(l.h)(e.authorizations)||(this.lastAuthComment=e.authorizations[0].comments),this.hasAdditionalData=!Object(l.h)(this.lastAuthComment)||!!this.transfer.parent||!Object(l.h)(this.transfer.children)}},{key:"path",value:function(e){return["/banking","transfer",this.bankingHelper.transactionNumberOrId(e)]}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(P.a)).\u0275fac=function(e){return new(e||Cn)(f.Nb(f.r),f.Nb(r.a))},Cn.\u0275cmp=f.Hb({type:Cn,selectors:[["transfer-details"]],inputs:{transfer:"transfer",headingActions:"headingActions"},features:[f.wb],decls:24,vars:27,consts:[[3,"label",4,"ngIf"],[3,"label"],[3,"account"],[3,"fieldValue",4,"ngFor","ngForOf"],[3,"label",4,"ngFor","ngForOf"],["valueFormat","break",3,"label","value",4,"ngIf"],[4,"ngIf"],[3,"routerLink"],[3,"fieldValue"],["valueFormat","break",3,"label","value"],[1,"mt-4"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"mt-4","mb-0"],[3,"results","toLink"],[3,"date","amount","amountColor","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"date","amount","amountColor","currency"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"text-right"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(f.Fc(0,un,2,2,"label-value",0),f.Tb(1,"label-value",1),f.Hc(2),f.ec(3,"dateTime"),f.Sb(),f.Tb(4,"label-value",1),f.Hc(5),f.ec(6,"currency"),f.Sb(),f.Fc(7,bn,3,3,"label-value",0),f.Fc(8,fn,3,3,"label-value",0),f.Fc(9,dn,2,2,"label-value",0),f.Fc(10,mn,2,2,"label-value",0),f.Tb(11,"label-value",1),f.Ob(12,"user-link",2),f.Sb(),f.Tb(13,"label-value",1),f.Ob(14,"user-link",2),f.Sb(),f.Tb(15,"label-value",1),f.Hc(16),f.Sb(),f.Fc(17,pn,2,2,"label-value",0),f.Fc(18,hn,1,1,"custom-field-value",3),f.Fc(19,gn,2,2,"label-value",4),f.Fc(20,vn,1,2,"label-value",5),f.Fc(21,yn,1,2,"label-value",5),f.Fc(22,Sn,20,21,"ng-container",6),f.Fc(23,On,7,5,"ng-container",6)),2&e&&(f.kc("ngIf",t.transfer.transactionNumber),f.zb(1),f.kc("label",t.i18n.general.date),f.zb(1),f.Jc(" ",f.fc(3,22,t.transfer.date),"\n"),f.zb(2),f.kc("label",t.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(6,24,t.transfer.amount,t.transfer.currency),"\n"),f.zb(2),f.kc("ngIf",t.transfer.chargedBackBy),f.zb(1),f.kc("ngIf",t.transfer.chargebackOf),f.zb(1),f.kc("ngIf",null==t.transfer.transaction?null:t.transfer.transaction.by),f.zb(1),f.kc("ngIf",null==t.transfer.transaction?null:t.transfer.transaction.receivedBy),f.zb(1),f.kc("label",t.i18n.transaction.from),f.zb(1),f.kc("account",t.transfer.from),f.zb(1),f.kc("label",t.i18n.transaction.to),f.zb(1),f.kc("account",t.transfer.to),f.zb(1),f.kc("label",t.i18n.transaction.type),f.zb(1),f.Jc(" ",t.transfer.type.name,"\n"),f.zb(1),f.kc("ngIf",null==t.transfer.transaction?null:t.transfer.transaction.channel),f.zb(1),f.kc("ngForOf",null==t.transfer.transaction?null:t.transfer.transaction.customValues),f.zb(1),f.kc("ngForOf",t.transfer.statuses),f.zb(1),f.kc("ngIf",t.lastAuthComment),f.zb(1),f.kc("ngIf",null==t.transfer.transaction?null:t.transfer.transaction.description),f.zb(1),f.kc("ngIf",t.transfer.parent),f.zb(1),f.kc("ngIf",(null==t.transfer.children?null:t.transfer.children.length)>0))},directives:[m.t,k.a,S.a,m.s,J.h,ln.a,sn.a,h.a,g.a,v.a,j.a],pipes:[qt.a,H.a,m.b,V.a],encapsulation:2,changeDetection:0}),Cn),Hn=n("Wpnw"),xn=n("978R"),Dn=n("H4pW");function Nn(e,t){if(1&e&&f.Ob(0,"transfer-details",5),2&e){var n=f.dc(2);f.kc("transfer",n.transaction.transfer)}}function An(e,t){if(1&e&&(f.Tb(0,"page-content",3),f.ec(1,"async"),f.Fc(2,Nn,1,1,"transfer-details",4),f.Sb()),2&e){var n=f.dc(),a=f.uc(4);f.kc("heading",n.title)("mobileHeading",n.mobileTitle)("headingActions",f.fc(1,5,n.headingActions$)),f.zb(2),f.kc("ngIf",n.transaction.transfer)("ngIfElse",a)}}function _n(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.number),f.zb(1),f.Jc(" ",n.transaction.transactionNumber," ")}}function $n(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"currency"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.dueAmount),f.zb(1),f.Jc(" ",f.gc(2,2,n.transaction.dueAmount,n.transaction.currency)," ")}}function En(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.general.performedBy),f.zb(1),f.Jc(" ",n.transaction.by.display," ")}}function Rn(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.receivedBy),f.zb(1),f.Jc(" ",n.transaction.receivedBy.display," ")}}function Un(e,t){if(1&e&&f.Ob(0,"user-link",15),2&e){var n=f.dc(2);f.kc("user",n.transaction.fromUser)}}function Mn(e,t){if(1&e&&f.Hc(0),2&e){var n=f.dc(2);f.Jc(" ",n.transaction.type.from.name," ")}}function Ln(e,t){if(1&e&&f.Ob(0,"user-link",15),2&e){var n=f.dc(2);f.kc("user",n.transaction.toUser)}}function jn(e,t){if(1&e&&f.Hc(0),2&e){var n=f.dc(2);f.Jc(" ",n.transaction.type.to.name," ")}}function Bn(e,t){1&e&&f.Ob(0,"custom-field-value",16),2&e&&f.kc("fieldValue",t.$implicit)}function Jn(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.channel),f.zb(1),f.Jc(" ",n.transaction.channel.name," ")}}function Vn(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"date"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.dueDate),f.zb(1),f.Jc(" ",f.fc(2,2,n.transaction.installments[0].dueDate)," ")}}function Gn(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"date"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.nextOccurrence),f.zb(1),f.Jc(" ",f.fc(2,2,n.transaction.nextOccurrenceDate)," ")}}function qn(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.occurrencesCount),f.zb(1),f.Jc(" ",n.transaction.occurrencesCount," ")}}function Qn(e,t){if(1&e&&f.Ob(0,"label-value",17),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.authorizationComments)("value",n.lastAuthComment)}}function Yn(e,t){if(1&e&&f.Ob(0,"label-value",17),2&e){var n=f.dc(2);f.kc("label",n.i18n.general.description)("value",n.transaction.description)}}function Wn(e,t){1&e&&f.Ob(0,"th",23)}function Kn(e,t){if(1&e&&(f.Tb(0,"thead"),f.Tb(1,"th"),f.Hc(2),f.Sb(),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Tb(7,"th",21),f.Hc(8),f.Sb(),f.Fc(9,Wn,1,0,"th",22),f.Sb()),2&e){var n=f.dc(3);f.zb(2),f.Ic(n.i18n.transaction.installmentNumber),f.zb(2),f.Ic(n.i18n.transaction.dueDate),f.zb(2),f.Ic(n.i18n.general.status),f.zb(2),f.Ic(n.i18n.transaction.amount),f.zb(1),f.kc("ngIf",n.hasActions)}}function Zn(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",31),f.bc("click",(function(){f.wc(n);var e=f.dc(2).$implicit;return f.dc(3).processInstallment(e)})),f.Ob(1,"icon",32),f.Sb()}if(2&e){var a=f.dc(5);f.kc("tooltip",a.i18n.transaction.processInstallment)}}var Xn=function(e){return{"ml-2":e}};function ea(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",33),f.bc("click",(function(){f.wc(n);var e=f.dc(2).$implicit;return f.dc(3).settleInstallment(e)})),f.Ob(1,"icon",34),f.Sb()}if(2&e){var a=f.dc(2).$implicit,i=f.dc(3);f.kc("tooltip",i.i18n.transaction.settleInstallment)("ngClass",f.nc(2,Xn,a.canProcess))}}function ta(e,t){if(1&e&&(f.Tb(0,"td",28),f.Fc(1,Zn,2,1,"button",29),f.Fc(2,ea,2,4,"button",30),f.Sb()),2&e){var n=f.dc().$implicit;f.zb(1),f.kc("ngIf",n.canProcess),f.zb(1),f.kc("ngIf",n.canSettle)}}var na=function(e){return{"cursor-pointer":e}};function aa(e,t){if(1&e){var n=f.Ub();f.Tb(0,"tr",24),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.path(e)?a.router.navigate(a.path(e)):null})),f.Tb(1,"td"),f.Tb(2,"maybe-link",25),f.Hc(3),f.Sb(),f.Sb(),f.Tb(4,"td"),f.Tb(5,"maybe-link",25),f.Hc(6),f.ec(7,"date"),f.Sb(),f.Sb(),f.Tb(8,"td"),f.Tb(9,"maybe-link",25),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"td",26),f.Tb(12,"maybe-link",25),f.Hc(13),f.ec(14,"currency"),f.Sb(),f.Sb(),f.Fc(15,ta,3,2,"td",27),f.Sb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.kc("ngClass",f.nc(15,na,i.path(a))),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",a.number," "),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",f.fc(7,10,a.dueDate)," "),f.zb(3),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",i.installmentStatus(a.status)," "),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",f.gc(14,12,a.amount,i.transaction.currency)," "),f.zb(2),f.kc("ngIf",i.hasActions)}}function ia(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"h2",18),f.Hc(2),f.Sb(),f.Tb(3,"table",19),f.Fc(4,Kn,10,5,"thead",14),f.ec(5,"async"),f.Tb(6,"tbody"),f.Fc(7,aa,16,17,"tr",20),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.Ic(n.i18n.transaction.installments),f.zb(2),f.kc("ngIf",f.fc(5,3,n.layout.gtxs$)),f.zb(3),f.kc("ngForOf",n.transaction.installments)}}function ra(e,t){1&e&&f.Ob(0,"th",23)}function ca(e,t){if(1&e&&(f.Tb(0,"thead"),f.Tb(1,"th"),f.Hc(2),f.Sb(),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Tb(7,"th",26),f.Hc(8),f.Sb(),f.Fc(9,ra,1,0,"th",22),f.Sb()),2&e){var n=f.dc(3);f.zb(2),f.Ic(n.i18n.transaction.installmentNumber),f.zb(2),f.Ic(n.i18n.general.date),f.zb(2),f.Ic(n.i18n.general.status),f.zb(2),f.Ic(n.i18n.transaction.amount),f.zb(1),f.kc("ngIf",n.hasActions)}}function oa(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",31),f.bc("click",(function(){f.wc(n);var e=f.dc(2).$implicit;return f.dc(3).processOccurrence(e)})),f.Ob(1,"icon",32),f.Sb()}if(2&e){var a=f.dc(5);f.kc("tooltip",a.i18n.transaction.processFailedOccurrence)}}function la(e,t){if(1&e&&(f.Tb(0,"td",23),f.Fc(1,oa,2,1,"button",29),f.Sb()),2&e){var n=f.dc().$implicit;f.zb(1),f.kc("ngIf",n.canProcess)}}function sa(e,t){if(1&e){var n=f.Ub();f.Tb(0,"tr",24),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.path(e)?a.router.navigate(a.path(e)):null})),f.Tb(1,"td"),f.Tb(2,"maybe-link",25),f.Hc(3),f.Sb(),f.Sb(),f.Tb(4,"td"),f.Tb(5,"maybe-link",25),f.Hc(6),f.ec(7,"date"),f.Sb(),f.Sb(),f.Tb(8,"td"),f.Tb(9,"maybe-link",25),f.Hc(10),f.Sb(),f.Sb(),f.Tb(11,"td",26),f.Tb(12,"maybe-link",25),f.Hc(13),f.ec(14,"currency"),f.Sb(),f.Sb(),f.Fc(15,la,2,1,"td",22),f.Sb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.kc("ngClass",f.nc(15,na,i.path(a))),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",a.number," "),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",f.fc(7,10,a.dueDate)," "),f.zb(3),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",i.installmentStatus(a.status)," "),f.zb(2),f.kc("link",i.path(a)),f.zb(1),f.Jc(" ",f.gc(14,12,a.amount,i.transaction.currency)," "),f.zb(2),f.kc("ngIf",i.hasActions)}}function ua(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"h2",18),f.Hc(2),f.Sb(),f.Tb(3,"table",35),f.Fc(4,ca,10,5,"thead",14),f.ec(5,"async"),f.Tb(6,"tbody"),f.Fc(7,sa,16,17,"tr",20),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.Jc(" ",n.i18n.transaction.occurrences," "),f.zb(2),f.kc("ngIf",f.fc(5,3,n.layout.gtxs$)),f.zb(3),f.kc("ngForOf",n.transaction.occurrences)}}var ba=function(){return[]};function fa(e,t){if(1&e&&(f.Fc(0,_n,2,2,"label-value",6),f.Ob(1,"label-value",7),f.Tb(2,"label-value",8),f.Hc(3),f.ec(4,"dateTime"),f.Sb(),f.Tb(5,"label-value",8),f.Hc(6),f.ec(7,"currency"),f.Sb(),f.Fc(8,$n,3,5,"label-value",6),f.Fc(9,En,2,2,"label-value",6),f.Fc(10,Rn,2,2,"label-value",6),f.Tb(11,"label-value",8),f.Fc(12,Un,1,1,"user-link",9),f.Fc(13,Mn,1,1,"ng-template",null,10,f.Gc),f.Sb(),f.Tb(15,"label-value",8),f.Fc(16,Ln,1,1,"user-link",9),f.Fc(17,jn,1,1,"ng-template",null,11,f.Gc),f.Sb(),f.Tb(19,"label-value",8),f.Hc(20),f.Sb(),f.Fc(21,Bn,1,1,"custom-field-value",12),f.Fc(22,Jn,2,2,"label-value",6),f.Fc(23,Vn,3,4,"label-value",6),f.Fc(24,Gn,3,4,"label-value",6),f.Fc(25,qn,2,2,"label-value",6),f.Fc(26,Qn,1,2,"label-value",13),f.Fc(27,Yn,1,2,"label-value",13),f.Fc(28,ia,8,5,"ng-container",14),f.Fc(29,ua,8,5,"ng-container",14)),2&e){var n=f.uc(14),a=f.uc(18),i=f.dc();f.kc("ngIf",i.transaction.transactionNumber),f.zb(1),f.kc("label",i.i18n.general.status)("value",i.status),f.zb(1),f.kc("label",i.i18n.general.date),f.zb(1),f.Jc(" ",f.fc(4,27,i.transaction.date)," "),f.zb(2),f.kc("label",i.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(7,29,i.transaction.amount,i.transaction.currency)," "),f.zb(2),f.kc("ngIf",i.hasDueAmount),f.zb(1),f.kc("ngIf",i.transaction.by),f.zb(1),f.kc("ngIf",null==i.transaction?null:i.transaction.receivedBy),f.zb(1),f.kc("label",i.i18n.transaction.from),f.zb(1),f.kc("ngIf",i.transaction.fromUser)("ngIfElse",n),f.zb(3),f.kc("label",i.i18n.transaction.to),f.zb(1),f.kc("ngIf",i.transaction.toUser)("ngIfElse",a),f.zb(3),f.kc("label",i.i18n.transaction.type),f.zb(1),f.Jc(" ",i.transaction.type.name," "),f.zb(1),f.kc("ngForOf",i.transaction.customValues),f.zb(1),f.kc("ngIf",i.transaction.channel),f.zb(1),f.kc("ngIf",1===(i.transaction.installments||f.mc(32,ba)).length),f.zb(1),f.kc("ngIf",i.transaction.nextOccurrenceDate),f.zb(1),f.kc("ngIf",i.transaction.occurrencesCount),f.zb(1),f.kc("ngIf",i.lastAuthComment),f.zb(1),f.kc("ngIf",i.transaction.description),f.zb(1),f.kc("ngIf",(i.transaction.installments||f.mc(33,ba)).length>1),f.zb(1),f.kc("ngIf",(i.transaction.occurrences||f.mc(34,ba)).length>0)}}var da,ma=((da=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r,c,o,l,s,u){var b;return _classCallCheck(this,n),(b=t.call(this,e)).transactionsService=a,b.installmentsService=i,b.transactionStatusService=r,b.pendingPaymentsService=c,b.scheduledPaymentsService=o,b.recurringPaymentsService=l,b.transfersService=s,b.operationHelper=u,b.hasDueAmount=!1,b.hasActions=!1,b}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.addSub(this.transactionsService.viewTransaction({key:this.key}).subscribe((function(t){var n;n=_slicedToArray(e.titles(t.kind),2),e.title=n[0],e.mobileTitle=n[1],e.headingActions=e.initActions(t),e.hasDueAmount=t.dueAmount&&!e.format.isZero(t.dueAmount),e.hasActions=!!(t.installments||t.occurrences||[]).find((function(e){return e.canProcess||e.canSettle})),e.data=t,t.transfer&&(t.transfer.transaction=t),Object(l.h)(t.authorizations)||(e.lastAuthComment=t.authorizations[0].comments)})))}},{key:"initActions",value:function(e){var t,n,i=this,r=this.exportHelper.headingActions(e.exportFormats,(function(t){return i.transactionsService.exportTransaction$Response({format:t.internalName,key:e.id})})),c=e.authorizationPermissions||{};Object(l.h)(e.authorizations)||r.push(new on.c("check_circle_outline",this.i18n.transaction.viewAuthorizations,(function(){return i.router.navigate(["banking","transaction",i.key,"authorization-history"])}))),c.authorize&&r.push(new on.c("thumb_up",this.i18n.transaction.authorizePending,(function(){return i.authorize()}))),c.deny&&r.push(new on.c("thumb_down",this.i18n.transaction.denyPending,(function(){return i.deny()}))),c.cancel&&r.push(new on.c("cancel",this.i18n.transaction.cancelAuthorization,(function(){return i.cancelAuthorization()})));var o=e.scheduledPaymentPermissions||{};o.block&&r.push(new on.c("block",this.i18n.transaction.blockScheduling,(function(){return i.blockScheduled()}))),o.unblock&&r.push(new on.c("schedule",this.i18n.transaction.unblockScheduling,(function(){return i.unblockScheduled()}))),o.cancel&&r.push(new on.c("cancel",this.i18n.transaction.cancelScheduled,(function(){return i.cancelScheduled()}))),o.settle&&r.push(new on.c("done_all",this.i18n.transaction.settleScheduled,(function(){return i.settleScheduled()}))),e.kind===a.sb.SCHEDULED_PAYMENT&&1===e.installments.length&&e.installments[0].canProcess&&r.push(new on.c("play_circle_outline",this.i18n.transaction.processScheduled,(function(){return i.processScheduled(e.installments[0])}))),(null===(t=e.recurringPaymentPermissions)||void 0===t?void 0:t.cancel)&&r.push(new on.c("cancel",this.i18n.transaction.cancelRecurring,(function(){return i.cancelRecurring()}))),(null===(n=e.transfer)||void 0===n?void 0:n.canChargeback)&&r.push(new on.c("undo",this.i18n.transaction.chargebackTransfer,(function(){return i.chargeback()})));var s,u=_createForOfIteratorHelper((e.transfer||{}).operations||[]);try{for(u.s();!(s=u.n()).done;){var b=s.value;r.push(this.operationHelper.headingAction(b,e.transfer.id))}}catch(f){u.e(f)}finally{u.f()}return r}},{key:"authDeviceConfirmation",value:function(e){var t=this;return function(){return{type:a.s.MANAGE_AUTHORIZATION,transaction:t.transaction.id,authorizationAction:e}}}},{key:"authorize",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.authorizePending,labelPosition:"above",customFields:this.authorizationFields,passwordInput:this.transaction.confirmationPasswordInput,createDeviceConfirmation:this.authDeviceConfirmation(a.h.AUTHORIZE),callback:function(t){e.addSub(e.pendingPaymentsService.authorizePendingPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword,body:{comments:t.customValues.comments}}).subscribe((function(t){t?e.notification.warning(e.i18n.transaction.authorizePendingDoneStillPending):e.notification.snackBar(e.i18n.transaction.authorizePendingDone),e.reload()})))}})}},{key:"deny",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.denyPending,labelPosition:"above",customFields:this.authorizationFields,createDeviceConfirmation:this.authDeviceConfirmation(a.h.DENY),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.pendingPaymentsService.denyPendingPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword,body:{comments:t.customValues.comments}}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.denyPendingDone)})))}})}},{key:"cancelAuthorization",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.cancelAuthorization,labelPosition:"above",customFields:this.authorizationFields,createDeviceConfirmation:this.authDeviceConfirmation(a.h.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.pendingPaymentsService.cancelPendingPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword,body:{comments:t.customValues.comments}}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.cancelAuthorizationDone)})))}})}},{key:"schedDeviceConfirmation",value:function(e){var t=this;return function(){return{type:a.s.MANAGE_SCHEDULED_PAYMENT,transaction:t.transaction.id,scheduledPaymentAction:e}}}},{key:"blockScheduled",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.blockScheduling,message:this.i18n.transaction.blockSchedulingMessage,createDeviceConfirmation:this.schedDeviceConfirmation(a.fb.BLOCK),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.scheduledPaymentsService.blockScheduledPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.blockSchedulingDone)})))}})}},{key:"unblockScheduled",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.unblockScheduling,message:this.i18n.transaction.unblockSchedulingMessage,createDeviceConfirmation:this.schedDeviceConfirmation(a.fb.UNBLOCK),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.scheduledPaymentsService.unblockScheduledPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.unblockSchedulingDone)})))}})}},{key:"cancelScheduled",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.cancelScheduled,message:this.i18n.transaction.cancelScheduledMessage,createDeviceConfirmation:this.schedDeviceConfirmation(a.fb.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.scheduledPaymentsService.cancelScheduledPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.cancelScheduledDone)})))}})}},{key:"settleScheduled",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.settleScheduled,message:this.i18n.transaction.settleScheduledMessage,createDeviceConfirmation:this.schedDeviceConfirmation(a.fb.SETTLE),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.scheduledPaymentsService.settleScheduledPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.settleScheduledDone)})))}})}},{key:"recurrDeviceConfirmation",value:function(e){var t=this;return function(){return{type:a.s.MANAGE_RECURRING_PAYMENT,transaction:t.transaction.id,recurringPaymentAction:e}}}},{key:"cancelRecurring",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.cancelRecurring,message:this.i18n.transaction.cancelRecurringMessage,createDeviceConfirmation:this.recurrDeviceConfirmation(a.bb.CANCEL),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.recurringPaymentsService.cancelRecurringPayment({key:e.transaction.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.cancelRecurringDone)})))}})}},{key:"chargebackDeviceConfirmation",value:function(){var e=this;return function(){return{type:a.s.CHARGEBACK,transfer:e.transaction.transfer.id}}}},{key:"chargeback",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.chargebackTransfer,message:this.i18n.transaction.chargebackTransferMessage,createDeviceConfirmation:this.chargebackDeviceConfirmation(),passwordInput:this.transaction.confirmationPasswordInput,callback:function(t){e.addSub(e.transfersService.chargebackTransfer({key:e.transaction.transfer.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){return e.sendNotificationAndReload(e.i18n.transaction.chargebackTransferDone)})))}})}},{key:"titles",value:function(e){switch(e){case a.sb.SCHEDULED_PAYMENT:return[this.i18n.transaction.title.detailsScheduled,this.i18n.transaction.mobileTitle.detailsScheduled];case a.sb.RECURRING_PAYMENT:return[this.i18n.transaction.title.detailsRecurring,this.i18n.transaction.mobileTitle.detailsRecurring];case a.sb.PAYMENT_REQUEST:return[this.i18n.transaction.title.detailsRequest,this.i18n.transaction.mobileTitle.detailsRequest];case a.sb.CHARGEBACK:return[this.i18n.transaction.title.detailsChargeback,this.i18n.transaction.mobileTitle.detailsChargeback];case a.sb.TICKET:return[this.i18n.transaction.title.detailsTicket,this.i18n.transaction.mobileTitle.detailsTicket];case a.sb.EXTERNAL_PAYMENT:return[this.i18n.transaction.title.detailsExternal,this.i18n.transaction.mobileTitle.detailsExternal];default:return[this.i18n.transaction.title.detailsPayment,this.i18n.transaction.mobileTitle.detailsPayment]}}},{key:"installmentStatus",value:function(e){return this.transactionStatusService.installmentStatus(e)}},{key:"path",value:function(e){var t=e.transferTransactionNumber||e.transferId;if(t)return["/banking","transfer",t]}},{key:"installmentDeviceConfirmation",value:function(e,t){return function(){return{type:a.s.MANAGE_INSTALLMENT,installment:t.id,installmentAction:e}}}},{key:"settleInstallment",value:function(e){var t=this;this.notification.confirm({title:this.i18n.transaction.settleInstallment,message:this.i18n.transaction.settleInstallmentMessage(String(e.number)),createDeviceConfirmation:this.installmentDeviceConfirmation(a.F.SETTLE,e),passwordInput:this.transaction.confirmationPasswordInput,callback:function(n){t.addSub(t.installmentsService.settleInstallment({key:e.id,confirmationPassword:n.confirmationPassword}).subscribe((function(){return t.sendNotificationAndReload(t.i18n.transaction.settleInstallmentDone)})))}})}},{key:"isScheduledPayment",value:function(){return this.data.kind===a.sb.SCHEDULED_PAYMENT}},{key:"processInstallment",value:function(e){this.notification.confirm({title:this.i18n.transaction.processInstallment,message:this.i18n.transaction.processInstallmentMessage(e.number),createDeviceConfirmation:this.installmentDeviceConfirmation(a.F.PROCESS,e),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(e.id,this.i18n.transaction.processInstallmentDone)})}},{key:"processOccurrence",value:function(e){this.notification.confirm({title:this.i18n.transaction.processFailedOccurrence,message:this.i18n.transaction.processFailedOccurrenceMessage(e.number),createDeviceConfirmation:this.failedOccurreneceDeviceConfirmation(a.x.PROCESS,e),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(e.id,this.i18n.transaction.processFailedOccurrenceDone)})}},{key:"processScheduled",value:function(e){this.notification.confirm({title:this.i18n.transaction.processScheduled,message:this.i18n.transaction.processScheduledMessage,createDeviceConfirmation:this.installmentDeviceConfirmation(a.F.PROCESS,e),passwordInput:this.transaction.confirmationPasswordInput,callback:this.processCallback(e.id,this.i18n.transaction.processScheduledDone)})}},{key:"processCallback",value:function(e,t){var n=this;return function(a){return n.addSub(n.installmentsService.processInstallment({key:e,confirmationPassword:a.confirmationPassword}).subscribe((function(){return n.sendNotificationAndReload(t)})))}}},{key:"sendNotificationAndReload",value:function(e){this.notification.snackBar(e),this.reload()}},{key:"failedOccurreneceDeviceConfirmation",value:function(e,t){return function(){return{type:a.s.MANAGE_FAILED_OCCURRENCE,failedOccurrence:t.id,failedOccurrenceAction:e}}}},{key:"resolveMenu",value:function(e){return this.authHelper.accountMenu(e.from,e.to)}},{key:"status",get:function(){return this.transactionStatusService.transactionStatus(this.transaction)}},{key:"transaction",get:function(){return this.data}},{key:"key",get:function(){return this.route.snapshot.paramMap.get("key")}},{key:"authorizationFields",get:function(){return[{internalName:"comments",name:this.i18n.general.comments,type:a.p.TEXT}]}}]),n}(Gt.a)).\u0275fac=function(e){return new(e||da)(f.Nb(f.r),f.Nb(i.H),f.Nb(i.q),f.Nb(We.a),f.Nb(nn.a),f.Nb(rn.a),f.Nb(an.a),f.Nb(i.I),f.Nb(cn.a))},da.\u0275cmp=f.Hb({type:da,selectors:[["view-transaction"]],features:[f.wb],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["transactionFields",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"transfer",4,"ngIf","ngIfElse"],[3,"transfer"],[3,"label",4,"ngIf"],[3,"label","value"],[3,"label"],[3,"user",4,"ngIf","ngIfElse"],["fromSystem",""],["toSystem",""],[3,"fieldValue",4,"ngFor","ngForOf"],["valueFormat","break",3,"label","value",4,"ngIf"],[4,"ngIf"],[3,"user"],[3,"fieldValue"],["valueFormat","break",3,"label","value"],[1,"border-0","mt-4"],[1,"table","table-hover"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"amount"],["class","actions",4,"ngIf"],[1,"actions"],[3,"ngClass","click"],[3,"link"],[1,"text-right"],["class","actions actions-multiple",4,"ngIf"],[1,"actions","actions-multiple"],["class","btn btn-icon align-items-center",3,"tooltip","click",4,"ngIf"],["class","btn btn-icon align-items-center",3,"tooltip","ngClass","click",4,"ngIf"],[1,"btn","btn-icon","align-items-center",3,"tooltip","click"],["icon","play_circle_outline"],[1,"btn","btn-icon","align-items-center",3,"tooltip","ngClass","click"],["icon","thumb_up"],[1,"table","table-hover","cursor-pointer"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,An,3,7,"page-content",1),f.Sb(),f.Fc(3,fa,30,35,"ng-template",null,2,f.Gc)),2&e&&(f.kc("ready",f.fc(1,2,t.data$)),f.zb(2),f.kc("ngIf",t.data))},directives:[d.a,m.t,p.a,Pn,k.a,m.s,S.a,ln.a,m.q,Hn.a,xn.b,Dn.a],pipes:[m.b,qt.a,H.a,V.a],encapsulation:2,changeDetection:0}),da),pa=n("4APx");function ha(e,t){1&e&&f.Pb(0)}function ga(e,t){if(1&e&&f.Ob(0,"field-option",24),2&e){var n=t.$implicit;f.kc("id",n.id)("value",n)("text",n.name)}}function va(e,t){if(1&e&&(f.Tb(0,"div",10),f.Tb(1,"single-selection-field",22),f.Fc(2,ga,1,3,"field-option",23),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.period),f.zb(1),f.kc("ngForOf",n.data.preselectedPeriods)}}function ya(e,t){if(1&e&&f.Ob(0,"field-option",27),2&e){var n=t.$implicit,a=f.dc(3);f.kc("value",a.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)("parent",n.groupSet)}}function ka(e,t){if(1&e&&(f.Tb(0,"div",10),f.Tb(1,"multi-selection-field",25),f.Fc(2,ya,1,5,"field-option",26),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.user.groupFilter),f.zb(1),f.kc("ngForOf",n.data.groups)}}function Sa(e,t){if(1&e&&f.Ob(0,"field-option",31),2&e){var n=t.$implicit,a=f.dc(3);f.kc("value",a.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function Ta(e,t){if(1&e&&f.Ob(0,"field-option",31),2&e){var n=t.$implicit,a=f.dc(3);f.kc("value",a.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)}}function za(e,t){if(1&e&&(f.Rb(0),f.Ob(1,"div",9),f.Tb(2,"div",10),f.Tb(3,"single-selection-field",28),f.Fc(4,Sa,1,4,"field-option",29),f.Sb(),f.Sb(),f.Tb(5,"div",10),f.Tb(6,"single-selection-field",30),f.Fc(7,Ta,1,4,"field-option",29),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc(2);f.zb(3),f.kc("emptyOption",n.i18n.general.notApplied)("label",n.i18n.transaction.fromAccount),f.zb(1),f.kc("ngForOf",n.data.accountTypes),f.zb(2),f.kc("emptyOption",n.i18n.general.notApplied)("label",n.i18n.transaction.toAccount),f.zb(1),f.kc("ngForOf",n.data.accountTypes)}}function wa(e,t){if(1&e&&f.Ob(0,"field-option",34),2&e){var n=t.$implicit,a=f.dc(3);f.kc("value",a.ApiHelper.internalNameOrId(n))("internalName",n.internalName)("id",n.id)("text",n.name)("category",a.singleAccount||null==n.accountType?null:n.accountType.name)}}function Ia(e,t){if(1&e&&(f.Tb(0,"div",10),f.Tb(1,"multi-selection-field",32),f.Fc(2,wa,1,5,"field-option",33),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.account.transferFilter),f.zb(1),f.kc("ngForOf",n.filters$.value)}}function Fa(e,t){if(1&e&&f.Ob(0,"field-option",37),2&e){var n=t.$implicit;f.kc("id",n.id)("internalName",n.internalName)("value",n.internalName)("text",n.name)}}function Oa(e,t){if(1&e&&(f.Tb(0,"div",10),f.Tb(1,"multi-selection-field",35),f.Fc(2,Fa,1,4,"field-option",36),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("emptyLabel",n.i18n.general.notApplied)("label",n.i18n.transaction.channel),f.zb(1),f.kc("ngForOf",n.data.channels)}}function Ca(e,t){if(1&e&&(f.Tb(0,"div",10),f.Ob(1,"date-field",38),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.beginDate)}}function Pa(e,t){if(1&e&&(f.Tb(0,"div",10),f.Ob(1,"date-field",39),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.endDate)}}function Ha(e,t){if(1&e&&(f.Tb(0,"div",10),f.Ob(1,"input-field",40),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("mask",n.transactionNumberPattern)("label",n.i18n.transaction.number)}}var xa=function(e,t){return{from:e,to:t}};function Da(e,t){if(1&e&&(f.Tb(0,"mobile-result",41),f.Tb(1,"div",42),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.kc("date",n.date)("amount",n.amount)("currency",n.currency),f.zb(2),f.Jc(" ",a.i18n.transaction.fromToText(f.oc(4,xa,a.bankingHelper.ownerName(n.from),a.bankingHelper.ownerName(n.to))),"")}}function Na(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",46),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(2,"td"),f.Tb(3,"a",47),f.Hc(4),f.ec(5,"date"),f.Sb(),f.Sb(),f.Tb(6,"td"),f.Tb(7,"a",47),f.Hc(8),f.Sb(),f.Sb(),f.Tb(9,"td"),f.Tb(10,"a",47),f.Hc(11),f.Sb(),f.Sb(),f.Tb(12,"td",44),f.Tb(13,"a",47),f.Hc(14),f.ec(15,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.fc(5,8,a.date)," "),f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",i.bankingHelper.ownerName(a.from)," "),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",i.bankingHelper.ownerName(a.to)," "),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.gc(15,10,i.format.abs(a.amount),a.currency)," ")}}function Aa(e,t){if(1&e&&(f.Tb(0,"table",43),f.Tb(1,"thead"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Tb(4,"th"),f.Hc(5),f.Sb(),f.Tb(6,"th"),f.Hc(7),f.Sb(),f.Tb(8,"th",44),f.Hc(9),f.Sb(),f.Sb(),f.Tb(10,"tbody"),f.Fc(11,Na,16,13,"ng-container",45),f.ec(12,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(12,5,a.results$))?null:n.results;f.zb(3),f.Ic(a.i18n.general.date),f.zb(2),f.Ic(a.i18n.transaction.from),f.zb(2),f.Ic(a.i18n.transaction.to),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function _a(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",4),f.ec(1,"async"),f.Tb(2,"form",5),f.Tb(3,"div",6),f.Fc(4,va,3,2,"div",7),f.Fc(5,ka,3,3,"div",7),f.Fc(6,za,8,6,"ng-container",8),f.Fc(7,Ia,3,3,"div",7),f.ec(8,"async"),f.Fc(9,Oa,3,3,"div",7),f.Ob(10,"div",9),f.Fc(11,Ca,2,1,"div",7),f.ec(12,"async"),f.Fc(13,Pa,2,1,"div",7),f.ec(14,"async"),f.Tb(15,"div",10),f.Ob(16,"decimal-field",11),f.Sb(),f.Tb(17,"div",10),f.Ob(18,"decimal-field",12),f.Sb(),f.Tb(19,"div",10),f.Ob(20,"user-field",13),f.Sb(),f.Fc(21,Ha,2,2,"div",7),f.Tb(22,"div",10),f.Tb(23,"single-selection-field",14),f.Ob(24,"field-option",15),f.Ob(25,"field-option",16),f.Ob(26,"field-option",17),f.Ob(27,"field-option",18),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(28,"results-layout",19),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(29,"async"),f.Fc(30,Da,3,7,"mobile-result",20),f.Fc(31,Aa,13,7,"table",21),f.Sb()}if(2&e){var a,i,r=f.dc(),c=null==(null==(a=r.form.value||f.fc(12,33,r.form.valueChanges))||null==a.preselectedPeriod?null:a.preselectedPeriod.begin),o=null==(null==(i=r.form.value||f.fc(14,35,r.form.valueChanges))||null==i.preselectedPeriod?null:i.preselectedPeriod.end);f.kc("heading",r.i18n.transaction.title.transfersOverview)("mobileHeading",r.i18n.transaction.mobileTitle.transfersOverview)("headingActions",f.fc(1,29,r.headingActions$)),f.zb(2),f.kc("formGroup",r.form),f.zb(2),f.kc("ngIf",(null==r.data.preselectedPeriods?null:r.data.preselectedPeriods.length)>1),f.zb(1),f.kc("ngIf",(null==r.data.groups?null:r.data.groups.length)>1),f.zb(1),f.kc("ngIf",(null==r.data.accountTypes?null:r.data.accountTypes.length)>1),f.zb(1),f.kc("ngIf",f.fc(8,31,r.filters$).length>0),f.zb(2),f.kc("ngIf",(null==r.data.channels?null:r.data.channels.length)>1),f.zb(2),f.kc("ngIf",c),f.zb(2),f.kc("ngIf",o),f.zb(3),f.kc("label",r.i18n.account.minAmount)("scale",r.singleCurrency?r.singleCurrency.decimalDigits:2)("prefix",r.singleCurrency?r.singleCurrency.prefix:null)("suffix",r.singleCurrency?r.singleCurrency.suffix:null),f.zb(2),f.kc("label",r.i18n.account.maxAmount)("scale",r.singleCurrency?r.singleCurrency.decimalDigits:2)("prefix",r.singleCurrency?r.singleCurrency.prefix:null)("suffix",r.singleCurrency?r.singleCurrency.suffix:null),f.zb(2),f.kc("label",r.i18n.general.user),f.zb(1),f.kc("ngIf",r.hasTransactionNumber),f.zb(2),f.kc("label",r.i18n.general.orderBy),f.zb(1),f.kc("text",r.i18n.account.orderBy.dateDesc),f.zb(1),f.kc("text",r.i18n.account.orderBy.dateAsc),f.zb(1),f.kc("text",r.i18n.account.orderBy.amountAsc),f.zb(1),f.kc("text",r.i18n.account.orderBy.amountDesc),f.zb(1),f.kc("results",f.fc(29,37,r.results$))("toLink",r.toLink)("rendering$",r.rendering$)}}function $a(e,t){1&e&&f.Ob(0,"spinner",48)}var Ea,Ra=((Ea=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).transfersService=a,r.bankingHelper=i,r.filters$=new u.a([]),r}return _createClass(n,[{key:"getFormControlNames",value:function(){return["preselectedPeriod","periodBegin","periodEnd","groups","channels","fromAccountType","toAccountType","transferFilters","transferKinds","chargedBack","minAmount","maxAmount","transactionNumber","user","by","orderBy"]}},{key:"getInitialFormValue",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getInitialFormValue",this).call(this,e);return t.orderBy=t.orderBy||a.pb.DATE_DESC,t}},{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.stateManager.cache("data",this.transfersService.getTransferDataForSearch()).subscribe((function(t){e.data=t}))}},{key:"onDataInitialized",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"onDataInitialized",this).call(this,e),this.singleCurrency=(e.currencies||[])[0],this.singleAccount=(e.accountTypes||[])[0];var a=(e.currencies||[]).map((function(e){return e.transactionNumberPattern})).filter((function(e){return e})).reduce((function(e,t){return e.includes(t)?e:[].concat(_toConsumableArray(e),[t])}),[]);this.hasTransactionNumber=a.length>0,this.transactionNumberPattern=1===a.length?a[0]:null,this.bankingHelper.preProcessPreselectedPeriods(e,this.form),this.addSub(this.form.controls.fromAccountType.valueChanges.subscribe((function(n){return t.updateFilters(e,n)}))),this.updateFilters(e),this.headingActions=this.exportHelper.headingActions(e.exportFormats,(function(e){return t.transfersService.exportTransfers$Response(Object.assign({format:e.internalName},t.toSearchParams(t.form.value)))}))}},{key:"toSearchParams",value:function(e){var t=e;return t.transferFilters=null==e.transferFilter?[]:[e.transferFilter.id],t.datePeriod=this.bankingHelper.resolveDatePeriod(e),t.amountRange=c.a.rangeFilter(e.minAmount,e.maxAmount),t.fields=[],t}},{key:"doSearch",value:function(e){return this.transfersService.searchTransfers$Response(e)}},{key:"path",value:function(e){return["/banking","transfer",this.bankingHelper.transactionNumberOrId(e)]}},{key:"updateFilters",value:function(e,t){var n=e.transferFilters||[];Object(l.h)(t)||(n=n.filter((function(e){return e.accountType.id===t}))),this.filters$.next(n)}},{key:"resolveMenu",value:function(){return this.dataForUiHolder.role===a.eb.ADMINISTRATOR?s.b.ADMIN_TRANSFERS_OVERVIEW:s.b.BROKER_TRANSFERS_OVERVIEW}},{key:"preselectedPeriods",get:function(){return null==this.data?null:this.data.preselectedPeriods}},{key:"transferFilters",get:function(){return null==this.data?null:this.data.transferFilters}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Ea)(f.Nb(f.r),f.Nb(i.I),f.Nb(r.a))},Ea.\u0275cmp=f.Hb({type:Ea,selectors:[["search-transfers-overview"]],features:[f.wb],decls:7,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["loadingIndicators",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[4,"ngIf"],[1,"w-100","d-none","d-sm-block"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","minAmount","fieldSize","full",3,"label","scale","prefix","suffix"],["labelPosition","side","formControlName","maxAmount","fieldSize","full",3,"label","scale","prefix","suffix"],["labelPosition","side","formControlName","user",3,"label"],["labelPosition","side","formControlName","orderBy",3,"label"],["value","dateDesc",3,"text"],["value","dateAsc",3,"text"],["value","amountAsc",3,"text"],["value","amountDesc",3,"text"],["resultType","list",3,"results","toLink","rendering$","update"],["forceSign","",3,"date","amount","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","formControlName","preselectedPeriod",3,"label"],[3,"id","value","text",4,"ngFor","ngForOf"],[3,"id","value","text"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"emptyLabel","label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],["labelPosition","side","formControlName","fromAccountType",3,"emptyOption","label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],["labelPosition","side","formControlName","toAccountType",3,"emptyOption","label"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","transferFilters",3,"emptyLabel","label"],[3,"value","internalName","id","text","category",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","category"],["labelPosition","side","formControlName","channels",3,"emptyLabel","label"],[3,"id","internalName","value","text",4,"ngFor","ngForOf"],[3,"id","internalName","value","text"],["labelPosition","side","formControlName","periodBegin","minDate","past5","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past5","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","transactionNumber",3,"mask","label"],["forceSign","",3,"date","amount","currency"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"],[1,"p-3"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,ha,1,0,"ng-container",1),f.Sb(),f.Fc(3,_a,32,39,"ng-template",null,2,f.Gc),f.Fc(5,$a,1,0,"ng-template",null,3,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,I.a,y.v,y.l,F.a,T.a,z.a,h.a,g.a,v.a,m.s,pa.a,w.a,O.a,C.a,j.a,J.h,L.a],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),Ea);function Ua(e,t){if(1&e&&(f.Tb(0,"page-content",2),f.ec(1,"async"),f.Ob(2,"transfer-details",3),f.ec(3,"async"),f.Sb()),2&e){var n=f.dc();f.kc("heading",n.i18n.transaction.title.detailsTransfer)("mobileHeading",n.i18n.transaction.mobileTitle.detailsTransfer)("headingActions",f.fc(1,5,n.headingActions$)),f.zb(2),f.kc("headingActions",f.fc(3,7,n.headingActions$))("transfer",n.transfer)}}var Ma,La=((Ma=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).bankingHelper=a,c.transfersService=i,c.operationHelper=r,c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot;this.accountId=t.params.account,this.addSub(this.transfersService.viewTransfer({key:t.params.key}).subscribe((function(t){e.headingActions=e.initActions(t),e.data=t})))}},{key:"initActions",value:function(e){var t=this,n=this.exportHelper.headingActions(e.exportFormats,(function(n){return t.transfersService.exportTransfer$Response({format:n.internalName,key:e.id})})),a=e.transaction||{};Object(l.h)(a.authorizations)||n.push(new on.c("check_circle_outline",this.i18n.transaction.viewAuthorizations,(function(){t.router.navigate(["banking","transaction",t.bankingHelper.transactionNumberOrId(a),"authorization-history"])}))),e.canChargeback&&n.push(new on.c("undo",this.i18n.transaction.chargebackTransfer,(function(){t.chargeback()})));var i,r=_createForOfIteratorHelper(e.operations||[]);try{for(r.s();!(i=r.n()).done;){var c=i.value;n.push(this.operationHelper.headingAction(c,e.id))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"chargebackDeviceConfirmation",value:function(){var e=this;return function(){return{type:a.s.CHARGEBACK,transfer:e.transfer.id}}}},{key:"chargeback",value:function(){var e=this;this.notification.confirm({title:this.i18n.transaction.chargebackTransfer,message:this.i18n.transaction.chargebackTransferMessage,createDeviceConfirmation:this.chargebackDeviceConfirmation(),passwordInput:this.transfer.confirmationPasswordInput,callback:function(t){e.addSub(e.transfersService.chargebackTransfer({key:e.transfer.id,confirmationPassword:t.confirmationPassword}).subscribe((function(){e.notification.snackBar(e.i18n.transaction.chargebackTransferDone),e.reload()})))}})}},{key:"resolveMenu",value:function(e){return this.authHelper.transferMenu(e,this.accountId)}},{key:"transfer",get:function(){return this.data}}]),n}(Gt.a)).\u0275fac=function(e){return new(e||Ma)(f.Nb(f.r),f.Nb(r.a),f.Nb(i.I),f.Nb(cn.a))},Ma.\u0275cmp=f.Hb({type:Ma,selectors:[["view-transfer"]],features:[f.wb],decls:3,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"headingActions","transfer"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Ua,4,9,"page-content",1),f.Sb()),2&e&&(f.kc("ready",f.fc(1,2,t.data$)),f.zb(2),f.kc("ngIf",t.data))},directives:[d.a,m.t,p.a,Pn],pipes:[m.b],encapsulation:2,changeDetection:0}),Ma),ja=n("bqp0");function Ba(e,t){if(1&e&&f.Ob(0,"user-info",5),2&e){var n=f.dc();f.kc("user",n.user)}}function Ja(e,t){if(1&e&&(f.Tb(0,"mobile-result",6),f.Tb(1,"div",7),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit;f.kc("avatarImage",n.image),f.zb(2),f.Jc(" ",n.voucherTitle," ")}}function Va(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",10),f.bc("click",(function(){f.wc(n);var e=t.$implicit;return f.dc(2).selectType(e)})),f.Tb(2,"td",11),f.Ob(3,"avatar",12),f.Sb(),f.Tb(4,"td"),f.Tb(5,"div"),f.Tb(6,"a",13),f.bc("click",(function(){f.wc(n);var e=t.$implicit;return f.dc(2).selectType(e)})),f.Hc(7),f.Sb(),f.Tb(8,"div"),f.Hc(9),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit;f.zb(3),f.kc("image",a.image),f.zb(4),f.Jc(" ",a.voucherTitle," "),f.zb(2),f.Jc(" ",a.voucherDescription," ")}}function Ga(e,t){if(1&e&&(f.Tb(0,"table",8),f.Tb(1,"tbody"),f.Fc(2,Va,10,3,"ng-container",9),f.Sb(),f.Sb()),2&e){var n=f.dc();f.zb(2),f.kc("ngForOf",n.types)}}var qa,Qa=((qa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,e)).typeSelected=new f.n,a}return _createClass(n,[{key:"selectType",get:function(){var e=this;return function(t){return e.typeSelected.emit(t)}}}]),n}(P.a)).\u0275fac=function(e){return new(e||qa)(f.Nb(f.r))},qa.\u0275cmp=f.Hb({type:qa,selectors:[["buy-vouchers-step-list-types"]],inputs:{types:"types",user:"user"},outputs:{typeSelected:"typeSelected"},features:[f.wb],decls:5,vars:6,consts:[[3,"mode","heading","mobileHeading"],["labelCols","2",3,"user",4,"ngIf"],["resultType","list",3,"results","onClick"],["avatarRoundBorders","false","avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelCols","2",3,"user"],["avatarRoundBorders","false","avatarIcon","user",3,"avatarImage"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar"],["icon","shopping_cart","size","xlarge","roundBorders","false",3,"image"],["ngClass","font-weight-bold",3,"click"]],template:function(e,t){1&e&&(f.Tb(0,"page-content",0),f.Fc(1,Ba,1,1,"user-info",1),f.Sb(),f.Tb(2,"results-layout",2),f.Fc(3,Ja,3,2,"mobile-result",3),f.Fc(4,Ga,3,1,"table",4),f.Sb()),2&e&&(f.kc("mode",t.user&&!t.authHelper.isSelf(t.user)?"normal":"empty")("heading",t.i18n.voucher.title.buy)("mobileHeading",t.i18n.voucher.mobileTitle.buy),f.zb(1),f.kc("ngIf",t.user&&!t.authHelper.isSelf(t.user)),f.zb(1),f.kc("results",t.types)("onClick",t.selectType))},directives:[p.a,m.t,h.a,g.a,v.a,ja.a,j.a,m.s,B.a,m.q],encapsulation:2,changeDetection:0}),qa),Ya=n("Y+zs");function Wa(e,t){if(1&e&&f.Ob(0,"user-info",8),2&e){var n=f.dc();f.kc("user",n.data.user)}}function Ka(e,t){if(1&e&&(f.Tb(0,"label-value",2),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.voucher.buy.minTimeToRedeem),f.zb(1),f.Jc(" ",n.i18n.voucher.buy.minTimeToRedeemAfterBuy(n.format.formatTimeInterval(n.data.minimumTimeToRedeem))," ")}}var Za=function(e,t){return{min:e,max:t}};function Xa(e,t){if(1&e&&(f.Ob(0,"label-value",9),f.ec(1,"currency"),f.ec(2,"currency")),2&e){var n=f.dc();f.kc("label",n.i18n.voucher.buy.amountRange)("value",n.format.formatRange(f.oc(8,Za,f.gc(1,2,n.data.amountRange.min,n.currency),f.gc(2,5,n.data.amountRange.max,n.currency))))}}function ei(e,t){if(1&e&&f.Ob(0,"custom-field-input",10),2&e){var n=t.$implicit,a=f.dc();f.kc("field",n)("formControl",a.customFieldControlsMap.get(n.internalName))}}var ti,ni=((ti=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"currency",get:function(){return this.data.account.currency}}]),n}(P.a)).\u0275fac=function(e){return new(e||ti)(f.Nb(f.r))},ti.\u0275cmp=f.Hb({type:ti,selectors:[["buy-vouchers-step-form"]],inputs:{data:"data",form:"form",customFieldControlsMap:"customFieldControlsMap"},features:[f.wb],decls:12,vars:17,consts:[[3,"formGroup"],[3,"user",4,"ngIf"],["kind","fieldView",3,"label"],["kind","fieldView",3,"label",4,"ngIf"],["type","number","formControlName","count","required","","fieldSize","small",3,"label"],["formControlName","amount","required","",3,"label","prefix","suffix","scale"],["kind","fieldView",3,"label","value",4,"ngIf"],[3,"field","formControl",4,"ngFor","ngForOf"],[3,"user"],["kind","fieldView",3,"label","value"],[3,"field","formControl"]],template:function(e,t){1&e&&(f.Rb(0,0),f.Fc(1,Wa,1,1,"user-info",1),f.Tb(2,"label-value",2),f.Hc(3),f.Sb(),f.Tb(4,"label-value",2),f.Hc(5),f.ec(6,"currency"),f.Sb(),f.Fc(7,Ka,2,2,"label-value",3),f.Ob(8,"input-field",4),f.Ob(9,"decimal-field",5),f.Fc(10,Xa,3,11,"label-value",6),f.Fc(11,ei,1,2,"custom-field-input",7),f.Qb()),2&e&&(f.kc("formGroup",t.form),f.zb(1),f.kc("ngIf",t.data.user&&!t.authHelper.isSelf(t.data.user)),f.zb(1),f.kc("label",t.i18n.voucher.buy.originAccount),f.zb(1),f.Jc(" ",t.data.account.type.name," "),f.zb(1),f.kc("label",t.i18n.account.availableBalance),f.zb(1),f.Jc(" ",f.gc(6,14,t.data.account.status.availableBalance,t.currency)," "),f.zb(2),f.kc("ngIf",t.data.minimumTimeToRedeem),f.zb(1),f.kc("label",t.i18n.voucher.buy.numberOfVouchers),f.zb(1),f.kc("label",t.i18n.voucher.buy.amountPerVoucher)("prefix",t.currency.prefix)("suffix",t.currency.suffix)("scale",t.currency.decimalDigits),f.zb(1),f.kc("ngIf",(null==t.data.amountRange?null:t.data.amountRange.min)||(null==t.data.amountRange?null:t.data.amountRange.max)),f.zb(1),f.kc("ngForOf",t.data.customFields))},directives:[y.w,y.n,m.t,k.a,O.a,y.v,y.l,y.D,I.a,m.s,ja.a,Ya.a,y.k],pipes:[H.a],encapsulation:2,changeDetection:0}),ti),ai=n("OTwK"),ii=n("k1dt"),ri=n("5Wk5"),ci=n("lS/A"),oi=n("bBjs");function li(e,t){if(1&e&&(f.Rb(0),f.Ob(1,"user-info",3),f.Qb()),2&e){var n=f.dc();f.zb(1),f.kc("user",n.data.user)}}function si(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"label-value",4),f.ec(2,"async"),f.Ob(3,"format-field-value",5,6),f.Sb(),f.Qb()),2&e){var n=t.$implicit,a=f.uc(4),i=f.dc();f.zb(1),f.kc("hidden",!a.hasValue)("label",n.name)("labelPosition",i.labelOnTop(f.fc(2,6,i.layout.ltsm$),n)?"top":"auto"),f.zb(2),f.kc("object",i.buyVoucher)("fields",i.data.customFields)("fieldName",n.internalName)}}function ui(e,t){1&e&&f.Ob(0,"hr")}function bi(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Fc(1,ui,1,0,"hr",0),f.ec(2,"async"),f.Tb(3,"form",7),f.Tb(4,"confirmation-password",8),f.bc("confirmationModeChanged",(function(e){return f.wc(n),f.dc().confirmationModeChanged.emit(e)}))("confirmed",(function(e){return f.wc(n),f.dc().confirmed.emit(e)})),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=f.dc();f.zb(1),f.kc("ngIf",f.fc(2,4,a.layout.gtxxs$)),f.zb(2),f.kc("formGroup",a.form),f.zb(1),f.kc("passwordInput",a.confirmationPasswordInput)("createDeviceConfirmation",a.createDeviceConfirmation)}}var fi,di=((fi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,e)).confirmationModeChanged=new f.n,a.confirmed=new f.n,a}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.form=this.formBuilder.group({}),this.form.setControl("confirmationPassword",this.confirmationPassword),this.createDeviceConfirmation=function(){return{type:a.s.BUY_VOUCHERS,amount:e.buyVoucher.amount,voucherType:e.data.type.id,numberOfVouchers:e.buyVoucher.count}},this.confirmationPasswordInput||this.addShortcut(ii.k,(function(){return e.confirmed.emit()}))}},{key:"labelOnTop",value:function(e,t){return!!e&&[a.p.RICH_TEXT,a.p.TEXT].includes(t?t.type:null)}}]),n}(P.a)).\u0275fac=function(e){return new(e||fi)(f.Nb(f.r))},fi.\u0275cmp=f.Hb({type:fi,selectors:[["buy-vouchers-step-confirm"]],inputs:{confirmationPasswordInput:"confirmationPasswordInput",confirmationPassword:"confirmationPassword",buyVoucher:"buyVoucher",data:"data"},outputs:{confirmationModeChanged:"confirmationModeChanged",confirmed:"confirmed"},features:[f.wb],decls:10,vars:12,consts:[[4,"ngIf"],[3,"label"],[4,"ngFor","ngForOf"],[3,"user"],[3,"hidden","label","labelPosition"],[3,"object","fields","fieldName"],["formatFieldValue",""],[3,"formGroup"],["focused","","formControlName","confirmationPassword",3,"passwordInput","createDeviceConfirmation","confirmationModeChanged","confirmed"]],template:function(e,t){1&e&&(f.Fc(0,li,2,1,"ng-container",0),f.Tb(1,"label-value",1),f.Hc(2),f.Sb(),f.Tb(3,"label-value",1),f.Hc(4),f.Sb(),f.Tb(5,"label-value",1),f.Hc(6),f.ec(7,"currency"),f.Sb(),f.Fc(8,si,5,8,"ng-container",2),f.Fc(9,bi,5,6,"ng-container",0)),2&e&&(f.kc("ngIf",t.data.user&&!t.authHelper.isSelf(t.data.user)),f.zb(1),f.kc("label",t.i18n.general.type),f.zb(1),f.Jc(" ",t.data.type.voucherTitle,"\n"),f.zb(1),f.kc("label",t.i18n.voucher.buy.numberOfVouchers),f.zb(1),f.Jc(" ",t.buyVoucher.count,"\n"),f.zb(1),f.kc("label",t.i18n.voucher.buy.amountPerVoucher),f.zb(1),f.Jc(" ",f.gc(7,9,t.buyVoucher.amount,t.data.account.currency),"\n"),f.zb(2),f.kc("ngForOf",t.data.customFields),f.zb(1),f.kc("ngIf",t.confirmationPasswordInput))},directives:[m.t,k.a,m.s,ja.a,ri.a,y.I,y.w,y.n,ci.a,oi.a,y.v,y.l],pipes:[H.a,m.b],encapsulation:2,changeDetection:0}),fi);function mi(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"buy-vouchers-step-list-types",4),f.bc("typeSelected",(function(e){return f.wc(n),f.dc().toForm(e)})),f.Sb(),f.Qb()}if(2&e){var a=f.dc();f.zb(1),f.kc("user",a.data.user)("types",a.data.types)}}function pi(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",10),f.bc("click",(function(){return f.wc(n),f.dc(2).backToSelectType()})),f.Hc(1),f.Sb()}if(2&e){var a=f.dc(2);f.zb(1),f.Jc(" ",a.i18n.general.previous," ")}}function hi(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",5),f.ec(1,"async"),f.Ob(2,"buy-vouchers-step-form",6),f.Tb(3,"actions",7),f.Tb(4,"action-button",8),f.bc("action",(function(){return f.wc(n),f.dc().toConfirm()})),f.ec(5,"async"),f.Sb(),f.Fc(6,pi,2,1,"button",9),f.Sb(),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.dataTypeForBuy.type.voucherTitle)("mobileHeading",a.dataTypeForBuy.type.voucherTitle)("mode",f.fc(1,9,a.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("data",a.dataTypeForBuy)("form",a.form)("customFieldControlsMap",a.customFieldControlsMap),f.zb(2),f.kc("disabled",f.fc(5,11,a.requesting$))("label",a.i18n.general.next),f.zb(2),f.kc("ngIf",!a.singleType)}}function gi(e,t){if(1&e){var n=f.Ub();f.Tb(0,"action-button",8),f.bc("action",(function(){return f.wc(n),f.dc(2).buy()})),f.ec(1,"async"),f.Sb()}if(2&e){var a=f.dc(2);f.kc("disabled",!a.canConfirm||f.fc(1,2,a.requesting$))("label",a.i18n.general.confirm)}}function vi(e,t){1&e&&f.Hc(0,"\xa0")}function yi(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",5),f.ec(1,"async"),f.Tb(2,"buy-vouchers-step-confirm",11),f.bc("confirmationModeChanged",(function(e){return f.wc(n),f.dc().confirmationMode$.next(e)}))("confirmed",(function(e){return f.wc(n),f.dc().buy(e)})),f.Sb(),f.Tb(3,"actions",7),f.Fc(4,gi,2,4,"action-button",12),f.ec(5,"async"),f.Fc(6,vi,1,0,"ng-template",null,13,f.Gc),f.Tb(8,"button",10),f.bc("click",(function(){return f.wc(n),f.dc().backToForm()})),f.Hc(9),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.uc(7),i=f.dc();f.kc("heading",i.i18n.voucher.title.buyConfirmation)("mobileHeading",i.i18n.voucher.mobileTitle.buyConfirmation)("mode",f.fc(1,10,i.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("buyVoucher",i.form.value)("data",i.dataTypeForBuy)("confirmationPasswordInput",i.dataTypeForBuy.confirmationPasswordInput)("confirmationPassword",i.confirmationPassword),f.zb(2),f.kc("ngIf",f.fc(5,12,i.confirmationMode$)!=i.ConfirmationMode.Device)("ngIfElse",a),f.zb(5),f.Jc(" ",i.i18n.general.previous," ")}}function ki(e,t){1&e&&(f.Tb(0,"page-content"),f.Ob(1,"spinner"),f.Sb())}var Si,Ti=((Si=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).voucherService=a,i.ConfirmationMode=Ie.a,i.step$=new u.a(null),i.singleType=!1,i.confirmationMode$=new u.a(null),i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.params;this.user=this.authHelper.isSelf(t.user)?this.ApiHelper.SELF:t.user,this.addSub(this.voucherService.getVoucherDataForBuy({user:this.user}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=e.types||[];1===t.length?(this.singleType=!0,this.toForm(t[0])):this.step="select-type"}},{key:"buy",value:function(e){var t=this;if(e&&this.confirmationPassword.setValue(e),!this.confirmationPasswordInput||Object(l.F)(this.confirmationPassword)){var n=this.form.value;n.type=this.dataTypeForBuy.type.id,this.addSub(this.voucherService.buyVouchers({user:this.user,confirmationPassword:this.confirmationPasswordInput?this.confirmationPassword.value:null,body:n}).subscribe((function(e){t.router.navigate(1===e.length?["banking","vouchers",e[0]]:["banking",t.user,"vouchers","bought"]),t.notification.snackBar(t.i18n.voucher.buy.done)})))}}},{key:"backToSelectType",value:function(){this.step="select-type"}},{key:"backToForm",value:function(){this.step="form"}},{key:"toForm",value:function(e){var t=this;this.addSub(this.voucherService.getVoucherDataForBuy({user:this.user,type:e.id}).subscribe((function(e){t.dataTypeForBuy=e,t.buildForm(),t.step="form"})))}},{key:"toConfirm",value:function(){Object(l.F)(this.form)&&(this.canConfirm=this.authHelper.canConfirm(this.confirmationPasswordInput),this.canConfirm?(this.confirmationPasswordInput&&(this.confirmationPassword?this.confirmationPassword.reset():(this.confirmationPassword=this.formBuilder.control(null),this.confirmationPassword.setValidators(y.G.required))),this.step="confirm"):this.notification.warning(this.authHelper.getConfirmationMessage(this.confirmationPasswordInput)))}},{key:"buildForm",value:function(){if(this.form)this.form.reset();else if(this.customFieldControlsMap=this.fieldHelper.customValuesFormControlMap(this.dataTypeForBuy.customFields),this.form=this.formBuilder.group({count:new y.j(""),amount:new y.j("")}),this.customFieldControlsMap.size>0){var e,t=new y.m({}),n=_createForOfIteratorHelper(this.customFieldControlsMap);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.addControl(a[0],a[1])}}catch(i){n.e(i)}finally{n.f()}this.form.setControl("customValues",t)}this.form.get("count").setValue(1)}},{key:"resolveMenu",value:function(e){return this.authHelper.userMenu(e.user,s.b.BUY_VOUCHER)}},{key:"step",get:function(){return this.step$.value},set:function(e){this.step$.next(e)}},{key:"currency",get:function(){return this.dataTypeForBuy.account.currency}},{key:"confirmationPasswordInput",get:function(){return this.dataTypeForBuy.confirmationPasswordInput}}]),n}(we.a)).\u0275fac=function(e){return new(e||Si)(f.Nb(f.r),f.Nb(i.M))},Si.\u0275cmp=f.Hb({type:Si,selectors:[["buy-vouchers"]],features:[f.wb],decls:7,vars:9,consts:[[3,"ready","ngSwitch"],[4,"ngSwitchCase"],["last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"user","types","typeSelected"],["last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1",3,"data","form","customFieldControlsMap"],["forceRow",""],[3,"disabled","label","action"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[1,"flex-grow-1",3,"buyVoucher","data","confirmationPasswordInput","confirmationPassword","confirmationModeChanged","confirmed"],[3,"disabled","label","action",4,"ngIf","ngIfElse"],["spacer",""]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.ec(2,"async"),f.Fc(3,mi,2,2,"ng-container",1),f.Fc(4,hi,7,13,"page-content",2),f.Fc(5,yi,10,14,"page-content",2),f.Fc(6,ki,2,0,"page-content",3),f.Sb()),2&e&&(f.kc("ready",f.fc(1,5,t.data$))("ngSwitch",f.fc(2,7,t.step$)),f.zb(3),f.kc("ngSwitchCase","select-type"),f.zb(1),f.kc("ngSwitchCase","form"),f.zb(1),f.kc("ngSwitchCase","confirm"))},directives:[d.a,m.x,m.y,m.z,Qa,p.a,ni,sn.a,ai.a,m.t,di,L.a],pipes:[m.b],encapsulation:2,changeDetection:0}),Si),zi=n("5pUo"),wi=n("LqlI"),Ii=n("pBnU"),Fi=n("cvAk"),Oi=["inputField"];function Ci(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",14,15),f.bc("click",(function(){return f.wc(n),f.dc(3).showScanQrCode()})),f.Ob(2,"icon",16),f.Sb()}if(2&e){var a=f.dc(3);f.kc("tooltip",a.i18n.field.user.scanQrCodeTooltip)}}function Pi(e,t){if(1&e){var n=f.Ub();f.Tb(0,"div"),f.Pb(1,6),f.Tb(2,"div",7),f.Tb(3,"div",8),f.Tb(4,"label-value",9),f.Ob(5,"input-field",10,11),f.Fc(7,Ci,3,1,"button",12),f.Sb(),f.Sb(),f.Sb(),f.Tb(8,"actions"),f.Tb(9,"action-button",13),f.bc("action",(function(){return f.wc(n),f.dc(2).submit()})),f.ec(10,"async"),f.Sb(),f.Sb(),f.Sb()}if(2&e){var a=f.dc(2),i=f.uc(6);f.zb(1),f.kc("ngTemplateOutlet",i),f.zb(3),f.kc("label",a.i18n.voucher.token),f.zb(1),f.kc("mask",a.mask)("formControl",a.token)("placeholder",a.mask),f.zb(4),f.kc("disabled",f.fc(10,7,a.requesting$))("label",a.i18n.general.submit)}}function Hi(e,t){if(1&e&&(f.Tb(0,"page-content",4),f.ec(1,"async"),f.Fc(2,Pi,11,9,"div",5),f.ec(3,"async"),f.Sb()),2&e){var n=f.dc(),a=f.uc(8);f.kc("heading",n.i18n.voucher.title.redeem)("mobileHeading",n.i18n.voucher.mobileTitle.redeem)("mode",f.fc(1,5,n.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("ngIf",f.fc(3,7,n.data$))("ngIfElse",a)}}var xi=function(e){return{"flex-grow-1":e}};function Di(e,t){if(1&e&&(f.Tb(0,"div",27),f.Ob(1,"avatar",28),f.Sb()),2&e){var n=f.dc(3);f.kc("ngClass",f.nc(2,xi,!n.dataForRedeem.type.voucherDescription)),f.zb(1),f.kc("image",n.dataForRedeem.type.image)}}function Ni(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",29),f.Hc(2),f.Sb(),f.Qb()),2&e){var n=f.dc(3);f.zb(2),f.Jc("",n.dataForRedeem.type.voucherDescription," ")}}function Ai(e,t){if(1&e&&(f.Tb(0,"label-value",23),f.Ob(1,"user-link",30),f.Sb()),2&e){var n=f.dc(3);f.kc("label",n.i18n.voucher.buy.buyer),f.zb(1),f.kc("user",n.dataForRedeem.buyer)}}function _i(e,t){if(1&e&&f.Ob(0,"custom-field-input",31),2&e){var n=t.$implicit,a=f.dc(3);f.kc("field",n)("formControl",a.form.get(n.internalName))}}var $i=function(e){return{"d-flex flex-row-reverse justify-content-between":e}};function Ei(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Pb(1,6),f.Tb(2,"notification",17),f.Hc(3),f.Sb(),f.Tb(4,"div",18),f.Tb(5,"div",19),f.ec(6,"async"),f.Fc(7,Di,2,4,"div",20),f.Fc(8,Ni,3,1,"ng-container",21),f.Sb(),f.Ob(9,"hr",22),f.Tb(10,"label-value",23),f.Hc(11),f.Sb(),f.Tb(12,"label-value",23),f.Hc(13),f.Sb(),f.Fc(14,Ai,2,2,"label-value",24),f.Tb(15,"label-value",23),f.Hc(16),f.ec(17,"currency"),f.Sb(),f.Fc(18,_i,1,2,"custom-field-input",25),f.Sb(),f.Tb(19,"actions"),f.Tb(20,"action-button",13),f.bc("action",(function(){return f.wc(n),f.dc(2).submit()})),f.ec(21,"async"),f.Sb(),f.Tb(22,"button",26),f.bc("click",(function(){return f.wc(n),f.dc(2).backToForm()})),f.Hc(23),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=f.dc(2),i=f.uc(6);f.zb(1),f.kc("ngTemplateOutlet",i),f.zb(2),f.Jc(" ",a.i18n.voucher.redeem.confirm," "),f.zb(2),f.kc("ngClass",f.nc(23,$i,f.fc(6,16,a.layout.gtsm$)&&a.dataForRedeem.type.image)),f.zb(2),f.kc("ngIf",a.dataForRedeem.type.image),f.zb(1),f.kc("ngIf",a.dataForRedeem.type.voucherDescription),f.zb(2),f.kc("label",a.i18n.general.type),f.zb(1),f.Jc(" ",a.dataForRedeem.type.name," "),f.zb(1),f.kc("label",a.i18n.voucher.token),f.zb(1),f.Jc(" ",a.dataForRedeem.token," "),f.zb(1),f.kc("ngIf",a.dataForRedeem.buyer),f.zb(1),f.kc("label",a.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(17,18,a.dataForRedeem.amount,a.dataForRedeem.type.configuration.currency)," "),f.zb(2),f.kc("ngForOf",a.dataForRedeem.customFields),f.zb(2),f.kc("disabled",f.fc(21,21,a.requesting$))("label",a.i18n.general.submit),f.zb(3),f.Jc(" ",a.i18n.general.previous," ")}}function Ri(e,t){if(1&e&&(f.Tb(0,"page-content",4),f.ec(1,"async"),f.Fc(2,Ei,24,25,"ng-container",5),f.ec(3,"async"),f.Sb()),2&e){var n=f.dc(),a=f.uc(8);f.kc("heading",n.i18n.voucher.title.redeem)("mobileHeading",n.i18n.voucher.mobileTitle.redeem)("mode",f.fc(1,5,n.layout.ltsm$)?"fullHeight":"normal"),f.zb(2),f.kc("ngIf",f.fc(3,7,n.dataForRedeem$))("ngIfElse",a)}}function Ui(e,t){if(1&e&&(f.Rb(0),f.Ob(1,"user-info",30),f.Ob(2,"hr"),f.Qb()),2&e){var n=f.dc(2);f.zb(1),f.kc("user",n.data.user)}}function Mi(e,t){if(1&e&&f.Fc(0,Ui,3,1,"ng-container",21),2&e){var n=f.dc();f.kc("ngIf",!n.self)}}function Li(e,t){1&e&&(f.Tb(0,"page-content"),f.Ob(1,"spinner"),f.Sb())}var ji,Bi=((ji=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).voucherService=a,r.modal=i,r.step$=new u.a(null),r.token=new y.j("",y.G.required),r.mask="",r.dataForRedeem$=new u.a(null),r}return _createClass(n,[{key:"submit",value:function(){var e=this;if("form"===this.step){if(!Object(l.F)(this.token))return;this.addSub(this.voucherService.getVoucherDataForRedeem({user:this.userId,token:this.token.value}).subscribe((function(t){e.dataForRedeem=t,e.form=e.fieldHelper.customValuesFormGroup(e.dataForRedeem.customFields),e.step="confirm"})))}else this.addSub(this.voucherService.redeemVoucher({user:this.userId,token:this.token.value,body:{customValues:this.form.value}}).subscribe((function(t){e.router.navigate(["banking","vouchers",t.voucherId]),e.notification.info(e.i18n.voucher.redeem.done)})))}},{key:"backToForm",value:function(){this.step="form"}},{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.userId=this.route.snapshot.paramMap.get("user"),this.addSub(this.voucherService.getVoucherInitialDataForRedeem({user:this.userId}).subscribe((function(t){e.data=t,e.mask=e.data.mask?e.data.mask:"",e.self=e.authHelper.isSelf(t.user)}))),this.step="form"}},{key:"reload",value:function(){this.step="form",_get(_getPrototypeOf(n.prototype),"reload",this).call(this)}},{key:"resolveMenu",value:function(e){return this.authHelper.userMenu(e.user,s.b.REDEEM_VOUCHER)}},{key:"showScanQrCode",value:function(){var e=this;this.modal.show(zi.a,{class:"modal-form"}).content.select.pipe(Object(Oe.a)()).subscribe((function(t){e.token.setValue(t),e.submit()})),this.modal.onHide.pipe(Object(Oe.a)()).subscribe((function(){return Object(l.j)(e.inputField,!0)}))}},{key:"dataForRedeem",get:function(){return this.dataForRedeem$.value},set:function(e){this.dataForRedeem$.next(e)}},{key:"step",get:function(){return this.step$.value},set:function(e){this.step$.next(e)}}]),n}(we.a)).\u0275fac=function(e){return new(e||ji)(f.Nb(f.r),f.Nb(i.M),f.Nb(wi.b))},ji.\u0275cmp=f.Hb({type:ji,selectors:[["app-redeem-voucher"]],viewQuery:function(e,t){var n;1&e&&f.Lc(Oi,!0),2&e&&f.tc(n=f.cc())&&(t.inputField=n.first)},features:[f.wb],decls:9,vars:8,consts:[[3,"ready","ngSwitch"],[3,"heading","mobileHeading","mode",4,"ngSwitchCase"],["active_user",""],["loading",""],[3,"heading","mobileHeading","mode"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1"],["kind","field",3,"label"],["type","text","focused","","required","",3,"mask","formControl","placeholder"],["inputField",""],["class","btn btn-icon",3,"tooltip","click",4,"extraCell"],[3,"disabled","label","action"],[1,"btn","btn-icon",3,"tooltip","click"],["scanQrCodeButton",""],["icon","scan_qr_code"],["ngClass","mb-3","type","warning"],[1,"d-flex","flex-grow-1","flex-column"],[3,"ngClass"],["class","image d-flex justify-content-center mt-2 mb-4",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[3,"label"],[3,"label",4,"ngIf"],[3,"field","formControl",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],[1,"image","d-flex","justify-content-center","mt-2","mb-4",3,"ngClass"],["size","160","imageSize","200","useLightbox","",3,"image"],[1,"break-nl"],[3,"user"],[3,"field","formControl"]],template:function(e,t){1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.ec(2,"async"),f.Fc(3,Hi,4,9,"page-content",1),f.Fc(4,Ri,4,9,"page-content",1),f.Sb(),f.Fc(5,Mi,1,1,"ng-template",null,2,f.Gc),f.Fc(7,Li,2,0,"ng-template",null,3,f.Gc)),2&e&&(f.kc("ready",f.fc(1,4,t.data$))("ngSwitch",f.fc(2,6,t.step$)),f.zb(3),f.kc("ngSwitchCase","form"),f.zb(1),f.kc("ngSwitchCase","confirm"))},directives:[d.a,m.x,m.y,p.a,m.t,m.A,k.a,O.a,oi.a,y.D,C.a,y.v,y.k,Ii.a,sn.a,ai.a,xn.b,Dn.a,Fi.a,m.q,m.s,B.a,S.a,Ya.a,ja.a,L.a],pipes:[m.b,H.a],encapsulation:2,changeDetection:0}),ji);function Ji(e,t){1&e&&f.Pb(0)}function Vi(e,t){1&e&&f.Ob(0,"div",7)}function Gi(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",7),f.Tb(2,"label-value",14),f.Ob(3,"user-link",15),f.Sb(),f.Sb(),f.Fc(4,Vi,1,0,"div",16),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("user",n.data.user),f.zb(1),f.kc("ngIf",n.layout.gtsm$)}}function qi(e,t){if(1&e&&f.Ob(0,"field-option",17),2&e){var n=t.$implicit;f.kc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)}}function Qi(e,t){if(1&e&&(f.Tb(0,"mobile-result",18),f.Tb(1,"div",19),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit;f.kc("date",n.creationDate)("amount",n.amount)("amountColor",!1)("currency",n.type.configuration.currency),f.zb(2),f.Jc(" ",n.type.name," ")}}function Yi(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",23),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(2,"td"),f.Tb(3,"a",24),f.Hc(4),f.ec(5,"date"),f.Sb(),f.Sb(),f.Tb(6,"td"),f.Tb(7,"a",24),f.Hc(8),f.ec(9,"date"),f.Sb(),f.Sb(),f.Tb(10,"td"),f.Tb(11,"a",24),f.Hc(12),f.Sb(),f.Sb(),f.Tb(13,"td"),f.Tb(14,"a",24),f.Hc(15),f.Sb(),f.Sb(),f.Tb(16,"td",21),f.Tb(17,"a",24),f.Hc(18),f.ec(19,"currency"),f.Sb(),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Ic(f.fc(5,10,a.creationDate)),f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Ic(f.fc(9,12,a.expirationDate)),f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Ic(i.voucherStatus(a.status)),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Ic(a.type.name),f.zb(2),f.kc("routerLink",i.path(a)),f.zb(1),f.Ic(f.gc(19,14,a.amount,a.type.configuration.currency))}}function Wi(e,t){if(1&e&&(f.Tb(0,"table",20),f.Tb(1,"tbody"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Tb(4,"th"),f.Hc(5),f.Sb(),f.Tb(6,"th"),f.Hc(7),f.Sb(),f.Tb(8,"th"),f.Hc(9),f.Sb(),f.Tb(10,"th",21),f.Hc(11),f.Sb(),f.Fc(12,Yi,20,17,"ng-container",22),f.ec(13,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(13,6,a.results$))?null:n.results;f.zb(3),f.Ic(a.i18n.general.creationDate),f.zb(2),f.Ic(a.i18n.general.expirationDate),f.zb(2),f.Ic(a.i18n.general.status),f.zb(2),f.Ic(a.i18n.general.type),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(1),f.kc("ngForOf",i)}}function Ki(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",3),f.Tb(1,"form",4),f.Tb(2,"div",5),f.Fc(3,Gi,5,3,"ng-container",6),f.Tb(4,"div",7),f.Tb(5,"multi-selection-field",8),f.Fc(6,qi,1,4,"field-option",9),f.Sb(),f.Sb(),f.Tb(7,"div",7),f.Ob(8,"multi-selection-field",10),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(9,"results-layout",11),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(10,"async"),f.Fc(11,Qi,3,5,"mobile-result",12),f.Fc(12,Wi,14,8,"table",13),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.i18n.voucher.title.searchBought)("mobileHeading",a.i18n.voucher.mobileTitle.bought),f.zb(1),f.kc("formGroup",a.form),f.zb(2),f.kc("ngIf",a.data.user&&!a.self),f.zb(2),f.kc("emptyLabel",a.i18n.general.notApplied)("label",a.i18n.general.type),f.zb(1),f.kc("ngForOf",a.data.types),f.zb(2),f.kc("emptyLabel",a.i18n.general.notApplied)("label",a.i18n.general.status)("fieldOptions",a.statusOptions),f.zb(1),f.kc("results",f.fc(10,13,a.results$))("rendering$",a.rendering$)("toLink",a.toLink)}}var Zi,Xi=((Zi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).vouchersService=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.params;this.self=this.authHelper.isSelf(t.user),this.user=this.self?this.ApiHelper.SELF:t.user,this.addSub(this.vouchersService.getUserVouchersDataForSearch({user:this.user,relation:a.Kb.BOUGHT}).subscribe((function(t){e.form.patchValue(t.query),e.data=t})))}},{key:"getFormControlNames",value:function(){return["types","statuses"]}},{key:"toSearchParams",value:function(e){var t=Object(Fe.cloneDeep)(e);return t.user=this.user,t}},{key:"doSearch",value:function(e){return this.vouchersService.searchUserVouchers$Response(e)}},{key:"path",value:function(e){return["/banking/vouchers/",e.id]}},{key:"voucherStatus",value:function(e){switch(e){case a.Lb.CANCELED:return this.i18n.voucher.status.canceled;case a.Lb.EXPIRED:return this.i18n.voucher.status.expired;case a.Lb.OPEN:return this.i18n.voucher.status.open;case a.Lb.PENDING:return this.i18n.voucher.status.pending;case a.Lb.REDEEMED:return this.i18n.voucher.status.redeemed}}},{key:"resolveMenu",value:function(e){return this.authHelper.userMenu(e.user,s.b.SEARCH_BOUGHT_VOUCHERS)}},{key:"statusOptions",get:function(){var e=this;return Object.values(a.Lb).map((function(t){return{value:t,text:e.voucherStatus(t)}}))}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Zi)(f.Nb(f.r),f.Nb(i.M))},Zi.\u0275cmp=f.Hb({type:Zi,selectors:[["search-bought-vouchers"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],[4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","types",3,"emptyLabel","label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],["labelPosition","side","formControlName","statuses",3,"emptyLabel","label","fieldOptions"],["resultType","list",3,"results","rendering$","toLink","update"],[3,"date","amount","amountColor","currency",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["kind","fieldView",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],[3,"value","internalName","id","text"],[3,"date","amount","amountColor","currency"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Ji,1,0,"ng-container",1),f.Sb(),f.Fc(3,Ki,13,15,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,pa.a,y.v,y.l,m.s,h.a,g.a,v.a,k.a,S.a,z.a,j.a,J.h],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),Zi);function er(e,t){1&e&&f.Pb(0)}function tr(e,t){1&e&&f.Ob(0,"div",9)}function nr(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",9),f.Tb(2,"label-value",15),f.Ob(3,"user-link",16),f.Sb(),f.Sb(),f.Fc(4,tr,1,0,"div",7),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.kc("label",n.i18n.general.user),f.zb(1),f.kc("user",n.data.user),f.zb(1),f.kc("ngIf",n.layout.gtsm$)}}function ar(e,t){if(1&e&&f.Ob(0,"field-option",19),2&e){var n=t.$implicit;f.kc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)}}function ir(e,t){if(1&e&&(f.Tb(0,"div",9),f.Tb(1,"multi-selection-field",17),f.Fc(2,ar,1,4,"field-option",18),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.general.type),f.zb(1),f.kc("ngForOf",n.data.types)}}function rr(e,t){if(1&e&&f.Ob(0,"field-option",22),2&e){var n=t.$implicit;f.kc("value",n.id)("id",n.id)("text",n.display)}}function cr(e,t){if(1&e&&(f.Tb(0,"div",9),f.Tb(1,"single-selection-field",20),f.Fc(2,rr,1,3,"field-option",21),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("emptyOption",n.i18n.general.notApplied)("label",n.i18n.general.operator),f.zb(1),f.kc("ngForOf",n.data.operators)}}function or(e,t){if(1&e&&(f.Tb(0,"mobile-result",23),f.Tb(1,"div",24),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=t.$implicit;f.kc("date",n.redeemDate)("amount",n.amount)("currency",n.type.configuration.currency)("amountColor",!1),f.zb(2),f.Jc(" ",n.type.name," ")}}function lr(e,t){if(1&e&&(f.Tb(0,"th"),f.Hc(1),f.Sb()),2&e){var n=f.dc(3);f.zb(1),f.Ic(n.i18n.general.operator)}}function sr(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.Qb()),2&e){var n=f.dc(2).$implicit;f.zb(1),f.Jc(" ",null!=n.redeemBy&&n.redeemBy.user?n.redeemBy.display:""," ")}}function ur(e,t){if(1&e&&(f.Tb(0,"td"),f.Fc(1,sr,2,1,"ng-container",6),f.Sb()),2&e){var n=f.dc().$implicit;f.zb(1),f.kc("ngIf",n.redeemBy)}}function br(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",28),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(2,"td"),f.Tb(3,"a",29),f.Hc(4),f.ec(5,"date"),f.Sb(),f.Sb(),f.Fc(6,ur,2,1,"td",6),f.Tb(7,"td"),f.Hc(8),f.Sb(),f.Tb(9,"td",26),f.Hc(10),f.ec(11,"currency"),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.kc("routerLink",i.path(a)),f.zb(1),f.Jc(" ",f.fc(5,5,a.redeemDate)," "),f.zb(2),f.kc("ngIf",i.data.operators.length>0),f.zb(2),f.Jc(" ",a.type.name," "),f.zb(2),f.Jc(" ",f.gc(11,7,a.amount,a.type.configuration.currency)," ")}}function fr(e,t){if(1&e&&(f.Tb(0,"table",25),f.Tb(1,"thead"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Fc(4,lr,2,1,"th",6),f.Tb(5,"th"),f.Hc(6),f.Sb(),f.Tb(7,"th",26),f.Hc(8),f.Sb(),f.Sb(),f.Tb(9,"tbody"),f.Fc(10,br,12,10,"ng-container",27),f.ec(11,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(11,5,a.results$))?null:n.results;f.zb(3),f.Ic(a.i18n.voucher.redeem.date),f.zb(1),f.kc("ngIf",a.data.operators.length>0),f.zb(2),f.Ic(a.i18n.general.type),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function dr(e,t){if(1&e){var n=f.Ub();f.Tb(0,"page-content",3),f.Tb(1,"form",4),f.Tb(2,"div",5),f.Fc(3,nr,5,3,"ng-container",6),f.Fc(4,ir,3,2,"div",7),f.Fc(5,cr,3,3,"div",7),f.Tb(6,"div",8),f.Tb(7,"div",9),f.Ob(8,"date-field",10),f.Sb(),f.Tb(9,"div",9),f.Ob(10,"date-field",11),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(11,"results-layout",12),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(12,"async"),f.Fc(13,or,3,5,"mobile-result",13),f.Fc(14,fr,12,7,"table",14),f.Sb()}if(2&e){var a=f.dc();f.kc("heading",a.i18n.voucher.title.redeemed)("mobileHeading",a.i18n.voucher.mobileTitle.redeemed),f.zb(1),f.kc("formGroup",a.form),f.zb(2),f.kc("ngIf",a.data.user&&!a.self),f.zb(1),f.kc("ngIf",(null==a.data.types?null:a.data.types.length)>1),f.zb(1),f.kc("ngIf",(null==a.data.operators?null:a.data.operators.length)>0),f.zb(3),f.kc("label",a.i18n.general.beginDate),f.zb(2),f.kc("label",a.i18n.general.endDate),f.zb(1),f.kc("results",f.fc(12,11,a.results$))("toLink",a.toLink)("rendering$",a.rendering$)}}var mr,pr=((mr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).voucherService=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.paramMap.get("user");this.addSub(this.voucherService.getUserVouchersDataForSearch({user:t,relation:a.Kb.REDEEMED}).subscribe((function(t){e.data=t,e.self=e.authHelper.isSelf(t.user)})))}},{key:"getFormControlNames",value:function(){return["types","periodBegin","periodEnd","operator"]}},{key:"toSearchParams",value:function(e){var t=e;return t.user=this.route.snapshot.paramMap.get("user"),t.relation=a.Kb.REDEEMED,t.redeemBy=e.operator,(e.periodBegin||e.periodEnd)&&(t.redeemPeriod=this.ApiHelper.dateRangeFilter(e.periodBegin,e.periodEnd)),t}},{key:"doSearch",value:function(e){return this.voucherService.searchUserVouchers$Response(e)}},{key:"path",value:function(e){return["/banking/vouchers/",e.id]}},{key:"resolveMenu",value:function(e){return this.authHelper.userMenu(e.user,s.b.SEARCH_REDEEMED)}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||mr)(f.Nb(f.r),f.Nb(i.M))},mr.\u0275cmp=f.Hb({type:mr,selectors:[["app-search-redeemed-vouchers"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row","no-gutters"],[4,"ngIf"],["class","col-12 col-md-6",4,"ngIf"],[1,"row","no-gutters","col-12"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","periodBegin","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","periodEnd","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["resultType","list",3,"results","toLink","rendering$","update"],[3,"date","amount","currency","amountColor",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","kind","fieldView",3,"label"],[3,"user"],["labelPosition","side","formControlName","types",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","operator",3,"emptyOption","label"],[3,"value","id","text",4,"ngFor","ngForOf"],[3,"value","id","text"],[3,"date","amount","currency","amountColor"],[1,"cell-text","cell-main"],[1,"table","table-hover","cursor-pointer"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,er,1,0,"ng-container",1),f.Sb(),f.Fc(3,dr,15,13,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,p.a,y.I,y.w,y.n,w.a,y.v,y.l,h.a,g.a,v.a,k.a,S.a,pa.a,m.s,z.a,T.a,j.a,J.h],pipes:[m.b,V.a,H.a],encapsulation:2,changeDetection:0}),mr),hr=n("wR2l");function gr(e,t){if(1&e&&f.Ob(0,"field-option",15),2&e){var n=t.$implicit;f.kc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)}}function vr(e,t){if(1&e&&(f.Tb(0,"div",4),f.Tb(1,"multi-selection-field",13),f.Fc(2,gr,1,4,"field-option",14),f.Sb(),f.Sb()),2&e){var n=f.dc();f.zb(1),f.kc("label",n.i18n.general.type),f.zb(1),f.kc("ngForOf",n.data.types)}}function yr(e,t){if(1&e&&f.Ob(0,"field-option",31),2&e){var n=t.$implicit;f.kc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)("parent",n.groupSet)}}function kr(e,t){if(1&e&&(f.Tb(0,"div",4),f.Tb(1,"multi-selection-field",29),f.Fc(2,yr,1,5,"field-option",30),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.voucher.buyerGroups),f.zb(1),f.kc("ngForOf",n.data.userGroups)}}function Sr(e,t){if(1&e&&f.Ob(0,"field-option",31),2&e){var n=t.$implicit;f.kc("value",n.id)("internalName",n.internalName)("id",n.id)("text",n.name)("parent",n.groupSet)}}function Tr(e,t){if(1&e&&(f.Tb(0,"div",4),f.Tb(1,"multi-selection-field",32),f.Fc(2,Sr,1,5,"field-option",30),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("label",n.i18n.voucher.redeemerGroups),f.zb(1),f.kc("ngForOf",n.data.userGroups)}}function zr(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"div",16),f.Tb(2,"div",4),f.Ob(3,"date-field",17),f.Sb(),f.Tb(4,"div",4),f.Ob(5,"date-field",18),f.Sb(),f.Sb(),f.Tb(6,"div",16),f.Tb(7,"div",4),f.Ob(8,"date-field",19),f.Sb(),f.Tb(9,"div",4),f.Ob(10,"date-field",20),f.Sb(),f.Sb(),f.Tb(11,"div",16),f.Tb(12,"div",4),f.Ob(13,"date-field",21),f.Sb(),f.Tb(14,"div",4),f.Ob(15,"date-field",22),f.Sb(),f.Sb(),f.Tb(16,"div",16),f.Tb(17,"div",4),f.Ob(18,"decimal-field",23,24),f.Sb(),f.Tb(20,"div",4),f.Ob(21,"decimal-field",25,24),f.Sb(),f.Sb(),f.Fc(23,kr,3,2,"div",3),f.Tb(24,"div",4),f.Tb(25,"label-value",26),f.Ob(26,"user-field",27),f.Sb(),f.Sb(),f.Fc(27,Tr,3,2,"div",3),f.Tb(28,"div",4),f.Tb(29,"label-value",26),f.Ob(30,"user-field",28),f.Sb(),f.Sb(),f.Qb()),2&e){var n=f.dc();f.zb(3),f.kc("label",n.i18n.general.creationDate),f.zb(2),f.kc("label",n.i18n.general.to),f.zb(3),f.kc("label",n.i18n.general.expirationDate),f.zb(2),f.kc("label",n.i18n.general.to),f.zb(3),f.kc("label",n.i18n.voucher.redeem.date),f.zb(2),f.kc("label",n.i18n.general.to),f.zb(3),f.kc("label",n.i18n.transaction.amount)("scale",n.maxScale),f.zb(3),f.kc("label",n.i18n.general.to)("scale",n.maxScale),f.zb(2),f.kc("ngIf",(null==n.data.userGroups?null:n.data.userGroups.length)>1),f.zb(2),f.kc("label",n.i18n.voucher.buy.buyer),f.zb(1),f.kc("autoSearch",!0)("allowContacts",!0)("allowSearch",!0)("allowPrincipal",!1),f.zb(1),f.kc("ngIf",(null==n.data.userGroups?null:n.data.userGroups.length)>1),f.zb(2),f.kc("label",n.i18n.voucher.redeem.redeemer),f.zb(1),f.kc("autoSearch",!0)("allowContacts",!0)("allowSearch",!0)("allowPrincipal",!1)}}function wr(e,t){if(1&e&&f.Ob(0,"field-option",9),2&e){var n=t.$implicit,a=f.dc();f.kc("value",n)("text",a.orderBy(n))}}var Ir,Fr=((Ir=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).bankingHelper=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.mask=this.data.mask?this.data.mask:"",this.form.patchValue({creationType:"all",printed:"all"})}},{key:"orderByOptions",value:function(){return Object.values(a.Jb)}},{key:"orderBy",value:function(e){switch(e){case a.Jb.CREATION_DATE_ASC:return this.i18n.voucher.sort.creationDateAsc;case a.Jb.CREATION_DATE_DESC:return this.i18n.voucher.sort.creationDateDesc;case a.Jb.EXPIRATION_DATE_ASC:return this.i18n.voucher.sort.expirationDateAsc;case a.Jb.EXPIRATION_DATE_DESC:return this.i18n.voucher.sort.expirationDateDesc;case a.Jb.REDEEM_DATE_ASC:return this.i18n.voucher.sort.redeemDateAsc;case a.Jb.REDEEM_DATE_DESC:return this.i18n.voucher.sort.redeemDateDesc}}},{key:"statusOptions",get:function(){var e=this;return Object.values(a.Lb).map((function(t){return{value:t,text:e.bankingHelper.voucherStatus(t)}}))}},{key:"creationTypeOptions",get:function(){var e=this,t=Object.values(a.Ib);return[{value:"all",text:this.i18n.general.all}].concat(t.map((function(t){return{value:t,text:e.bankingHelper.voucherCreationType(t)}})))}},{key:"maxScale",get:function(){return this.data.types.map((function(e){return e.configuration.currency.decimalDigits})).reduce((function(e,t,n,a){return e>t?e:t}))}}]),n}(P.a)).\u0275fac=function(e){return new(e||Ir)(f.Nb(f.r),f.Nb(r.a))},Ir.\u0275cmp=f.Hb({type:Ir,selectors:[["voucher-filters"]],inputs:{data:"data",heading:"heading",mobileHeading:"mobileHeading",form:"form",moreFilters:"moreFilters",headingActions:"headingActions"},features:[f.wb],decls:19,vars:23,consts:[["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row","no-gutters"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","statuses",3,"label","fieldOptions","emptyLabel"],["type","text","formControlName","token",3,"label","mask","placeholder"],["labelPosition","side","formControlName","creationType",3,"label","fieldOptions"],["labelPosition","side","formControlName","printed",3,"label"],[3,"value","text"],[4,"ngIf"],["labelPosition","side","formControlName","orderBy",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],["labelPosition","side","formControlName","types",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],[1,"row","no-gutters","col-12"],["labelPosition","side","formControlName","creationBegin","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","creationEnd","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","expirationBegin","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","expirationEnd","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","redeemBegin","minDate","past100","maxDate","todayEnd","fieldSize","full",1,"",3,"label"],["labelPosition","side","formControlName","redeemEnd","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["formControlName","amountMin",3,"label","scale"],["amount",""],["formControlName","amountMax",3,"label","scale"],["kind","field",3,"label"],["formControlName","buyer",3,"autoSearch","allowContacts","allowSearch","allowPrincipal"],["formControlName","redeemer",3,"autoSearch","allowContacts","allowSearch","allowPrincipal"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","buyerGroups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","redeemerGroups",3,"label"]],template:function(e,t){1&e&&(f.Tb(0,"page-content",0),f.Tb(1,"form",1),f.Tb(2,"div",2),f.Fc(3,vr,3,2,"div",3),f.Tb(4,"div",4),f.Ob(5,"multi-selection-field",5),f.Sb(),f.Tb(6,"div",4),f.Ob(7,"input-field",6),f.Sb(),f.Tb(8,"div",4),f.Ob(9,"radio-group-field",7),f.Sb(),f.Tb(10,"div",4),f.Tb(11,"radio-group-field",8),f.Ob(12,"field-option",9),f.Ob(13,"field-option",9),f.Ob(14,"field-option",9),f.Sb(),f.Sb(),f.Fc(15,zr,31,22,"ng-container",10),f.Tb(16,"div",4),f.Tb(17,"single-selection-field",11),f.Fc(18,wr,1,2,"field-option",12),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.kc("heading",t.heading)("mobileHeading",t.mobileHeading)("headingActions",t.headingActions),f.zb(1),f.kc("formGroup",t.form),f.zb(2),f.kc("ngIf",(null==t.data.types?null:t.data.types.length)>1),f.zb(2),f.kc("label",t.i18n.general.status)("fieldOptions",t.statusOptions)("emptyLabel",t.i18n.general.notApplied),f.zb(2),f.kc("label",t.i18n.voucher.token)("mask",t.mask)("placeholder",t.mask),f.zb(2),f.kc("label",t.i18n.voucher.creationType)("fieldOptions",t.creationTypeOptions),f.zb(2),f.kc("label",t.i18n.general.printed),f.zb(1),f.kc("value","all")("text",t.i18n.general.all),f.zb(1),f.kc("value","true")("text",t.i18n.general.yes),f.zb(1),f.kc("value","false")("text",t.i18n.general.no),f.zb(1),f.kc("ngIf",t.moreFilters),f.zb(2),f.kc("label",t.i18n.general.orderBy),f.zb(1),f.kc("ngForOf",t.orderByOptions()))},directives:[p.a,y.I,y.w,y.n,m.t,pa.a,y.v,y.l,O.a,C.a,hr.a,z.a,T.a,m.s,w.a,I.a,k.a,F.a],encapsulation:2,changeDetection:0}),Ir);function Or(e,t){1&e&&f.Pb(0)}function Cr(e,t){if(1&e&&(f.Tb(0,"mobile-result"),f.Tb(1,"div"),f.Tb(2,"div",7),f.Tb(3,"div",8),f.Hc(4),f.Sb(),f.Tb(5,"div",8),f.Hc(6),f.Sb(),f.Sb(),f.Tb(7,"div",9),f.Hc(8),f.ec(9,"currency"),f.Sb(),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.zb(4),f.Jc(" ",n.type.name," "),f.zb(2),f.Jc(" ",a.bankingHelper.voucherStatus(n.status)," "),f.zb(2),f.Jc(" ",f.gc(9,3,n.amount,n.type.configuration.currency)," ")}}function Pr(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Tb(1,"tr",13),f.bc("click",(function(){f.wc(n);var e=t.$implicit,a=f.dc(3);return a.router.navigate(a.path(e))})),f.Tb(2,"td"),f.Hc(3),f.ec(4,"date"),f.Sb(),f.Tb(5,"td"),f.Hc(6),f.ec(7,"date"),f.Sb(),f.Tb(8,"td"),f.Hc(9),f.Sb(),f.Tb(10,"td"),f.Hc(11),f.Sb(),f.Tb(12,"td",11),f.Hc(13),f.ec(14,"currency"),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=t.$implicit,i=f.dc(3);f.zb(3),f.Ic(f.fc(4,5,a.creationDate)),f.zb(3),f.Jc(" ",f.fc(7,7,a.expirationDate),""),f.zb(3),f.Jc(" ",i.bankingHelper.voucherStatus(a.status)," "),f.zb(2),f.Jc(" ",a.type.name," "),f.zb(2),f.Jc(" ",f.gc(14,9,a.amount,a.type.configuration.currency)," ")}}function Hr(e,t){if(1&e&&(f.Tb(0,"table",10),f.Tb(1,"thead"),f.Tb(2,"th"),f.Hc(3),f.Sb(),f.Tb(4,"th"),f.Hc(5),f.Sb(),f.Tb(6,"th"),f.Hc(7),f.Sb(),f.Tb(8,"th"),f.Hc(9),f.Sb(),f.Tb(10,"th",11),f.Hc(11),f.Sb(),f.Sb(),f.Tb(12,"tbody"),f.Fc(13,Pr,15,12,"ng-container",12),f.ec(14,"async"),f.Sb(),f.Sb()),2&e){var n,a=f.dc(2),i=null==(n=f.fc(14,6,a.results$))?null:n.results;f.zb(3),f.Ic(a.i18n.general.creationDate),f.zb(2),f.Ic(a.i18n.general.expirationDate),f.zb(2),f.Ic(a.i18n.general.status),f.zb(2),f.Ic(a.i18n.general.type),f.zb(2),f.Ic(a.i18n.transaction.amount),f.zb(2),f.kc("ngForOf",i)}}function xr(e,t){if(1&e){var n=f.Ub();f.Ob(0,"voucher-filters",3),f.ec(1,"async"),f.ec(2,"async"),f.Tb(3,"results-layout",4),f.bc("update",(function(e){return f.wc(n),f.dc().update(e)})),f.ec(4,"async"),f.Fc(5,Cr,10,6,"mobile-result",5),f.Fc(6,Hr,15,8,"table",6),f.Sb()}if(2&e){var a=f.dc();f.kc("data",a.data)("form",a.form)("heading",a.i18n.voucher.title.search)("mobileHeading",a.i18n.voucher.mobileTitle.search)("moreFilters",f.fc(1,9,a.moreFilters$))("headingActions",f.fc(2,11,a.headingActions$)),f.zb(3),f.kc("results",f.fc(4,13,a.results$))("toLink",a.toLink)("rendering$",a.rendering$)}}var Dr,Nr=((Dr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).voucherService=a,r.bankingHelper=i,r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.addSub(this.voucherService.getVouchersDataForSearch({}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){_get(_getPrototypeOf(n.prototype),"onDataInitialized",this).call(this,e),this.headingActions=[this.moreFiltersAction],this.form.patchValue(e.query)}},{key:"getFormControlNames",value:function(){return["types","creationBegin","creationEnd","statuses","token","creationType","printed","amountMin","amountMax","expirationBegin","expirationEnd","redeemBegin","redeemEnd","buyer","redeemer","buyerGroups","redeemerGroups","orderBy"]}},{key:"toSearchParams",value:function(e){var t=e;return(e.redeemBegin||e.redeemEnd)&&(t.redeemPeriod=this.ApiHelper.dateRangeFilter(e.redeemBegin,e.redeemEnd)),(e.creationBegin||e.creationEnd)&&(t.creationPeriod=this.ApiHelper.dateRangeFilter(e.creationBegin,e.creationEnd)),(e.expirationBegin||e.expirationEnd)&&(t.expirationPeriod=this.ApiHelper.dateRangeFilter(e.expirationBegin,e.expirationEnd)),(e.amountMin||e.amountMax)&&(t.amountRange=this.ApiHelper.rangeFilter(e.amountMin,e.amountMax)),"all"===e.printed&&(t.printed=null),"all"===e.creationType&&(t.creationType=null),t}},{key:"doSearch",value:function(e){return this.voucherService.searchVouchers$Response(e)}},{key:"path",value:function(e){return["/banking/vouchers/",e.id]}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.hideFilters}},{key:"resolveMenu",value:function(e){return s.b.SEARCH_VOUCHERS}},{key:"statusOptions",get:function(){var e=this;return Object.values(a.Lb).map((function(t){return{value:t,text:e.bankingHelper.voucherStatus(t)}}))}},{key:"creationTypeOptions",get:function(){var e=this;return Object.values(a.Ib).map((function(t){return{value:t,text:e.bankingHelper.voucherCreationType(t)}})).concat({value:null,text:this.i18n.general.all})}},{key:"toLink",get:function(){var e=this;return function(t){return e.path(t)}}}]),n}(o.a)).\u0275fac=function(e){return new(e||Dr)(f.Nb(f.r),f.Nb(i.M),f.Nb(r.a))},Dr.\u0275cmp=f.Hb({type:Dr,selectors:[["search-vouchers"]],features:[f.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"data","form","heading","mobileHeading","moreFilters","headingActions"],["resultType","list",3,"results","toLink","rendering$","update"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"cell-main","float-left"],[1,"cell-text"],[1,"float-right"],[1,"table","table-hover","cursor-pointer"],[1,"amount"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Or,1,0,"ng-container",1),f.Sb(),f.Fc(3,xr,7,15,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(4);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",t.data)("ngIfThen",n)}},directives:[d.a,m.t,Fr,h.a,g.a,v.a,j.a,m.s],pipes:[m.b,H.a,V.a],encapsulation:2,changeDetection:0}),Dr),Ar=n("cyUc");function _r(e,t){if(1&e&&(f.Tb(0,"div",14),f.Ob(1,"avatar",15),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("image",n.data.type.image)}}function $r(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.creationType),f.zb(1),f.Jc(" ",n.bankingHelper.voucherCreationType(n.data.creationType)," ")}}function Er(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.owner),f.zb(1),f.kc("user",n.data.owner)}}function Rr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.buy.buyer),f.zb(1),f.kc("user",n.data.buyer)}}function Ur(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Tb(1,"a",17),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.buy.payment),f.zb(1),f.kc("routerLink",n.transferPath(n.data.buy)),f.zb(1),f.Jc(" ",n.bankingHelper.transactionNumberOrId(n.data.buy)," ")}}function Mr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"dateTime"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.redeem.date),f.zb(1),f.Jc(" ",f.fc(2,2,n.data.redeemDate)," ")}}function Lr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.redeem.redeemer),f.zb(1),f.kc("user",n.data.redeemer)}}function jr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.general.operator),f.zb(1),f.kc("user",n.data.redeemBy)}}function Br(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Tb(1,"a",17),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.redeem.payment),f.zb(1),f.kc("routerLink",n.transferPath(n.data.redeem)),f.zb(1),f.Jc(" ",n.bankingHelper.transactionNumberOrId(n.data.redeem)," ")}}function Jr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.general.status),f.zb(1),f.Jc(" ",n.data.redeemAfterDate," ")}}function Vr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"dateTime"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.general.expirationDate),f.zb(1),f.Jc(" ",f.fc(2,2,n.data.expirationDate)," ")}}function Gr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Hc(1),f.ec(2,"dateTime"),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.refundDate),f.zb(1),f.Jc(" ",f.fc(2,2,n.data.refund.date)," ")}}function qr(e,t){if(1&e&&(f.Tb(0,"label-value",8),f.Tb(1,"a",17),f.Hc(2),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.kc("label",n.i18n.voucher.refundPayment),f.zb(1),f.kc("routerLink",n.transferPath(n.data.refund)),f.zb(1),f.Jc(" ",n.bankingHelper.transactionNumberOrId(n.data.refund)," ")}}function Qr(e,t){if(1&e&&(f.Rb(0,18),f.Tb(1,"h2",11),f.Hc(2),f.Sb(),f.Tb(3,"div",19),f.Hc(4),f.Sb(),f.Qb()),2&e){var n=f.dc(2);f.zb(2),f.Jc(" ",n.i18n.general.description," "),f.zb(2),f.Jc(" ",n.data.description," ")}}function Yr(e,t){1&e&&(f.Ob(0,"img",20),f.ec(1,"trust")),2&e&&f.kc("src",f.gc(1,1,t.ngIf,"url"),f.yc)}function Wr(e,t){if(1&e&&(f.Tb(0,"page-content",3),f.ec(1,"async"),f.Tb(2,"div",4),f.Tb(3,"div",5),f.Fc(4,_r,2,1,"div",6),f.Tb(5,"div",7),f.Tb(6,"label-value",8),f.Hc(7),f.Sb(),f.Tb(8,"label-value",8),f.Hc(9),f.Sb(),f.Tb(10,"label-value",8),f.Hc(11),f.ec(12,"currency"),f.Sb(),f.Fc(13,$r,2,2,"label-value",9),f.Tb(14,"label-value",8),f.Hc(15),f.ec(16,"dateTime"),f.Sb(),f.Fc(17,Er,2,2,"label-value",9),f.Fc(18,Rr,2,2,"label-value",9),f.Fc(19,Ur,3,3,"label-value",9),f.Tb(20,"label-value",8),f.Hc(21),f.Sb(),f.Fc(22,Mr,3,4,"label-value",9),f.Fc(23,Lr,2,2,"label-value",9),f.Fc(24,jr,2,2,"label-value",9),f.Fc(25,Br,3,3,"label-value",9),f.Fc(26,Jr,2,2,"label-value",9),f.Fc(27,Vr,3,4,"label-value",9),f.Fc(28,Gr,3,4,"label-value",9),f.Fc(29,qr,3,3,"label-value",9),f.Sb(),f.Sb(),f.Fc(30,Qr,5,2,"ng-container",10),f.Ob(31,"hr",11),f.Tb(32,"div",12),f.Fc(33,Yr,2,4,"img",13),f.ec(34,"async"),f.Sb(),f.Sb(),f.Sb()),2&e){var n=f.dc();f.kc("heading",n.data.title)("mobileHeading",n.data.title)("headingActions",f.fc(1,28,n.headingActions$)),f.zb(4),f.kc("ngIf",n.data.type.image),f.zb(2),f.kc("label",n.i18n.general.type),f.zb(1),f.Jc(" ",n.data.type.name," "),f.zb(1),f.kc("label",n.i18n.voucher.token),f.zb(1),f.Jc(" ",n.data.token," "),f.zb(1),f.kc("label",n.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(12,30,n.data.amount,n.data.type.configuration.currency)," "),f.zb(2),f.kc("ngIf",n.data.creationType),f.zb(1),f.kc("label",n.i18n.general.creationDate),f.zb(1),f.Jc(" ",f.fc(16,33,n.data.creationDate)," "),f.zb(2),f.kc("ngIf",n.data.owner),f.zb(1),f.kc("ngIf",n.data.buyer),f.zb(1),f.kc("ngIf",n.data.buy),f.zb(1),f.kc("label",n.i18n.general.status),f.zb(1),f.Jc(" ",n.bankingHelper.voucherStatus(n.data.status)," "),f.zb(1),f.kc("ngIf",n.data.redeemDate),f.zb(1),f.kc("ngIf",n.data.redeemer),f.zb(1),f.kc("ngIf",null==n.data.redeemBy?null:n.data.redeemBy.user),f.zb(1),f.kc("ngIf",n.data.redeem),f.zb(1),f.kc("ngIf",!n.data.redeemAfterDateReached),f.zb(1),f.kc("ngIf",n.data.expirationDate),f.zb(1),f.kc("ngIf",n.data.refund),f.zb(1),f.kc("ngIf",n.data.refund),f.zb(1),f.kc("ngIf",n.data.description),f.zb(3),f.kc("ngIf",f.fc(34,35,n.qrCodeUrl$))}}function Kr(e,t){1&e&&(f.Tb(0,"page-content"),f.Ob(1,"spinner"),f.Sb())}var Zr,Xr,ec=((Zr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).voucherService=a,r.bankingHelper=i,r.qrCodeUrl$=new u.a(null),r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this);var t=this.route.snapshot.paramMap.get("key");this.addSub(this.voucherService.viewVoucher({key:t}).subscribe((function(t){return e.data=t})))}},{key:"onDataInitialized",value:function(e){var t=this;this.addSub(this.voucherService.getVoucherQrCode({key:e.id,size:a.D.MEDIUM}).subscribe((function(e){return t.qrCodeUrl$.next(URL.createObjectURL(e))}))),this.createCancelDeviceConfirmation=function(){return{type:a.s.MANAGE_VOUCHER,voucher:e.id,voucherAction:a.Gb.CANCEL}},this.createChangeExpirationDeviceConfirmation=function(){return{type:a.s.MANAGE_VOUCHER,voucher:e.id,voucherAction:a.Gb.CHANGE_EXPIRATION}},this.canConfirm=this.authHelper.canConfirm(e.confirmationPasswordInput),e.confirmationPasswordInput&&(this.confirmationPassword=this.formBuilder.control("confirmationPassword",y.G.required)),this.headingActions=this.initActions(e)}},{key:"initActions",value:function(e){var t=this,n=this.exportHelper.headingActions(e.exportFormats,(function(n){return t.voucherService.exportVoucher$Response({format:n.internalName,key:e.id})}));return e.cancelAction&&n.push(new on.c("cancel",e.cancelAction===a.Hb.CANCEL_AND_REFUND?this.i18n.voucher.cancelAndRefund:this.i18n.general.cancel,(function(){t.canConfirm||t.notification.warning(t.authHelper.getConfirmationMessage(e.confirmationPasswordInput)),t.notification.confirm({title:t.cancelConfirmationTitle(e.cancelAction),passwordInput:e.confirmationPasswordInput,createDeviceConfirmation:t.createCancelDeviceConfirmation,callback:function(e){return t.cancel(e.confirmationPassword)}})}))),e.canChangeExpirationDate&&n.push(new on.c("update",this.i18n.voucher.changeExpirationDate,(function(){t.canConfirm||t.notification.warning(t.authHelper.getConfirmationMessage(e.confirmationPasswordInput)),t.notification.confirm({passwordInput:e.confirmationPasswordInput,createDeviceConfirmation:t.createChangeExpirationDeviceConfirmation,customFields:t.changeExpirationFields,callback:function(n){t.addSub(t.voucherService.changeVoucherExpirationDate({key:e.id,confirmationPassword:n.confirmationPassword,body:{comments:n.customValues.comments,newExpirationDate:n.customValues.newExpirationDate}}).subscribe((function(){t.notification.snackBar(t.i18n.voucher.expirationDateChanged),t.reload()})))}})}))),n}},{key:"cancel",value:function(e){var t=this;!e&&this.confirmationPassword&&(e=this.confirmationPassword.value),Object(l.F)(this.confirmationPassword)&&this.addSub(this.voucherService.cancelVoucher({key:this.data.id,confirmationPassword:e}).subscribe((function(){t.reload(),t.notification.snackBar(t.i18n.voucher.cancel.done)})))}},{key:"cancelConfirmationTitle",value:function(e){switch(e){case a.Hb.CANCEL_AND_REFUND:return this.i18n.voucher.cancel.refundConfirmation;case a.Hb.CANCEL_PENDING_PACK:return this.i18n.voucher.cancel.packConfirmation;case a.Hb.CANCEL_GENERATED:case a.Hb.CANCEL_PENDING_SINGLE:return this.i18n.voucher.cancel.confirmation}}},{key:"transferPath",value:function(e){return null===e.authorizationStatus||e.authorizationStatus===a.rb.AUTHORIZED?["/banking","transfer",this.bankingHelper.transactionNumberOrId(e)]:["/banking","transaction",this.bankingHelper.transactionNumberOrId(e)]}},{key:"resolveMenu",value:function(e){return e.redeemer&&this.authHelper.isSelfOrOwner(e.redeemer)?s.b.SEARCH_REDEEMED:e.buyer&&this.authHelper.isSelfOrOwner(e.buyer)?s.b.SEARCH_BOUGHT_VOUCHERS:this.authHelper.searchUsersMenu()}},{key:"changeExpirationFields",get:function(){return[{internalName:"newExpirationDate",name:this.i18n.general.newExpirationDate,type:a.p.DATE,required:!0},{internalName:"comments",name:this.i18n.general.comments,type:a.p.TEXT}]}}]),n}(Gt.a)).\u0275fac=function(e){return new(e||Zr)(f.Nb(f.r),f.Nb(i.M),f.Nb(r.a))},Zr.\u0275cmp=f.Hb({type:Zr,selectors:[["app-view-voucher"]],features:[f.wb],decls:6,vars:7,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf","ngIfElse"],["loading",""],[3,"heading","mobileHeading","headingActions"],[1,"d-flex","flex-grow-1","flex-column"],[1,"d-flex","flex-column","flex-sm-row-reverse","justify-content-sm-between"],["class","image d-flex justify-content-center mt-2 mb-4 align-self-center",4,"ngIf"],[1,"d-flex","flex-column","flex-grow-1"],[3,"label"],[3,"label",4,"ngIf"],["class","d-flex justify-content-start",4,"ngIf"],[1,"mt-3"],[1,"qr-container","image","d-flex","justify-content-center","mb-4","align-self-center"],["alt","QR-code","class","mw-100",3,"src",4,"ngIf"],[1,"image","d-flex","justify-content-center","mt-2","mb-4","align-self-center"],["size","160","imageSize","200","useLightbox","",3,"image"],[3,"user"],[3,"routerLink"],[1,"d-flex","justify-content-start"],[1,"break-nl"],["alt","QR-code",1,"mw-100",3,"src"]],template:function(e,t){if(1&e&&(f.Tb(0,"page-layout",0),f.ec(1,"async"),f.Fc(2,Wr,35,37,"page-content",1),f.ec(3,"async"),f.Sb(),f.Fc(4,Kr,2,0,"ng-template",null,2,f.Gc)),2&e){var n=f.uc(5);f.kc("ready",f.fc(1,3,t.data$)),f.zb(2),f.kc("ngIf",f.fc(3,5,t.data$))("ngIfElse",n)}},directives:[d.a,m.t,p.a,k.a,B.a,S.a,J.h,L.a],pipes:[m.b,H.a,qt.a,Ar.a],encapsulation:2,changeDetection:0}),Zr),tc=[{path:"",canActivateChild:[n("ofEL").a],children:[{path:":owner/account/:type",component:Te},{path:"transfer/:key",component:La},{path:"transfer/:account/:key",component:La},{path:"transaction/:key",component:ma},{path:"transfers-overview",component:Ra},{path:"transaction/:key/authorization-history",component:tn},{path:":from/payment",component:Ue},{path:":from/payment/:to",component:Ue},{path:"pos",component:Ue},{path:"qr",component:Ye},{path:":owner/installments",component:st},{path:":owner/authorized-payments",component:Ct,data:{kind:"authorized"}},{path:"authorized-payments",component:Vt,data:{kind:"authorized"}},{path:"pending-my-authorization",component:Vt,data:{kind:"myAuth"}},{path:":user/vouchers/redeem",component:Bi},{path:":user/vouchers/redeemed",component:pr},{path:":user/vouchers/buy",component:Ti},{path:":user/vouchers/bought",component:Xi},{path:"vouchers/:key",component:ec},{path:"vouchers",component:Nr}]}],nc=((Xr=function e(){_classCallCheck(this,e)}).\u0275mod=f.Lb({type:Xr}),Xr.\u0275inj=f.Kb({factory:function(e){return new(e||Xr)},imports:[[J.i.forChild(tc)],J.i]}),Xr);function ac(e,t){if(1&e&&(f.Tb(0,"notification",6),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.zb(1),f.Jc(" ",n.i18n.transaction.requiresAuthorization,"\n")}}function ic(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Ob(1,"user-link",8),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.fromUser),f.zb(1),f.kc("user",n.fromUser)}}function rc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.fromAccount),f.zb(1),f.Jc(" ",n.preview.fromAccount.type.name,"\n")}}function cc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Ob(1,"user-link",8),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.toUser),f.zb(1),f.kc("user",n.toUser)}}function oc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.toAccount),f.zb(1),f.Jc(" ",n.preview.toAccount.type.name,"\n")}}function lc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Hc(1),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.type),f.zb(1),f.Jc(" ",n.preview.paymentType.name,"\n")}}function sc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Hc(1),f.ec(2,"currency"),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.amount),f.zb(1),f.Jc(" ",f.gc(2,2,n.preview.mainAmount,n.preview.currency),"\n")}}function uc(e,t){if(1&e&&(f.Tb(0,"div"),f.Hc(1),f.ec(2,"currency"),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.zb(1),f.Kc(" ",n.fee.name,": ",f.gc(2,2,n.amount,a.preview.currency)," ")}}function bc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Fc(1,uc,3,5,"div",9),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.appliedFees),f.zb(1),f.kc("ngForOf",n.fees)}}function fc(e,t){1&e&&f.Ob(0,"custom-field-value",10),2&e&&f.kc("fieldValue",t.$implicit)}function dc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Hc(1),f.ec(2,"date"),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.dueDate),f.zb(1),f.Jc(" ",f.fc(2,2,n.preview.installments[0].dueDate),"\n")}}function mc(e,t){if(1&e&&(f.Tb(0,"thead"),f.Tb(1,"th"),f.Hc(2),f.Sb(),f.Tb(3,"th"),f.Hc(4),f.Sb(),f.Tb(5,"th",12),f.Hc(6),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.zb(2),f.Ic(n.i18n.transaction.installmentNumber),f.zb(2),f.Ic(n.i18n.transaction.dueDate),f.zb(2),f.Ic(n.i18n.transaction.amount)}}function pc(e,t){if(1&e&&(f.Tb(0,"tr"),f.Tb(1,"td"),f.Hc(2),f.Sb(),f.Tb(3,"td"),f.Hc(4),f.ec(5,"date"),f.Sb(),f.Tb(6,"td",12),f.Hc(7),f.ec(8,"currency"),f.Sb(),f.Sb()),2&e){var n=t.$implicit,a=f.dc(2);f.zb(2),f.Jc(" ",n.number," "),f.zb(2),f.Jc(" ",f.fc(5,3,n.dueDate)," "),f.zb(3),f.Jc(" ",f.gc(8,5,n.mainAmount,a.preview.currency)," ")}}function hc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Tb(1,"table",11),f.Fc(2,mc,7,3,"thead",4),f.ec(3,"async"),f.Tb(4,"tbody"),f.Fc(5,pc,9,8,"tr",9),f.Sb(),f.Sb(),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.installments),f.zb(2),f.kc("ngIf",f.fc(3,3,n.layout.gtxs$)),f.zb(3),f.kc("ngForOf",n.preview.installments)}}function gc(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.Qb()),2&e){var n=f.dc(3);f.zb(1),f.Jc(" ",n.i18n.transaction.recurringPaymentNowManual," ")}}function vc(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.Qb()),2&e){var n=f.dc(3);f.zb(1),f.Jc(" ",n.i18n.transaction.recurringPaymentNowFixed(n.preview.payment.occurrencesCount)," ")}}function yc(e,t){if(1&e&&(f.Rb(0),f.Fc(1,gc,2,1,"ng-container",4),f.Fc(2,vc,2,1,"ng-container",4),f.Qb()),2&e){var n=f.dc(2);f.zb(1),f.kc("ngIf",null==n.preview.payment.occurrencesCount),f.zb(1),f.kc("ngIf",null!=n.preview.payment.occurrencesCount)}}function kc(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.ec(2,"date"),f.Qb()),2&e){var n=f.dc(3);f.zb(1),f.Jc(" ",n.i18n.transaction.recurringPaymentDateManual(f.fc(2,1,n.preview.payment.firstOccurrenceDate))," ")}}var Sc=function(e,t){return{date:e,count:t}};function Tc(e,t){if(1&e&&(f.Rb(0),f.Hc(1),f.ec(2,"date"),f.Qb()),2&e){var n=f.dc(3);f.zb(1),f.Jc(" ",n.i18n.transaction.recurringPaymentDateFixed(f.oc(3,Sc,f.fc(2,1,n.preview.payment.firstOccurrenceDate),n.preview.payment.occurrencesCount))," ")}}function zc(e,t){if(1&e&&(f.Fc(0,kc,3,3,"ng-container",4),f.Fc(1,Tc,3,6,"ng-container",4)),2&e){var n=f.dc(2);f.kc("ngIf",null==n.preview.payment.occurrencesCount),f.zb(1),f.kc("ngIf",null!=n.preview.payment.occurrencesCount)}}function wc(e,t){if(1&e&&(f.Tb(0,"label-value",7),f.Fc(1,yc,3,2,"ng-container",13),f.Fc(2,zc,2,2,"ng-template",null,14,f.Gc),f.Sb()),2&e){var n=f.uc(3),a=f.dc();f.kc("label",a.i18n.transaction.recurringPayment),f.zb(1),f.kc("ngIf",null==a.preview.payment.firstOccurrenceDate)("ngIfElse",n)}}function Ic(e,t){if(1&e&&f.Ob(0,"label-value",15),2&e){var n=f.dc();f.kc("label",n.i18n.general.description)("value",n.preview.payment.description)}}function Fc(e,t){1&e&&f.Ob(0,"hr")}function Oc(e,t){1&e&&f.Ob(0,"hr")}function Cc(e,t){if(1&e&&(f.Rb(0),f.Fc(1,Oc,1,0,"hr",4),f.ec(2,"async"),f.Tb(3,"div",16),f.Hc(4),f.Sb(),f.Qb()),2&e){var n=f.dc();f.zb(1),f.kc("ngIf",f.fc(2,2,n.layout.gtxxs$)),f.zb(3),f.Ic(n.preview.confirmationMessage)}}function Pc(e,t){1&e&&f.Ob(0,"hr")}function Hc(e,t){if(1&e){var n=f.Ub();f.Rb(0),f.Fc(1,Pc,1,0,"hr",4),f.ec(2,"async"),f.Tb(3,"form",17),f.Tb(4,"confirmation-password",18),f.bc("confirmationModeChanged",(function(e){return f.wc(n),f.dc().confirmationModeChanged.emit(e)}))("confirmed",(function(e){return f.wc(n),f.dc().confirmed.emit(e)})),f.Sb(),f.Sb(),f.Qb()}if(2&e){var a=f.dc();f.zb(1),f.kc("ngIf",f.fc(2,5,a.layout.gtxxs$)),f.zb(2),f.kc("formGroup",a.form),f.zb(1),f.kc("pos",a.pos)("passwordInput",a.preview.confirmationPasswordInput)("createDeviceConfirmation",a.createDeviceConfirmation)}}var xc,Dc,Nc=((Dc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).bankingHelper=a,i.confirmationModeChanged=new f.n,i.confirmed=new f.n,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.fromUser=this.preview.fromAccount.user,this.fromSelf=this.fromUser&&this.authHelper.isSelf(this.fromUser),this.fromSystem=this.preview.fromAccount.kind===a.a.SYSTEM,this.toUser=this.preview.toAccount.user,this.toSelf=this.toUser&&this.authHelper.isSelf(this.toUser),this.toSystem=this.preview.toAccount.kind===a.a.SYSTEM,this.form=this.formBuilder.group({}),this.form.setControl("confirmationPassword",this.confirmationPassword),this.fees=this.preview.fees,Object(l.h)(this.fees)&&1===(this.preview.installments||[]).length&&(this.fees=this.preview.installments[0].fees),this.createDeviceConfirmation=function(){return e.pos?e.preview.payment:{type:a.s.PERFORM_PAYMENT,from:c.a.accountOwner(e.preview.fromAccount),to:c.a.accountOwner(e.preview.toAccount),paymentType:e.preview.paymentType.id,amount:e.preview.payment.amount}},this.preview.confirmationPasswordInput||this.addShortcut(ii.k,(function(){return e.confirmed.emit()}))}}]),n}(P.a)).\u0275fac=function(e){return new(e||Dc)(f.Nb(f.r),f.Nb(r.a))},Dc.\u0275cmp=f.Hb({type:Dc,selectors:[["payment-step-confirm"]],inputs:{pos:"pos",preview:"preview",confirmationPassword:"confirmationPassword",showPaymentType:"showPaymentType"},outputs:{confirmationModeChanged:"confirmationModeChanged",confirmed:"confirmed"},features:[f.wb],decls:20,vars:23,consts:[["class","mb-3","type","warning",4,"ngIf"],[3,"label",4,"ngIf"],[3,"fieldValue",4,"ngFor","ngForOf"],["valueFormat","break",3,"label","value",4,"ngIf"],[4,"ngIf"],[1,"totalAmount",3,"label"],["type","warning",1,"mb-3"],[3,"label"],[3,"user"],[4,"ngFor","ngForOf"],[3,"fieldValue"],[1,"table","table-hover"],[1,"text-right"],[4,"ngIf","ngIfElse"],["occurrencesDateSet",""],["valueFormat","break",3,"label","value"],[1,"break-nl"],[3,"formGroup"],["focused","","formControlName","confirmationPassword",3,"pos","passwordInput","createDeviceConfirmation","confirmationModeChanged","confirmed"]],template:function(e,t){1&e&&(f.Fc(0,ac,2,1,"notification",0),f.Fc(1,ic,2,2,"label-value",1),f.Fc(2,rc,2,2,"label-value",1),f.Fc(3,cc,2,2,"label-value",1),f.Fc(4,oc,2,2,"label-value",1),f.Fc(5,lc,2,2,"label-value",1),f.Fc(6,sc,3,5,"label-value",1),f.Fc(7,bc,2,2,"label-value",1),f.Fc(8,fc,1,1,"custom-field-value",2),f.Fc(9,dc,3,4,"label-value",1),f.Fc(10,hc,6,5,"label-value",1),f.Fc(11,wc,4,3,"label-value",1),f.Fc(12,Ic,1,2,"label-value",3),f.Fc(13,Fc,1,0,"hr",4),f.ec(14,"async"),f.Tb(15,"label-value",5),f.Hc(16),f.ec(17,"currency"),f.Sb(),f.Fc(18,Cc,5,4,"ng-container",4),f.Fc(19,Hc,5,7,"ng-container",4)),2&e&&(f.kc("ngIf",t.preview.pendingAuthorization),f.zb(1),f.kc("ngIf",!t.fromSelf&&t.fromUser),f.zb(1),f.kc("ngIf",t.fromSystem),f.zb(1),f.kc("ngIf",t.toUser),f.zb(1),f.kc("ngIf",t.toSystem),f.zb(1),f.kc("ngIf",t.showPaymentType),f.zb(1),f.kc("ngIf",null!=t.preview.mainAmount&&t.preview.totalAmount!==t.preview.mainAmount),f.zb(1),f.kc("ngIf",(null==t.fees?null:t.fees.length)>0),f.zb(1),f.kc("ngForOf",t.preview.customValues),f.zb(1),f.kc("ngIf",1===(null==t.preview.installments?null:t.preview.installments.length)),f.zb(1),f.kc("ngIf",(null==t.preview.installments?null:t.preview.installments.length)>1),f.zb(1),f.kc("ngIf","recurring"===t.preview.payment.scheduling),f.zb(1),f.kc("ngIf",t.preview.payment.description),f.zb(1),f.kc("ngIf",f.fc(14,18,t.layout.gtxxs$)),f.zb(2),f.kc("label",t.i18n.transaction.totalAmount),f.zb(1),f.Jc(" ",f.gc(17,20,t.preview.totalAmount,t.preview.currency),"\n"),f.zb(2),f.kc("ngIf",(t.preview.confirmationMessage||"").length>0),f.zb(1),f.kc("ngIf",t.preview.confirmationPasswordInput))},directives:[m.t,m.s,k.a,Fi.a,S.a,ln.a,y.I,y.w,y.n,ci.a,oi.a,y.v,y.l],pipes:[m.b,H.a,V.a],encapsulation:2,changeDetection:0}),Dc),Ac=((xc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).performPayment=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.performed.authorizationStatus===a.rb.PENDING?(this.icon="scheduled",this.message=this.performed.transactionNumber?this.i18n.transaction.pendingWithNumber(this.performed.transactionNumber):this.i18n.transaction.pending):(this.icon="done",this.message=this.performed.transactionNumber?this.i18n.transaction.processedWithNumber(this.performed.transactionNumber):this.i18n.transaction.processed),this.addShortcut(ii.k,(function(){return e.performPayment.viewPerformed()}))}}]),n}(P.a)).\u0275fac=function(e){return new(e||xc)(f.Nb(f.r),f.Nb(Ue))},xc.\u0275cmp=f.Hb({type:xc,selectors:[["payment-step-done"]],inputs:{performed:"performed"},features:[f.wb],decls:6,vars:2,consts:[[1,"text-center","text-sm-left","px-3"],[1,"d-inline-flex","flex-column","flex-sm-row","align-items-center"],[1,"d-flex","justify-content-center","py-4","positive","pr-0","pr-sm-4"],["size","3rem",3,"icon"],[1,"py-4"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Tb(1,"div",1),f.Tb(2,"div",2),f.Ob(3,"icon",3),f.Sb(),f.Tb(4,"div",4),f.Hc(5),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.zb(3),f.kc("icon",t.icon),f.zb(2),f.Ic(t.message))},directives:[Dn.a],encapsulation:2,changeDetection:0}),xc),_c=n("a/z7"),$c=n("Kj3r"),Ec=n("Xel3"),Rc=n("Zcpn"),Uc=n("YG2p"),Mc=["toUser"],Lc=["amount"];function jc(e,t){if(1&e&&(f.Tb(0,"label-value",15),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.fromUser),f.zb(1),f.kc("user",n.fromUser)}}var Bc=function(e,t,n){return{positive:e,negative:t,"text-right":n}};function Jc(e,t){if(1&e&&(f.Tb(0,"label-value",18),f.ec(1,"async"),f.Tb(2,"div",19),f.ec(3,"async"),f.Hc(4),f.ec(5,"currency"),f.Sb(),f.Sb()),2&e){var n=f.dc(2);f.kc("label",f.fc(1,3,n.accountBalanceLabel$)),f.zb(2),f.kc("ngClass",f.pc(10,Bc,n.format.isPositive(n.singleAccount.status.balance),n.format.isNegative(n.singleAccount.status.balance),f.fc(3,5,n.layout.ltsm$))),f.zb(2),f.Jc(" ",f.gc(5,7,n.singleAccount.status.balance,n.singleAccount.currency)," ")}}function Vc(e,t){if(1&e&&(f.Rb(0),f.Fc(1,Jc,6,14,"label-value",17),f.Qb()),2&e){var n=f.dc();f.zb(1),f.kc("ngIf",n.singleAccount.status)}}function Gc(e,t){1&e&&f.Ob(0,"br")}function qc(e,t){1&e&&f.Hc(0," - ")}function Qc(e,t){if(1&e&&(f.Rb(0),f.Fc(1,Gc,1,0,"br",2),f.ec(2,"async"),f.Fc(3,qc,1,0,"ng-template",null,30,f.Gc),f.Hc(5),f.Qb()),2&e){var n=f.uc(4),a=f.dc().$implicit,i=f.dc(2);f.zb(1),f.kc("ngIf",f.fc(2,3,i.layout.ltsm$))("ngIfElse",n),f.zb(4),f.Jc(" ",a.number," ")}}var Yc=function(e,t){return{positive:e,negative:t}};function Wc(e,t){if(1&e&&(f.Tb(0,"div",31),f.Hc(1),f.ec(2,"currency"),f.Sb()),2&e){var n=f.dc().$implicit,a=f.dc(2);f.kc("ngClass",f.oc(5,Yc,a.format.isPositive(n.status.balance),a.format.isNegative(n.status.balance))),f.zb(1),f.Jc(" ",f.gc(2,2,n.status.balance,n.currency)," ")}}function Kc(e,t){if(1&e){var n=f.Ub();f.Tb(0,"div",23),f.Tb(1,"div"),f.Tb(2,"div",24),f.Tb(3,"input",25,26),f.bc("keyup.enter",(function(){return f.wc(n),f.uc(4).click()})),f.Sb(),f.Tb(5,"label",27),f.Tb(6,"div",28),f.Hc(7),f.Fc(8,Qc,6,5,"ng-container",14),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Fc(9,Wc,3,8,"div",29),f.Sb()}if(2&e){var a=t.$implicit,i=f.dc(2);f.zb(1),f.Bb(i.pos?"col":"col-7 col-sm-8 col-md-5"),f.zb(2),f.kc("id","from_"+a.id)("value",a.type.id),f.zb(2),f.kc("for","from_"+a.id),f.zb(2),f.Jc(" ",a.type.name," "),f.zb(1),f.kc("ngIf",a.number),f.zb(1),f.kc("ngIf",!i.pos&&a.status)}}function Zc(e,t){if(1&e&&(f.Tb(0,"label-value",20),f.Fc(1,Kc,10,8,"div",21),f.Ob(2,"field-errors",22),f.Sb()),2&e){var n=f.dc();f.kc("label",n.pos?n.i18n.transaction.toAccount:n.i18n.transaction.fromAccount),f.zb(1),f.kc("ngForOf",n.data.accounts),f.zb(1),f.kc("control",n.form.get("account"))}}function Xc(e,t){if(1&e&&f.Ob(0,"field-option",37),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.display)}}function eo(e,t){if(1&e&&(f.Tb(0,"single-selection-field",35),f.Fc(1,Xc,1,2,"field-option",36),f.Sb()),2&e){var n=f.dc(2);f.zb(1),f.kc("ngForOf",n.data.allowedUsers)}}var to=function(e){return[e]},no=function(e){return{usersToExclude:e}};function ao(e,t){if(1&e){var n=f.Ub();f.Tb(0,"user-field",38,39),f.bc("selected",(function(e){f.wc(n),f.dc(2);var t=f.uc(10);return e?t.focus():null})),f.Sb()}if(2&e){var a=f.dc(2);f.kc("autoSearch",!a.allowPrincipal)("filters",f.nc(9,no,a.fromUser&&!a.fromSelf?f.nc(7,to,a.fromParam):null))("allowContacts",a.allowContacts)("allowSearch",a.allowSearch)("allowPrincipal",a.allowPrincipal)("allowQrCode",a.allowQrCode)("principalTypes",a.data.principalTypes)}}function io(e,t){if(1&e&&(f.Tb(0,"label-value",32),f.Fc(1,eo,2,1,"single-selection-field",33),f.Fc(2,ao,2,11,"ng-template",null,34,f.Gc),f.Sb()),2&e){var n=f.uc(3),a=f.dc();f.kc("label",a.pos?a.i18n.transaction.fromUser:a.i18n.transaction.toUser),f.zb(1),f.kc("ngIf",a.fixedUsersList)("ngIfElse",n)}}function ro(e,t){if(1&e&&(f.Tb(0,"label-value",40),f.Ob(1,"user-link",16),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.toUser),f.zb(1),f.kc("user",n.toUser)}}function co(e,t){if(1&e&&f.Ob(0,"field-option",37),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.name)}}function oo(e,t){if(1&e&&(f.Tb(0,"single-selection-field",41,42),f.Fc(2,co,1,2,"field-option",36),f.ec(3,"async"),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.type),f.zb(2),f.kc("ngForOf",f.fc(3,2,n.paymentTypes$))}}function lo(e,t){if(1&e&&f.Ob(0,"custom-field-input",43),2&e){var n=t.$implicit,a=f.dc();f.kc("field",n)("formControl",a.customValuesControlGetter(n))}}function so(e,t){if(1&e&&f.Ob(0,"field-option",49),2&e){var n=f.dc(2);f.kc("text",n.i18n.transaction.schedulingSingle)}}function uo(e,t){if(1&e&&f.Ob(0,"field-option",50),2&e){var n=f.dc(2);f.kc("text",n.i18n.transaction.schedulingInstallments)}}function bo(e,t){if(1&e&&f.Ob(0,"field-option",51),2&e){var n=f.dc(2);f.kc("text",n.i18n.transaction.schedulingRecurring)}}function fo(e,t){if(1&e&&(f.Tb(0,"single-selection-field",44),f.Ob(1,"field-option",45),f.Fc(2,so,1,1,"field-option",46),f.Fc(3,uo,1,1,"field-option",47),f.Fc(4,bo,1,1,"field-option",48),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.scheduling),f.zb(1),f.kc("text",n.i18n.transaction.schedulingDirect),f.zb(1),f.kc("ngIf",(null==n.paymentTypeData$.value?null:n.paymentTypeData$.value.maxInstallments)>0),f.zb(1),f.kc("ngIf",(null==n.paymentTypeData$.value?null:n.paymentTypeData$.value.maxInstallments)>1),f.zb(1),f.kc("ngIf",null==n.paymentTypeData$.value?null:n.paymentTypeData$.value.allowsRecurringPayments)}}function mo(e,t){if(1&e&&f.Ob(0,"date-field",52),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.dueDate)}}function po(e,t){if(1&e&&f.Ob(0,"date-field",52),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.firstInstallmentDate)}}function ho(e,t){if(1&e&&(f.Rb(0),f.Ob(1,"input-field",53),f.Tb(2,"radio-group-field",54),f.Ob(3,"field-option",37),f.Ob(4,"field-option",37),f.Sb(),f.Fc(5,po,1,1,"date-field",55),f.Qb()),2&e){var n=f.dc();f.zb(1),f.kc("label",n.i18n.transaction.installmentsCount),f.zb(1),f.kc("label",n.i18n.transaction.firstInstallment),f.zb(1),f.kc("value",!0)("text",n.i18n.general.now),f.zb(1),f.kc("value",!1)("text",n.i18n.general.futureDate),f.zb(1),f.kc("ngIf",!1===n.form.value.firstInstallmentIsNow)}}function go(e,t){if(1&e&&f.Ob(0,"date-field",60),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.firstOccurrenceDate)}}function vo(e,t){if(1&e&&f.Ob(0,"input-field",61),2&e){var n=f.dc(2);f.kc("label",n.i18n.transaction.occurrencesCount)}}function yo(e,t){if(1&e&&(f.Rb(0),f.Tb(1,"radio-group-field",56),f.Ob(2,"field-option",37),f.Ob(3,"field-option",37),f.Sb(),f.Fc(4,go,1,1,"date-field",57),f.Tb(5,"radio-group-field",58),f.Ob(6,"field-option",37),f.Ob(7,"field-option",37),f.Sb(),f.Fc(8,vo,1,1,"input-field",59),f.Qb()),2&e){var n=f.dc();f.zb(1),f.kc("label",n.i18n.transaction.firstOccurrence),f.zb(1),f.kc("value",!0)("text",n.i18n.general.now),f.zb(1),f.kc("value",!1)("text",n.i18n.general.futureDate),f.zb(1),f.kc("ngIf",!1===n.form.value.firstOccurrenceIsNow),f.zb(1),f.kc("label",n.i18n.transaction.repeatUntil),f.zb(1),f.kc("value",!0)("text",n.i18n.transaction.repeatUntilManual),f.zb(1),f.kc("value",!1)("text",n.i18n.transaction.repeatUntilFixed),f.zb(1),f.kc("ngIf",!1===n.form.value.repeatUntilCanceled)}}function ko(e,t){if(1&e&&f.Ob(0,"textarea-field",63),2&e){var n=f.dc().ngIf,a=f.dc();f.kc("required","required"===n)("label",a.i18n.general.description)}}function So(e,t){if(1&e&&(f.Rb(0),f.Fc(1,ko,1,2,"textarea-field",62),f.Qb()),2&e){var n=t.ngIf;f.zb(1),f.kc("ngIf","disabled"!==n)}}var To,zo,wo=[_c.a.FORBIDDEN,_c.a.UNAUTHORIZED,_c.a.NOT_FOUND],Io=((zo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a,i,r){var c;return _classCallCheck(this,n),(c=t.call(this,e)).bankingHelper=a,c.paymentsService=i,c.posService=r,c.availablePaymentTypes=new f.n,c.accountBalanceLabel$=new u.a(null),c.fixedDestination=!1,c.paymentTypes$=new u.a(null),c}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.fromParam=this.route.snapshot.params.from,this.dataCache=this.stateManager.get("dataCache",(function(){return new Map})),this.fixedDestination=null!=this.data.toKind,this.fromUser=this.data.fromUser,this.fromSelf=this.authHelper.isSelf(this.fromUser),this.toUser=this.data.toUser,this.fixedDestination?this.setFetchedPaymentTypes(this.data):this.addSub(this.form.get("subject").valueChanges.pipe(Object(Le.a)(),Object($c.a)(c.a.DEBOUNCE_TIME)).subscribe((function(){return e.fetchPaymentTypes()}))),this.addSub(this.form.get("account").valueChanges.pipe(Object(Le.a)(),Object($c.a)(c.a.DEBOUNCE_TIME)).subscribe((function(){return e.adjustPaymentTypes()}))),this.addSub(this.form.get("type").valueChanges.pipe(Object(Le.a)(),Object($c.a)(c.a.DEBOUNCE_TIME)).subscribe((function(t){return e.fetchPaymentTypeData(t)}))),this.addSub(this.layout.xxs$.subscribe((function(){return e.updateAccountBalanceLabel()}))),this.updateAccountBalanceLabel()}},{key:"updateAccountBalanceLabel",value:function(){this.accountBalanceLabel$.next(this.layout.xxs?this.i18n.account.balance:this.i18n.transaction.accountBalance)}},{key:"fetchPaymentTypes",value:function(){var e=this;this.dataCache.clear(),this.fetchedPaymentTypes=null;var t=c.a.escapeNumeric(this.form.value.subject);""!==t&&this.errorHandler.requestWithCustomErrorHandler((function(n){(e.pos?e.posService.dataForReceivePayment({from:t,fields:["fromUser","paymentTypes","paymentTypeData"]}):e.paymentsService.dataForPerformPayment({owner:e.fromParam,to:t,fields:["toUser","paymentTypes","paymentTypeData"]})).pipe(Object(Oe.a)()).subscribe((function(t){e.setFetchedPaymentTypes(t)}),(function(t){if(e.allowPrincipal&&e.userField&&t.status===_c.a.NOT_FOUND){var a=t.error;if("string"==typeof a)try{a=JSON.parse(a)}catch(r){a={}}var i=a.entityType;if(!Object(l.a)(i)&&i.endsWith("User"))return void e.userField.search()}wo.includes(t.status)||n(t)}))}))}},{key:"adjustPaymentTypes",value:function(){var e=this.form.value;if(0!==(e.subject||"").trim().length){var t=this.fetchedPaymentTypes||[];Object(l.h)(t)&&this.notification.error(this.i18n.transaction.noTypes);var n=t.filter((function(t){return t.from.id===e.account})),a=this.form.value.type,i=null;Object(l.h)(n)?i={message:this.i18n.transaction.noTypesSelection}:(this.paymentTypes$.next(n),n.find((function(e){return e.id===a}))||(a=n[0].id),this.form.get("account").setErrors(null)),this.form.patchValue({type:a}),this.form.get("account").setErrors(i),this.form.get("account").markAsTouched(),Object(l.h)(a)||this.fetchPaymentTypeData(a),this.availablePaymentTypes.emit(n)}}},{key:"setFetchedPaymentTypes",value:function(e){this.userField&&(this.userField.user=this.pos?e.fromUser:e.toUser),this.fetchedPaymentTypes=e.paymentTypes;var t=e.paymentTypeData;t&&this.dataCache.set(t.id,t),this.adjustPaymentTypes()}},{key:"fetchPaymentTypeData",value:function(e){var t=this,n=this.form.value;if(!Object(l.h)(n.subject)&&!Object(l.h)(e)){var a=this.dataCache.get(e);a?this.setPaymentTypeData(a):(this.setPaymentTypeData(null),this.errorHandler.requestWithCustomErrorHandler((function(a){(t.pos?t.posService.dataForReceivePayment({from:n.subject,type:e,fields:["paymentTypeData"]}):t.paymentsService.dataForPerformPayment({owner:t.fromParam,to:n.subject,type:e,fields:["paymentTypeData"]})).pipe(Object(Oe.a)()).subscribe((function(e){t.setPaymentTypeData(e.paymentTypeData)}),(function(e){wo.includes(e.status)||a(e)}))})))}}},{key:"setPaymentTypeData",value:function(e){((this.paymentTypeData$.value||{}).id||null)!==((e||{}).id||null)&&(e&&(this.dataCache.set(e.id,e),Object(l.j)(this.amountField)),this.paymentTypeData$.next(e))}},{key:"fixedUsersList",get:function(){return!Object(l.h)(this.data.allowedUsers)}},{key:"allowQrCode",get:function(){return this.allowPrincipal&&this.data.allowScanQrCode}},{key:"allowPrincipal",get:function(){return!Object(l.h)(this.data.principalTypes)}},{key:"allowSearch",get:function(){return this.data.allowAutocomplete}},{key:"allowContacts",get:function(){return this.data.allowContacts}},{key:"singleAccount",get:function(){var e=this.data.accounts||[];return 1===e.length?e[0]:null}}]),n}(P.a)).\u0275fac=function(e){return new(e||zo)(f.Nb(f.r),f.Nb(r.a),f.Nb(i.z),f.Nb(i.B))},zo.\u0275cmp=f.Hb({type:zo,selectors:[["payment-step-form"]],viewQuery:function(e,t){var n;1&e&&(f.Lc(Mc,!0),f.Cc(Lc,!0)),2&e&&(f.tc(n=f.cc())&&(t.userField=n.first),f.tc(n=f.cc())&&(t.amountField=n.first))},inputs:{data:"data",pos:"pos",form:"form",currency:"currency",paymentTypeData$:"paymentTypeData$",customValuesControlGetter:"customValuesControlGetter"},outputs:{availablePaymentTypes:"availablePaymentTypes"},features:[f.wb],decls:22,vars:29,consts:[[3,"formGroup"],["kind","field",3,"label",4,"ngIf"],[4,"ngIf","ngIfElse"],["multipleAccounts",""],["kind","field","required","",3,"label",4,"ngIf"],["kind","fieldView",3,"label",4,"ngIf"],["formControlName","type","required","",3,"label",4,"ngIf"],["formControlName","amount","required","",3,"focused","label","scale","prefix","suffix"],["amount",""],[3,"field","formControl",4,"ngFor","ngForOf"],["formControlName","scheduling","required","",3,"label",4,"ngIf"],[3,"ngSwitch"],["formControlName","firstInstallmentDate","required","","minDate","tomorrow","maxDate","future5",3,"label",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngIf"],["kind","field",3,"label"],[3,"user"],["kind","fieldView","labelPosition","sideForced","noWrapLabel","",3,"label",4,"ngIf"],["kind","fieldView","labelPosition","sideForced","noWrapLabel","",3,"label"],[1,"w-100","text-nowrap","text-right","text-xs-left","font-weight-bold",3,"ngClass"],["required","","kind","field",3,"label"],["class","w-100 row no-gutters mb-2",4,"ngFor","ngForOf"],[3,"control"],[1,"w-100","row","no-gutters","mb-2"],[1,"custom-control","custom-radio"],["type","radio","formControlName","account",1,"custom-control-input",3,"id","value","keyup.enter"],["radio",""],[1,"custom-control-label",3,"for"],[1,"ml-1"],["class","col-5 col-sm-4 col-md-7 pl-2 text-right text-xs-left font-weight-bold",3,"ngClass",4,"ngIf"],["separator",""],[1,"col-5","col-sm-4","col-md-7","pl-2","text-right","text-xs-left","font-weight-bold",3,"ngClass"],["kind","field","required","",3,"label"],["focused","","formControlName","subject",4,"ngIf","ngIfElse"],["toUserField",""],["focused","","formControlName","subject"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["focused","","formControlName","subject",3,"autoSearch","filters","allowContacts","allowSearch","allowPrincipal","allowQrCode","principalTypes","selected"],["toUser",""],["kind","fieldView",3,"label"],["formControlName","type","required","",3,"label"],["type",""],[3,"field","formControl"],["formControlName","scheduling","required","",3,"label"],["value","direct",3,"text"],["value","futureDate",3,"text",4,"ngIf"],["value","scheduled",3,"text",4,"ngIf"],["value","recurring",3,"text",4,"ngIf"],["value","futureDate",3,"text"],["value","scheduled",3,"text"],["value","recurring",3,"text"],["formControlName","firstInstallmentDate","required","","minDate","tomorrow","maxDate","future5",3,"label"],["type","number","fieldSize","small","required","","numbersOnly","","formControlName","installmentsCount",3,"label"],["formControlName","firstInstallmentIsNow",3,"label"],["formControlName","firstInstallmentDate","required","","minDate","tomorrow","maxDate","future5",3,"label",4,"ngIf"],["formControlName","firstOccurrenceIsNow",3,"label"],["formControlName","firstOccurrenceDate","minDate","tomorrow","required","","minDate","tomorrow","maxDate","future5",3,"label",4,"ngIf"],["formControlName","repeatUntilCanceled",3,"label"],["type","number","fieldSize","small","numbersOnly","","formControlName","occurrencesCount","required","",3,"label",4,"ngIf"],["formControlName","firstOccurrenceDate","minDate","tomorrow","required","","minDate","tomorrow","maxDate","future5",3,"label"],["type","number","fieldSize","small","numbersOnly","","formControlName","occurrencesCount","required","",3,"label"],["formControlName","description","required","",3,"required","label",4,"ngIf"],["formControlName","description","required","",3,"required","label"]],template:function(e,t){if(1&e&&(f.Rb(0,0),f.Fc(1,jc,2,2,"label-value",1),f.Fc(2,Vc,2,1,"ng-container",2),f.Fc(3,Zc,3,3,"ng-template",null,3,f.Gc),f.Fc(5,io,4,3,"label-value",4),f.Fc(6,ro,2,2,"label-value",5),f.Fc(7,oo,4,4,"single-selection-field",6),f.ec(8,"async"),f.Ob(9,"decimal-field",7,8),f.Fc(11,lo,1,2,"custom-field-input",9),f.ec(12,"async"),f.Fc(13,fo,5,5,"single-selection-field",10),f.ec(14,"async"),f.ec(15,"async"),f.Rb(16,11),f.Fc(17,mo,1,1,"date-field",12),f.Fc(18,ho,6,7,"ng-container",13),f.Fc(19,yo,9,12,"ng-container",13),f.Qb(),f.Fc(20,So,2,1,"ng-container",14),f.ec(21,"async"),f.Qb()),2&e){var n,a,i,r=f.uc(4),c=(null==(n=f.fc(8,19,t.paymentTypes$))?null:n.length)>1,o=null==(a=f.fc(12,21,t.paymentTypeData$))?null:a.customFields,l=null,s=(null==(l=f.fc(14,23,t.paymentTypeData$))?null:l.allowsRecurringPayments)||(null==(l=f.fc(15,25,t.paymentTypeData$))?null:l.maxInstallments)>0,u=(null==(i=f.fc(21,27,t.paymentTypeData$))?null:i.descriptionAvailability)||"disabled";f.kc("formGroup",t.form),f.zb(1),f.kc("ngIf",t.fromUser&&!t.fromSelf),f.zb(1),f.kc("ngIf",t.singleAccount)("ngIfElse",r),f.zb(3),f.kc("ngIf",!t.fixedDestination),f.zb(1),f.kc("ngIf",t.fixedDestination&&t.toUser),f.zb(1),f.kc("ngIf",c),f.zb(2),f.kc("focused",t.fixedDestination)("label",t.i18n.transaction.amount)("scale",null==t.currency?null:t.currency.decimalDigits)("prefix",null==t.currency?null:t.currency.prefix)("suffix",null==t.currency?null:t.currency.suffix),f.zb(2),f.kc("ngForOf",o),f.zb(2),f.kc("ngIf",s),f.zb(3),f.kc("ngSwitch",t.form.value.scheduling),f.zb(1),f.kc("ngSwitchCase","futureDate"),f.zb(1),f.kc("ngSwitchCase","scheduled"),f.zb(1),f.kc("ngSwitchCase","recurring"),f.zb(1),f.kc("ngIf",u)}},directives:[y.w,y.n,m.t,I.a,y.v,y.l,y.D,oi.a,m.s,m.x,m.y,k.a,S.a,m.q,Ec.a,y.A,y.e,T.a,z.a,F.a,Ya.a,y.k,w.a,O.a,Rc.a,hr.a,Uc.a],pipes:[m.b,H.a],encapsulation:2,changeDetection:0}),zo),Fo=((To=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).receiveQrPayment=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.payment.authorizationStatus===a.rb.PENDING?(this.icon="scheduled",this.message=this.payment.transactionNumber?this.i18n.transaction.pendingWithNumber(this.payment.transactionNumber):this.i18n.transaction.pending):(this.icon="done",this.message=this.payment.transactionNumber?this.i18n.transaction.processedWithNumber(this.payment.transactionNumber):this.i18n.transaction.processed),this.addShortcut(ii.k,(function(){return e.receiveQrPayment.viewPerformed()}))}}]),n}(P.a)).\u0275fac=function(e){return new(e||To)(f.Nb(f.r),f.Nb(Ye))},To.\u0275cmp=f.Hb({type:To,selectors:[["receive-qr-payment-step-done"]],inputs:{payment:"payment"},features:[f.wb],decls:6,vars:2,consts:[[1,"text-center","text-sm-left","px-3"],[1,"d-inline-flex","flex-column","flex-sm-row","align-items-center"],[1,"d-flex","justify-content-center","py-4","positive","pr-0","pr-sm-4","positive"],["size","3rem",3,"icon"],[1,"py-4"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Tb(1,"div",1),f.Tb(2,"div",2),f.Ob(3,"icon",3),f.Sb(),f.Tb(4,"div",4),f.Hc(5),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.zb(3),f.kc("icon",t.icon),f.zb(2),f.Ic(t.message))},directives:[Dn.a],encapsulation:2,changeDetection:0}),To),Oo=["amount"];function Co(e,t){if(1&e&&f.Ob(0,"field-option",8),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.type.name)}}function Po(e,t){if(1&e&&(f.Tb(0,"radio-group-field",6),f.Fc(1,Co,1,2,"field-option",7),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.toAccount),f.zb(1),f.kc("ngForOf",n.data.accounts)}}function Ho(e,t){if(1&e&&f.Ob(0,"field-option",8),2&e){var n=t.$implicit;f.kc("value",n.id)("text",n.name)}}function xo(e,t){if(1&e&&(f.Tb(0,"single-selection-field",9),f.Fc(1,Ho,1,2,"field-option",7),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.type),f.zb(1),f.kc("ngForOf",n.transferTypes)}}function Do(e,t){if(1&e&&f.Ob(0,"custom-field-input",11),2&e){var n=t.$implicit;f.kc("formControlName",n.internalName)("field",n)}}function No(e,t){if(1&e&&(f.Rb(0,0),f.Fc(1,Do,1,2,"custom-field-input",10),f.Qb()),2&e){var n=f.dc();f.kc("formGroup",n.form.controls.customValues),f.zb(1),f.kc("ngForOf",n.typeData.customFields)}}function Ao(e,t){if(1&e&&f.Ob(0,"textarea-field",12),2&e){var n=f.dc();f.kc("label",n.i18n.general.description)("required","required"===(null==n.typeData?null:n.typeData.descriptionAvailability))}}var _o,$o=((_o=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"singleAccount",get:function(){return 1===this.data.accounts.length}},{key:"currency",get:function(){return null==this.typeData?null:this.typeData.currency}}]),n}(P.a)).\u0275fac=function(e){return new(e||_o)(f.Nb(f.r))},_o.\u0275cmp=f.Hb({type:_o,selectors:[["receive-qr-payment-step-form"]],viewQuery:function(e,t){var n;1&e&&f.Cc(Oo,!0),2&e&&f.tc(n=f.cc())&&(t.amountField=n.first)},inputs:{data:"data",form:"form",transferTypes:"transferTypes",type:"type",typeData:"typeData"},features:[f.wb],decls:6,vars:9,consts:[[3,"formGroup"],["formControlName","account","required","","asColumn","",3,"label",4,"ngIf"],["formControlName","type",3,"label",4,"ngIf"],["formControlName","amount","focused","","required","",3,"label","prefix","suffix","scale"],[3,"formGroup",4,"ngIf"],["formControlName","description",3,"label","required",4,"ngIf"],["formControlName","account","required","","asColumn","",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["formControlName","type",3,"label"],[3,"formControlName","field",4,"ngFor","ngForOf"],[3,"formControlName","field"],["formControlName","description",3,"label","required"]],template:function(e,t){1&e&&(f.Rb(0,0),f.Fc(1,Po,2,2,"radio-group-field",1),f.Fc(2,xo,2,2,"single-selection-field",2),f.Ob(3,"decimal-field",3),f.Fc(4,No,2,2,"ng-container",4),f.Fc(5,Ao,1,2,"textarea-field",5),f.Qb()),2&e&&(f.kc("formGroup",t.form),f.zb(1),f.kc("ngIf",!t.singleAccount),f.zb(1),f.kc("ngIf",(null==t.transferTypes?null:t.transferTypes.length)>1),f.zb(1),f.kc("label",t.i18n.transaction.amount)("prefix",null==t.currency?null:t.currency.prefix)("suffix",null==t.currency?null:t.currency.suffix)("scale",null==t.currency?null:t.currency.decimalDigits),f.zb(1),f.kc("ngIf",(null==t.typeData||null==t.typeData.customFields?null:t.typeData.customFields.length)>0),f.zb(1),f.kc("ngIf","disabled"!==(null==t.typeData?null:t.typeData.descriptionAvailability)))},directives:[y.w,y.n,m.t,I.a,y.v,y.l,oi.a,y.D,hr.a,m.s,z.a,T.a,Ya.a,Uc.a],encapsulation:2,changeDetection:0}),_o);function Eo(e,t){if(1&e){var n=f.Ub();f.Tb(0,"button",10),f.bc("click",(function(){return f.wc(n),f.dc(2).copyUrl()})),f.Ob(1,"icon",11),f.Sb()}if(2&e){var a=f.dc(2);f.kc("tooltip",a.i18n.general.copyToClipboard)}}function Ro(e,t){if(1&e&&(f.Tb(0,"label-value",3),f.Tb(1,"div",8),f.Hc(2),f.Sb(),f.Fc(3,Eo,2,1,"button",9),f.Sb()),2&e){var n=f.dc();f.kc("label",n.i18n.transaction.ticketShareUrl),f.zb(2),f.Ic(n.ticket.approveUrl)}}var Uo,Mo,Lo=((Uo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;return _classCallCheck(this,n),(a=t.call(this,e)).supportsShare=Object(l.C)(),a}return _createClass(n,[{key:"copyUrl",value:function(){Object(l.f)(this.ticket.approveUrl),this.notification.snackBar(this.i18n.general.copyToClipboardDone)}}]),n}(P.a)).\u0275fac=function(e){return new(e||Uo)(f.Nb(f.r))},Uo.\u0275cmp=f.Hb({type:Uo,selectors:[["receive-qr-payment-step-pending"]],inputs:{ticket:"ticket",qrCodeUrl:"qrCodeUrl"},features:[f.wb],decls:10,vars:9,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"mb-3",3,"src"],[3,"label","value"],[3,"label"],[1,"d-flex"],[1,"flex-grow-1"],["bootstrap","","size","1.5rem",1,"p-0","ml-2"],[3,"label",4,"ngIf"],[1,"w-100"],["class","btn btn-icon","type","button",3,"tooltip","click",4,"extraCell"],["type","button",1,"btn","btn-icon",3,"tooltip","click"],["icon","link"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Ob(1,"img",1),f.ec(2,"trust"),f.Sb(),f.Ob(3,"label-value",2),f.Tb(4,"label-value",3),f.Tb(5,"div",4),f.Tb(6,"div",5),f.Hc(7),f.Sb(),f.Ob(8,"spinner",6),f.Sb(),f.Sb(),f.Fc(9,Ro,4,2,"label-value",7)),2&e&&(f.zb(1),f.kc("src",f.gc(2,6,t.qrCodeUrl,"url"),f.yc),f.zb(2),f.kc("label",t.i18n.transaction.amount)("value",t.format.formatAsCurrency(t.ticket.currency,t.ticket.amount)),f.zb(1),f.kc("label",t.i18n.general.status),f.zb(3),f.Ic(t.i18n.transaction.status.pending),f.zb(2),f.kc("ngIf",!t.supportsShare))},directives:[k.a,L.a,m.t,Ii.a,xn.b,Dn.a],pipes:[Ar.a],encapsulation:2,changeDetection:0}),Uo),jo=n("PCNd"),Bo=n("CNMR"),Jo=n("aHM3"),Vo=n("6No5"),Go=n("38Bd"),qo=n("p4Ho"),Qo=n("FE24"),Yo=n("GTjh"),Wo=n("7Ub2"),Ko=n("yThH"),Zo=n("vdzA"),Xo=n("TmPS"),el=n("9A/v"),tl=n("Aeop"),nl=n("AFEp"),al=n("A0yp"),il=n("z6Sj"),rl=n("pgV1"),cl=n("wezA"),ol=n("f0aj"),ll=n("yWxo"),sl=n("T9y1"),ul=n("RRWt"),bl=n("o/nJ"),fl=n("0xrI"),dl=n("AH7H"),ml=n("yHfF"),pl=n("lrfU"),hl=n("aVfl"),gl=n("G1xJ"),vl=n("VpKs"),yl=n("yk18"),kl=n("nGVv"),Sl=n("sYqu"),Tl=n("559x"),zl=n("0C6t"),wl=n("uao2"),Il=n("fe3a"),Fl=n("m98c"),Ol=n("z3FF"),Cl=n("z332"),Pl=n("pz1b"),Hl=n("bER3"),xl=n("ZJXG"),Dl=n("wUcZ"),Nl=n("yRWz"),Al=n("/edM"),_l=n("PzFp"),$l=n("7qm1"),El=n("sARG"),Rl=n("IAdc"),Ul=n("vHbw"),Ml=n("USuC"),Ll=n("Y49Y"),jl=n("2V/7"),Bl=n("HZ9B"),Jl=n("g9Ug"),Vl=n("jOM4"),Gl=n("DFH8"),ql=n("C2xC"),Ql=n("H52G"),Yl=n("T23z"),Wl=n("NjAj"),Kl=n("csas"),Zl=n("U9jX"),Xl=n("g1uo"),es=n("cLCZ"),ts=n("kmyw"),ns=n("/NTq"),as=((Mo=function e(){_classCallCheck(this,e)}).\u0275mod=f.Lb({type:Mo}),Mo.\u0275inj=f.Kb({factory:function(e){return new(e||Mo)},imports:[[nc,jo.a]]}),Mo);f.zc(Ue,[J.j,J.f,J.h,J.g,J.k,m.q,m.r,m.s,m.t,m.A,m.w,m.x,m.y,m.z,m.u,m.v,y.I,y.x,y.H,y.e,y.y,y.B,y.b,y.E,y.F,y.A,y.v,y.w,y.D,y.r,y.q,y.z,y.c,y.f,y.k,y.n,y.l,y.o,y.h,Bo.a,wi.c,wi.d,Jo.a,Jo.b,Jo.c,Vo.a,Vo.b,Go.a,Go.b,qo.a,xn.b,Qo.b,Qo.d,Qo.a,Yo.b,Wo.a,Ko.a,Fi.a,Zo.a,Xo.a,Dn.a,Hn.a,B.a,L.a,d.a,p.a,el.a,tl.a,nl.a,al.a,il.a,h.a,rl.a,cl.a,j.a,ol.a,ll.a,v.a,g.a,sl.a,ul.a,sn.a,bl.a,ci.a,fl.a,k.a,Ii.a,dl.a,ri.a,ln.a,ml.a,O.a,pl.a,hl.a,gl.a,vl.a,yl.a,Uc.a,Ec.a,z.a,T.a,pa.a,kl.a,hr.a,Sl.a,Tl.a,w.a,zl.a,I.a,Ya.a,wl.a,Il.a,Fl.a,Ol.a,Cl.a,Pl.a,Hl.a,xl.a,Dl.a,Nl.a,Al.a,_l.a,$l.a,El.a,Rl.a,S.a,ja.a,F.a,Ul.a,Ml.a,Ll.a,jl.a,Bl.a,Jl.a,zi.a,Vl.a,Gl.a,ql.a,Ql.a,Yl.a,Wl.a,Kl.a,ai.a,Zl.a,oi.a,Rc.a,C.a,Te,M,La,Pn,tn,Ra,Ct,Vt,st,ma,Ue,Io,Nc,Ac,Ye,$o,Lo,Fo,Ti,Xi,Qa,ni,di,Bi,ec,pr,Nr,Fr],[m.b,m.G,m.p,m.k,m.E,m.g,m.C,m.F,m.d,m.f,m.i,m.j,m.l,Ar.a,V.a,qt.a,Xl.a,es.a,H.a,ts.a,ns.a]),f.zc(Ye,[J.j,J.f,J.h,J.g,J.k,m.q,m.r,m.s,m.t,m.A,m.w,m.x,m.y,m.z,m.u,m.v,y.I,y.x,y.H,y.e,y.y,y.B,y.b,y.E,y.F,y.A,y.v,y.w,y.D,y.r,y.q,y.z,y.c,y.f,y.k,y.n,y.l,y.o,y.h,Bo.a,wi.c,wi.d,Jo.a,Jo.b,Jo.c,Vo.a,Vo.b,Go.a,Go.b,qo.a,xn.b,Qo.b,Qo.d,Qo.a,Yo.b,Wo.a,Ko.a,Fi.a,Zo.a,Xo.a,Dn.a,Hn.a,B.a,L.a,d.a,p.a,el.a,tl.a,nl.a,al.a,il.a,h.a,rl.a,cl.a,j.a,ol.a,ll.a,v.a,g.a,sl.a,ul.a,sn.a,bl.a,ci.a,fl.a,k.a,Ii.a,dl.a,ri.a,ln.a,ml.a,O.a,pl.a,hl.a,gl.a,vl.a,yl.a,Uc.a,Ec.a,z.a,T.a,pa.a,kl.a,hr.a,Sl.a,Tl.a,w.a,zl.a,I.a,Ya.a,wl.a,Il.a,Fl.a,Ol.a,Cl.a,Pl.a,Hl.a,xl.a,Dl.a,Nl.a,Al.a,_l.a,$l.a,El.a,Rl.a,S.a,ja.a,F.a,Ul.a,Ml.a,Ll.a,jl.a,Bl.a,Jl.a,zi.a,Vl.a,Gl.a,ql.a,Ql.a,Yl.a,Wl.a,Kl.a,ai.a,Zl.a,oi.a,Rc.a,C.a,Te,M,La,Pn,tn,Ra,Ct,Vt,st,ma,Ue,Io,Nc,Ac,Ye,$o,Lo,Fo,Ti,Xi,Qa,ni,di,Bi,ec,pr,Nr,Fr],[m.b,m.G,m.p,m.k,m.E,m.g,m.C,m.F,m.d,m.f,m.i,m.j,m.l,Ar.a,V.a,qt.a,Xl.a,es.a,H.a,ts.a,ns.a])}}]);