function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{SRLV:function(e,t,n){"use strict";n.r(t),n.d(t,"PersonalModule",(function(){return M}));var r=n("iInd"),i=n("ofEL"),o=n("Do6i"),a=n("tAww"),s=n("rCAV"),l=n("tVPo"),u=n("PvCH"),c=n("cp0P"),f=n("SxV6"),p=n("8Y7J"),h=n("8UBS"),b=n("HQV3"),d=n("s7LF"),y=n("yHfF"),g=n("2KYv"),v=n("n1JJ"),m=n("DAJ4"),T=n("wwxf"),k=n("978R"),S=n("SVse"),w=n("sifq"),_=n("H4pW"),C=n("/kmK");function O(e,t){if(1&e&&(p.Tb(0,"mobile-result",8),p.Tb(1,"div",9),p.Hc(2),p.Sb(),p.Tb(3,"div",10),p.Hc(4),p.ec(5,"dateTime"),p.Sb(),p.Sb()),2&e){var n=t.$implicit;p.kc("avatarImage",null==n.relatedUser?null:n.relatedUser.image),p.zb(1),p.kc("tooltip",n.message),p.zb(1),p.Ic(n.subject),p.zb(1),p.kc("tooltip",n.message),p.zb(1),p.Jc(" ",p.fc(5,5,n.date)," ")}}var I=function(e){return{"font-weight-bold":e}},R=function(e,t){return{"pb-0":e,"border-0":t}};function F(e,t){if(1&e){var n=p.Ub();p.Rb(0),p.Tb(1,"tr",15),p.bc("click",(function(){p.wc(n);var e=t.$implicit;return p.dc(2).rowClick(e)})),p.Tb(2,"td",16),p.ec(3,"async"),p.ec(4,"async"),p.Ob(5,"avatar",17),p.Sb(),p.Tb(6,"td"),p.Hc(7),p.ec(8,"dateTime"),p.Sb(),p.Tb(9,"td"),p.Hc(10),p.Sb(),p.Tb(11,"td",13),p.Tb(12,"button",18),p.bc("click",(function(e){p.wc(n);var r=t.$implicit;return p.dc(2).remove(r),e.stopPropagation()})),p.Ob(13,"icon",19),p.Sb(),p.Sb(),p.Sb(),p.Qb()}if(2&e){var r=t.$implicit,i=p.dc(2);p.zb(1),p.kc("ngClass",p.nc(13,I,!r.read)),p.zb(1),p.kc("ngClass",p.oc(15,R,p.fc(3,7,i.layout.xxs$),p.fc(4,9,i.layout.xxs$))),p.zb(3),p.kc("image",null==r.relatedUser?null:r.relatedUser.image)("tooltip",null==r.relatedUser?null:r.relatedUser.display),p.zb(2),p.Ic(p.fc(8,11,r.date)),p.zb(3),p.Ic(r.message),p.zb(2),p.kc("tooltip",i.i18n.notification.actions.remove)}}function A(e,t){if(1&e&&(p.Tb(0,"table",11),p.Tb(1,"thead"),p.Ob(2,"th",12),p.Tb(3,"th"),p.Hc(4),p.Sb(),p.Tb(5,"th"),p.Hc(6),p.Sb(),p.Ob(7,"th",13),p.Sb(),p.Tb(8,"tbody"),p.Fc(9,F,14,18,"ng-container",14),p.ec(10,"async"),p.Sb(),p.Sb()),2&e){var n,r=p.dc(),i=null==(n=p.fc(10,3,r.results$))?null:n.results;p.zb(4),p.Ic(r.i18n.general.date),p.zb(2),p.Ic(r.i18n.notification.message),p.zb(3),p.kc("ngForOf",i)}}var P,$,x,z,N=((P=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).notificationsService=r,i}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.addSub(this.notification.notificationsStatus$.subscribe((function(){return e.update()}))),this.data={},this.addSub(this.notificationsService.markAsViewed().pipe(Object(f.a)()).subscribe((function(){var t=e.notification.notificationsStatus$,n=Object.assign({},t.value);n.lastViewDate=e.dataForUiHolder.now().toISOString(),n.newNotifications=0,t.next(n)}))),this.addSub(this.results$.subscribe((function(t){var n=[],r=(t?t.results:null)||[];r.filter((function(e){return!e.read})).length>0&&n.push(new a.c("done_all",e.i18n.notification.actions.markAllRead,(function(){return e.markAllRead()}))),r.length>0&&n.push(new a.c("clear",e.i18n.notification.actions.removeAll,(function(){return e.removeAll()}))),e.headingActions=n})))}},{key:"rowClick",value:function(e){this.addSub(this.notificationsService.markNotificationsAsRead({ids:[e.id]}).subscribe());var t=this.path(e);t&&this.router.navigateByUrl(t)}},{key:"remove",value:function(e){var t=this;this.addSub(this.notificationsService.deleteNotification({id:e.id}).subscribe((function(){return t.update()})))}},{key:"path",value:function(e){var t=s.a.notificationData(e);return t?t.path:null}},{key:"markAllRead",value:function(){var e=this;this.addSub(this.notificationsService.markNotificationsAsRead({ids:this.ids}).subscribe((function(){return e.update()})))}},{key:"removeAll",value:function(){var e,t=this,n=[],r=_createForOfIteratorHelper(this.ids);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(this.notificationsService.deleteNotification({id:i}))}}catch(o){r.e(o)}finally{r.f()}this.addSub(Object(c.a)(n).pipe(Object(f.a)()).subscribe((function(){return t.update()})))}},{key:"getFormControlNames",value:function(){return["onlyUnread"]}},{key:"toSearchParams",value:function(e){return e}},{key:"doSearch",value:function(e){return this.notificationsService.searchNotifications$Response(e)}},{key:"resolveMenu",value:function(){return u.b.NOTIFICATIONS}},{key:"ids",get:function(){return this.results&&this.results.results?this.results.results.map((function(e){return e.id})):[]}},{key:"onClick",get:function(){var e=this;return function(t){return e.rowClick(t)}}}]),n}(l.a)).\u0275fac=function(e){return new(e||P)(p.Nb(p.r),p.Nb(o.t))},P.\u0275cmp=p.Hb({type:P,selectors:[["search-notifications"]],features:[p.wb],decls:11,vars:12,consts:[["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","sideForced","formControlName","onlyUnread",3,"label"],["resultType","list",3,"results","onClick","rendering$","update"],["avatarIcon","notifications_none",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["avatarIcon","notifications_none",3,"avatarImage"],[1,"cell-main",3,"tooltip"],[1,"cell-cell-date",3,"tooltip"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"actions"],[4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"avatar",3,"ngClass"],["icon","notifications_none",3,"image","tooltip"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","clear"]],template:function(e,t){1&e&&(p.Tb(0,"page-layout"),p.Tb(1,"page-content",0),p.ec(2,"async"),p.Tb(3,"form",1),p.Tb(4,"div",2),p.Tb(5,"div",3),p.Ob(6,"boolean-field",4),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(7,"results-layout",5),p.bc("update",(function(e){return t.update(e)})),p.ec(8,"async"),p.Fc(9,O,6,7,"mobile-result",6),p.Fc(10,A,11,5,"table",7),p.Sb(),p.Sb()),2&e&&(p.zb(1),p.kc("heading",t.i18n.notification.title)("mobileHeading",t.i18n.notification.mobileTitle)("headingActions",p.fc(2,8,t.headingActions$)),p.zb(2),p.kc("formGroup",t.form),p.zb(3),p.kc("label",t.i18n.notification.onlyUnread),p.zb(1),p.kc("results",p.fc(8,10,t.results$))("onClick",t.onClick)("rendering$",t.rendering$))},directives:[h.a,b.a,d.I,d.w,d.n,y.a,d.v,d.l,g.a,v.a,m.a,T.a,k.b,S.s,S.q,w.a,_.a],pipes:[S.b,C.a],encapsulation:2,changeDetection:0}),P),L=n("x6mR"),j=n("wR2l"),U=n("chz4"),E=[{path:"",children:[{path:"notifications",component:N,canActivate:[i.a],data:{menu:u.b.NOTIFICATIONS}},{path:"settings",component:($=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.darkThemeControl=new d.j(this.layout.darkTheme),this.addSub(this.darkThemeControl.valueChanges.subscribe((function(t){e.layout.darkTheme=t})))}},{key:"resolveMenu",value:function(){return u.b.SETTINGS}}]),n}(L.a),$.\u0275fac=function(e){return new(e||$)(p.Nb(p.r))},$.\u0275cmp=p.Hb({type:$,selectors:[["manage-settings"]],features:[p.wb],decls:5,vars:8,consts:[["last","",3,"heading","mobileHeading"],[3,"label","formControl"],[3,"value","text"]],template:function(e,t){1&e&&(p.Tb(0,"page-layout"),p.Tb(1,"page-content",0),p.Tb(2,"radio-group-field",1),p.Ob(3,"field-option",2),p.Ob(4,"field-option",2),p.Sb(),p.Sb(),p.Sb()),2&e&&(p.zb(1),p.kc("heading",t.i18n.setting.title)("mobileHeading",t.i18n.setting.mobileTitle),p.zb(1),p.kc("label",t.i18n.setting.theme)("formControl",t.darkThemeControl),p.zb(1),p.kc("value",!1)("text",t.i18n.setting.themeLight),p.zb(1),p.kc("value",!0)("text",t.i18n.setting.themeDark))},directives:[h.a,b.a,j.a,d.v,d.k,U.a],encapsulation:2,changeDetection:0}),$),canActivate:[i.a],data:{menu:u.b.SETTINGS}}]}],V=((x=function e(){_classCallCheck(this,e)}).\u0275mod=p.Lb({type:x}),x.\u0275inj=p.Kb({factory:function(e){return new(e||x)},imports:[[r.i.forChild(E)],r.i]}),x),H=n("PCNd"),M=((z=function e(){_classCallCheck(this,e)}).\u0275mod=p.Lb({type:z}),z.\u0275inj=p.Kb({factory:function(e){return new(e||z)},imports:[[V,H.a]]}),z)},tVPo:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("s7LF"),i=n("mwYl"),o=n("tAww"),a=n("rCAV"),s=n("x6mR"),l=n("Ky6R"),u=n("75v4"),c=n("LvDl"),f=n("2Vo4"),p=n("Kj3r"),h=n("8Y7J"),b=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;_classCallCheck(this,n),(o=t.call(this,e)).ResultType=u.a,o.resultType$=new f.a(null),o.resultTypeControl=new r.j(null),o.results$=new f.a(null),o.allowedResultTypes$=new f.a([u.a.LIST]),o.rendering$=new f.a(!1),o.moreFilters$=new f.a(!1),o.ignoreNextUpdate=!1,o.nextRequestState=e.get(i.a);var a={page:0};a.resultType=o.getInitialResultType();var s,l=_createForOfIteratorHelper(o.getFormControlNames()||[]);try{for(l.s();!(s=l.n()).done;){a[s.value]=null}}catch(c){l.e(c)}finally{l.f()}return o.form=o.formBuilder.group(a),o}return _createClass(n,[{key:"getInitialFormValue",value:function(e){return e.query||{}}},{key:"onDataInitialized",value:function(e){var t=this;this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe((function(e){var n=t.previousResultType;t.previousResultType=e,t.resultType$.next(e),t.shouldUpdateOnResultTypeChange(e,n)&&t.update(),null!=n&&n===e||(t.rendering=!0,t.stateManager.set("resultType",e),t.onResultTypeChanged(e,n))}))),setTimeout((function(){t.addSub(t.form.valueChanges.pipe(Object(p.a)(a.a.DEBOUNCE_TIME)).subscribe((function(e){t.shouldUpdateOnChange(e)&&t.update(),t.previousValue=e})),!0),t.previousResultType!==u.a.CATEGORIES&&t.update()}),1)}},{key:"shouldUpdateOnResultTypeChange",value:function(e,t){return e!==u.a.CATEGORIES&&([u.a.LIST,u.a.TILES].includes(t)!==[u.a.LIST,u.a.TILES].includes(e)||t===u.a.MAP!=(e===u.a.MAP))}},{key:"shouldUpdateOnChange",value:function(e){return!Object(c.isEqual)(this.previousValue,e)}},{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.resultType=this.getInitialResultType()}},{key:"showMoreFiltersLabel",value:function(){return this.i18n.general.showMoreFilters}},{key:"showLessFiltersLabel",value:function(){return this.i18n.general.showLessFilters}},{key:"showMoreFiltersIcon",value:function(){return"filter_list"}},{key:"showLessFiltersIcon",value:function(){return"filter_list"}},{key:"onResultTypeChanged",value:function(e,t){}},{key:"getInitialResultType",value:function(){return u.a.LIST}},{key:"update",value:function(e){var t=this;if(!this.ignoreNextUpdate){e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;var n=this.form.value;n.pageSize=this.layout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(n)).subscribe((function(e){t.resultType===u.a.CATEGORIES&&(t.resultType=t.allowedResultTypes.find((function(e){return e!==u.a.CATEGORIES}))),t.results=l.a.from(e)})))}}},{key:"resetPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.form.patchValue({page:0},{emitEvent:e})}},{key:"doIgnoringUpdate",value:function(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}},{key:"results",get:function(){return this.results$.value},set:function(e){this.results$.next(e)}},{key:"rendering",get:function(){return this.rendering$.value},set:function(e){this.rendering$.next(e)}},{key:"allowedResultTypes",get:function(){return this.allowedResultTypes$.value},set:function(e){this.allowedResultTypes$.next(e)}},{key:"moreFilters",get:function(){return this.moreFilters$.value},set:function(e){this.moreFilters$.next(e)}},{key:"pageData",get:function(){var e=this.form.value;return{page:e.page,pageSize:e.pageSize}},set:function(e){this.form.patchValue(e)}},{key:"resultType",get:function(){return this.resultTypeControl.value},set:function(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}},{key:"moreFiltersAction",get:function(){var e=this;return this._moreFiltersAction||(this._moreFiltersAction=new o.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),(function(){e.moreFilters=!e.moreFilters,e._moreFiltersAction.icon=e.moreFilters?e.showLessFiltersIcon():e.showMoreFiltersIcon(),e._moreFiltersAction.label=e.moreFilters?e.showLessFiltersLabel():e.showMoreFiltersLabel()}),!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}}]),n}(s.a);return e.\u0275fac=function(t){return new(t||e)(h.Nb(h.r))},e.\u0275dir=h.Ib({type:e,features:[h.wb]}),e}()}}]);