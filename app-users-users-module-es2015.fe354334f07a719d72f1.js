(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{zrcO:function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",(function(){return Ku}));var n=i("PCNd"),a=i("iInd"),s=i("nsXz"),o=i("ofEL"),r=i("Do6i"),c=i("MfEj"),l=i("NjAj"),u=i("MhyI"),d=i("PvCH"),b=i("8Y7J"),f=i("LqlI"),m=i("8UBS"),p=i("SVse"),h=i("HQV3"),g=i("2KYv"),v=i("n1JJ"),k=i("DAJ4"),y=i("bqp0"),S=i("wwxf"),T=i("978R"),I=i("H4pW"),F=i("yL40"),z=i("/kmK"),O=i("kmyw");function A(e,t){1&e&&b.Pb(0)}function C(e,t){if(1&e&&b.Ob(0,"user-info",8),2&e){const e=b.dc(2);b.kc("user",e.data.user)}}function w(e,t){if(1&e&&(b.Tb(0,"del"),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.agreement.name," ")}}function E(e,t){if(1&e&&b.Hc(0),2&e){const e=b.dc().$implicit;b.Jc(" ",e.agreement.name," ")}}function N(e,t){if(1&e&&(b.Tb(0,"mobile-result"),b.Tb(1,"div"),b.Tb(2,"div",9),b.Hc(3),b.ec(4,"date"),b.Sb(),b.Tb(5,"div",10),b.Fc(6,w,2,1,"del",11),b.Fc(7,E,1,1,"ng-template",null,12,b.Gc),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.uc(8);b.zb(3),b.Jc(" ",b.fc(4,3,e.date)," "),b.zb(3),b.kc("ngIf",!e.accepted)("ngIfElse",i)}}function R(e,t){if(1&e&&(b.Tb(0,"th"),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Ic(e.i18n.agreements.accepted)}}function D(e,t){if(1&e&&(b.Tb(0,"th",18),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.general.remoteAddress,"")}}function P(e,t){if(1&e&&(b.Tb(0,"td"),b.Hc(1),b.ec(2,"boolean"),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Ic(b.fc(2,1,e.accepted))}}function H(e,t){if(1&e&&(b.Tb(0,"td",18),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.remoteAddress,"")}}function x(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",21),b.bc("click",(function(){b.wc(e);const t=b.dc().$implicit;return b.dc(3).showAgreement(t)})),b.Ob(1,"icon",22),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.general.view)}}const _=function(e){return{"cursor-pointer":e}};function L(e,t){if(1&e&&(b.Tb(0,"tr",19),b.Tb(1,"td"),b.Hc(2),b.ec(3,"dateTime"),b.Sb(),b.Tb(4,"td"),b.Hc(5),b.Sb(),b.Fc(6,P,3,3,"td",14),b.Fc(7,H,2,1,"td",15),b.Tb(8,"td",16),b.Fc(9,x,2,1,"button",20),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(3);b.kc("ngClass",b.nc(8,_,e.accepted)),b.zb(2),b.Ic(b.fc(3,6,e.date)),b.zb(3),b.Ic(e.agreement.name),b.zb(1),b.kc("ngIf",i.hasAccepted),b.zb(1),b.kc("ngIf",i.hasRemoteAddress),b.zb(2),b.kc("ngIf",e.accepted)}}function M(e,t){if(1&e&&(b.Tb(0,"table",13),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Fc(6,R,2,1,"th",14),b.Fc(7,D,2,1,"th",15),b.Ob(8,"th",16),b.Sb(),b.Tb(9,"tbody"),b.Fc(10,L,10,10,"tr",17),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(3),b.Ic(e.i18n.general.date),b.zb(2),b.Ic(e.i18n.agreements.agreement),b.zb(1),b.kc("ngIf",e.hasAccepted),b.zb(1),b.kc("ngIf",e.hasRemoteAddress),b.zb(3),b.kc("ngForOf",e.data.history)}}function U(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Fc(1,C,1,1,"user-info",4),b.Sb(),b.Tb(2,"results-layout",5),b.Fc(3,N,9,5,"mobile-result",6),b.Fc(4,M,11,5,"table",7),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.i18n.agreements.title.history)("mobileHeading",e.i18n.agreements.mobileTitle.history)("mode",e.self?"empty":"normal"),b.zb(1),b.kc("ngIf",!e.self),b.zb(1),b.kc("results",e.data.history)("onClick",e.showAgreement)}}let $=(()=>{class e extends u.a{constructor(e,t,i,n){super(e),this.agreementsService=t,this.userHelper=i,this.modal=n}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:["user","history"]}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user);const t=e.history||[];this.hasAccepted=t.findIndex(e=>!e.accepted)>=0,this.hasRemoteAddress=t.findIndex(e=>e.remoteAddress)>=0}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.AGREEMENTS)}get showAgreement(){return e=>{e.accepted&&this.modal.show(l.a,{ignoreBackdropClick:!0,class:"modal-form modal-form-large",initialState:{agreement:e.agreement,version:e.acceptedVersion}})}}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.e),b.Nb(c.a),b.Nb(f.b))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-agreements-history"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading","mode"],[3,"user",4,"ngIf"],[3,"results","onClick"],[4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"user"],[1,"cell-text","float-left"],[1,"cell-main","float-right"],[4,"ngIf","ngIfElse"],["accepted",""],[1,"table","table-hover"],[4,"ngIf"],["class","align-center",4,"ngIf"],[1,"actions"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"align-center"],[3,"ngClass"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,A,1,0,"ng-container",1),b.Sb(),b.Fc(3,U,5,6,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,g.a,v.a,k.a,y.a,S.a,p.s,p.q,T.b,I.a],pipes:[p.b,F.a,z.a,O.a],encapsulation:2,changeDetection:0}),e})();var G=i("tAww"),B=i("ObUu"),J=i("H52G"),V=i("s7LF"),q=i("JFlR"),j=i("UXR7"),Q=i("OTwK"),Y=i("T23z");function K(e,t){if(1&e&&b.Ob(0,"user-info",9),2&e){const e=b.dc(2);b.kc("user",e.data.user)}}function X(e,t){if(1&e&&b.Ob(0,"accept-agreements",10),2&e){const e=b.dc(2);b.kc("label",e.i18n.agreements.optional)("formControl",e.optionalControl)("agreements",e.allOptional)}}function W(e,t){1&e&&b.Pb(0)}const Z=function(e){return{$implicit:e}};function ee(e,t){if(1&e&&(b.Tb(0,"label-value",11),b.Fc(1,W,1,0,"ng-container",12),b.Sb()),2&e){const e=b.dc(3),t=b.uc(4);b.kc("label",e.i18n.agreements.optional),b.zb(1),b.kc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.nc(3,Z,e.acceptedOptional))}}function te(e,t){if(1&e&&b.Fc(0,ee,2,5,"label-value",7),2&e){const e=b.dc(2);b.kc("ngIf",(null==e.acceptedOptional?null:e.acceptedOptional.length)>0)}}function ie(e,t){1&e&&b.Pb(0)}function ne(e,t){if(1&e&&(b.Tb(0,"label-value",11),b.Fc(1,ie,1,0,"ng-container",12),b.Sb()),2&e){const e=b.dc(2),t=b.uc(4);b.kc("label",e.i18n.agreements.required),b.zb(1),b.kc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.nc(3,Z,e.acceptedRequired))}}function ae(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"hr"),b.Hc(2),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Jc(" ",e.i18n.agreements.noAccepted," ")}}function se(e,t){if(1&e){const e=b.Ub();b.Tb(0,"actions"),b.Tb(1,"action-button",13),b.bc("action",(function(){return b.wc(e),b.dc(2).save()})),b.ec(2,"async"),b.Sb(),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.kc("disabled",b.fc(2,2,e.requesting$))("label",e.i18n.general.save)}}function oe(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.ec(1,"async"),b.Fc(2,K,1,1,"user-info",4),b.Fc(3,X,1,3,"accept-agreements",5),b.Fc(4,te,1,1,"ng-template",null,6,b.Gc),b.Fc(6,ne,2,5,"label-value",7),b.Fc(7,ae,3,1,"ng-container",8),b.Fc(8,se,3,4,"actions",8),b.Sb()),2&e){const e=b.uc(5),t=b.dc();b.kc("heading",t.i18n.agreements.title.accepted)("mobileHeading",t.i18n.agreements.mobileTitle.accepted)("headingActions",b.fc(1,9,t.headingActions$)),b.zb(2),b.kc("ngIf",!t.self),b.zb(1),b.kc("ngIf",t.optionalControl)("ngIfElse",e),b.zb(3),b.kc("ngIf",(null==t.acceptedRequired?null:t.acceptedRequired.length)>0),b.zb(1),b.kc("ngIf",t.noAgreements),b.zb(1),b.kc("ngIf",t.optionalControl)}}const re=function(e){return{"mt-2":e}};function ce(e,t){if(1&e&&(b.Tb(0,"div",15),b.Ob(1,"agreement-link",16),b.Sb()),2&e){const e=t.$implicit,i=t.first,n=b.dc(2);b.kc("ngClass",b.nc(3,re,!i)),b.zb(1),b.kc("agreement",e)("version",null==n.data.accepted[e.id]?null:n.data.accepted[e.id].acceptedVersion)}}function le(e,t){1&e&&b.Fc(0,ce,2,5,"div",14),2&e&&b.kc("ngForOf",t.$implicit)}let ue=(()=>{class e extends u.a{constructor(e,t){super(e),this.agreementsService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.agreementsService.getUserAgreements({user:this.param,fields:["-history"]}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user);const t=Object.keys(e.accepted||{}),i=(e.agreements||[]).filter(e=>t.includes(e.id));this.allOptional=(e.agreements||[]).filter(e=>!e.required),this.acceptedOptional=i.filter(e=>!e.required),this.acceptedRequired=i.filter(e=>e.required),e.canEdit?this.optionalControl=this.formBuilder.control(this.acceptedOptional.map(e=>e.id)):this.noAgreements=0===i.length,this.noAgreements||(this.headingActions=[new G.c("history",this.i18n.general.viewHistory,()=>this.router.navigate(["users",this.param,"agreements","history"]),!0)])}save(){Object(B.F)(this.optionalControl)&&this.addSub(this.agreementsService.acceptOptionalAgreements({agreements:this.optionalControl.value}).subscribe(()=>{this.notification.snackBar(this.i18n.agreements.optionalSaved),this.reload()}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.AGREEMENTS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.e))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-user-agreements"]],features:[b.wb],decls:5,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],["agreementLinks",""],[3,"heading","mobileHeading","headingActions"],[3,"user",4,"ngIf"],[3,"label","formControl","agreements",4,"ngIf","ngIfElse"],["optionalNotEditable",""],[3,"label",4,"ngIf"],[4,"ngIf"],[3,"user"],[3,"label","formControl","agreements"],[3,"label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"disabled","label","action"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["ignoreRequired","",3,"agreement","version"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,oe,9,11,"page-content",1),b.Sb(),b.Fc(3,le,1,1,"ng-template",null,2,b.Gc)),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,y.a,J.a,V.v,V.k,q.a,p.A,j.a,Q.a,p.s,p.q,Y.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var de=i("hQUc"),be=i("rCAV"),fe=i("tVPo"),me=i("6g1M"),pe=i("WYBn"),he=i("chz4"),ge=i("JbOn"),ve=i("sifq");function ke(e,t){if(1&e&&(b.Tb(0,"mobile-result",25),b.Tb(1,"div",26),b.Hc(2),b.Sb(),b.Tb(3,"div",27),b.Hc(4),b.ec(5,"dateTime"),b.Sb(),b.Tb(6,"div",28),b.Hc(7),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.kc("avatarImage",null==e.user?null:e.user.image),b.zb(1),b.kc("tooltip",e.user.display),b.zb(1),b.Jc(" ",e.user.display,""),b.zb(2),b.Jc(" ",b.fc(5,5,e.date)," "),b.zb(3),b.Ic(e.text)}}const ye=function(e,t){return{"pb-0":e,"border-0":t}};function Se(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"tr"),b.Tb(2,"td",32),b.ec(3,"async"),b.ec(4,"async"),b.Ob(5,"avatar",33),b.Sb(),b.Tb(6,"td"),b.Hc(7),b.Sb(),b.Tb(8,"td"),b.Hc(9),b.Sb(),b.Tb(10,"td"),b.Hc(11),b.ec(12,"dateTime"),b.Sb(),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(2),b.kc("ngClass",b.oc(12,ye,b.fc(3,6,i.layout.xxs$),b.fc(4,8,i.layout.xxs$))),b.zb(3),b.kc("image",null==e.user?null:e.user.image)("tooltip",null==e.user?null:e.user.display),b.zb(2),b.Ic(e.user.display),b.zb(2),b.Ic(e.text),b.zb(2),b.Ic(b.fc(12,10,e.date))}}function Te(e,t){if(1&e&&(b.Tb(0,"table",29),b.Tb(1,"thead"),b.Ob(2,"th",30),b.Tb(3,"th"),b.Hc(4),b.Sb(),b.Tb(5,"th"),b.Hc(6),b.Sb(),b.Tb(7,"th"),b.Hc(8),b.Sb(),b.Sb(),b.Tb(9,"tbody"),b.Fc(10,Se,13,15,"ng-container",31),b.ec(11,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc();var i;const t=null==(i=b.fc(11,4,e.results$))?null:i.results;b.zb(4),b.Ic(e.i18n.general.user),b.zb(2),b.Ic(e.i18n.userAlert.text),b.zb(2),b.Ic(e.i18n.general.date),b.zb(2),b.kc("ngForOf",t)}}let Ie=(()=>{class e extends fe.a{constructor(e,t){super(e),this.alertsService=t}ngOnInit(){super.ngOnInit(),this.data={}}getFormControlNames(){return["types","user","beginDate","endDate"]}toSearchParams(e){return{datePeriod:be.a.dateRangeFilter(e.beginDate,e.endDate),page:e.page,pageSize:e.pageSize,types:e.types,user:e.user}}doSearch(e){return this.alertsService.searchUserAlerts$Response(e)}resolveMenu(){return d.b.USER_ALERTS}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(de.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-user-alerts"]],features:[b.wb],decls:30,vars:28,consts:[[3,"ready"],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","beginDate","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","endDate","minDate","past5","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","types",3,"label","emptyOption"],["value","custom",3,"text"],["value","givenVeryBadRefs",3,"text"],["value","insufficientBalanceForInitialCredit",3,"text"],["value","maxDeviceActivationAttemptsReached",3,"text"],["value","maxDeviceConfirmationCheckAttemptsReached",3,"text"],["value","maxTokenActivationAttemptsReached",3,"text"],["value","maxUserLocalizationAttemptsReached",3,"text"],["value","maxVoucherRedeemAttemptsReached",3,"text"],["value","moveUserAutomaticallyFailed",3,"text"],["value","passwordDisabledByTries",3,"text"],["value","passwordTemporarilyBlocked",3,"text"],["value","receivedVeryBadRefs",3,"text"],["value","scheduledPaymentFailed",3,"text"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","rendering$","update"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["avatarIcon","user",3,"avatarImage"],[1,"cell-main",3,"tooltip"],[1,"cell-cell-date"],[1,"cell-text"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Tb(2,"page-content",1),b.Tb(3,"form",2),b.Tb(4,"div",3),b.Tb(5,"div",4),b.Ob(6,"date-field",5),b.Sb(),b.Tb(7,"div",4),b.Ob(8,"date-field",6),b.Sb(),b.Tb(9,"div",4),b.Tb(10,"single-selection-field",7),b.Ob(11,"field-option",8),b.Ob(12,"field-option",9),b.Ob(13,"field-option",10),b.Ob(14,"field-option",11),b.Ob(15,"field-option",12),b.Ob(16,"field-option",13),b.Ob(17,"field-option",14),b.Ob(18,"field-option",15),b.Ob(19,"field-option",16),b.Ob(20,"field-option",17),b.Ob(21,"field-option",18),b.Ob(22,"field-option",19),b.Ob(23,"field-option",20),b.Sb(),b.Sb(),b.Tb(24,"div",4),b.Ob(25,"user-field",21),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(26,"results-layout",22),b.bc("update",(function(e){return t.update(e)})),b.ec(27,"async"),b.Fc(28,ke,8,7,"mobile-result",23),b.Fc(29,Te,12,6,"table",24),b.Sb(),b.Sb()),2&e&&(b.kc("ready",b.fc(1,24,t.data$)),b.zb(2),b.kc("heading",t.i18n.userAlert.title)("mobileHeading",t.i18n.userAlert.mobileTitle),b.zb(1),b.kc("formGroup",t.form),b.zb(3),b.kc("label",t.i18n.general.beginDate),b.zb(2),b.kc("label",t.i18n.general.endDate),b.zb(2),b.kc("label",t.i18n.userAlert.type.title)("emptyOption",t.i18n.general.notApplied),b.zb(1),b.kc("text",t.i18n.userAlert.type.custom),b.zb(1),b.kc("text",t.i18n.userAlert.type.givenVeryBadRefs),b.zb(1),b.kc("text",t.i18n.userAlert.type.insufficientBalanceForInitialCredit),b.zb(1),b.kc("text",t.i18n.userAlert.type.maxDeviceActivationAttemptsReached),b.zb(1),b.kc("text",t.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached),b.zb(1),b.kc("text",t.i18n.userAlert.type.maxTokenActivationAttemptsReached),b.zb(1),b.kc("text",t.i18n.userAlert.type.maxUserLocalizationAttemptsReached),b.zb(1),b.kc("text",t.i18n.userAlert.type.maxVoucherRedeemAttemptsReached),b.zb(1),b.kc("text",t.i18n.userAlert.type.moveUserAutomaticallyFailed),b.zb(1),b.kc("text",t.i18n.userAlert.type.passwordDisabledByTries),b.zb(1),b.kc("text",t.i18n.userAlert.type.passwordTemporarilyBlocked),b.zb(1),b.kc("text",t.i18n.userAlert.type.receivedVeryBadRefs),b.zb(1),b.kc("text",t.i18n.userAlert.type.receivedVeryBadRefs),b.zb(2),b.kc("label",t.i18n.general.user),b.zb(1),b.kc("results",b.fc(27,26,t.results$))("rendering$",t.rendering$))},directives:[m.a,h.a,V.I,V.w,V.n,me.a,V.v,V.l,pe.a,he.a,ge.a,g.a,v.a,k.a,S.a,T.b,p.s,p.q,ve.a],pipes:[p.b,z.a],encapsulation:2,changeDetection:0}),e})();var Fe=i("XDzf"),ze=i("x6mR"),Oe=i("yHfF");function Ae(e,t){if(1&e&&b.Ob(0,"boolean-field",7),2&e){const e=b.dc(2);b.kc("label",e.i18n.brokers.mainBroker)}}function Ce(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"page-content",2),b.Tb(2,"form",3),b.Ob(3,"user-field",4),b.Fc(4,Ae,1,1,"boolean-field",5),b.Sb(),b.Tb(5,"actions"),b.Tb(6,"button",6),b.bc("click",(function(){return b.wc(e),b.dc().save()})),b.ec(7,"async"),b.Hc(8),b.Sb(),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.brokers.title.new)("mobileHeading",e.i18n.brokers.mobileTitle.new),b.zb(1),b.kc("formGroup",e.form),b.zb(1),b.kc("filters",e.userQuery)("allowContacts",!1)("label",e.i18n.brokers.broker),b.zb(1),b.kc("ngIf",e.data.brokers),b.zb(2),b.kc("disabled",b.fc(7,9,e.requesting$)),b.zb(2),b.Jc(" ",e.i18n.general.save," ")}}let we=(()=>{class e extends ze.a{constructor(e,t){super(e),this.brokeringService=t,this.form=this.formBuilder.group({})}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.brokeringService.getBrokerDataForAdd({user:this.user}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.userQuery={roles:[Fe.eb.BROKER],usersToExclude:e.brokers.map(e=>e.id),groups:e.brokerGroups.map(e=>e.id)},e.brokers&&this.form.setControl("mainBroker",this.formBuilder.control(!1)),this.form.setControl("broker",this.formBuilder.control(null,V.G.required))}save(){if(Object(B.F)(this.form),!this.form.valid)return;const e=this.form.value;this.addSub(this.brokeringService.addBroker({broker:e.broker,user:this.user,main:e.mainBroker}).subscribe(()=>{this.notification.snackBar(this.i18n.brokers.brokerAdded),this.router.navigate(["/users",this.user,"brokers"])}))}resolveMenu(){return this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.g))},e.\u0275cmp=b.Hb({type:e,selectors:[["broker-form"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading"],[3,"formGroup"],["formControlName","broker",3,"filters","allowContacts","label"],["formControlName","mainBroker",3,"label",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["formControlName","mainBroker",3,"label"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Ce,9,11,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,ge.a,V.v,V.l,j.a,Oe.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function Ee(e,t){if(1&e&&b.Ob(0,"user-info",7),2&e){const e=b.dc(2);b.kc("user",e.data.user)}}function Ne(e,t){1&e&&b.Ob(0,"icon",17)}function Re(e,t){if(1&e){const e=b.Ub();b.Tb(0,"a",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).setMain(i),t.stopPropagation(),t.preventDefault()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(3);b.zb(1),b.Jc("",e.i18n.brokers.setMain," ")}}function De(e,t){if(1&e){const e=b.Ub();b.Tb(0,"mobile-result",8),b.Tb(1,"div",9),b.Tb(2,"div"),b.Tb(3,"div",10),b.Hc(4),b.Sb(),b.Tb(5,"div",11),b.Fc(6,Ne,1,0,"icon",12),b.Fc(7,Re,2,1,"a",13),b.Sb(),b.Sb(),b.Tb(8,"div",14),b.Tb(9,"button",15),b.bc("click",(function(i){b.wc(e);const n=t.$implicit;return b.dc(2).remove(n),i.stopPropagation(),i.preventDefault()})),b.Ob(10,"icon",16),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit;b.kc("avatarImage",null==e.broker?null:e.broker.image),b.zb(4),b.Jc(" ",e.broker.display," "),b.zb(2),b.kc("ngIf",e.main),b.zb(1),b.kc("ngIf",!e.main)}}function Pe(e,t){1&e&&b.Ob(0,"icon",17)}function He(e,t){if(1&e){const e=b.Ub();b.Tb(0,"a",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(3).setMain(i),t.stopPropagation(),t.preventDefault()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(4);b.zb(1),b.Jc("",e.i18n.brokers.setMain," ")}}const xe=function(e,t){return{"pb-0":e,"border-0":t}};function _e(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"tr",24),b.bc("click",(function(){b.wc(e);const i=t.$implicit,n=b.dc(3);return n.router.navigate(n.path(i))})),b.Tb(2,"td",25),b.ec(3,"async"),b.ec(4,"async"),b.Ob(5,"avatar",26),b.Sb(),b.Tb(6,"td"),b.Tb(7,"a",27),b.Hc(8),b.Sb(),b.Sb(),b.Tb(9,"td",28),b.Fc(10,Pe,1,0,"icon",12),b.Fc(11,He,2,1,"a",13),b.Sb(),b.Tb(12,"td",29),b.Tb(13,"button",30),b.bc("click",(function(i){b.wc(e);const n=t.$implicit;return b.dc(3).remove(n),i.stopPropagation()})),b.Ob(14,"icon",16),b.Sb(),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.kc("ngClass",b.oc(12,xe,b.fc(3,8,i.layout.xxs$),b.fc(4,10,i.layout.xxs$))),b.zb(3),b.kc("image",null==e.broker?null:e.broker.image)("tooltip",null==e.broker?null:e.broker.display),b.zb(2),b.kc("routerLink",i.path(e)),b.zb(1),b.Jc(" ",e.broker.shortDisplay," "),b.zb(2),b.kc("ngIf",e.main),b.zb(1),b.kc("ngIf",!e.main),b.zb(2),b.kc("tooltip",i.i18n.general.remove)}}function Le(e,t){if(1&e&&(b.Tb(0,"table",19),b.Tb(1,"thead"),b.Ob(2,"th",20),b.Tb(3,"th"),b.Hc(4),b.Sb(),b.Tb(5,"th",21),b.Hc(6),b.Sb(),b.Ob(7,"th",22),b.Sb(),b.Tb(8,"tbody"),b.Fc(9,_e,15,15,"ng-container",23),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(4),b.Ic(e.i18n.general.user),b.zb(2),b.Jc("",e.i18n.brokers.mainBroker," "),b.zb(3),b.kc("ngForOf",e.data.brokers)}}function Me(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",2),b.ec(2,"async"),b.Fc(3,Ee,1,1,"user-info",3),b.Sb(),b.Tb(4,"results-layout",4),b.Fc(5,De,11,4,"mobile-result",5),b.Fc(6,Le,10,3,"table",6),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.brokers.title.list)("mobileHeading",e.i18n.brokers.mobileTitle.list)("headingActions",b.fc(2,7,e.headingActions$))("mode",e.self?"empty":"normal"),b.zb(2),b.kc("ngIf",!e.self),b.zb(1),b.kc("results",e.data.brokers)("toLink",e.toLink)}}let Ue=(()=>{class e extends ze.a{constructor(e,t){super(e),this.brokeringService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param}).subscribe(e=>{this.data=e}))}path(e){return["/users",e.broker.id,"profile"]}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user),this.brokers=e.brokers,this.headingActions=[],e.editable&&this.headingActions.push(new G.c("registration",this.i18n.general.addNew,()=>this.router.navigate(["/users",this.param,"brokers","new"]),!0)),e.history&&this.headingActions.push(new G.c("history",this.i18n.general.viewHistory,()=>this.router.navigate(["/users",this.param,"brokers","history"]),!0))}get toLink(){return e=>this.path(e)}setMain(e){this.addSub(this.brokeringService.setMainBroker({broker:e.broker.id,user:this.param}).subscribe(()=>{this.reload()}))}remove(e){this.notification.confirm({message:this.i18n.general.removeConfirm(e.broker.display),callback:()=>this.doRemove(e)})}doRemove(e){this.addSub(this.brokeringService.removeBroker({broker:e.broker.id,user:this.param}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(e.broker.display)),this.reload()}))}resolveMenu(){return this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.g))},e.\u0275cmp=b.Hb({type:e,selectors:[["list-user-brokers"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results","toLink"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],["avatarIcon","user",3,"avatarImage"],[1,"d-flex"],[1,"cell-main"],[1,"cell-text"],["class","d-inline-block","icon","done_outline",4,"ngIf"],["class","decorated",3,"click",4,"ngIf"],[1,"ml-auto"],[1,"btn","btn-icon",3,"click"],["icon","clear"],["icon","done_outline",1,"d-inline-block"],[1,"decorated",3,"click"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],["width","20%",1,"text-center"],[1,"actions"],[4,"ngFor","ngForOf"],[3,"click"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"],[3,"routerLink"],[1,"text-center"],[1,"actions","actions-multiple"],[1,"btn","btn-icon",3,"tooltip","click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Me,7,9,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,g.a,v.a,k.a,y.a,S.a,I.a,p.s,p.q,ve.a,T.b,a.h],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var $e=i("zisa"),Ge=i("Dhej");function Be(e,t){1&e&&b.Pb(0)}function Je(e,t){if(1&e&&(b.Tb(0,"mobile-result",8),b.Tb(1,"div",9),b.Hc(2),b.Sb(),b.Tb(3,"div",10),b.Hc(4),b.ec(5,"date"),b.Sb(),b.Tb(6,"div",11),b.Hc(7),b.Sb(),b.Tb(8,"div",11),b.Hc(9),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.kc("avatarImage",null==e.broker?null:e.broker.image),b.zb(2),b.Jc(" ",e.broker.display," "),b.zb(2),b.Jc(" ",b.fc(5,7,e.date)," "),b.zb(3),b.Kc(" ",i.i18n.general.action,": ",i.showActionLabel(e)," "),b.zb(2),b.Kc(" ",i.i18n.general.performedBy,": ",e.by?e.by.shortDisplay:i.i18n.brokers.administration," ")}}const Ve=function(e,t){return{"pb-0":e,"border-0":t}};function qe(e,t){if(1&e&&(b.Tb(0,"tr"),b.Tb(1,"td",15),b.ec(2,"async"),b.ec(3,"async"),b.Ob(4,"avatar",16),b.Sb(),b.Tb(5,"td"),b.Hc(6),b.Sb(),b.Tb(7,"td"),b.Hc(8),b.ec(9,"date"),b.Sb(),b.Tb(10,"td"),b.Hc(11),b.Sb(),b.Tb(12,"td"),b.Hc(13),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(1),b.kc("ngClass",b.oc(13,Ve,b.fc(2,7,i.layout.xxs$),b.fc(3,9,i.layout.xxs$))),b.zb(3),b.kc("image",null==e.broker?null:e.broker.image)("tooltip",null==e.broker?null:e.broker.display),b.zb(2),b.Ic(e.broker.shortDisplay),b.zb(2),b.Ic(b.fc(9,11,e.date)),b.zb(3),b.Ic(i.showActionLabel(e)),b.zb(2),b.Jc(" ",e.by?e.by.shortDisplay:i.i18n.brokers.administration," ")}}function je(e,t){if(1&e&&(b.Tb(0,"table",12),b.Tb(1,"thead"),b.Ob(2,"th",13),b.Tb(3,"th"),b.Hc(4),b.Sb(),b.Tb(5,"th"),b.Hc(6),b.Sb(),b.Tb(7,"th"),b.Hc(8),b.Sb(),b.Tb(9,"th"),b.Hc(10),b.Sb(),b.Sb(),b.Tb(11,"tbody"),b.Fc(12,qe,14,16,"tr",14),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(4),b.Ic(e.i18n.brokers.broker),b.zb(2),b.Ic(e.i18n.general.date),b.zb(2),b.Ic(e.i18n.general.action),b.zb(2),b.Ic(e.i18n.general.performedBy),b.zb(2),b.kc("ngForOf",e.data.history)}}function Qe(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Ob(1,"user-info",4),b.Sb(),b.Tb(2,"results-layout",5),b.Fc(3,Je,10,9,"mobile-result",6),b.Fc(4,je,13,5,"table",7),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.i18n.brokers.title.history)("mobileHeading",e.i18n.brokers.mobileTitle.history),b.zb(1),b.kc("user",e.data.user),b.zb(1),b.kc("results",e.data.history)("onClick",e.onClick)}}let Ye=(()=>{class e extends u.a{constructor(e,t){super(e),this.brokeringService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.brokeringService.getUserBrokersData({user:this.param,fields:["user","history"]}).subscribe(e=>{this.data=e}))}showActionLabel(e){switch(e.action){case $e.a.ADD:return this.i18n.brokers.action.add;case $e.a.REMOVE:return this.i18n.brokers.action.remove;case $e.a.SET_MAIN:return this.i18n.brokers.action.setMain}}get onClick(){return e=>null!=e}resolveMenu(e){return this.authHelper.searchUsersMenu(e.user)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(Ge.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-broker-history"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results","onClick"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover",4,"resultTable"],["avatarIcon","user",3,"avatarImage"],[1,"cell-main"],[1,"cell-date"],[1,"cell-text"],[1,"table","table-hover"],[1,"avatar"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Be,1,0,"ng-container",1),b.Sb(),b.Fc(3,Qe,5,5,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,y.a,g.a,v.a,k.a,S.a,p.s,p.q,ve.a,T.b],pipes:[p.b,F.a],encapsulation:2,changeDetection:0}),e})();var Ke=i("4APx");function Xe(e,t){if(1&e&&b.Ob(0,"field-option",13),2&e){const e=t.$implicit;b.kc("value",e.id)("internalName",e.internalName)("id",e.id)("text",e.name)}}function We(e,t){if(1&e&&(b.Tb(0,"div",6),b.Tb(1,"multi-selection-field",11),b.Fc(2,Xe,1,4,"field-option",12),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.connectedUser.channel),b.zb(1),b.kc("ngForOf",e.data.channels)}}function Ze(e,t){if(1&e&&b.Ob(0,"field-option",16),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",e)("text",i.showConnectedLabel(e))}}function et(e,t){if(1&e&&(b.Tb(0,"div",6),b.Tb(1,"multi-selection-field",14),b.Fc(2,Ze,1,2,"field-option",15),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.connectedUser.showConnected),b.zb(1),b.kc("ngForOf",e.data.roles)}}function tt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).disconnect(i),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",25),b.Sb()}}function it(e,t){if(1&e&&(b.Tb(0,"mobile-result",17),b.Tb(1,"div",18),b.Tb(2,"div"),b.Tb(3,"div",19),b.Hc(4),b.Sb(),b.Tb(5,"div",20),b.Hc(6),b.ec(7,"dateTime"),b.Sb(),b.Tb(8,"div",21),b.Hc(9),b.Sb(),b.Sb(),b.Tb(10,"div",22),b.Fc(11,tt,2,0,"button",23),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.kc("avatarImage",null==e.user?null:e.user.image),b.zb(4),b.Jc(" ",e.user.shortDisplay," "),b.zb(2),b.Jc(" ",b.fc(7,5,e.creationDate)," "),b.zb(3),b.Jc(" ",e.channel.name," "),b.zb(2),b.kc("ngIf",i.canDisconnect(e))}}function nt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",33),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(3).disconnect(i),t.stopPropagation()})),b.Ob(1,"icon",25),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.connectedUser.disconnect)}}const at=function(e,t){return{"pb-0":e,"border-0":t}};function st(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"tr"),b.Tb(2,"td",30),b.ec(3,"async"),b.ec(4,"async"),b.Ob(5,"avatar",31),b.Sb(),b.Tb(6,"td"),b.Hc(7),b.Sb(),b.Tb(8,"td"),b.Hc(9),b.Sb(),b.Tb(10,"td"),b.Hc(11),b.ec(12,"dateTime"),b.Sb(),b.Tb(13,"td"),b.Hc(14),b.Sb(),b.Tb(15,"td",28),b.Fc(16,nt,2,1,"button",32),b.Sb(),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.kc("ngClass",b.oc(14,at,b.fc(3,8,i.layout.xxs$),b.fc(4,10,i.layout.xxs$))),b.zb(3),b.kc("image",null==e.user?null:e.user.image)("tooltip",null==e.user?null:e.user.display),b.zb(2),b.Ic(e.user.shortDisplay),b.zb(2),b.Ic(e.channel.name),b.zb(2),b.Ic(b.fc(12,12,e.creationDate)),b.zb(3),b.Ic(e.remoteAddress),b.zb(2),b.kc("ngIf",i.canDisconnect(e))}}function ot(e,t){if(1&e&&(b.Tb(0,"table",26),b.Tb(1,"thead"),b.Ob(2,"th",27),b.Tb(3,"th"),b.Hc(4),b.Sb(),b.Tb(5,"th"),b.Hc(6),b.Sb(),b.Tb(7,"th"),b.Hc(8),b.Sb(),b.Tb(9,"th"),b.Hc(10),b.Sb(),b.Ob(11,"th",28),b.Sb(),b.Tb(12,"tbody"),b.Fc(13,st,17,17,"ng-container",29),b.ec(14,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc(2);var i;const t=null==(i=b.fc(14,5,e.results$))?null:i.results;b.zb(4),b.Ic(e.i18n.general.user),b.zb(2),b.Ic(e.i18n.connectedUser.channel),b.zb(2),b.Ic(e.i18n.connectedUser.loggedInAt),b.zb(2),b.Ic(e.i18n.connectedUser.ipAddress),b.zb(3),b.kc("ngForOf",t)}}function rt(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"page-content",2),b.Tb(2,"form",3),b.Tb(3,"div",4),b.Fc(4,We,3,2,"div",5),b.Fc(5,et,3,2,"div",5),b.Tb(6,"div",6),b.Ob(7,"user-field",7),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(8,"results-layout",8),b.bc("update",(function(t){return b.wc(e),b.dc().update(t)})),b.ec(9,"async"),b.Fc(10,it,12,7,"mobile-result",9),b.Fc(11,ot,15,7,"table",10),b.Sb(),b.Qb()}if(2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.connectedUser.title)("mobileHeading",e.i18n.connectedUser.mobileTitle),b.zb(1),b.kc("formGroup",e.form),b.zb(2),b.kc("ngIf",(null==e.data.channels?null:e.data.channels.length)>1),b.zb(1),b.kc("ngIf",(null==e.data.roles?null:e.data.roles.length)>1),b.zb(2),b.kc("label",e.i18n.general.user),b.zb(1),b.kc("results",b.fc(9,9,e.results$))("onClick",e.onClick)("rendering$",e.rendering$)}}let ct=(()=>{class e extends fe.a{constructor(e,t){super(e),this.sessionsService=t}ngOnInit(){super.ngOnInit(),this.addSub(this.sessionsService.getSessionDataForSearch().subscribe(e=>{this.form.patchValue(e.query,{emitEvent:!1}),this.data=e}))}toSearchParams(e){return e}disconnect(e){this.addSub(this.sessionsService.disconnectSession({sessionToken:e.sessionToken}).subscribe(()=>{this.notification.snackBar(this.i18n.connectedUser.disconnected(e.user.display)),this.update()}))}canDisconnect(e){return this.login.auth.permissions.sessions.disconnect&&this.login.auth.sessionToken!==e.sessionToken}get onClick(){return e=>null!=e}getFormControlNames(){return["channels","roles","user"]}doSearch(e){return this.sessionsService.searchSessions$Response(e)}showConnectedLabel(e){switch(e){case Fe.eb.ADMINISTRATOR:return this.i18n.connectedUser.viewConnected.admin;case Fe.eb.BROKER:return this.i18n.connectedUser.viewConnected.broker;case Fe.eb.MEMBER:return this.i18n.connectedUser.viewConnected.member;case Fe.eb.OPERATOR:return this.i18n.connectedUser.viewConnected.operator}}resolveMenu(){return this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.D))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-connected"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","user",3,"label"],["resultType","list",3,"results","onClick","rendering$","update"],["avatarIcon","user",3,"avatarImage",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","formControlName","channels",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","roles",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["avatarIcon","user",3,"avatarImage"],[1,"d-flex"],[1,"cell-main"],[1,"cell-cell-date"],[1,"cell-text"],[1,"ml-auto"],["class","btn btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-icon",3,"click"],["icon","clear"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"actions"],[4,"ngFor","ngForOf"],[1,"avatar",3,"ngClass"],["icon","user",3,"image","tooltip"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,rt,12,11,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,ge.a,V.v,V.l,g.a,v.a,k.a,Ke.a,p.s,he.a,S.a,I.a,p.q,ve.a,T.b],pipes:[p.b,z.a],encapsulation:2,changeDetection:0}),e})();var lt=i("LvDl"),ut=i("2Vo4"),dt=i("7HWn"),bt=i("DIHi"),ft=i("YG2p"),mt=i("ZJXG");function pt(e,t){if(1&e&&b.Ob(0,"boolean-field",16),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.brokerManageable)}}function ht(e,t){if(1&e){const e=b.Ub();b.Tb(0,"label-value",17),b.Tb(1,"div"),b.Tb(2,"span"),b.Hc(3),b.ec(4,"async"),b.Sb(),b.Tb(5,"button",18),b.bc("click",(function(t){return b.wc(e),b.dc(2).download(),t.stopPropagation()})),b.Ob(6,"icon",19),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc(2);b.kc("label",e.i18n.document.document),b.zb(3),b.Jc(" ",b.fc(4,3,e.fileName$)," "),b.zb(2),b.kc("tooltip",e.i18n.general.download)}}function gt(e,t){if(1&e&&(b.Rb(0,4),b.Tb(1,"label-value",5),b.Ob(2,"user-link",6),b.Sb(),b.Ob(3,"input-field",7),b.Ob(4,"textarea-field",8),b.Ob(5,"boolean-field",9),b.Ob(6,"boolean-field",10),b.Ob(7,"boolean-field",11,12),b.Fc(9,pt,1,1,"boolean-field",13),b.Fc(10,ht,7,5,"label-value",14),b.ec(11,"async"),b.Ob(12,"file-field",15),b.ec(13,"async"),b.Qb()),2&e){const e=b.uc(8),t=b.dc();b.kc("formGroup",t.form),b.zb(1),b.kc("label",t.i18n.general.user),b.zb(1),b.kc("user",t.data.user),b.zb(1),b.kc("label",t.i18n.general.name),b.zb(1),b.kc("label",t.i18n.general.description),b.zb(1),b.kc("label",t.i18n.document.enable),b.zb(1),b.kc("label",t.i18n.document.userVisible),b.zb(1),b.kc("label",t.i18n.document.brokerVisible),b.zb(2),b.kc("ngIf",e.value),b.zb(1),b.kc("ngIf",!t.create&&b.fc(11,13,t.fileName$)),b.zb(2),b.kc("required",t.create)("label",t.create||null!==b.fc(13,15,t.fileName$)?t.i18n.document.newDocument:t.i18n.document.replaceDocument)("formControl",t.fileControl)}}let vt=(()=>{class e extends ze.a{constructor(e,t){super(e),this.documentsService=t,this.fileName$=new ut.a(null)}isOwner(){return this.authHelper.isSelf(this.data.user)}ngOnInit(){super.ngOnInit();const e=this.route.snapshot;this.user=e.params.user,this.id=e.params.id,this.create=null==this.id;const t=this.create?this.documentsService.getUserDocumentDataForNew({user:this.user}):this.documentsService.getDocumentDataForEdit({id:this.id});this.addSub(t.subscribe(e=>this.data=e))}download(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(B.g))}onDataInitialized(e){var t;super.onDataInitialized(e);const i=e.document,n=e.document;this.create||this.fileName$.next(null===(t=e.file)||void 0===t?void 0:t.name),this.fileControl=this.formBuilder.control(null,this.create?V.G.required:null),this.form=this.formBuilder.group({name:[i.name,V.G.required],description:i.description,enabled:i.enabled,userVisible:i.userVisible,brokerVisible:i.brokerVisible,brokerManageable:i.brokerManageable,version:n.version})}asEdit(){return this.data}asNew(){return this.data}save(){Object(B.F)(this.form);const e=this.fileControl.value;if((this.create||e)&&Object(B.F)(this.fileControl),!this.form.valid||!this.fileControl.valid)return;const t=Object(lt.cloneDeep)(this.form.value);t.brokerVisible||(t.brokerManageable=!1),this.addSub(this.create?this.documentsService.createUserDocumentWithUpload({user:this.user,body:{document:t,file:e}}).subscribe(e=>this.notifySavedAndReload(e)):this.fileControl.value?this.documentsService.updateDocumentWithUpload({id:this.id,body:{document:t,file:e}}).subscribe(()=>this.notifySavedAndReload(this.id)):this.documentsService.updateDocument({id:this.id,body:t}).subscribe(()=>this.notifySavedAndReload(this.id)))}notifySavedAndReload(e){this.notification.snackBar(this.i18n.document.savedSuccessfully),this.router.navigate(["/users","documents","edit",e])}formControl(e){return this.form.get(e)}resolveMenu(){return this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.l))},e.\u0275cmp=b.Hb({type:e,selectors:[["edit-document"]],features:[b.wb],decls:8,vars:10,consts:[[3,"ready"],[3,"heading","mobileHeading"],[3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"formGroup"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["fieldSize","full","required","","formControlName","name",3,"label"],["formControlName","description",3,"label"],["formControlName","enabled",3,"label"],["formControlName","userVisible",3,"label"],["formControlName","brokerVisible",3,"label"],["brokerVisible",""],["formControlName","brokerManageable",3,"label",4,"ngIf"],[3,"label",4,"ngIf"],[3,"required","label","formControl"],["formControlName","brokerManageable",3,"label"],[3,"label"],[1,"btn","btn-icon","ml-2",3,"tooltip","click"],["icon","save_alt"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Tb(2,"page-content",1),b.Fc(3,gt,14,17,"ng-container",2),b.Tb(4,"actions"),b.Tb(5,"button",3),b.bc("click",(function(){return t.save()})),b.ec(6,"async"),b.Hc(7),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e&&(b.kc("ready",b.fc(1,6,t.data$)),b.zb(2),b.kc("heading",t.create?t.i18n.document.title.new:t.i18n.document.title.edit)("mobileHeading",t.create?t.i18n.document.mobileTitle.new:t.i18n.document.mobileTitle.edit),b.zb(1),b.kc("ngIf",t.data),b.zb(2),b.kc("disabled",b.fc(6,8,t.requesting$)),b.zb(2),b.Jc(" ",t.i18n.general.save," "))},directives:[m.a,h.a,p.t,j.a,V.w,V.n,q.a,dt.a,bt.a,V.D,V.v,V.l,ft.a,Oe.a,mt.a,V.k,T.b,I.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function kt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).download(i),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",11),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.general.download)}}function yt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit,n=b.dc(2);return n.router.navigate(n.path(i)),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",12),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.document.process)}}function St(e,t){if(1&e&&(b.Tb(0,"mobile-result"),b.Tb(1,"div",6),b.Tb(2,"div"),b.Tb(3,"label-value",7),b.Hc(4),b.Sb(),b.Tb(5,"label-value",7),b.Hc(6),b.Sb(),b.Sb(),b.Tb(7,"div",8),b.Fc(8,kt,2,1,"button",9),b.Fc(9,yt,2,1,"button",9),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(3),b.kc("label",i.i18n.general.name),b.zb(1),b.Jc(" ",e.name," "),b.zb(1),b.kc("label",i.i18n.general.description),b.zb(1),b.Jc(" ",e.description," "),b.zb(2),b.kc("ngIf",i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",!i.isStatic(e.kind))}}function Tt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(3).download(i),t.stopPropagation()})),b.Ob(1,"icon",11),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.general.download)}}function It(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit,n=b.dc(3);return n.router.navigate(n.path(i)),t.stopPropagation()})),b.Ob(1,"icon",12),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.document.process)}}function Ft(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",16),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(3);return a.isStatic(n.kind)?a.download(n):a.router.navigate(a.path(n)),i.stopPropagation()})),b.Tb(1,"td",17),b.Hc(2),b.Sb(),b.Tb(3,"td"),b.Hc(4),b.Sb(),b.Tb(5,"td",18),b.Fc(6,Tt,2,1,"button",9),b.Fc(7,It,2,1,"button",9),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.Ic(e.name),b.zb(2),b.Ic(e.description),b.zb(2),b.kc("ngIf",i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",!i.isStatic(e.kind))}}function zt(e,t){if(1&e&&(b.Tb(0,"table",13),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Ob(6,"th",14),b.Sb(),b.Tb(7,"tbody"),b.Fc(8,Ft,8,4,"tr",15),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(3),b.Ic(e.i18n.general.name),b.zb(2),b.Ic(e.i18n.general.description),b.zb(3),b.kc("ngForOf",e.data)}}function Ot(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"page-content",2),b.ec(2,"async"),b.Tb(3,"results-layout",3),b.Fc(4,St,10,6,"mobile-result",4),b.Fc(5,zt,9,3,"table",5),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("mode","empty")("heading",e.i18n.document.title.list)("mobileHeading",e.i18n.document.mobileTitle.list)("headingActions",b.fc(2,5,e.headingActions$)),b.zb(2),b.kc("results",e.data)}}let At=(()=>{class e extends ze.a{constructor(e,t){super(e),this.documentsService=t}ngOnInit(){super.ngOnInit(),this.addSub(this.documentsService.listUserDocuments({user:be.a.SELF}).subscribe(e=>this.data=e))}isStatic(e){return e!==Fe.u.DYNAMIC}download(e){this.addSub(this.documentsService.downloadDocumentFile$Response({id:e.id}).subscribe(B.g))}path(e){return["/users","documents","process-dynamic",e.id]}resolveMenu(){return this.authHelper.userMenu(null,d.b.MY_DOCUMENTS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.l))},e.\u0275cmp=b.Hb({type:e,selectors:[["list-documents"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"mode","heading","mobileHeading","headingActions"],[3,"results"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","save_alt"],["icon","edit"],[1,"table","table-hover","cursor-pointer"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","20%"],[1,"actions","actions-multiple"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Ot,6,7,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,g.a,v.a,k.a,S.a,q.a,T.b,I.a,p.s],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Ct=i("OoS4"),wt=i("Y+zs"),Et=i("bBjs"),Nt=i("cyUc");function Rt(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"custom-field-input",6),b.Qb()),2&e){const e=t.$implicit,i=t.first,n=b.dc(2);b.zb(1),b.kc("field",e)("formControl",n.formControl(e.internalName))("focused",i)("labelPosition","auto")}}function Dt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.Fc(1,Rt,2,4,"ng-container",4),b.Tb(2,"actions"),b.Tb(3,"button",5),b.bc("click",(function(){return b.wc(e),b.dc().process()})),b.Hc(4),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.data.document.name)("mobileHeading",e.data.document.name),b.zb(1),b.kc("ngForOf",e.formFields),b.zb(3),b.Jc(" ",e.i18n.general.submit," ")}}function Pt(e,t){if(1&e&&(b.Tb(0,"page-content",7),b.ec(1,"async"),b.Ob(2,"div",8),b.ec(3,"trust"),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.data.document.name)("mobileHeading",e.data.document.name)("headingActions",b.fc(1,4,e.headingActions$)),b.zb(2),b.kc("innerHTML",b.fc(3,6,e.result),b.xc)}}let Ht=(()=>{class e extends ze.a{constructor(e,t,i){super(e),this.fieldsHelper=t,this.documentsService=i,this.step$=new ut.a(null),this.result$=new ut.a(null)}get result(){return this.result$.value}get step(){return this.step$.value}set step(e){this.step$.next(e)}ngOnInit(){super.ngOnInit(),this.documentId=this.route.snapshot.params.id,this.addSub(this.documentsService.getDataForDynamicDocument({id:this.documentId,user:be.a.SELF}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.formFields=e.formFields||[],this.form=this.fieldsHelper.customValuesFormGroup(this.formFields),this.formFields.length>0?this.step="form":this.process()}process(){Object(B.F)(this.form),this.form.valid&&this.addSub(this.documentsService.processDynamicDocument({id:this.documentId,user:be.a.SELF,body:{formFields:this.form.value}}).subscribe(e=>{this.result$.next(e);const t=[];t.push(this.exportHelper.printAction()),t[0].maybeRoot=!0,this.headingActions=t,this.step="preview"}))}formControl(e){return this.form.get(e)}resolveMenu(){return this.authHelper.userMenu(null,d.b.MY_DOCUMENTS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(Ct.a),b.Nb(r.l))},e.\u0275cmp=b.Hb({type:e,selectors:[["process-dynamic-document"]],features:[b.wb],decls:5,vars:8,consts:[[3,"ready","ngSwitch"],[3,"heading","mobileHeading",4,"ngSwitchCase"],["printContentOnly","","last","",3,"heading","mobileHeading","headingActions",4,"ngSwitchCase"],[3,"heading","mobileHeading"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"field","formControl","focused","labelPosition"],["printContentOnly","","last","",3,"heading","mobileHeading","headingActions"],[3,"innerHTML"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.ec(2,"async"),b.Fc(3,Dt,5,4,"page-content",1),b.Fc(4,Pt,4,8,"page-content",2),b.Sb()),2&e&&(b.kc("ready",b.fc(1,4,t.data$))("ngSwitch",b.fc(2,6,t.step$)),b.zb(3),b.kc("ngSwitchCase","form"),b.zb(1),b.kc("ngSwitchCase","preview"))},directives:[m.a,p.x,p.y,h.a,p.s,j.a,wt.a,V.v,V.k,Et.a],pipes:[p.b,Nt.a],encapsulation:2,changeDetection:0}),e})();function xt(e,t){1&e&&b.Ob(0,"div",5)}function _t(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",5),b.Tb(2,"label-value",10),b.Ob(3,"user-link",11),b.Sb(),b.Sb(),b.Fc(4,xt,1,0,"div",12),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.data.user),b.zb(1),b.kc("ngIf",e.layout.gtsm$)}}function Lt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).navigateToView(i),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",19),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.general.view)}}function Mt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",20),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).download(i),t.stopPropagation()})),b.Ob(1,"icon",21),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.general.download)}}function Ut(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit,n=b.dc(2);return n.router.navigate(n.process(i)),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",19),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.document.process)}}function $t(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",20),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(2).remove(i),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",22),b.Sb()}if(2&e){const e=b.dc(3);b.kc("tooltip",e.i18n.general.remove)}}function Gt(e,t){if(1&e&&(b.Tb(0,"mobile-result"),b.Tb(1,"div",13),b.Tb(2,"div"),b.Tb(3,"label-value",14),b.Hc(4),b.Sb(),b.Tb(5,"label-value",14),b.Hc(6),b.Sb(),b.Sb(),b.Tb(7,"div",15),b.Fc(8,Lt,2,1,"button",16),b.Fc(9,Mt,2,1,"button",17),b.Fc(10,Ut,2,1,"button",16),b.Fc(11,$t,2,1,"button",17),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(3),b.kc("label",i.i18n.general.name),b.zb(1),b.Jc(" ",e.name," "),b.zb(1),b.kc("label",i.i18n.general.description),b.zb(1),b.Jc(" ",e.description," "),b.zb(2),b.kc("ngIf",i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",!i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",i.isUserKind(e))}}function Bt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(3).download(i),t.stopPropagation()})),b.Ob(1,"icon",21),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.general.download)}}function Jt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",18),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit,n=b.dc(3);return n.router.navigate(n.process(i)),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",19),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.document.process)}}function Vt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",30),b.bc("click",(function(t){b.wc(e);const i=b.dc().$implicit;return b.dc(3).remove(i),t.stopPropagation(),t.preventDefault()})),b.Ob(1,"icon",22),b.Sb()}if(2&e){const e=b.dc(4);b.kc("tooltip",e.i18n.general.remove)}}function qt(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",26),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(3);return a.isStatic(n.kind)?a.navigateToView(n):a.router.navigate(a.process(n)),i.stopPropagation(),i.preventDefault()})),b.Tb(1,"td",27),b.Hc(2),b.Sb(),b.Tb(3,"td"),b.Hc(4),b.Sb(),b.Tb(5,"td",28),b.Fc(6,Bt,2,1,"button",16),b.Fc(7,Jt,2,1,"button",16),b.Fc(8,Vt,2,1,"button",29),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.Ic(e.name),b.zb(2),b.Ic(e.description),b.zb(2),b.kc("ngIf",i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",!i.isStatic(e.kind)),b.zb(1),b.kc("ngIf",i.data.canManageIndividual&&i.isUserKind(e))}}function jt(e,t){if(1&e&&(b.Tb(0,"table",23),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Ob(6,"th",24),b.Sb(),b.Tb(7,"tbody"),b.Fc(8,qt,9,5,"tr",25),b.ec(9,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc(2);var i;const t=null==(i=b.fc(9,3,e.results$))?null:i.results;b.zb(3),b.Ic(e.i18n.general.name),b.zb(2),b.Ic(e.i18n.general.description),b.zb(3),b.kc("ngForOf",t)}}function Qt(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",2),b.ec(2,"async"),b.Tb(3,"form",3),b.Tb(4,"div",4),b.Fc(5,_t,5,3,"ng-container",1),b.Tb(6,"div",5),b.Ob(7,"input-field",6),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(8,"results-layout",7),b.ec(9,"async"),b.Fc(10,Gt,12,8,"mobile-result",8),b.Fc(11,jt,10,5,"table",9),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.document.title.search)("mobileHeading",e.i18n.document.mobileTitle.search)("headingActions",b.fc(2,8,e.headingActions$)),b.zb(2),b.kc("formGroup",e.form),b.zb(2),b.kc("ngIf",!e.authHelper.isSelf(e.data.user)),b.zb(2),b.kc("label",e.i18n.general.keywords),b.zb(1),b.kc("results",b.fc(9,10,e.results$))("rendering$",e.rendering$)}}let Yt=(()=>{class e extends fe.a{constructor(e,t){super(e),this.documentsService=t}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.documentsService.getDocumentsDataForSearch({user:this.user}).subscribe(e=>this.data=e))}onDataInitialized(e){super.onDataInitialized(e),this.headingActions=[new G.c("add",this.i18n.general.add,()=>{this.router.navigate(["/users",this.user,"documents","new"])},!0)]}doSearch(e){return this.documentsService.searchDocuments$Response(e)}remove(e){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove(e)})}doRemove(e){this.addSub(this.documentsService.deleteDocument({id:e.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.update()}))}toSearchParams(e){return e}getFormControlNames(){return["brokers","categories","enabled","groups","keywords","range","user"]}isStatic(e){return e!==Fe.u.DYNAMIC}download(e){this.addSub(this.documentsService.downloadDocumentFile$Response({id:e.id}).subscribe(B.g))}process(e){return["/users","documents","process-dynamic",e.id]}view(e){return["/users","documents","view",e.id]}isUserKind(e){return e.kind===Fe.u.USER}navigateToView(e){this.router.navigate(this.view(e))}get toProcessLink(){return e=>this.process(e)}resolveMenu(){return this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.l))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-documents"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-0",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","keywords","fieldSize","full",3,"label"],["resultType","list",3,"results","rendering$"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],["class","btn btn-icon mt-2",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","edit"],[1,"btn","btn-icon","mt-2",3,"tooltip","click"],["icon","save_alt"],["icon","clear"],[1,"table","table-hover","cursor-pointer"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","20%"],[1,"actions","actions-multiple"],["class","btn btn-icon ml-2",3,"tooltip","click",4,"ngIf"],[1,"btn","btn-icon","ml-2",3,"tooltip","click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Qt,12,12,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,bt.a,V.v,V.l,g.a,v.a,k.a,q.a,dt.a,S.a,T.b,I.a,p.s],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function Kt(e,t){if(1&e&&(b.Tb(0,"label-value",8),b.Ob(1,"user-link",9),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.data.user)}}function Xt(e,t){if(1&e&&(b.Tb(0,"label-value",10),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.category),b.zb(1),b.Jc(" ",e.data.category.name," ")}}function Wt(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.userVisible),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.data.userVisible)," ")}}function Zt(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.brokerVisible),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.data.brokerVisible)," ")}}function ei(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.brokerManageable),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.data.brokerManageable)," ")}}function ti(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Kt,2,2,"label-value",4),b.Tb(2,"label-value",5),b.Hc(3),b.Sb(),b.Tb(4,"label-value",5),b.Hc(5),b.Sb(),b.Fc(6,Xt,2,2,"label-value",6),b.Tb(7,"label-value",5),b.Hc(8),b.Sb(),b.Fc(9,Wt,2,2,"label-value",7),b.Fc(10,Zt,2,2,"label-value",7),b.Fc(11,ei,2,2,"label-value",7),b.Tb(12,"label-value",5),b.Hc(13),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("ngIf",e.data.user),b.zb(1),b.kc("label",e.i18n.general.name),b.zb(1),b.Jc(" ",e.data.name," "),b.zb(1),b.kc("label",e.i18n.general.description),b.zb(1),b.Jc(" ",e.data.description," "),b.zb(1),b.kc("ngIf",e.data.category),b.zb(1),b.kc("label",e.i18n.document.enable),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.data.enabled)," "),b.zb(1),b.kc("ngIf",e.data.userVisible),b.zb(1),b.kc("ngIf",e.data.brokerVisible),b.zb(1),b.kc("ngIf",e.data.brokerVisible),b.zb(1),b.kc("label",e.i18n.document.document),b.zb(1),b.Jc(" ",e.data.file.name," ")}}let ii=(()=>{class e extends ze.a{constructor(e,t){super(e),this.documentsService=t}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.documentsService.viewDocument({id:this.id}).subscribe(e=>this.data=e))}onDataInitialized(e){if(super.onDataInitialized(e),this.dataForUiHolder.auth.role!==Fe.eb.BROKER||e.brokerManageable){const e=[new G.c("edit",this.i18n.general.edit,()=>this.navigateToEdit(),!0)];e.push(new G.c("clear",this.i18n.general.remove,()=>this.remove(),!0)),this.headingActions=e}}remove(){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove()})}doRemove(){this.addSub(this.documentsService.deleteDocument({id:this.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.router.navigate(["/users",this.data.user.id,"documents","search"])}))}download(){this.addSub(this.documentsService.downloadDocumentFile$Response({id:this.id}).subscribe(B.g))}navigateToEdit(){this.router.navigate(["/users","documents","edit",this.id])}resolveMenu(e){return e.kind===Fe.u.USER&&this.authHelper.isSelf(e.user)?this.authHelper.userMenu(null,d.b.MY_DOCUMENTS):this.authHelper.searchUsersMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.l))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-document"]],features:[b.wb],decls:9,vars:13,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],[3,"label"],["ng","",3,"label",4,"ngIf"],[3,"label",4,"ngIf"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["ng","",3,"label"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Tb(2,"page-content",1),b.ec(3,"async"),b.Fc(4,ti,14,13,"ng-container",2),b.Tb(5,"actions"),b.Tb(6,"button",3),b.bc("click",(function(){return t.download()})),b.ec(7,"async"),b.Hc(8),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e&&(b.kc("ready",b.fc(1,7,t.data$)),b.zb(2),b.kc("heading",t.i18n.document.title.view)("mobileHeading",t.i18n.document.mobileTitle.view)("headingActions",b.fc(3,9,t.headingActions$)),b.zb(2),b.kc("ngIf",t.data),b.zb(2),b.kc("disabled",b.fc(7,11,t.requesting$)),b.zb(2),b.Jc(" ",t.i18n.general.download," "))},directives:[m.a,h.a,p.t,j.a,q.a,dt.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function ni(e,t){1&e&&b.Pb(0)}function ai(e,t){if(1&e&&(b.Tb(0,"div",11),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.zb(1),b.Kc(" ",t.i18n.general.performedBy,": ",e.by.display," ")}}function si(e,t){if(1&e&&(b.Tb(0,"mobile-result",8),b.Tb(1,"div",9),b.Hc(2),b.Sb(),b.Fc(3,ai,2,2,"div",10),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.kc("date",null==e.period?null:e.period.date),b.zb(2),b.Kc(" ",i.i18n.user.group,": ",e.group?e.group.name:i.i18n.user.operatorNoGroup," "),b.zb(1),b.kc("ngIf",e.by)}}function oi(e,t){if(1&e&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Hc(2),b.ec(3,"date"),b.Sb(),b.Tb(4,"td"),b.Hc(5),b.Sb(),b.Tb(6,"td"),b.Hc(7),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.Ic(b.fc(3,3,null==e.period?null:e.period.begin)),b.zb(3),b.Jc("",e.group?e.group.name:i.i18n.user.operatorNoGroup," "),b.zb(2),b.Ic(null==e.by?null:e.by.display)}}function ri(e,t){if(1&e&&(b.Tb(0,"table",12),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Tb(6,"th"),b.Hc(7),b.Sb(),b.Sb(),b.Tb(8,"tbody"),b.Fc(9,oi,8,5,"tr",13),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(3),b.Ic(e.i18n.general.date),b.zb(2),b.Ic(e.i18n.general.status),b.zb(2),b.Ic(e.i18n.general.performedBy),b.zb(2),b.kc("ngForOf",e.data.history)}}function ci(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Ob(1,"user-info",4),b.Sb(),b.Tb(2,"results-layout",5),b.Fc(3,si,4,4,"mobile-result",6),b.Fc(4,ri,10,4,"table",7),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.operator?e.i18n.groupMembership.title.historyOperator:e.i18n.groupMembership.title.historyUser)("mobileHeading",e.operator?e.i18n.groupMembership.mobileTitle.historyOperator:e.i18n.groupMembership.mobileTitle.historyUser),b.zb(1),b.kc("user",e.data.user),b.zb(1),b.kc("results",e.data.history)}}let li=(()=>{class e extends u.a{constructor(e,t,i){super(e),this.groupMembershipService=t,this.userHelper=i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:["user","history"]}).subscribe(e=>{this.data=e}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(e){return this.authHelper.searchUsersMenu(e.user)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.n),b.Nb(c.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-user-group-history"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results"],[3,"date",4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"date"],[1,"cell-main"],["class","cell-text",4,"ngIf"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,ni,1,0,"ng-container",1),b.Sb(),b.Fc(3,ci,5,4,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,y.a,g.a,v.a,k.a,S.a,p.s],pipes:[p.b,F.a],encapsulation:2,changeDetection:0}),e})();var ui=i("j79m");function di(e,t){if(1&e&&b.Ob(0,"field-option",11),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",i.ApiHelper.internalNameOrId(e))("id",e.id)("internalName",e.internalName)("text",e.name)}}function bi(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Ob(1,"hr"),b.Tb(2,"form",6),b.Tb(3,"single-selection-field",7),b.Fc(4,di,1,4,"field-option",8),b.Sb(),b.Ob(5,"textarea-field",9),b.Sb(),b.Tb(6,"actions"),b.Tb(7,"button",10),b.bc("click",(function(){return b.wc(e),b.dc(2).save()})),b.Hc(8),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=b.dc(2);b.zb(2),b.kc("formGroup",e.form),b.zb(1),b.kc("label",e.i18n.groupMembership.new)("required",!e.allowEmptyGroup)("emptyOption",e.allowEmptyGroup?e.i18n.user.operatorNoGroup:null),b.zb(1),b.kc("ngForOf",e.data.possibleNewGroups),b.zb(1),b.kc("label",e.i18n.general.comments),b.zb(3),b.Ic(e.i18n.general.submit)}}function fi(e,t){if(1&e&&(b.Tb(0,"page-content",2),b.ec(1,"async"),b.Ob(2,"user-info",3),b.Tb(3,"label-value",4),b.Hc(4),b.Sb(),b.Fc(5,bi,9,7,"ng-container",5),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.operator?e.i18n.groupMembership.title.groupOperator:e.i18n.groupMembership.title.groupUser)("mobileHeading",e.operator?e.i18n.groupMembership.mobileTitle.groupOperator:e.i18n.groupMembership.mobileTitle.groupUser)("headingActions",b.fc(1,7,e.headingActions$)),b.zb(2),b.kc("user",e.data.user),b.zb(1),b.kc("label",e.i18n.groupMembership.current),b.zb(1),b.Jc(" ",e.data.group?e.data.group.name:e.i18n.user.operatorNoGroup," "),b.zb(1),b.kc("ngIf",e.editable)}}let mi=(()=>{class e extends u.a{constructor(e,t,i){super(e),this.userHelper=t,this.groupMembershipService=i}get editable(){return!Object(B.h)(this.data.possibleNewGroups)}get operator(){return this.userHelper.isOperator(this.data.user)}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.groupMembershipService.getGroupMembershipData({user:this.param,fields:["-history"]}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.allowEmptyGroup=this.userHelper.isOperator(e.user)&&!!e.group,this.form=this.formBuilder.group({group:this.allowEmptyGroup?null:[null,V.G.required],comment:null}),this.headingActions=[new G.c("history",this.i18n.general.viewHistory,()=>this.router.navigate(["users",this.param,"group","history"]),!0)]}save(){if(Object(B.F)(this.form),!this.form.valid)return;const e=this.data.possibleNewGroups.find(e=>e.id===this.form.value.group);let t,i;t=this.userHelper.isOperator(this.data.user)?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,i=e?this.i18n.groupMembership.confirm({user:this.data.user.display,group:e?e.name:this.i18n.user.operatorNoGroup}):this.i18n.groupMembership.confirmAliasOperator(this.data.user.display),this.notification.confirm({title:t,message:i,callback:()=>this.submit()})}submit(){this.addSub(this.groupMembershipService.changeGroupMembership({user:this.param,body:this.form.value}).subscribe(()=>{this.notification.snackBar(this.operator?this.i18n.groupMembership.doneOperator:this.i18n.groupMembership.doneUser),this.reload()}))}resolveMenu(e){return this.authHelper.searchUsersMenu(e.user)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(ui.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-user-group"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"user"],[3,"label"],[4,"ngIf"],[3,"formGroup"],["formControlName","group",3,"label","required","emptyOption"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],["formControlName","comment",3,"label"],[1,"btn","btn-primary",3,"click"],[3,"value","id","internalName","text"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,fi,6,9,"page-content",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,y.a,q.a,V.I,V.w,V.n,pe.a,V.v,V.l,V.D,p.s,ft.a,j.a,he.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function pi(e,t){1&e&&b.Pb(0)}function hi(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"user-info",7),b.Ob(2,"hr"),b.Qb()),2&e){const e=b.dc(2);b.zb(1),b.kc("user",e.data.user)}}function gi(e,t){1&e&&b.Ob(0,"hr",18)}function vi(e,t){if(1&e&&b.Ob(0,"avatar",19),2&e){const e=b.dc().$implicit;b.kc("size",64)("image",e.identityProvider.image)}}function ki(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.ec(2,"dateTime"),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.zb(1),b.Jc(" ",t.i18n.identityProvider.connectedOn(b.fc(2,1,e.linkDate))," ")}}function yi(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc(4);b.zb(1),b.Jc(" ",e.i18n.identityProvider.disconnected," ")}}function Si(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.name," ")}}function Ti(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.email," ")}}const Ii=function(e){return{"mb-3":e}};function Fi(e,t){if(1&e&&(b.Tb(0,"button",20),b.bc("click",(function(){return t.$implicit.onClick()})),b.Hc(1),b.Sb()),2&e){const e=t.$implicit;b.kc("ngClass",b.nc(2,Ii,!t.last)),b.zb(1),b.Jc(" ",e.label," ")}}const zi=function(e){return{"mt-0":e}};function Oi(e,t){if(1&e&&(b.Rb(0),b.Fc(1,gi,1,0,"hr",9),b.Tb(2,"div",10),b.Tb(3,"div",11),b.Fc(4,vi,1,2,"avatar",12),b.ec(5,"async"),b.Sb(),b.Tb(6,"div",13),b.Tb(7,"h2",14),b.Hc(8),b.Sb(),b.Tb(9,"div",15),b.Fc(10,ki,3,3,"div",5),b.Fc(11,yi,2,1,"div",5),b.Fc(12,Si,2,1,"div",5),b.Fc(13,Ti,2,1,"div",5),b.Sb(),b.Sb(),b.Tb(14,"div",16),b.Fc(15,Fi,2,4,"button",17),b.Sb(),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=t.first,n=b.dc(3);b.zb(1),b.kc("ngIf",!i),b.zb(3),b.kc("ngIf",b.fc(5,9,n.layout.gtxxs$)),b.zb(3),b.kc("ngClass",b.nc(11,zi,i)),b.zb(1),b.Jc(" ",e.identityProvider.name,""),b.zb(2),b.kc("ngIf",e.linkDate),b.zb(1),b.kc("ngIf","linked"!==e.status),b.zb(1),b.kc("ngIf",e.name),b.zb(1),b.kc("ngIf",e.email),b.zb(2),b.kc("ngForOf",n.actions(e))}}function Ai(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Oi,16,13,"ng-container",8),b.Qb()),2&e){const e=b.dc(2);b.zb(1),b.kc("ngForOf",e.data.identityProviders)}}function Ci(e,t){if(1&e&&(b.Tb(0,"page-content",4),b.Fc(1,hi,3,1,"ng-container",5),b.Fc(2,Ai,2,1,"ng-container",6),b.Sb()),2&e){const e=b.dc(),t=b.uc(6);b.kc("heading",e.title)("mobileHeading",e.mobileTitle),b.zb(1),b.kc("ngIf",e.data.user&&!e.self),b.zb(1),b.kc("ngIf",e.data.identityProviders.length>0)("ngIfElse",t)}}function wi(e,t){if(1&e&&b.Hc(0),2&e){const e=b.dc();b.Jc(" ",e.i18n.identityProvider.noResults,"\n")}}let Ei=(()=>{class e extends ze.a{constructor(e,t){super(e),this.identityProvidersService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.identityProvidersService.getUserIdentityProvidersListData({user:this.param}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user),this.title=this.self?this.i18n.identityProvider.title.manageSelf:this.i18n.identityProvider.title.manageUser,this.mobileTitle=this.self?this.i18n.identityProvider.mobileTitle.manageSelf:this.i18n.identityProvider.mobileTitle.manageUser}actions(e){const t=[];return e.status!==Fe.yb.LINKED&&this.data.canLink&&t.push(new G.a(this.i18n.identityProvider.action.connect,()=>{this.connect(e)})),e.status===Fe.yb.LINKED&&this.data.canEdit&&t.push(new G.a(this.i18n.identityProvider.action.disconnect,()=>{this.disconnect(e)})),t}connect(e){this.addSub(this.authHelper.identityProviderPopup(e.identityProvider,"link").subscribe(e=>{this.notification.snackBar(this.i18n.identityProvider.action.connectDone({name:e.name,provider:e.identityProvider.name})),this.reload()}))}disconnect(e){this.notification.confirm({title:this.i18n.identityProvider.action.disconnect,message:this.i18n.identityProvider.action.disconnectConfirm(e.identityProvider.name),callback:()=>this.doDisconnect(e)})}doDisconnect(e){const t=e.identityProvider;this.addSub(this.identityProvidersService.deleteUserIdentityProvider({user:this.param,identityProvider:t.internalName,disable:!0}).subscribe(()=>{this.notification.info(this.i18n.identityProvider.action.disconnectDone(t.name)),this.reload()}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.IDENTITY_PROVIDERS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.o))},e.\u0275cmp=b.Hb({type:e,selectors:[["user-identity-providers"]],features:[b.wb],decls:7,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["noResults",""],[3,"heading","mobileHeading"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["labelCols","2",3,"user"],[4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"row","no-gutters"],[1,"col-4","col-xs-3","col-md-2"],["class","ml-2 mr-5 management-icon","iconSize","64px","icon","perm_identity",3,"size","image",4,"ngIf"],[1,"col-8","col-xs-9","col-md-7"],[1,"border-0","mb-3",3,"ngClass"],[1,"mt-2"],[1,"col-12","col-md-3","mt-3","mt-md-0"],["class","d-block ml-auto btn btn-primary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],["iconSize","64px","icon","perm_identity",1,"ml-2","mr-5","management-icon",3,"size","image"],[1,"d-block","ml-auto","btn","btn-primary",3,"ngClass","click"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,pi,1,0,"ng-container",1),b.Sb(),b.Fc(3,Ci,3,5,"ng-template",null,2,b.Gc),b.Fc(5,wi,1,1,"ng-template",null,3,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,y.a,p.s,p.q,ve.a],pipes:[p.b,z.a],encapsulation:2,changeDetection:0}),e})();var Ni=i("C2xC"),Ri=i("iXUt");function Di(e,t){if(1&e&&b.Ob(0,"boolean-field",9),2&e){const e=b.dc(2);b.kc("label",e.i18n.notificationSettings.forwardMessages)("disabled",!e.data.editable)}}const Pi=function(e){return{"border-top-0":e}};function Hi(e,t){if(1&e&&(b.Tb(0,"h2",13),b.Hc(1),b.Sb()),2&e){const e=b.dc(4);b.kc("ngClass",b.nc(2,Pi,!e.data.forwardMessagesAllowed)),b.zb(1),b.Jc(" ",e.i18n.notificationSettings.payments,"")}}function xi(e,t){if(1&e&&(b.Tb(0,"h3",14),b.Hc(1),b.Sb()),2&e){const e=b.dc(2).$implicit;b.zb(1),b.Jc(" ",e.name," ")}}function _i(e,t){1&e&&b.Pb(0)}const Li=function(e){return{$implicit:e}};function Mi(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Hi,2,4,"h2",10),b.Rb(2,4),b.Fc(3,xi,2,1,"h3",11),b.Fc(4,_i,1,0,"ng-container",12),b.Qb(),b.Qb()),2&e){const e=t.ngIf,i=b.dc(),n=i.first,a=i.$implicit,s=b.dc(2),o=b.uc(4);b.zb(1),b.kc("ngIf",n),b.zb(1),b.kc("formGroup",e),b.zb(1),b.kc("ngIf",!s.singleAccount),b.zb(1),b.kc("ngTemplateOutlet",o)("ngTemplateOutletContext",b.nc(5,Li,a))}}function Ui(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Mi,5,7,"ng-container",1),b.Qb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(1),b.kc("ngIf",i.form.get("userAccounts").get(e.id))}}function $i(e,t){if(1&e&&b.Ob(0,"field-option",17),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",i.ApiHelper.internalNameOrId(e))("id",e.id)("internalName",e.internalName)("text",e.name)}}function Gi(e,t){if(1&e&&(b.Tb(0,"multi-selection-field",15),b.Fc(1,$i,1,4,"field-option",16),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.notificationSettings.forwardMessages),b.zb(1),b.kc("ngForOf",e.data.messageCategories)}}const Bi=function(e){return{"section-title-action":e}},Ji=function(e,t){return{"mr-3":e,"mb-2":t}};function Vi(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",13),b.ec(1,"async"),b.Tb(2,"button",21),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(2).enableNotifications(t,!0)})),b.ec(3,"async"),b.ec(4,"async"),b.Hc(5),b.Sb(),b.Tb(6,"button",22),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(2).enableNotifications(t,!1)})),b.Hc(7),b.Sb(),b.Sb()}if(2&e){const e=b.dc(4);b.kc("ngClass",b.nc(10,Bi,b.fc(1,4,e.layout.gtsm$))),b.zb(2),b.kc("ngClass",b.oc(12,Ji,!b.fc(3,6,e.layout.ltxs$),b.fc(4,8,e.layout.ltxs$))),b.zb(3),b.Jc(" ",e.i18n.notificationSettings.enableAll," "),b.zb(2),b.Jc(" ",e.i18n.notificationSettings.disableAll," ")}}function qi(e,t){if(1&e&&(b.Tb(0,"h2",19),b.Tb(1,"div",20),b.Hc(2),b.Sb(),b.Fc(3,Vi,8,15,"div",10),b.Sb()),2&e){const e=b.dc(),t=e.first,i=e.$implicit,n=b.dc(2);b.kc("ngClass",b.nc(3,Pi,t&&0===n.data.userAccounts.length&&0===n.data.messageCategories.length&&!n.data.forwardMessagesAllowed)),b.zb(2),b.Jc(" ",i," "),b.zb(1),b.kc("ngIf",!n.adminSettings&&n.notificationSections.get(i).length>3&&n.data.editable)}}function ji(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"label-value",23),b.Ob(2,"notification-type-setting",24),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(1),b.kc("label",i.resolveNotificationLabel(e)),b.zb(1),b.kc("setting",e)("options",i.kindFieldOptionsMap.get(e.kind))("form",i.resolveControl(e.kind))("multiSelectionControl",i.kindControlsMap.get(e.kind))("disabled",!i.data.editable)}}function Qi(e,t){if(1&e&&(b.Rb(0),b.Fc(1,qi,4,5,"h2",18),b.Fc(2,ji,3,6,"ng-container",6),b.Qb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(1),b.kc("ngIf",""!==e),b.zb(1),b.kc("ngForOf",i.notificationSections.get(e))}}const Yi=function(e,t){return{count:e,total:t}};function Ki(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2"),b.Hc(2),b.Sb(),b.Tb(3,"label"),b.Hc(4),b.Sb(),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Ic(e.i18n.general.sendMedium.sms),b.zb(2),b.Ic(e.i18n.notificationSettings.smsCount(b.oc(2,Yi,e.data.smsCountThisMonth,e.data.maxSmsPerMonth)))}}function Xi(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",25),b.bc("click",(function(){return b.wc(e),b.dc(2).save()})),b.ec(1,"async"),b.Hc(2),b.Sb()}if(2&e){const e=b.dc(2);b.kc("disabled",b.fc(1,2,e.requesting$)),b.zb(2),b.Jc(" ",e.i18n.general.save," ")}}function Wi(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",3),b.Tb(2,"form",4),b.Fc(3,Di,1,2,"boolean-field",5),b.Fc(4,Ui,2,1,"ng-container",6),b.Fc(5,Gi,2,2,"multi-selection-field",7),b.Fc(6,Qi,3,2,"ng-container",6),b.Fc(7,Ki,5,5,"ng-container",1),b.Sb(),b.Tb(8,"actions"),b.Fc(9,Xi,3,4,"button",8),b.Sb(),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.notificationSettings.title)("mobileHeading",e.i18n.notificationSettings.mobileTitle),b.zb(1),b.kc("formGroup",e.form),b.zb(1),b.kc("ngIf",e.data.forwardMessagesAllowed),b.zb(1),b.kc("ngForOf",e.data.userAccounts),b.zb(1),b.kc("ngIf",e.data.messageCategories.length>0),b.zb(1),b.kc("ngForOf",e.notificationSections.keys()),b.zb(1),b.kc("ngIf",e.data.smsAllowed),b.zb(2),b.kc("ngIf",e.data.editable)}}function Zi(e,t){if(1&e&&(b.Rb(0,4),b.Ob(1,"decimal-field",26),b.Ob(2,"decimal-field",27),b.Qb()),2&e){const e=t.$implicit,i=b.dc();b.kc("formGroup",i.form.get("userAccounts").get(e.id).get("paymentAmount")),b.zb(1),b.kc("label",i.i18n.notificationSettings.paymentNotificationsAbove)("scale",e.currency.decimalDigits)("prefix",e.currency.prefix)("suffix",e.currency.suffix)("disabled",!i.data.editable)("emptyLabel",i.i18n.general.notSet),b.zb(1),b.kc("label",i.i18n.notificationSettings.paymentNotificationsBelow)("scale",e.currency.decimalDigits)("prefix",e.currency.prefix)("suffix",e.currency.suffix)("disabled",!i.data.editable)("emptyLabel",i.i18n.general.notSet)}}let en=(()=>{class e extends ze.a{constructor(e,t){super(e),this.notificationSettingsService=t,this.notificationSections=new Map,this.kindControlsMap=new Map,this.kindFieldOptionsMap=new Map}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.addSub(this.notificationSettingsService.getNotificationSettingsDataForEdit({user:this.user}).subscribe(e=>this.data=e))}onDataInitialized(e){if(this.adminSettings=e.role===Fe.eb.ADMINISTRATOR,this.form=this.formBuilder.group({version:e.settings.version}),this.adminSettings){if(!this.hasSettings(e))return void this.notification.info(this.i18n.notificationSettings.notAvailableSettings);this.notificationSections.set("",e.settings.notifications),this.form.addControl("forwardMessageCategories",this.formBuilder.control(e.settings.forwardMessageCategories))}e.forwardMessagesAllowed&&this.form.setControl("forwardMessages",this.formBuilder.control(e.settings.forwardMessages));const t=[],i=this.formBuilder.array([]);for(const n of e.settings.notifications){const e=this.formBuilder.group({internal:n.internal,kind:n.kind,sms:void 0===n.sms?null:n.sms,email:void 0===n.email?null:n.email});if(this.addSub(e.controls.internal.valueChanges.subscribe(()=>{this.updateControls(e)})),this.updateControls(e),i.push(e),t.push(n.kind),!this.adminSettings){const e=this.resolveSection(n.kind),t=this.notificationSections.get(e);t?t.push(n):this.notificationSections.set(e,[n])}}if(t.length>0)for(const n of t){let t,i,a;[t,i,a]=this.resolveOptions(n,e);const s=this.formBuilder.control(i);this.kindControlsMap.set(n,s),this.form.setControl(a,s),this.kindFieldOptionsMap.set(n,t)}if(this.form.setControl("notifications",i),!Object(B.h)(e.userAccounts)){this.singleAccount=1===e.userAccounts.length;const t=this.formBuilder.group({});for(const i of e.userAccounts){const n=(e.settings.userAccounts[this.ApiHelper.internalNameOrId(i)]||{}).paymentAmount||{};t.setControl(i.id,this.formBuilder.group({paymentAmount:this.formBuilder.group({min:n.min,max:n.max})}))}this.form.setControl("userAccounts",t)}}updateControls(e){e.controls.internal.value?(e.controls.sms&&e.controls.sms.enable(),e.controls.email&&e.controls.email.enable()):(e.controls.sms&&e.controls.sms.disable(),e.controls.email&&e.controls.email.disable())}save(){const e=this.notificationSettingsService.saveNotificationSettings({user:this.user,body:this.form.value});this.addSub(e.subscribe(()=>{this.reload(),this.notification.snackBar(this.i18n.notificationSettings.saved)}))}hasSettings(e){return!(Object(B.h)(e.settings.notifications)||this.adminSettings&&Object(B.h)(e.messageCategories))}resolveSection(e){return e.startsWith("account")?this.i18n.notificationSettings.accounts:e.startsWith("personal")?this.i18n.notificationSettings.personal:e.startsWith("buyer")?this.i18n.notificationSettings.marketplaceAsBuyer:e.startsWith("seller")?this.i18n.notificationSettings.marketplaceAsSeller:e.startsWith("reference")||e.startsWith("feedback")?this.i18n.notificationSettings.feedbackAndReferences:""}resolveMenu(){return this.adminSettings||this.user===this.ApiHelper.SELF?d.b.NOTIFICATIONS_SETTINGS:this.authHelper.searchUsersMenu()}resolveControl(e){const t=this.form.controls.notifications.controls;for(const i of t){const t=i;if(t.controls.kind.value===e)return t}return null}enableNotifications(e,t){for(const i of this.notificationSections.get(e))this.resolveControl(i.kind).controls.internal.setValue(t)}resolveNotificationLabel(e){switch(e.kind){case Fe.J.ADMIN_AD_PENDING_AUTHORIZATION:return this.i18n.notification.admin.adPendingAuthorization;case Fe.J.ADMIN_APPLICATION_ERROR:return this.i18n.notification.admin.applicationErrors;case Fe.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.admin.externalPaymentExpired;case Fe.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.admin.externalPaymentPerformedFailed;case Fe.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.generatedVouchersAboutToExpire;case Fe.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:return this.i18n.notification.admin.generatedVouchersExpired;case Fe.J.ADMIN_NETWORK_CREATED:return this.i18n.notification.admin.networkCreated;case Fe.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.admin.paymentAwaitingAuthorization;case Fe.J.ADMIN_PAYMENT_PERFORMED:return this.i18n.notification.admin.paymentPerformed;case Fe.J.ADMIN_SYSTEM_ALERT:return this.i18n.notification.admin.systemAlert;case Fe.J.ADMIN_USER_ALERT:return this.i18n.notification.admin.userAlert;case Fe.J.ADMIN_USER_IMPORT_REGISTRATION:return"";case Fe.J.ADMIN_USER_REGISTRATION:return this.i18n.notification.admin.userRegistration;case Fe.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:return this.i18n.notification.admin.voucherBuyingAboutToExpire;case Fe.J.ACCOUNT_ALL_NON_SMS_PERFORMED_PAYMENTS:return this.i18n.notification.user.account.allNonSmsPerformedPayments;case Fe.J.ACCOUNT_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.authorizedPaymentCanceled;case Fe.J.ACCOUNT_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.authorizedPaymentDenied;case Fe.J.ACCOUNT_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.authorizedPaymentExpired;case Fe.J.ACCOUNT_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.authorizedPaymentSucceeded;case Fe.J.ACCOUNT_BOUGHT_VOUCHERS_ABOUT_TO_EXPIRE:return this.i18n.notification.user.account.boughtVouchersAboutToExpire;case Fe.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.boughtVouchersExpirationDateChanged;case Fe.J.ACCOUNT_BOUGHT_VOUCHERS_EXPIRED:return this.i18n.notification.user.account.boughtVouchersExpired;case Fe.J.ACCOUNT_EXTERNAL_PAYMENT_EXPIRED:return this.i18n.notification.user.account.externalPaymentExpired;case Fe.J.ACCOUNT_EXTERNAL_PAYMENT_PERFORMED_FAILED:return this.i18n.notification.user.account.externalPaymentPerformedFailed;case Fe.J.ACCOUNT_EXTERNAL_PAYMENT_RECEIVED_FAILED:return this.i18n.notification.user.account.externalPaymentReceivedFailed;case Fe.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingRecurringPaymentCanceled;case Fe.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingRecurringPaymentFailed;case Fe.J.ACCOUNT_INCOMING_RECURRING_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingRecurringPaymentReceived;case Fe.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_CANCELED:return this.i18n.notification.user.account.incomingScheduledPaymentCanceled;case Fe.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.incomingScheduledPaymentFailed;case Fe.J.ACCOUNT_INCOMING_SCHEDULED_PAYMENT_RECEIVED:return this.i18n.notification.user.account.incomingScheduledPaymentReceived;case Fe.J.ACCOUNT_LIMIT_CHANGE:return this.i18n.notification.user.account.limitChange;case Fe.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_APPROVED_STILL_PENDING:return this.i18n.notification.user.account.operator.authorizedPaymentApprovedStillPending;case Fe.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_CANCELED:return this.i18n.notification.user.account.operator.authorizedPaymentCanceled;case Fe.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_DENIED:return this.i18n.notification.user.account.operator.authorizedPaymentDenied;case Fe.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_EXPIRED:return this.i18n.notification.user.account.operator.authorizedPaymentExpired;case Fe.J.ACCOUNT_OPERATOR_AUTHORIZED_PAYMENT_SUCCEEDED:return this.i18n.notification.user.account.operator.authorizedPaymentSucceeded;case Fe.J.ACCOUNT_OPERATOR_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.operator.paymentAwaitingAuthorization;case Fe.J.ACCOUNT_PAYMENT_AWAITING_AUTHORIZATION:return this.i18n.notification.user.account.paymentAwaitingAuthorization;case Fe.J.ACCOUNT_PAYMENT_RECEIVED:return this.i18n.notification.user.account.paymentReceived;case Fe.J.ACCOUNT_PAYMENT_REQUEST_CANCELED:return this.i18n.notification.user.account.paymentRequestCanceled;case Fe.J.ACCOUNT_PAYMENT_REQUEST_DENIED:return this.i18n.notification.user.account.paymentRequestDenied;case Fe.J.ACCOUNT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.paymentRequestExpirationDateChanged;case Fe.J.ACCOUNT_PAYMENT_REQUEST_EXPIRED:return this.i18n.notification.user.account.paymentRequestExpired;case Fe.J.ACCOUNT_PAYMENT_REQUEST_PROCESSED:return this.i18n.notification.user.account.paymentRequestProcessed;case Fe.J.ACCOUNT_PAYMENT_REQUEST_RECEIVED:return this.i18n.notification.user.account.paymentRequestReceived;case Fe.J.ACCOUNT_RECURRING_PAYMENT_FAILED:return this.i18n.notification.user.account.recurringPaymentFailed;case Fe.J.ACCOUNT_RECURRING_PAYMENT_OCCURRENCE_PROCESSED:return this.i18n.notification.user.account.recurringPaymentOcurrenceProcessed;case Fe.J.ACCOUNT_SCHEDULED_PAYMENT_FAILED:return this.i18n.notification.user.account.scheduledPaymentFailed;case Fe.J.ACCOUNT_SCHEDULED_PAYMENT_INSTALLMENT_PROCESSED:return this.i18n.notification.user.account.scheduledPaymentInstallmentProcessed;case Fe.J.ACCOUNT_SCHEDULED_PAYMENT_REQUEST_FAILED:return this.i18n.notification.user.account.scheduledPaymentRequestFailed;case Fe.J.ACCOUNT_SENT_PAYMENT_REQUEST_EXPIRATION_DATE_CHANGED:return this.i18n.notification.user.account.sentPaymentRequestExpirationDateChanged;case Fe.J.ACCOUNT_SMS_PERFORMED_PAYMENT:return this.i18n.notification.user.account.smsPerformedPayment;case Fe.J.ACCOUNT_TICKET_WEBHOOK_FAILED:return this.i18n.notification.user.account.ticketWebhookFailed;case Fe.J.BROKERING_AD_PENDING_AUTHORIZATION:return this.i18n.notification.user.brokering.adPendingAuthorization;case Fe.J.BROKERING_MEMBER_ASSIGNED:return this.i18n.notification.user.brokering.memberAssigned;case Fe.J.BROKERING_MEMBER_UNASSIGNED:return this.i18n.notification.user.brokering.memberUnassigned;case Fe.J.BUYER_AD_INTEREST_NOTIFICATION:return this.i18n.notification.user.buyer.adInterestNotification;case Fe.J.BUYER_AD_QUESTION_ANSWERED:return this.i18n.notification.user.buyer.adQuestionAnswered;case Fe.J.BUYER_ORDER_CANCELED:return this.i18n.notification.user.buyer.orderCanceled;case Fe.J.BUYER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.buyer.orderPaymentCanceled;case Fe.J.BUYER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.buyer.orderPaymentDenied;case Fe.J.BUYER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.buyer.orderPaymentExpired;case Fe.J.BUYER_ORDER_PENDING:return this.i18n.notification.user.buyer.orderPending;case Fe.J.BUYER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.buyer.orderPendingAuthorization;case Fe.J.BUYER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.buyer.orderPendingDeliveryData;case Fe.J.BUYER_ORDER_PROCESSED_BY_SELLER:return this.i18n.notification.user.buyer.orderProcessedBySeller;case Fe.J.BUYER_ORDER_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.orderRejectedBySeller;case Fe.J.BUYER_SALE_PENDING:return this.i18n.notification.user.buyer.buyerSalePending;case Fe.J.BUYER_SALE_REJECTED_BY_SELLER:return this.i18n.notification.user.buyer.buyerSaleRejectedBySeller;case Fe.J.FEEDBACK_CHANGED:return this.i18n.notification.user.feedback.changed;case Fe.J.FEEDBACK_CREATED:return this.i18n.notification.user.feedback.created;case Fe.J.FEEDBACK_EXPIRATION_REMINDER:return this.i18n.notification.user.feedback.expirationReminder;case Fe.J.FEEDBACK_OPTIONAL:return this.i18n.notification.user.feedback.optional;case Fe.J.FEEDBACK_REPLY_CREATED:return this.i18n.notification.user.feedback.replyCreated;case Fe.J.FEEDBACK_REQUIRED:return this.i18n.notification.user.feedback.required;case Fe.J.PERSONAL_BROKER_ASSIGNED:return this.i18n.notification.user.personal.brokerAssigned;case Fe.J.PERSONAL_BROKER_UNASSIGNED:return this.i18n.notification.user.personal.brokerUnassigned;case Fe.J.PERSONAL_MAX_SMS_PER_MONTH_REACHED:return this.i18n.notification.user.personal.maxSmsPerMonthReached;case Fe.J.PERSONAL_NEW_TOKEN:return this.i18n.notification.user.personal.newToken;case Fe.J.PERSONAL_NEW_TOKEN_PENDING_ACTIVATION:return this.i18n.notification.user.personal.newTokenPendingActivation;case Fe.J.PERSONAL_PASSWORD_STATUS_CHANGED:return this.i18n.notification.user.personal.passwordStatusChanged;case Fe.J.PERSONAL_TOKEN_STATUS_CHANGED:return this.i18n.notification.user.personal.tokenStatusChanged;case Fe.J.PERSONAL_USER_STATUS_CHANGED:return this.i18n.notification.user.personal.userStatusChanged;case Fe.J.REFERENCE_CHANGED:return this.i18n.notification.user.reference.changed;case Fe.J.REFERENCE_CREATED:return this.i18n.notification.user.reference.created;case Fe.J.SELLER_AD_AUTHORIZED:return this.i18n.notification.user.seller.adAuthorized;case Fe.J.SELLER_AD_EXPIRED:return this.i18n.notification.user.seller.adExpired;case Fe.J.SELLER_AD_LOW_STOCK:return this.i18n.notification.user.seller.adLowStock;case Fe.J.SELLER_AD_OUT_OF_STOCK:return this.i18n.notification.user.seller.adOutOfStock;case Fe.J.SELLER_AD_QUESTION_CREATED:return this.i18n.notification.user.seller.adQuestionCreated;case Fe.J.SELLER_AD_REJECTED:return this.i18n.notification.user.seller.adRejected;case Fe.J.SELLER_ORDER_CANCELED:return this.i18n.notification.user.seller.orderCanceled;case Fe.J.SELLER_ORDER_CREATED:return this.i18n.notification.user.seller.orderCreated;case Fe.J.SELLER_ORDER_PAYMENT_CANCELED:return this.i18n.notification.user.seller.orderPaymentCanceled;case Fe.J.SELLER_ORDER_PAYMENT_DENIED:return this.i18n.notification.user.seller.orderPaymentDenied;case Fe.J.SELLER_ORDER_PAYMENT_EXPIRED:return this.i18n.notification.user.seller.orderPaymentExpired;case Fe.J.SELLER_ORDER_PENDING_AUTHORIZATION:return this.i18n.notification.user.seller.orderPendingAuthorization;case Fe.J.SELLER_ORDER_PENDING_DELIVERY_DATA:return this.i18n.notification.user.seller.orderPendingDeliveryData;case Fe.J.SELLER_ORDER_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.orderProcessedByBuyer;case Fe.J.SELLER_ORDER_REJECTED_BY_BUYER:return this.i18n.notification.user.seller.orderRejectedByBuyer;case Fe.J.SELLER_SALE_PROCESSED_BY_BUYER:return this.i18n.notification.user.seller.saleProcessedByBuyer}return""}resolveOptions(e,t){let i,n,a,s,o;switch(e){case Fe.J.ADMIN_EXTERNAL_PAYMENT_EXPIRED:i=t.externalPayments,n=t.settings.externalPaymentsExpired,s="externalPaymentsExpired";break;case Fe.J.ADMIN_EXTERNAL_PAYMENT_PERFORMED_FAILED:i=t.externalPayments,n=t.settings.externalPaymentsFailed,s="externalPaymentsFailed";break;case Fe.J.ADMIN_GENERATED_VOUCHERS_ABOUT_TO_EXPIRE:case Fe.J.ADMIN_GENERATED_VOUCHERS_EXPIRED:i=t.voucherConfigurations,n=t.settings.voucherConfigurations,s="voucherConfigurations";break;case Fe.J.ADMIN_VOUCHER_BUYING_ABOUT_TO_EXPIRE:i=t.voucherConfigurations,n=t.settings.voucherConfigurationsBuying,s="voucherConfigurationsBuying";break;case Fe.J.ADMIN_PAYMENT_AWAITING_AUTHORIZATION:i=t.authorizablePayments,n=t.settings.authorizablePayments,s="authorizablePayments";break;case Fe.J.ADMIN_PAYMENT_PERFORMED:i=t.payments,n=t.settings.payments,s="payments";break;case Fe.J.ADMIN_USER_REGISTRATION:i=t.userGroups,n=t.settings.userGroups,s="userGroups";break;case Fe.J.ADMIN_SYSTEM_ALERT:a=Object.values(Fe.lb),n=t.settings.systemAlerts,s="systemAlert";break;case Fe.J.ADMIN_USER_ALERT:a=Object.values(Fe.xb),n=t.settings.userAlerts,s="userAlert"}return i?o=i.map(e=>({id:e.id,internalName:e.internalName,value:this.ApiHelper.internalNameOrId(e),text:e.name})):a&&(o=a.map(e=>({value:e,text:this.resolveAlertLabel(e)}))),[o,n,s]}resolveAlertLabel(e){switch(e){case Fe.lb.ACCOUNT_FEE_CHARGED_NO_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedNoFailures;case Fe.lb.ACCOUNT_FEE_CHARGED_WITH_FAILURES:return this.i18n.systemAlert.type.accountFeeChargedWithFailures;case Fe.lb.APPLICATION_RESTARTED:return this.i18n.systemAlert.type.applicationRestarted;case Fe.lb.CUSTOM:return this.i18n.systemAlert.type.custom;case Fe.lb.MAX_GLOBAL_SMS_REACHED:return this.i18n.systemAlert.type.maxGlobalSmsReached;case Fe.lb.MAX_INCORRECT_LOGIN_ATTEMPTS:return this.i18n.systemAlert.type.maxIncorrectLoginAttempts;case Fe.xb.CUSTOM:return this.i18n.userAlert.type.custom;case Fe.xb.GIVEN_VERY_BAD_REFS:return this.i18n.userAlert.type.givenVeryBadRefs;case Fe.xb.INSUFFICIENT_BALANCE_FOR_INITIAL_CREDIT:return this.i18n.userAlert.type.insufficientBalanceForInitialCredit;case Fe.xb.MAX_DEVICE_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceActivationAttemptsReached;case Fe.xb.MAX_DEVICE_CONFIRMATION_CHECK_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxDeviceConfirmationCheckAttemptsReached;case Fe.xb.MAX_TOKEN_ACTIVATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxTokenActivationAttemptsReached;case Fe.xb.MAX_USER_LOCALIZATION_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxUserLocalizationAttemptsReached;case Fe.xb.MAX_VOUCHER_REDEEM_ATTEMPTS_REACHED:return this.i18n.userAlert.type.maxVoucherRedeemAttemptsReached;case Fe.xb.MOVE_USER_AUTOMATICALLY_FAILED:return this.i18n.userAlert.type.moveUserAutomaticallyFailed;case Fe.xb.PASSWORD_DISABLED_BY_TRIES:return this.i18n.userAlert.type.passwordDisabledByTries;case Fe.xb.PASSWORD_TEMPORARILY_BLOCKED:return this.i18n.userAlert.type.passwordTemporarilyBlocked;case Fe.xb.RECEIVED_VERY_BAD_REFS:return this.i18n.userAlert.type.receivedVeryBadRefs;case Fe.xb.SCHEDULED_PAYMENT_FAILED:return this.i18n.userAlert.type.scheduledPaymentFailed}return""}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.s))},e.\u0275cmp=b.Hb({type:e,selectors:[["notification-settings-form"]],features:[b.wb],decls:5,vars:4,consts:[[3,"ready"],[4,"ngIf"],["accountDetails",""],[3,"heading","mobileHeading"],[3,"formGroup"],["formControlName","forwardMessages",3,"label","disabled",4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","forwardMessageCategories",3,"label",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["formControlName","forwardMessages",3,"label","disabled"],[3,"ngClass",4,"ngIf"],["class","mt-3 mb-0",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"mt-3","mb-0"],["formControlName","forwardMessageCategories",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["class","d-flex flex-column flex-xs-row justify-content-between",3,"ngClass",4,"ngIf"],[1,"d-flex","flex-column","flex-xs-row","justify-content-between",3,"ngClass"],[1,"mb-2","mb-xs-0"],[1,"btn","btn-outline-primary",3,"ngClass","click"],[1,"btn","btn-outline-primary",3,"click"],["kind","field",3,"label"],[3,"setting","options","form","multiSelectionControl","disabled"],[1,"btn","btn-primary",3,"disabled","click"],["formControlName","min",3,"label","scale","prefix","suffix","disabled","emptyLabel"],["formControlName","max",3,"label","scale","prefix","suffix","disabled","emptyLabel"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Wi,10,9,"ng-container",1),b.Sb(),b.Fc(3,Zi,3,13,"ng-template",null,2,b.Gc)),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,p.s,j.a,Oe.a,V.v,V.l,p.A,p.q,Ke.a,he.a,q.a,Ni.a,Ri.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function tn(e,t){if(1&e&&(b.Tb(0,"div",7),b.Tb(1,"label-value",8),b.Ob(2,"user-link",9),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.data.user)}}function nn(e,t){if(1&e&&(b.Tb(0,"mobile-result"),b.Tb(1,"div",10),b.Hc(2),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.zb(2),b.Ic(e.name)}}function an(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"tr",13),b.bc("click",(function(){b.wc(e);const i=t.$implicit,n=b.dc(3);return n.router.navigate(n.path(i))})),b.Tb(2,"td"),b.Tb(3,"a",14),b.Hc(4),b.Sb(),b.Sb(),b.Tb(5,"td",15),b.Tb(6,"button",16),b.bc("click",(function(i){b.wc(e);const n=t.$implicit;return b.dc(3).remove(n),i.stopPropagation()})),b.Ob(7,"icon",17),b.Sb(),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(3),b.kc("routerLink",i.path(e)),b.zb(1),b.Jc(" ",e.name," "),b.zb(2),b.kc("tooltip",i.i18n.general.removeTooltip(e.name))}}function sn(e,t){if(1&e&&(b.Tb(0,"table",11),b.Tb(1,"tbody"),b.Fc(2,an,8,3,"ng-container",12),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(2),b.kc("ngForOf",e.data.operatorGroups)}}function on(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",2),b.ec(2,"async"),b.Fc(3,tn,3,2,"div",3),b.Sb(),b.Tb(4,"results-layout",4),b.Fc(5,nn,3,1,"mobile-result",5),b.Fc(6,sn,3,1,"table",6),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("mode",e.self?"empty":"filters")("heading",e.i18n.operatorGroup.title.list)("mobileHeading",e.i18n.operatorGroup.mobileTitle.list)("headingActions",b.fc(2,7,e.headingActions$)),b.zb(2),b.kc("ngIf",!e.self),b.zb(1),b.kc("results",e.data.operatorGroups)("toLink",e.toLink)}}let rn=(()=>{class e extends ze.a{constructor(e,t){super(e),this.operatorGroupsService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorGroupsService.getUserOperatorGroupsListData({user:this.param}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.groups=e.operatorGroups,e.canCreate&&(this.headingActions=[new G.c("add",this.i18n.general.addNew,()=>{this.router.navigate(["/users",this.param,"operator-groups","new"])},!0)])}path(e){return["/users","operator-groups",e.id]}get toLink(){return e=>this.path(e)}remove(e){this.notification.confirm({message:this.i18n.general.removeConfirm(e.name),callback:()=>this.doRemove(e)})}doRemove(e){this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:e.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(e.name)),this.reload()}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.OPERATOR_GROUPS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.v))},e.\u0275cmp=b.Hb({type:e,selectors:[["list-operator-groups"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"mode","heading","mobileHeading","headingActions"],["class","col-12 col-md-6",4,"ngIf"],[3,"results","toLink"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[1,"col-12","col-md-6"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],[1,"cell-main"],[1,"table","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"],[1,"actions"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","clear"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,on,7,9,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,g.a,v.a,k.a,q.a,dt.a,S.a,p.s,a.h,T.b,I.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var cn=i("vHbw");function ln(e,t){if(1&e&&(b.Tb(0,"label-value",16),b.Ob(1,"user-link",17),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.data.user)}}function un(e,t){1&e&&b.Pb(0)}function dn(e,t){if(1&e&&(b.Rb(0),b.Fc(1,un,1,0,"ng-container",19),b.Qb()),2&e){b.dc(3);const e=b.uc(6);b.zb(1),b.kc("ngTemplateOutlet",e)}}function bn(e,t){if(1&e&&(b.Tb(0,"h3",9),b.Hc(1),b.Sb()),2&e){const e=b.dc(2).$implicit;b.zb(1),b.Jc(" ",e.name," ")}}function fn(e,t){1&e&&b.Pb(0)}const mn=function(e){return{$implicit:e}};function pn(e,t){if(1&e&&(b.Rb(0),b.Fc(1,fn,1,0,"ng-container",22),b.Qb()),2&e){const e=b.dc(2).$implicit;b.dc(3);const t=b.uc(4);b.zb(1),b.kc("ngTemplateOutlet",t)("ngTemplateOutletContext",b.nc(2,mn,e))}}function hn(e,t){if(1&e&&(b.Rb(0),b.Rb(1,5),b.Fc(2,bn,2,1,"h3",20),b.Ob(3,"single-selection-field",21),b.Fc(4,pn,2,4,"ng-container",1),b.Qb(),b.Qb()),2&e){const e=t.ngIf,i=b.dc(4);b.zb(1),b.kc("formGroup",e),b.zb(1),b.kc("ngIf",!i.singleAccount),b.zb(1),b.kc("label",i.i18n.operatorGroup.accountAccess)("fieldOptions",i.accountAccessOptions),b.zb(1),b.kc("ngIf","none"!==e.value.access)}}function gn(e,t){if(1&e&&(b.Rb(0),b.Fc(1,hn,5,5,"ng-container",1),b.Qb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(1),b.kc("ngIf",i.form.get("accounts").get(e.id))}}function vn(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",9),b.Hc(2),b.ec(3,"async"),b.Sb(),b.Fc(4,dn,2,1,"ng-container",1),b.Fc(5,gn,2,1,"ng-container",18),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Jc("",b.fc(3,3,e.layout.ltsm$)?e.i18n.operatorGroup.mobileTitle.accountAccess:e.i18n.operatorGroup.title.accountAccess," "),b.zb(2),b.kc("ngIf",!e.singleAccount),b.zb(1),b.kc("ngForOf",e.data.accountTypes)}}function kn(e,t){if(1&e&&b.Ob(0,"boolean-field",23),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.notifications)}}function yn(e,t){if(1&e&&b.Ob(0,"boolean-field",24),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.viewAdvertisements)}}function Sn(e,t){if(1&e&&b.Ob(0,"field-option",27),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",i.ApiHelper.internalNameOrId(e))("id",e.id)("internalName",e.internalName)("text",e.name)}}function Tn(e,t){if(1&e&&(b.Tb(0,"multi-selection-field",25),b.Fc(1,Sn,1,4,"field-option",26),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.runOperations),b.zb(1),b.kc("ngForOf",e.data.operations)}}function In(e,t){if(1&e&&b.Ob(0,"boolean-field",28),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.brokering)}}function Fn(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"page-content",4),b.ec(2,"async"),b.Tb(3,"form",5),b.Fc(4,ln,2,2,"label-value",6),b.Ob(5,"input-field",7),b.Ob(6,"textarea-field",8),b.Fc(7,vn,6,5,"ng-container",1),b.Tb(8,"h2",9),b.Hc(9),b.ec(10,"async"),b.Sb(),b.Ob(11,"boolean-field",10),b.Fc(12,kn,1,1,"boolean-field",11),b.Fc(13,yn,1,1,"boolean-field",12),b.Fc(14,Tn,2,2,"multi-selection-field",13),b.Fc(15,In,1,1,"boolean-field",14),b.Sb(),b.Tb(16,"actions"),b.Tb(17,"button",15),b.bc("click",(function(){return b.wc(e),b.dc().save()})),b.ec(18,"async"),b.Hc(19),b.Sb(),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=b.dc();b.zb(1),b.kc("heading",e.create?e.i18n.operatorGroup.title.new:e.i18n.operatorGroup.title.edit)("mobileHeading",e.create?e.i18n.operatorGroup.mobileTitle.new:e.i18n.operatorGroup.mobileTitle.edit)("headingActions",b.fc(2,16,e.headingActions$)),b.zb(2),b.kc("formGroup",e.form),b.zb(1),b.kc("ngIf",!e.self),b.zb(1),b.kc("label",e.i18n.general.name),b.zb(1),b.kc("label",e.i18n.general.description),b.zb(1),b.kc("ngIf",(null==e.data.accountTypes?null:e.data.accountTypes.length)>0),b.zb(2),b.Jc("",b.fc(10,18,e.layout.ltsm$)?e.i18n.operatorGroup.mobileTitle.permissions:e.i18n.operatorGroup.title.permissions," "),b.zb(2),b.kc("label",e.i18n.operatorGroup.editOwnProfile),b.zb(1),b.kc("ngIf",e.data.canHaveNotifications),b.zb(1),b.kc("ngIf",e.data.canViewAdvertisements),b.zb(1),b.kc("ngIf",(null==e.data.operations?null:e.data.operations.length)>0),b.zb(1),b.kc("ngIf",e.data.broker),b.zb(2),b.kc("disabled",b.fc(18,20,e.requesting$)),b.zb(2),b.Jc(" ",e.i18n.general.save," ")}}function zn(e,t){1&e&&b.Pb(0)}function On(e,t){if(1&e&&(b.Rb(0),b.Fc(1,zn,1,0,"ng-container",19),b.Qb()),2&e){b.dc(2);const e=b.uc(6);b.zb(1),b.kc("ngTemplateOutlet",e)}}function An(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"hr",36),b.Tb(2,"h4",37),b.Hc(3),b.Sb(),b.Qb()),2&e){const e=b.dc().$implicit;b.zb(3),b.Ic(e.name)}}function Cn(e,t){if(1&e&&(b.Rb(0,5),b.Fc(1,An,4,1,"ng-container",1),b.Ob(2,"boolean-field",32),b.Ob(3,"boolean-field",33),b.Ob(4,"decimal-field",34),b.Ob(5,"boolean-field",35),b.Qb()),2&e){const e=t.$implicit,n=b.dc().$implicit,a=b.dc();var i;const s=(null==(i=a.paymentTypes(n))?null:i.length)>1;b.kc("formGroup",a.form.get("payments").get(e.id)),b.zb(1),b.kc("ngIf",s),b.zb(1),b.kc("label",a.i18n.operatorGroup.performPayments),b.zb(1),b.kc("label",a.i18n.operatorGroup.performPaymentsRequiresAuthorization),b.zb(1),b.kc("label",a.i18n.operatorGroup.performPaymentsMaxAmountPerDay)("scale",e.currency.decimalDigits)("prefix",e.currency.prefix)("suffix",e.currency.suffix),b.zb(1),b.kc("label",a.i18n.operatorGroup.authorizePayments)}}function wn(e,t){if(1&e&&(b.Rb(0,5),b.Ob(1,"decimal-field",29),b.Ob(2,"decimal-field",30),b.Qb(),b.Fc(3,On,2,1,"ng-container",1),b.Fc(4,Cn,6,9,"ng-container",31)),2&e){const e=t.$implicit,i=b.dc();b.kc("formGroup",i.form.get("accounts").get(e.id).get("notificationAmount")),b.zb(1),b.kc("label",i.i18n.operatorGroup.paymentNotificationsAbove)("scale",e.currency.decimalDigits)("prefix",e.currency.prefix)("suffix",e.currency.suffix),b.zb(1),b.kc("label",i.i18n.operatorGroup.paymentNotificationsBelow)("scale",e.currency.decimalDigits)("prefix",e.currency.prefix)("suffix",e.currency.suffix),b.zb(1),b.kc("ngIf",i.singleAccount),b.zb(1),b.kc("ngForOf",i.paymentTypes(e))}}function En(e,t){if(1&e&&b.Ob(0,"boolean-field",40),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.chargebackPayments)}}function Nn(e,t){if(1&e&&(b.Rb(0,5),b.Fc(1,En,1,1,"boolean-field",38),b.Ob(2,"multiple-users-field",39),b.Qb()),2&e){const e=b.dc();b.kc("formGroup",e.form),b.zb(1),b.kc("ngIf",e.data.canChargebackPayments),b.zb(1),b.kc("label",e.i18n.operatorGroup.restrictPaymentsToUsers)("preselectedUsers",e.restrictPaymentsToUsers)}}let Rn=(()=>{class e extends ze.a{constructor(e,t,i){super(e),this.userHelper=t,this.operatorGroupsService=i}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.user=this.route.snapshot.params.user,this.create=null!=this.user;const e=this.create?this.operatorGroupsService.getOperatorGroupDataForNew({user:this.user}):this.operatorGroupsService.getOperatorGroupDataForEdit({id:this.id});this.addSub(e.subscribe(e=>{this.data=e}));const t=Object(B.i)(Fe.P);this.accountAccessOptions=t.map(e=>({value:e,text:this.userHelper.operatorGroupAccountAccess(e)}))}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user);const t=e.operatorGroup;if(this.form=this.formBuilder.group({name:[t.name,V.G.required],description:t.description}),!Object(B.h)(e.accountTypes)){this.singleAccount=1===e.accountTypes.length;const i=this.formBuilder.group({});for(const n of e.accountTypes){const e=t.accounts[n.id]||t.accounts[n.internalName]||{},a=e.notificationAmount||{};i.setControl(n.id,this.formBuilder.group({access:[e.access||Fe.P.NONE,V.G.required],notificationAmount:this.formBuilder.group({min:a.min,max:a.max})}))}this.form.setControl("accounts",i)}if(!Object(B.h)(e.paymentTypes)){const i=this.formBuilder.group({});for(const n of e.paymentTypes){const e=t.payments[n.id]||t.payments[n.internalName]||{};i.setControl(n.id,this.formBuilder.group({perform:e.perform,maxAmountPerDay:e.maxAmountPerDay,requiresAuthorization:e.requiresAuthorization,authorize:e.authorize}))}this.form.setControl("payments",i)}this.form.addControl("editOwnProfile",new V.j(t.editOwnProfile)),this.form.addControl("restrictPaymentsToUsers",new V.j(t.restrictPaymentsToUsers)),e.canHaveNotifications&&this.form.addControl("notifications",new V.j(t.notifications)),e.canChargebackPayments&&this.form.addControl("chargebackPayments",new V.j(t.chargebackPayments)),e.canViewAdvertisements&&this.form.addControl("viewAdvertisements",new V.j(t.viewAdvertisements)),e.broker&&this.form.addControl("brokering",new V.j(t.brokering)),Object(B.h)(e.operations)||this.form.addControl("operations",new V.j(t.operations)),t.version&&this.form.addControl("version",new V.j(t.version))}paymentTypes(e){return(this.data.paymentTypes||[]).filter(t=>t.from.id===e.id)}save(){if(Object(B.F)(this.form),!this.form.valid)return;const e=this.form.value,t=this.create?this.operatorGroupsService.createOperatorGroup({user:this.user,body:e}):this.operatorGroupsService.updateOperatorGroup({id:this.id,body:e});this.addSub(t.subscribe(e=>{this.notification.snackBar(this.create?this.i18n.operatorGroup.created:this.i18n.operatorGroup.saved),this.router.navigate(["/users","operator-groups",e||this.id])}))}get restrictPaymentsToUsers(){return this.data.restrictPaymentsToUsers}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.OPERATOR_GROUPS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(r.v))},e.\u0275cmp=b.Hb({type:e,selectors:[["operator-group-form"]],features:[b.wb],decls:7,vars:4,consts:[[3,"ready"],[4,"ngIf"],["accountDetails",""],["generalAccounts",""],[3,"heading","mobileHeading","headingActions"],[3,"formGroup"],["mode","fieldView",3,"label",4,"ngIf"],["formControlName","name","required","",3,"label"],["formControlName","description",3,"label"],[1,"mt-3","mb-0"],["formControlName","editOwnProfile",3,"label"],["formControlName","notifications",3,"label",4,"ngIf"],["formControlName","viewAdvertisements",3,"label",4,"ngIf"],["formControlName","operations",3,"label",4,"ngIf"],["formControlName","brokering",3,"label",4,"ngIf"],[1,"btn","btn-primary","btn-main",3,"disabled","click"],["mode","fieldView",3,"label"],[3,"user"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],["class","mt-3 mb-0",4,"ngIf"],["formControlName","access","required","",3,"label","fieldOptions"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["formControlName","notifications",3,"label"],["formControlName","viewAdvertisements",3,"label"],["formControlName","operations",3,"label"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","brokering",3,"label"],["formControlName","min",3,"label","scale","prefix","suffix"],["formControlName","max",3,"label","scale","prefix","suffix"],[3,"formGroup",4,"ngFor","ngForOf"],["formControlName","perform",3,"label"],["formControlName","requiresAuthorization",3,"label"],["formControlName","maxAmountPerDay",3,"label","scale","prefix","suffix"],["formControlName","authorize",3,"label"],[1,"inner-separator"],[1,"mt-3","mb-2"],["formControlName","chargebackPayments",3,"label",4,"ngIf"],["formControlName","restrictPaymentsToUsers",3,"label","preselectedUsers"],["formControlName","chargebackPayments",3,"label"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Fn,20,22,"ng-container",1),b.Sb(),b.Fc(3,wn,5,11,"ng-template",null,2,b.Gc),b.Fc(5,Nn,3,4,"ng-template",null,3,b.Gc)),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,bt.a,V.v,V.l,V.D,ft.a,Oe.a,j.a,q.a,dt.a,p.s,p.A,pe.a,Ke.a,he.a,Ri.a,cn.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Dn=i("I9hm");function Pn(e,t){if(1&e&&(b.Tb(0,"label-value",9),b.Ob(1,"user-link",10),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.group.user)}}function Hn(e,t){if(1&e&&b.Ob(0,"label-value",11),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.description)("value",e.group.description)}}function xn(e,t){if(1&e&&(b.Tb(0,"h3",12),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.accountType.name," ")}}function _n(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.Qb()),2&e){const e=b.dc(6);b.zb(1),b.Ic(e.i18n.operatorGroup.performPaymentsRequiresAuthorizationView)}}function Ln(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.ec(2,"currency"),b.Qb()),2&e){const e=b.dc().$implicit,t=b.dc(5);b.zb(1),b.Ic(t.i18n.operatorGroup.performPaymentsMaxAmountPerDayView(b.gc(2,1,e.maxAmountPerDay,e.paymentType.currency)))}}function Mn(e,t){1&e&&b.Ob(0,"br")}function Un(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.Fc(2,_n,2,1,"ng-container",1),b.Fc(3,Ln,3,4,"ng-container",1),b.Fc(4,Mn,1,0,"br",1),b.Qb()),2&e){const e=t.$implicit,i=t.last;b.zb(1),b.Jc(" ",e.paymentType.name,""),b.zb(1),b.kc("ngIf",e.requiresAuthorization),b.zb(1),b.kc("ngIf",e.maxAmountPerDay),b.zb(1),b.kc("ngIf",!i)}}function $n(e,t){if(1&e&&(b.Tb(0,"label-value",14),b.Fc(1,Un,5,4,"ng-container",13),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.operatorGroup.performPayments),b.zb(1),b.kc("ngForOf",t.paymentsByAccount[e.accountType.id])}}function Gn(e,t){1&e&&(b.Rb(0),b.Hc(1,", "),b.Qb())}function Bn(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.Fc(2,Gn,2,0,"ng-container",1),b.Qb()),2&e){const e=t.$implicit,i=t.last;b.zb(1),b.Jc(" ",e.name,""),b.zb(1),b.kc("ngIf",!i)}}function Jn(e,t){if(1&e&&(b.Tb(0,"label-value",14),b.Fc(1,Bn,3,2,"ng-container",13),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.operatorGroup.authorizePayments),b.zb(1),b.kc("ngForOf",t.authorizeByAccount[e.accountType.id])}}const Vn=function(e,t){return{min:e,max:t}};function qn(e,t){if(1&e&&(b.Ob(0,"label-value",4),b.ec(1,"currency"),b.ec(2,"currency")),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.operatorGroup.paymentNotifications)("value",t.format.formatRange(b.oc(8,Vn,b.gc(1,2,e.notificationAmount.min,e.accountType.currency),b.gc(2,5,e.notificationAmount.max,e.accountType.currency))))}}function jn(e,t){if(1&e&&(b.Rb(0),b.Fc(1,xn,2,1,"h3",6),b.Ob(2,"label-value",4),b.Fc(3,$n,2,2,"label-value",8),b.Fc(4,Jn,2,2,"label-value",8),b.Fc(5,qn,3,11,"label-value",7),b.Qb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(1),b.kc("ngIf",!i.singleAccount),b.zb(1),b.kc("label",i.i18n.operatorGroup.accountAccess)("value",i.userHelper.operatorGroupAccountAccess(e.access)),b.zb(1),b.kc("ngIf",(null==i.paymentsByAccount[e.accountType.id]?null:i.paymentsByAccount[e.accountType.id].length)>0),b.zb(1),b.kc("ngIf",(null==i.authorizeByAccount[e.accountType.id]?null:i.authorizeByAccount[e.accountType.id].length)>0),b.zb(1),b.kc("ngIf",(null==e.notificationAmount?null:e.notificationAmount.min)||(null==e.notificationAmount?null:e.notificationAmount.max))}}function Qn(e,t){if(1&e&&(b.Tb(0,"h3",12),b.Hc(1),b.ec(2,"async"),b.Sb()),2&e){const e=b.dc(4);b.zb(1),b.Jc(" ",b.fc(2,1,e.layout.ltsm$)?e.i18n.operatorGroup.mobileTitle.generalAccount:e.i18n.operatorGroup.title.generalAccount," ")}}function Yn(e,t){if(1&e&&b.Ob(0,"label-value",4),2&e){const e=b.dc(4);b.kc("label",e.i18n.operatorGroup.chargebackPayments)("value",e.i18n.general.yes)}}function Kn(e,t){1&e&&(b.Rb(0),b.Hc(1,", "),b.Qb())}function Xn(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.Fc(2,Kn,2,0,"ng-container",1),b.Qb()),2&e){const e=t.$implicit,i=t.last;b.zb(1),b.Jc(" ",e.display,""),b.zb(1),b.kc("ngIf",!i)}}function Wn(e,t){if(1&e&&(b.Tb(0,"label-value",14),b.Fc(1,Xn,3,2,"ng-container",13),b.Sb()),2&e){const e=b.dc(4);b.kc("label",e.i18n.operatorGroup.restrictPaymentsToUsers),b.zb(1),b.kc("ngForOf",e.group.restrictPaymentsToUsers)}}function Zn(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Qn,3,3,"h3",6),b.Fc(2,Yn,1,2,"label-value",7),b.Fc(3,Wn,2,2,"label-value",8),b.Qb()),2&e){const e=b.dc(3);b.zb(1),b.kc("ngIf",!e.singleAccount),b.zb(1),b.kc("ngIf",e.group.chargebackPayments),b.zb(1),b.kc("ngIf",(null==e.group.restrictPaymentsToUsers?null:e.group.restrictPaymentsToUsers.length)>0)}}function ea(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",12),b.Hc(2),b.ec(3,"async"),b.Sb(),b.Fc(4,jn,6,6,"ng-container",13),b.Fc(5,Zn,4,3,"ng-container",1),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Jc("",b.fc(3,3,e.layout.ltsm$)?e.i18n.operatorGroup.mobileTitle.accountAccess:e.i18n.operatorGroup.title.accountAccess," "),b.zb(2),b.kc("ngForOf",e.visibleAccounts),b.zb(1),b.kc("ngIf",(null==e.group.restrictPaymentsToUsers?null:e.group.restrictPaymentsToUsers.length)>0||e.group.chargebackPayments)}}function ta(e,t){if(1&e&&(b.Tb(0,"h2",12),b.Hc(1),b.ec(2,"async"),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.Jc("",b.fc(2,1,e.layout.ltsm$)?e.i18n.operatorGroup.mobileTitle.permissions:e.i18n.operatorGroup.title.permissions," ")}}function ia(e,t){if(1&e&&b.Ob(0,"label-value",4),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.editOwnProfile)("value",e.i18n.general.yes)}}function na(e,t){if(1&e&&b.Ob(0,"label-value",4),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.notifications)("value",e.i18n.general.yes)}}function aa(e,t){if(1&e&&b.Ob(0,"label-value",4),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.viewAdvertisements)("value",e.i18n.general.yes)}}function sa(e,t){1&e&&(b.Rb(0),b.Hc(1,", "),b.Qb())}function oa(e,t){if(1&e&&(b.Rb(0),b.Hc(1),b.Fc(2,sa,2,0,"ng-container",1),b.Qb()),2&e){const e=t.$implicit,i=t.last;b.zb(1),b.Ic(e.name),b.zb(1),b.kc("ngIf",!i)}}function ra(e,t){if(1&e&&(b.Tb(0,"label-value",14),b.Fc(1,oa,3,2,"ng-container",13),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.runOperations),b.zb(1),b.kc("ngForOf",e.group.operations)}}function ca(e,t){if(1&e&&b.Ob(0,"label-value",4),2&e){const e=b.dc(2);b.kc("label",e.i18n.operatorGroup.brokering)("value",e.i18n.general.yes)}}function la(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",2),b.ec(2,"async"),b.Fc(3,Pn,2,2,"label-value",3),b.Ob(4,"label-value",4),b.Fc(5,Hn,1,2,"label-value",5),b.Fc(6,ea,6,5,"ng-container",1),b.Fc(7,ta,3,3,"h2",6),b.Fc(8,ia,1,2,"label-value",7),b.Fc(9,na,1,2,"label-value",7),b.Fc(10,aa,1,2,"label-value",7),b.Fc(11,ra,2,2,"label-value",8),b.Fc(12,ca,1,2,"label-value",7),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("heading",e.i18n.operatorGroup.title.view)("mobileHeading",e.i18n.operatorGroup.mobileTitle.view)("headingActions",b.fc(2,14,e.headingActions$)),b.zb(2),b.kc("ngIf",!e.self),b.zb(1),b.kc("label",e.i18n.general.name)("value",e.group.name),b.zb(1),b.kc("ngIf",e.group.description),b.zb(1),b.kc("ngIf",(null==e.visibleAccounts?null:e.visibleAccounts.length)>0),b.zb(1),b.kc("ngIf",e.group.editOwnProfile||e.group.notifications||e.group.viewAdvertisements||e.group.brokering||(null==e.group.operations?null:e.group.operations.length)>0),b.zb(1),b.kc("ngIf",e.group.editOwnProfile),b.zb(1),b.kc("ngIf",e.group.notifications),b.zb(1),b.kc("ngIf",e.group.viewAdvertisements),b.zb(1),b.kc("ngIf",(null==e.group.operations?null:e.group.operations.length)>0),b.zb(1),b.kc("ngIf",e.group.brokering)}}let ua=(()=>{class e extends u.a{constructor(e,t,i){super(e),this.userHelper=t,this.operatorGroupsService=i}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.params.id,this.addSub(this.operatorGroupsService.viewOperatorGroup({id:this.id}).subscribe(e=>{this.data=e}))}get group(){return this.data}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user);const t=e.accounts||[];this.visibleAccounts=t.filter(e=>e.access!==Fe.P.NONE),this.singleAccount=1===t.length,this.paymentsByAccount={},this.authorizeByAccount={};const i=e.payments||[];for(const n of this.visibleAccounts)this.paymentsByAccount[n.accountType.id]=i.filter(e=>e.perform&&e.paymentType.from.id===n.accountType.id),this.authorizeByAccount[n.accountType.id]=i.filter(e=>e.authorize&&e.paymentType.from.id===n.accountType.id).map(e=>e.paymentType);if(e.canEdit){const e=[new G.c("edit",this.i18n.general.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")},!0)];this.layout.ltsm&&e.push(new G.c("clear",this.i18n.general.remove,()=>this.remove())),this.headingActions=e}}remove(){this.notification.confirm({message:this.i18n.general.removeConfirm(this.group.name),callback:()=>this.doRemove()})}doRemove(){this.addSub(this.operatorGroupsService.deleteOperatorGroup({id:this.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeDone(this.group.name)),this.router.navigate(["users",this.authHelper.orSelf(this.group.user),"operator-groups"])}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.OPERATOR_GROUPS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(r.v))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-operator-group"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","viewForm",3,"heading","mobileHeading","headingActions"],["labelPosition","side",3,"label",4,"ngIf"],[3,"label","value"],["valueFormat","break",3,"label","value",4,"ngIf"],["class","mt-3 mb-0",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngIf"],["labelPosition","side",3,"label"],[3,"user"],["valueFormat","break",3,"label","value"],[1,"mt-3","mb-0"],[4,"ngFor","ngForOf"],[3,"label"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,la,13,16,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,q.a,dt.a,p.s],pipes:[p.b,Dn.a],encapsulation:2,changeDetection:0}),e})();function da(e,t){if(1&e&&(b.Tb(0,"label-value",15),b.Ob(1,"user-link",16),b.Sb()),2&e){const e=b.dc(3);b.kc("label",e.i18n.user.operatorOwner),b.zb(1),b.kc("user",e.data.user)}}function ba(e,t){if(1&e&&b.Ob(0,"field-option",19),2&e){const e=t.$implicit,i=b.dc(4);b.kc("value",i.ApiHelper.internalNameOrId(e))("id",e.id)("internalName",e.internalName)("text",e.name)}}function fa(e,t){if(1&e&&(b.Tb(0,"single-selection-field",17),b.Fc(1,ba,1,4,"field-option",18),b.Sb()),2&e){const e=b.dc(3);b.kc("label",e.i18n.user.group)("emptyOption",e.i18n.user.operatorNoGroup),b.zb(1),b.kc("ngForOf",e.data.groups)}}function ma(e,t){if(1&e&&b.Ob(0,"input-field",20),2&e){const e=b.dc(3);b.kc("label",e.i18n.user.name)}}function pa(e,t){if(1&e&&b.Ob(0,"input-field",21),2&e){const e=b.dc(3);b.kc("label",e.i18n.user.username)}}function ha(e,t){if(1&e&&b.Ob(0,"input-field",24),2&e){const e=b.dc(4);b.kc("label",e.i18n.user.email)("required",e.data.emailRequired)}}function ga(e,t){if(1&e&&b.Ob(0,"boolean-field",25),2&e){const e=b.dc(4);b.kc("label",e.i18n.user.registration.skipActivationEmail)}}function va(e,t){if(1&e&&(b.Rb(0),b.Fc(1,ha,1,2,"input-field",22),b.Fc(2,ga,1,1,"boolean-field",23),b.Qb()),2&e){const e=b.dc(3);b.zb(1),b.kc("ngIf",e.canEdit("email")),b.zb(1),b.kc("ngIf",e.data.allowSetSendActivationEmail)}}function ka(e,t){if(1&e&&b.Ob(0,"custom-field-input",28),2&e){const e=b.dc().$implicit;b.kc("field",e)("formControlName",e.internalName)}}function ya(e,t){if(1&e&&(b.Rb(0,26),b.Fc(1,ka,1,2,"custom-field-input",27),b.Qb()),2&e){const e=t.$implicit,i=b.dc(3);b.kc("formGroup",i.form.get("customValues")),b.zb(1),b.kc("ngIf",i.canEdit(e))}}function Sa(e,t){if(1&e&&(b.Rb(0,26),b.Ob(1,"input-field",29),b.Qb()),2&e){const e=b.dc(3);b.kc("formGroup",e.mobileForm),b.zb(1),b.kc("label",e.i18n.phone.mobile)("required","required"===e.mobileAvailability)("placeholder",e.data.phoneConfiguration.mobileExample)}}function Ta(e,t){if(1&e&&b.Ob(0,"input-field",31),2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.extension)}}function Ia(e,t){if(1&e&&(b.Rb(0,26),b.Ob(1,"input-field",29),b.Fc(2,Ta,1,1,"input-field",30),b.Qb()),2&e){const e=b.dc(3);b.kc("formGroup",e.landLineForm),b.zb(1),b.kc("label",e.i18n.phone.landLine)("required","required"===e.data.phoneConfiguration.landLineAvailability)("placeholder",e.data.phoneConfiguration.landLineExample),b.zb(1),b.kc("ngIf",e.data.phoneConfiguration.extensionEnabled)}}function Fa(e,t){if(1&e&&(b.Tb(0,"div",34),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Ic(e.description)}}function za(e,t){if(1&e&&b.Ob(0,"boolean-field",35),2&e){const e=b.dc(4);b.kc("label",e.i18n.user.registration.passwordAssign)}}function Oa(e,t){if(1&e&&b.Ob(0,"boolean-field",39),2&e){const e=b.dc(5);b.kc("label",e.i18n.user.registration.passwordForceChange)}}function Aa(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"input-field",36),b.Ob(2,"input-field",37),b.Fc(3,Oa,1,1,"boolean-field",38),b.Qb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.zb(1),b.kc("label",e.name),b.zb(1),b.kc("label",t.i18n.user.passwordConfirmation(e.name)),b.zb(1),b.kc("ngIf",e.canForceChange)}}function Ca(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2"),b.Hc(2),b.Sb(),b.Rb(3,26),b.Fc(4,Fa,2,1,"div",32),b.Fc(5,za,1,1,"boolean-field",33),b.Fc(6,Aa,4,3,"ng-container",10),b.Qb(),b.Qb()),2&e){const e=t.$implicit,i=t.index,n=b.dc(3);b.zb(2),b.Ic(e.name),b.zb(1),b.kc("formGroup",n.passwordForms[i]),b.zb(1),b.kc("ngIf",e.description),b.zb(1),b.kc("ngIf",n.login.user),b.zb(1),b.kc("ngIf",n.passwordForms[i].get("defined").value)}}function wa(e,t){if(1&e){const e=b.Ub();b.Tb(0,"form",5),b.Fc(1,da,2,2,"label-value",6),b.Fc(2,fa,2,3,"single-selection-field",7),b.Fc(3,ma,1,1,"input-field",8),b.Fc(4,pa,1,1,"input-field",9),b.Fc(5,va,3,2,"ng-container",10),b.Fc(6,ya,2,2,"ng-container",11),b.Fc(7,Sa,2,4,"ng-container",12),b.Fc(8,Ia,3,5,"ng-container",12),b.Fc(9,Ca,7,5,"ng-container",13),b.Tb(10,"actions"),b.Tb(11,"button",14),b.bc("click",(function(){return b.wc(e),b.dc(2).register()})),b.Hc(12),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc(2);b.kc("formGroup",e.form),b.zb(1),b.kc("ngIf",!e.self),b.zb(1),b.kc("ngIf",e.data.groups.length>0),b.zb(1),b.kc("ngIf",e.canEdit("name")),b.zb(1),b.kc("ngIf",e.canEdit("username")),b.zb(1),b.kc("ngIf",e.canEdit("email")),b.zb(1),b.kc("ngForOf",e.data.customFields),b.zb(1),b.kc("ngIf","disabled"!==e.mobileAvailability),b.zb(1),b.kc("ngIf","disabled"!==e.landLineAvailability),b.zb(1),b.kc("ngForOf",e.data.passwordTypes),b.zb(3),b.Jc(" ",e.i18n.general.submit," ")}}function Ea(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Fc(1,wa,13,11,"form",4),b.ec(2,"async"),b.Sb()),2&e){const e=b.dc(),t=b.uc(4);b.kc("heading",e.i18n.user.title.operatorRegistration)("mobileHeading",e.i18n.user.mobileTitle.operatorRegistration),b.zb(1),b.kc("ngIf",null==b.fc(2,4,e.result$))("ngIfElse",t)}}function Na(e,t){if(1&e){const e=b.Ub();b.Ob(0,"p",40),b.ec(1,"trust"),b.Tb(2,"actions",41),b.Tb(3,"button",14),b.bc("click",(function(){return b.wc(e),b.dc().reload()})),b.Hc(4),b.Sb(),b.Tb(5,"button",14),b.bc("click",(function(){return b.wc(e),b.dc().viewProfile()})),b.Hc(6),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("innerHTML",b.fc(1,3,e.doneMessageHtml),b.xc),b.zb(4),b.Jc(" ",e.i18n.user.operatorRegistrationAddAnother," "),b.zb(2),b.Jc(" ",e.i18n.user.registration.viewProfile," ")}}let Ra=(()=>{class e extends ze.a{constructor(e,t,i){super(e),this.userHelper=t,this.operatorsService=i,this.result$=new ut.a(null)}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user||this.ApiHelper.SELF,this.self=this.authHelper.isSelf(this.user),this.addSub(this.operatorsService.getOperatorDataForNew({user:this.user}).subscribe(e=>this.data=e))}onDataInitialized(e){this.form=this.formBuilder.group({group:null}),[this.mobileForm,this.landLineForm]=this.userHelper.setupRegistrationForm(this.form,e),this.passwordForms=this.userHelper.passwordRegistrationForms(e),this.editableFields=this.userHelper.fieldNamesByAction(e,"edit")}canEdit(e){return this.editableFields.has(this.fieldHelper.fieldName(e))}get mobileAvailability(){return this.data.phoneConfiguration.mobileAvailability}get landLineAvailability(){return this.data.phoneConfiguration.landLineAvailability}register(){const e=Object(B.d)(this.form);this.mobileForm&&e.setControl("mobile",this.mobileForm),this.landLineForm&&e.setControl("landLine",this.landLineForm),e.setControl("passwords",new V.g(this.passwordForms)),Object(B.F)(e)&&this.addSub(this.operatorsService.registerOperator({user:this.user,body:e.value}).subscribe(e=>this.result$.next(e)))}get doneMessageHtml(){const e=this.result$.value;if(!e)return null;const t=e.user.display;switch(e.status){case Fe.Db.ACTIVE:return this.i18n.user.operatorRegistrationActive(t);case Fe.Db.INACTIVE:return this.i18n.user.operatorRegistrationInactive(t);case Fe.Db.EMAIL_VALIDATION:return this.i18n.user.operatorRegistrationPending(t)}}viewProfile(){const e=this.result$.value;e&&this.router.navigate(["users",e.user.id,"profile"])}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.MY_OPERATORS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(r.w))},e.\u0275cmp=b.Hb({type:e,selectors:[["operator-registration"]],features:[b.wb],decls:5,vars:4,consts:[[3,"ready"],["last","",3,"heading","mobileHeading",4,"ngIf"],["done",""],["last","",3,"heading","mobileHeading"],["autocomplete","off",3,"formGroup",4,"ngIf","ngIfElse"],["autocomplete","off",3,"formGroup"],[3,"label",4,"ngIf"],["formControlName","group",3,"label","emptyOption",4,"ngIf"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","username","required","",3,"label",4,"ngIf"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"label"],[3,"user"],["formControlName","group",3,"label","emptyOption"],[3,"value","id","internalName","text",4,"ngFor","ngForOf"],[3,"value","id","internalName","text"],["formControlName","name","required","",3,"label"],["formControlName","username","required","",3,"label"],["formControlName","email",3,"label","required",4,"ngIf"],["formControlName","skipActivationEmail",3,"label",4,"ngIf"],["formControlName","email",3,"label","required"],["formControlName","skipActivationEmail",3,"label"],[3,"formGroup"],[3,"field","formControlName",4,"ngIf"],[3,"field","formControlName"],["formControlName","number",3,"label","required","placeholder"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],["class","mb-2",4,"ngIf"],["formControlName","defined",3,"label",4,"ngIf"],[1,"mb-2"],["formControlName","defined",3,"label"],["required","","formControlName","value","type","password","autocomplete","new-password",3,"label"],["required","","formControlName","confirmationValue","type","password","autocomplete","new-password",3,"label"],["formControlName","forceChange",3,"label",4,"ngIf"],["formControlName","forceChange",3,"label"],[3,"innerHTML"],["forceRow",""]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Ea,3,6,"page-content",1),b.Fc(3,Na,7,5,"ng-template",null,2,b.Gc),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,V.I,V.w,V.n,p.s,j.a,q.a,dt.a,pe.a,V.v,V.l,he.a,bt.a,V.D,Oe.a,wt.a],pipes:[p.b,Nt.a],encapsulation:2,changeDetection:0}),e})();var Da=i("yFKC"),Pa=i("75v4"),Ha=i("qCwG"),xa=(i("Ky6R"),i("T9y1")),_a=i("RRWt"),La=i("5Wk5"),Ma=i("pgV1"),Ua=i("wezA");const $a=function(e,t){return{"cell-main":e,"cell-text":t}};function Ga(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",8),b.Ob(2,"format-field-value",9),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=t.first,n=b.dc().$implicit,a=b.dc();b.zb(1),b.kc("ngClass",b.oc(6,$a,i,!i)),b.zb(1),b.kc("fields",a.data.customFields)("plainText",!0)("fieldName",e)("object",a.user(n))("customValues",a.customValues(n))}}function Ba(e,t){if(1&e&&(b.Tb(0,"div",10),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc();b.zb(1),b.Jc(" ",t.operatorGroup(e)," ")}}function Ja(e,t){if(1&e&&(b.Tb(0,"mobile-result",5),b.Fc(1,Ga,3,9,"ng-container",6),b.Fc(2,Ba,2,1,"div",7),b.Sb()),2&e){const e=t.$implicit,i=b.dc();b.kc("avatarImage",i.user(e).image)("avatarIcon","operator"===i.resultKind?null:"user"),b.zb(1),b.kc("ngForOf",i.fieldsInTile),b.zb(1),b.kc("ngIf","operator"===i.resultKind)}}function Va(e,t){1&e&&b.Ob(0,"th",15)}function qa(e,t){if(1&e&&(b.Tb(0,"th"),b.Hc(1),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(1),b.Ic(i.fieldName(e))}}function ja(e,t){if(1&e&&(b.Tb(0,"th"),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.Ic(e.i18n.user.group)}}function Qa(e,t){if(1&e&&(b.Tb(0,"td",15),b.Ob(1,"avatar",17),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.zb(1),b.kc("image",t.user(e).image)}}function Ya(e,t){if(1&e&&(b.Tb(0,"td"),b.Ob(1,"format-field-value",9),b.Sb()),2&e){const e=t.$implicit,i=b.dc().$implicit,n=b.dc(2);b.zb(1),b.kc("fields",n.data.customFields)("plainText",!0)("fieldName",e)("object",n.user(i))("customValues",n.customValues(i))}}function Ka(e,t){if(1&e&&(b.Tb(0,"td"),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.zb(1),b.Ic(t.operatorGroup(e))}}function Xa(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",16),b.bc("click",(function(){b.wc(e);const i=t.$implicit,n=b.dc(2);return n.canViewProfile?n.router.navigate(n.path(i)):null})),b.Fc(1,Qa,2,1,"td",12),b.Fc(2,Ya,2,5,"td",6),b.Fc(3,Ka,2,1,"td",13),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.kc("ngIf","operator"!==e.resultKind),b.zb(1),b.kc("ngForOf",e.fieldsInList),b.zb(1),b.kc("ngIf","operator"===e.resultKind)}}const Wa=function(e){return{"cursor-pointer":e}};function Za(e,t){if(1&e&&(b.Tb(0,"table",11),b.Tb(1,"thead"),b.Fc(2,Va,1,0,"th",12),b.Fc(3,qa,2,1,"th",6),b.Fc(4,ja,2,1,"th",13),b.Sb(),b.Tb(5,"tbody"),b.Fc(6,Xa,4,3,"tr",14),b.Sb(),b.Sb()),2&e){const e=b.dc();b.kc("ngClass",b.nc(5,Wa,e.canViewProfile)),b.zb(2),b.kc("ngIf","operator"!==e.resultKind),b.zb(1),b.kc("ngForOf",e.fieldsInList),b.zb(1),b.kc("ngIf","operator"===e.resultKind),b.zb(2),b.kc("ngForOf",null==e.results?null:e.results.results)}}function es(e,t){if(1&e&&(b.Tb(0,"div",8),b.Tb(1,"format-field-value",20),b.Hc(2," \xa0 "),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=t.first,n=b.dc().$implicit,a=b.dc();b.kc("ngClass",i?"card-title":"card-text"),b.zb(1),b.kc("fields",a.data.customFields)("fieldName",e)("object",a.user(n))("customValues",a.customValues(n))}}function ts(e,t){if(1&e&&(b.Tb(0,"tiled-result",18),b.Fc(1,es,3,5,"div",19),b.Sb()),2&e){const e=t.$implicit,i=b.dc();b.kc("image",i.user(e).image),b.zb(1),b.kc("ngForOf",i.fieldsInTile)}}const is=function(e,t){return{"font-weight-bold":e,"mb-2":t}};function ns(e,t){if(1&e&&(b.Tb(0,"div",8),b.Ob(1,"format-field-value",9),b.Sb()),2&e){const e=t.$implicit,i=t.first,n=t.last,a=b.dc().$implicit,s=b.dc();b.kc("ngClass",b.oc(6,is,i,n)),b.zb(1),b.kc("fields",s.data.customFields)("plainText",!0)("fieldName",e)("object",s.user(a))("customValues",s.customValues(a))}}function as(e,t){if(1&e&&(b.Tb(0,"map-result",21),b.Fc(1,ns,2,9,"div",19),b.Sb()),2&e){const e=t.$implicit,i=t.address,n=b.dc();b.kc("image",n.user(e).image)("address",i),b.zb(1),b.kc("ngForOf",n.fieldsInTile)}}let ss=(()=>{class e extends Ha.a{constructor(e){super(e),this.clazz="flex-grow-1 d-flex",this.resultKind="user",this.update=new b.n}set data(e){this._data=e;const t=(e||{}).fieldsInList||[];this.fieldsInList=t.slice(0,Math.min(t.length,7)),this.fieldsInTile=t.slice(0,Math.min(t.length,2)),this.showTableHeader=this.fieldsInList.length>1}get data(){return this._data}ngOnInit(){super.ngOnInit(),this.canViewProfile=!0===(((this.dataForUiHolder.dataForUi.auth||{}).permissions||{}).users||{}).viewProfile}user(e){return"contact"===this.resultKind?e.contact:e}operatorGroup(e){if("operator"===this.resultKind){const t=e.group;return t?t.name:this.i18n.user.operatorNoGroup}return null}displayFunction(){return e=>{const t=this.user(e);if(t.display)return t.display;const i=t,n=this.fieldsInList[0];return i.hasOwnProperty(n)?i[n]:(i.customValues||{})[n]}}customValues(e){return null==e?null:e.customValues}address(e){return"contact"===this.resultKind?null:e.address}fieldName(e){return"operator"===this.resultKind&&"display"===e?this.i18n.general.operator:this.fieldHelper.fieldDisplay(e,this.data.customFields)}path(e){const t=this.user(e);return this.authHelper.isSelf(t)?["/users",this.ApiHelper.SELF,"profile"]:"operator"===this.resultKind?["/users","operators",t.id]:this.canViewProfile?"contact"===this.resultKind?["/users","contacts",t.id]:["/users",t.id,"profile"]:null}get toLink(){return e=>this.path(e)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r))},e.\u0275cmp=b.Hb({type:e,selectors:[["users-results"]],hostVars:2,hostBindings:function(e,t){2&e&&b.Bb(t.clazz)},inputs:{resultType:"resultType",rendering$:"rendering$",referencePoint:"referencePoint",data:"data",results:"results",resultKind:"resultKind"},outputs:{update:"update"},features:[b.wb],decls:5,vars:7,consts:[[3,"results","rendering$","resultType","toAddress","referencePoint","toMarkerTitle","toLink","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover",3,"ngClass",4,"resultTable"],["icon","user","zoom","",3,"image",4,"resultTile"],[3,"image","address",4,"resultInfoWindow"],[3,"avatarImage","avatarIcon"],[4,"ngFor","ngForOf"],["class","cell-text",4,"ngIf"],[3,"ngClass"],[3,"fields","plainText","fieldName","object","customValues"],[1,"cell-text"],[1,"table","table-hover",3,"ngClass"],["class","avatar",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"avatar"],[3,"click"],[3,"image"],["icon","user","zoom","",3,"image"],[3,"ngClass",4,"ngFor","ngForOf"],["plainText","",1,"d-block","text-truncate",3,"fields","fieldName","object","customValues"],[3,"image","address"]],template:function(e,t){1&e&&(b.Tb(0,"results-layout",0),b.bc("update",(function(e){return t.update.emit(e)})),b.Fc(1,Ja,3,4,"mobile-result",1),b.Fc(2,Za,7,7,"table",2),b.Fc(3,ts,2,2,"tiled-result",3),b.Fc(4,as,2,3,"map-result",4),b.Sb()),2&e&&b.kc("results",t.results)("rendering$",t.rendering$)("resultType",t.resultType)("toAddress",t.address)("referencePoint",t.referencePoint)("toMarkerTitle",t.displayFunction())("toLink",t.canViewProfile?t.toLink:null)},directives:[g.a,v.a,k.a,xa.a,_a.a,S.a,p.s,p.t,p.q,La.a,ve.a,Ma.a,Ua.a],encapsulation:2,changeDetection:0}),e})();function os(e,t){1&e&&b.Pb(0)}function rs(e,t){if(1&e&&(b.Tb(0,"div",9),b.Tb(1,"label-value",10),b.Ob(2,"user-link",11),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.data.user)}}function cs(e,t){if(1&e&&b.Ob(0,"field-option",14),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",i.ApiHelper.internalNameOrId(e))("internalName",e.internalName)("id",e.id)("text",e.name)}}function ls(e,t){if(1&e&&(b.Tb(0,"div",9),b.Tb(1,"multi-selection-field",12),b.Fc(2,cs,1,4,"field-option",13),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.user.groupFilter),b.zb(1),b.kc("ngForOf",e.data.groups)}}function us(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",9),b.Ob(2,"multi-selection-field",15),b.Sb(),b.Tb(3,"div",9),b.Ob(4,"date-field",16),b.Sb(),b.Tb(5,"div",9),b.Ob(6,"date-field",17),b.Sb(),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.kc("label",e.i18n.general.status)("fieldOptions",e.statusOptions),b.zb(2),b.kc("label",e.i18n.user.creationBegin),b.zb(2),b.kc("label",e.i18n.user.creationEnd)}}function ds(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"form",4),b.Tb(3,"div",5),b.Fc(4,rs,3,2,"div",6),b.Fc(5,ls,3,2,"div",6),b.Fc(6,us,7,4,"ng-container",7),b.ec(7,"async"),b.Sb(),b.Sb(),b.Sb(),b.Tb(8,"users-results",8),b.bc("update",(function(t){return b.wc(e),b.dc().update(t)})),b.ec(9,"async"),b.ec(10,"async"),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.self?e.i18n.user.title.myOperators:e.i18n.user.title.userOperators)("mobileHeading",e.self?e.i18n.user.mobileTitle.myOperators:e.i18n.user.mobileTitle.userOperators)("headingActions",b.fc(1,11,e.headingActions$)),b.zb(2),b.kc("formGroup",e.form),b.zb(2),b.kc("ngIf",!e.self),b.zb(1),b.kc("ngIf",(null==e.data.groups?null:e.data.groups.length)>1),b.zb(1),b.kc("ngIf",b.fc(7,13,e.layout.gtxxs$)),b.zb(2),b.kc("results",b.fc(9,15,e.results$))("rendering$",e.rendering$)("data",b.fc(10,17,e.data$))("resultKind","operator")}}let bs=(()=>{class e extends fe.a{constructor(e,t,i){super(e),this.operatorsService=t,this.userHelper=i,this.ResultType=Pa.a,this.empty=B.h}getFormControlNames(){return["operatorGroups","statuses","creationBegin","creationEnd"]}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||be.a.SELF,this.self=this.authHelper.isSelf(this.param),this.addSub(this.operatorsService.getUserOperatorsDataForSearch({user:this.param}).subscribe(e=>{this.statusOptions=this.userHelper.statusOptions(),!this.self&&e.canCreateNew&&(this.headingActions=[new G.c("registration",this.i18n.general.addNew,()=>{this.router.navigate(["/users",this.param,"operators","registration"])},!0)]),this.data=e}))}onDataInitialized(e){super.onDataInitialized(e),Object(B.h)(e.fieldsInList)&&(e.fieldsInList=["display"])}toSearchParams(e){const t=e;return t.user=this.param,t.creationPeriod=be.a.rangeFilter(e.creationBegin,e.creationEnd),delete e.customValues,t}doSearch(e){return this.operatorsService.searchUserOperators$Response(e)}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.MY_OPERATORS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(Da.a),b.Nb(c.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-user-operators"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator","border-bottom-0",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[4,"ngIf"],["resultType","list",3,"results","rendering$","data","resultKind","update"],[1,"col-12","col-md-6"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],["labelPosition","side","formControlName","operatorGroups",3,"label"],[3,"value","internalName","id","text",4,"ngFor","ngForOf"],[3,"value","internalName","id","text"],["labelPosition","side","formControlName","statuses",3,"label","fieldOptions"],["labelPosition","side","formControlName","creationBegin","fieldSize","full",3,"label"],["labelPosition","side","formControlName","creationEnd","fieldSize","full",3,"label"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,os,1,0,"ng-container",1),b.Sb(),b.Fc(3,ds,11,19,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,V.I,V.w,V.n,ss,q.a,dt.a,Ke.a,V.v,V.l,p.s,he.a,me.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function fs(e,t){if(1&e&&b.Ob(0,"input-field",7),2&e){const e=b.dc();b.kc("label",e.i18n.password.oldPassword)}}const ms=e=>{const t=e.value;if(e.touched&&null!=t&&""!==t){const i=e.parent;if((null==i.get("newPassword")?"":i.get("newPassword").value)!==t)return{passwordsMatch:!0}}return null};let ps=(()=>{class e extends Ha.a{constructor(e,t,i){super(e),this.modalRef=t,this.passwordsService=i,this.done=new b.n}ngOnInit(){super.ngOnInit(),this.self=this.authHelper.isSelf(this.user),this.form=this.formBuilder.group({newPassword:[null,V.G.required],newPasswordConfirmation:[null,V.G.compose([V.G.required,ms])]}),this.requireOld&&this.form.setControl("oldPassword",this.formBuilder.control(null,V.G.required))}submit(){if(!Object(B.F)(this.form))return;const e=this.form.value;e.checkConfirmation=!0,this.addSub(this.passwordsService.changePassword({user:this.param,type:this.type.id,body:e}).subscribe(()=>{this.done.emit(),this.modalRef.hide()}))}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.a),b.Nb(r.y))},e.\u0275cmp=b.Hb({type:e,selectors:[["change-password-dialog"]],inputs:{param:"param",user:"user",type:"type",requireOld:"requireOld"},outputs:{done:"done"},features:[b.wb],decls:12,vars:10,consts:[[3,"formGroup"],["required","","focused","","formControlName","oldPassword","type","password",3,"label",4,"ngIf"],["required","","formControlName","newPassword","type","password",3,"label"],["required","","formControlName","newPasswordConfirmation","type","password",3,"label"],["forceRow",""],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-outline-primary",3,"click"],["required","","focused","","formControlName","oldPassword","type","password",3,"label"]],template:function(e,t){1&e&&(b.Tb(0,"h1"),b.Hc(1),b.Sb(),b.Tb(2,"form",0),b.Fc(3,fs,1,1,"input-field",1),b.Ob(4,"input-field",2),b.Ob(5,"input-field",3),b.Sb(),b.Tb(6,"actions",4),b.Tb(7,"button",5),b.bc("click",(function(){return t.submit()})),b.ec(8,"async"),b.Hc(9),b.Sb(),b.Tb(10,"button",6),b.bc("click",(function(){return t.modalRef.hide()})),b.Hc(11),b.Sb(),b.Sb()),2&e&&(b.zb(1),b.Jc(" ",t.self?t.i18n.password.title.changeSelf:t.i18n.password.title.changeUser,"\n"),b.zb(1),b.kc("formGroup",t.form),b.zb(1),b.kc("ngIf",t.requireOld),b.zb(1),b.kc("label",t.i18n.password.newPassword),b.zb(1),b.kc("label",t.i18n.password.passwordConfirmation),b.zb(2),b.kc("disabled",b.fc(8,8,t.requesting$)),b.zb(2),b.Jc(" ",t.i18n.general.submit," "),b.zb(2),b.Jc(" ",t.i18n.general.cancel," "))},directives:[V.I,V.w,V.n,p.t,bt.a,V.D,V.v,V.l,j.a,Et.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var hs=i("CNMR");function gs(e,t){1&e&&b.Pb(0)}function vs(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"user-info",7),b.Ob(2,"hr"),b.Qb()),2&e){const e=b.dc(2);b.zb(1),b.kc("user",e.data.user)}}function ks(e,t){1&e&&b.Ob(0,"hr",17)}function ys(e,t){1&e&&b.Ob(0,"avatar",18),2&e&&b.kc("size",64)}const Ss=function(e){return{"mt-0":e}};function Ts(e,t){if(1&e&&(b.Tb(0,"h2",19),b.Hc(1),b.Sb()),2&e){const e=b.dc(),t=e.$implicit;b.kc("ngClass",b.nc(2,Ss,e.first)),b.zb(1),b.Jc(" ",t.type.name,"")}}function Is(e,t){if(1&e&&(b.Tb(0,"div",20),b.Hc(1),b.ec(2,"dateTime"),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.zb(1),b.Jc(" ",t.i18n.password.statusSince(b.fc(2,1,e.date))," ")}}const Fs=function(e){return{"mb-3":e}};function zs(e,t){if(1&e&&(b.Tb(0,"button",21),b.bc("click",(function(){return t.$implicit.onClick()})),b.Hc(1),b.Sb()),2&e){const e=t.$implicit;b.kc("ngClass",b.nc(2,Fs,!t.last)),b.zb(1),b.Jc(" ",e.label," ")}}function Os(e,t){if(1&e&&(b.Rb(0),b.Fc(1,ks,1,0,"hr",8),b.Tb(2,"div",9),b.Tb(3,"div",10),b.Fc(4,ys,1,1,"avatar",11),b.ec(5,"async"),b.Sb(),b.Tb(6,"div",12),b.Fc(7,Ts,2,4,"h2",13),b.Tb(8,"div"),b.Hc(9),b.Sb(),b.Fc(10,Is,3,3,"div",14),b.Sb(),b.Tb(11,"div",15),b.Fc(12,zs,2,4,"button",16),b.Sb(),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=t.first,n=b.dc(2);b.zb(1),b.kc("ngIf",!i),b.zb(3),b.kc("ngIf",b.fc(5,6,n.layout.gtxxs$)),b.zb(3),b.kc("ngIf",n.multiple),b.zb(2),b.Ic(n.status(e)),b.zb(1),b.kc("ngIf",e.date),b.zb(2),b.kc("ngForOf",n.actions(e))}}function As(e,t){if(1&e&&b.Ob(0,"field-option",29),2&e){const e=t.$implicit;b.kc("value",e.internalName)("text",e.name)}}function Cs(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",22),b.Tb(1,"alert",23),b.Hc(2),b.Sb(),b.Tb(3,"form",24),b.Tb(4,"single-selection-field",25),b.Fc(5,As,1,2,"field-option",26),b.Sb(),b.Ob(6,"input-field",27),b.Sb(),b.Tb(7,"actions"),b.Tb(8,"button",28),b.bc("click",(function(){return b.wc(e),b.dc(2).setSecurityAnswer()})),b.Hc(9),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc(2);b.kc("heading",e.i18n.password.title.securityAnswer)("mobileHeading",e.i18n.password.mobileTitle.securityAnswer),b.zb(2),b.Ic(e.i18n.securityQuestion.message),b.zb(1),b.kc("formGroup",e.securityAnswer),b.zb(1),b.kc("label",e.i18n.securityQuestion.question),b.zb(1),b.kc("ngForOf",e.data.dataForSetSecurityAnswer.securityQuestions),b.zb(1),b.kc("label",e.i18n.securityQuestion.answer),b.zb(3),b.Jc(" ",e.i18n.general.save," ")}}function ws(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Fc(1,vs,3,1,"ng-container",4),b.Fc(2,Os,13,8,"ng-container",5),b.Sb(),b.Fc(3,Cs,10,8,"page-content",6)),2&e){const e=b.dc();b.kc("heading",e.title)("mobileHeading",e.mobileTitle)("last",!(null!=e.data&&e.data.dataForSetSecurityAnswer)),b.zb(1),b.kc("ngIf",e.data.user&&!e.self),b.zb(1),b.kc("ngForOf",e.data.passwords),b.zb(1),b.kc("ngIf",null==e.data?null:e.data.dataForSetSecurityAnswer)}}let Es=(()=>{class e extends ze.a{constructor(e,t,i){super(e),this.modal=t,this.passwordsService=i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.passwordsService.getUserPasswordsListData({user:this.param}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.self=this.authHelper.isSelf(e.user),this.multiple=e.passwords.length>1,this.self?(this.title=this.multiple?this.i18n.password.title.manageMultipleSelf:this.i18n.password.title.manageSingleSelf,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleSelf:this.i18n.password.mobileTitle.manageSingleSelf):(this.title=this.multiple?this.i18n.password.title.manageMultipleUser:this.i18n.password.title.manageSingleUser,this.mobileTitle=this.multiple?this.i18n.password.mobileTitle.manageMultipleUser:this.i18n.password.mobileTitle.manageSingleUser),e.dataForSetSecurityAnswer&&(this.securityAnswer=this.formBuilder.group({securityQuestion:[null,V.G.required],securityAnswer:[null,V.G.required]}))}actions(e){const t=[],i=e.permissions||{};return i.change&&t.push(new G.a(this.i18n.password.action.change,()=>{this.change(e)})),i.changeGenerated&&t.push(new G.a(this.i18n.password.action.change,()=>{this.changeGenerated(e)})),i.unblock&&t.push(new G.a(this.i18n.password.action.unblock,()=>{this.unblock(e)})),i.generate&&t.push(new G.a(this.i18n.password.action.activate,()=>{this.generate(e)})),i.enable&&t.push(new G.a(this.i18n.password.action.enable,()=>{this.enable(e)})),i.disable&&t.push(new G.a(this.i18n.password.action.disable,()=>{this.disable(e)})),t}setSecurityAnswer(){Object(B.F)(this.securityAnswer),this.securityAnswer.valid&&this.addSub(this.passwordsService.setSecurityAnswer({body:this.securityAnswer.value}).subscribe(()=>{this.notification.snackBar(this.i18n.securityQuestion.set),this.reload()}))}status(e){switch(e.status){case Fe.T.ACTIVE:return this.i18n.password.status.active;case Fe.T.DISABLED:return this.i18n.password.status.disabled;case Fe.T.EXPIRED:return this.i18n.password.status.expired;case Fe.T.INDEFINITELY_BLOCKED:return this.i18n.password.status.indefinitelyBlocked;case Fe.T.NEVER_CREATED:return this.i18n.password.status.neverCreated;case Fe.T.PENDING:return this.i18n.password.status.pending;case Fe.T.RESET:return this.i18n.password.status.reset;case Fe.T.TEMPORARILY_BLOCKED:return this.i18n.password.status.temporarilyBlocked}}change(e){const t=this.modal.show(ps,{class:"modal-form",initialState:{param:this.param,type:e.type,user:this.data.user,requireOld:e.requireOldPasswordForChange}});this.addSub(t.content.done.subscribe(()=>{this.notification.snackBar(this.i18n.password.action.changeDone(e.type.name)),this.reload()}))}generate(e){this.notification.confirm({title:this.i18n.password.action.activate,message:this.i18n.password.action.activateConfirm(e.type.name),callback:()=>this.doGenerate(e)})}doGenerate(e){this.addSub(this.passwordsService.generatePassword({type:e.type.id}).subscribe(t=>{this.notification.info(this.i18n.password.action.changeGeneratedDone({type:e.type.name,value:t})),this.reload()}))}createDeviceConfirmation(e){return()=>({type:Fe.s.GENERATE_PASSWORD,passwordType:e.type.id})}changeGenerated(e){this.notification.confirm({title:this.i18n.password.action.change,message:this.i18n.password.action.changeGeneratedConfirm(e.type.name),createDeviceConfirmation:this.createDeviceConfirmation(e),passwordInput:this.data.confirmationPasswordInput,callback:t=>this.doChangeGenerated(e,t.confirmationPassword)})}doChangeGenerated(e,t){this.addSub(this.passwordsService.changeGenerated({type:e.type.id,confirmationPassword:t}).subscribe(t=>{this.notification.info(this.i18n.password.action.changeGeneratedDone({type:e.type.name,value:t})),this.reload()}))}unblock(e){this.notification.confirm({title:this.i18n.password.action.unblock,message:this.i18n.password.action.unblockConfirm(e.type.name),callback:()=>this.doUnblock(e)})}doUnblock(e){this.addSub(this.passwordsService.unblockPassword({user:this.param,type:e.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.unblockDone(e.type.name)),this.reload()}))}enable(e){this.notification.confirm({title:this.i18n.password.action.enable,message:this.i18n.password.action.enableConfirm(e.type.name),callback:()=>this.doEnable(e)})}doEnable(e){this.addSub(this.passwordsService.enablePassword({user:this.param,type:e.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.enableDone(e.type.name)),this.reload()}))}disable(e){this.notification.confirm({title:this.i18n.password.action.disable,message:this.i18n.password.action.disableConfirm(e.type.name),callback:()=>this.doDisable(e)})}doDisable(e){this.addSub(this.passwordsService.disablePassword({user:this.param,type:e.type.id}).subscribe(()=>{this.notification.snackBar(this.i18n.password.action.disableDone(e.type.name)),this.reload()}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.PASSWORDS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.b),b.Nb(r.y))},e.\u0275cmp=b.Hb({type:e,selectors:[["manage-passwords"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading","last"],[4,"ngIf"],[4,"ngFor","ngForOf"],["hideBack","","last","",3,"heading","mobileHeading",4,"ngIf"],["labelCols","2",3,"user"],["class","mt-4",4,"ngIf"],[1,"row","no-gutters"],[1,"col-4","col-md-2"],["class","ml-2 mr-5 management-icon","iconSize","64px","icon","vpn_key",3,"size",4,"ngIf"],[1,"col-8","col-md-7"],["class","border-0 mb-3",3,"ngClass",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-md-3","mt-3","mt-md-0"],["class","d-block ml-auto btn btn-primary",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],["iconSize","64px","icon","vpn_key",1,"ml-2","mr-5","management-icon",3,"size"],[1,"border-0","mb-3",3,"ngClass"],[1,"mt-2"],[1,"d-block","ml-auto","btn","btn-primary",3,"ngClass","click"],["hideBack","","last","",3,"heading","mobileHeading"],["type","info"],[3,"formGroup"],["formControlName","securityQuestion","required","",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","securityAnswer","required","",3,"label"],[1,"btn","btn-primary",3,"click"],[3,"value","text"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,gs,1,0,"ng-container",1),b.Sb(),b.Fc(3,ws,4,6,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,p.s,y.a,ve.a,p.q,hs.a,V.I,V.w,V.n,pe.a,V.v,V.l,V.D,bt.a,j.a,he.a],pipes:[p.b,z.a],styles:["[_nghost-%COMP%]     avatar icon{color:#adb5bd}body.dark   [_nghost-%COMP%]     avatar icon{color:#6c757d}"],changeDetection:0}),e})();var Ns=i("txia"),Rs=i("9d5G"),Ds=i("bER3");const Ps=["codeField"];let Hs=(()=>{class e extends Ha.a{constructor(e,t,i){super(e),this.modalRef=t,this.phonesService=i,this.verified=new b.n,this.message$=new ut.a(""),this.disabled=!1,this.code=this.formBuilder.control(null,V.G.required)}ngOnInit(){super.ngOnInit(),this.message=this.i18n.phone.verify.message}sendCode(){this.addSub(this.phonesService.sendPhoneVerificationCode({id:this.phone.id}).subscribe(e=>{this.message=this.i18n.phone.verify.done(e),this.code.setValue(null),this.codeField.focus()}))}set message(e){this.message$.next(e)}verify(){Object(B.F)(this.code)&&this.addSub(this.phonesService.verifyPhone({id:this.phone.id,code:this.code.value}).subscribe(e=>{switch(e){case Fe.l.CODE_NOT_SENT:case Fe.l.EXPIRED:this.notification.error(this.i18n.phone.error.verify.expired);break;case Fe.l.FAILED:this.notification.error(this.i18n.phone.error.verify.invalid);break;case Fe.l.MAX_ATTEMPTS_REACHED:this.notification.error(this.i18n.phone.error.verify.maxAttempts);break;case Fe.l.SUCCESS:this.disabled=!0,this.verified.emit(!0)}}))}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.a),b.Nb(r.A))},e.\u0275cmp=b.Hb({type:e,selectors:[["verify-phone"]],viewQuery:function(e,t){var i;1&e&&b.Cc(Ps,!0),2&e&&b.tc(i=b.cc())&&(t.codeField=i.first)},inputs:{phone:"phone"},outputs:{verified:"verified"},features:[b.wb],decls:21,vars:12,consts:[[1,"row"],[1,"col-3","col-form-label"],["for","smsCode"],[1,"col-6"],["id","smsCode","fieldSize","4","type","number","focused","",3,"formControl"],["codeField",""],[1,"col-3"],[1,"btn","btn-primary","d-block","w-100",3,"click"],[1,"mt-3","pb-1"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-outline-primary",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"h1"),b.Hc(1),b.Sb(),b.Tb(2,"div",0),b.Tb(3,"div",1),b.Tb(4,"label",2),b.Hc(5),b.Sb(),b.Sb(),b.Tb(6,"div",3),b.Ob(7,"input-field",4,5),b.Sb(),b.Tb(9,"div",6),b.Tb(10,"button",7),b.bc("click",(function(){return t.sendCode()})),b.Hc(11),b.Sb(),b.Sb(),b.Sb(),b.Tb(12,"div",8),b.Hc(13),b.ec(14,"async"),b.Sb(),b.Tb(15,"actions"),b.Tb(16,"button",9),b.bc("click",(function(){return t.verify()})),b.ec(17,"async"),b.Hc(18),b.Sb(),b.Tb(19,"button",10),b.bc("click",(function(){return t.modalRef.hide()})),b.Hc(20),b.Sb(),b.Sb()),2&e&&(b.zb(1),b.Jc(" ",t.i18n.phone.verify.title(t.phone.number),"\n"),b.zb(4),b.Jc(" ",t.i18n.phone.verify.code," "),b.zb(2),b.kc("formControl",t.code),b.zb(4),b.Jc(" ",t.i18n.phone.verify.send," "),b.zb(2),b.Ic(b.fc(14,8,t.message$)),b.zb(3),b.kc("disabled",b.fc(17,10,t.requesting$)),b.zb(2),b.Jc(" ",t.i18n.general.confirm," "),b.zb(2),b.Jc(" ",t.i18n.general.cancel," "))},directives:[bt.a,Et.a,V.v,V.k,j.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var xs=i("IzEk"),_s=i("SxV6"),Ls=i("pz1b"),Ms=i("pBnU"),Us=i("m98c"),$s=i("sYqu"),Gs=i("f0aj"),Bs=i("FE24"),Js=i("z332"),Vs=i("oj/z");function qs(e,t){if(1&e&&b.Ob(0,"avatar",21),2&e){const e=b.dc(4);b.kc("image",e.images[0])("roundBorders",!1)}}function js(e,t){if(1&e&&(b.Tb(0,"div",22),b.Hc(1),b.Sb()),2&e){const e=b.dc(4);b.zb(1),b.Jc(" ",e.i18n.user.noImage," ")}}function Qs(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(5).removeAllImages()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.field.image.remove," ")}}function Ys(e,t){if(1&e){const e=b.Ub();b.Tb(0,"actions",23),b.Tb(1,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(),b.uc(7).perform()})),b.Hc(2),b.Sb(),b.Fc(3,Qs,2,1,"button",25),b.Sb()}if(2&e){const e=b.dc(4);b.zb(2),b.Jc(" ",e.i18n.field.image.upload," "),b.zb(1),b.kc("ngIf",e.images.length>0)}}function Ks(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"h2",14),b.Hc(2),b.Sb(),b.Tb(3,"div",15),b.Fc(4,qs,1,2,"avatar",16),b.Fc(5,js,2,1,"div",17),b.Sb(),b.Tb(6,"image-upload",18,19),b.bc("uploadDone",(function(t){return b.wc(e),b.dc(3).onUploadDone(t)})),b.Sb(),b.Fc(8,Ys,4,2,"actions",20),b.ec(9,"async"),b.Qb()}if(2&e){const e=b.uc(7),t=b.dc(3);b.zb(2),b.Jc(" ",t.i18n.user.title.image," "),b.zb(2),b.kc("ngIf",t.images.length>0),b.zb(1),b.kc("ngIf",0===t.images.length),b.zb(1),b.kc("owner",t.param),b.zb(2),b.kc("ngIf",t.canEdit("image")&&!1===b.fc(9,5,e.uploading$))}}function Xs(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(),b.uc(11).perform()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(4);b.zb(1),b.Jc(" ",e.i18n.field.image.upload," ")}}function Ws(e,t){if(1&e&&(b.Tb(0,"div",33),b.Ob(1,"avatar",34),b.Sb()),2&e){const e=t.$implicit,i=b.dc(4);b.zb(1),b.kc("image",e)("roundBorders",!1)("additionalImages",i.images)}}function Zs(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",35),b.Hc(2),b.Sb(),b.Qb()),2&e){const e=b.dc(4);b.zb(2),b.Jc(" ",e.i18n.user.noImages," ")}}function eo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",36),b.Tb(1,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(4).manageImages()})),b.Hc(2),b.Sb(),b.Sb()}if(2&e){const e=b.dc(4);b.zb(2),b.Jc(" ",e.i18n.field.image.manage," ")}}function to(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"h2",26),b.Tb(2,"div",27),b.Hc(3),b.Sb(),b.Fc(4,Xs,2,1,"button",25),b.ec(5,"async"),b.Sb(),b.Tb(6,"div",28),b.Fc(7,Ws,2,3,"div",29),b.Fc(8,Zs,3,1,"ng-container",4),b.Sb(),b.Fc(9,eo,3,1,"div",30),b.Tb(10,"image-upload",31,32),b.bc("uploadDone",(function(t){return b.wc(e),b.dc(3).onUploadDone(t)})),b.Sb(),b.Qb()}if(2&e){const e=b.uc(11),t=b.dc(3);b.zb(3),b.Jc(" ",t.i18n.user.title.images," "),b.zb(1),b.kc("ngIf",t.canUploadImages&&!1===b.fc(5,7,e.uploading$)),b.zb(3),b.kc("ngForOf",t.images),b.zb(1),b.kc("ngIf",0===t.images.length),b.zb(1),b.kc("ngIf",t.canEdit("image")&&t.images.length>0),b.zb(1),b.kc("owner",t.param)("max",t.data.imageConfiguration.maxImages)}}function io(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Ks,10,7,"ng-container",4),b.Fc(2,to,12,9,"ng-container",4),b.Qb()),2&e){const e=b.dc(2);b.zb(1),b.kc("ngIf","single"===e.imagesAvailability),b.zb(1),b.kc("ngIf","multiple"===e.imagesAvailability)}}function no(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Ob(1,"user-link",38),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.operatorOwner),b.zb(1),b.kc("user",e.data.userConfiguration.details.user)}}function ao(e,t){if(1&e&&b.Ob(0,"input-field",39),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.name)("required",e.canEdit("name"))}}function so(e,t){if(1&e&&b.Ob(0,"input-field",40),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.username)("required",e.canEdit("username"))}}function oo(e,t){if(1&e&&b.Ob(0,"field-privacy",44),2&e){const e=b.dc(3);b.kc("control",e.user.get("hiddenFields"))}}function ro(e,t){if(1&e&&(b.Tb(0,"label-value",41),b.Ob(1,"input-field",42),b.Fc(2,oo,1,1,"field-privacy",43),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.email)("kind",e.canEdit("email")?"field":"fieldView")("ignoreExtraCell",!e.canManagePrivacy("email")),b.zb(1),b.kc("required",e.canEdit("email"))}}function co(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.emailPending),b.zb(1),b.Jc(" ",e.data.userConfiguration.emailPendingValidation," ")}}function lo(e,t){if(1&e&&b.Ob(0,"custom-field-input",50),2&e){const e=b.dc(2).$implicit,t=b.dc(2);b.kc("field",e)("formControlName",e.internalName)("binaryValues",t.data.userConfiguration.binaryValues)}}function uo(e,t){if(1&e&&b.Ob(0,"format-field-value",51),2&e){const e=b.dc(2).$implicit,t=b.dc(2);b.kc("fieldValue",t.fieldValue(e))}}function bo(e,t){if(1&e&&b.Ob(0,"field-privacy",52),2&e){const e=b.dc(2).$implicit,t=b.dc(2);b.kc("field",e.internalName)("control",t.user.get("hiddenFields"))}}function fo(e,t){if(1&e&&(b.Tb(0,"label-value",46),b.Fc(1,lo,1,3,"custom-field-input",47),b.Fc(2,uo,1,1,"ng-template",null,48,b.Gc),b.Fc(4,bo,1,2,"field-privacy",49),b.Sb()),2&e){const e=b.uc(3),t=b.dc().$implicit,i=b.dc(2);b.kc("label",t.name)("kind",i.canEdit(t)?"field":"fieldView")("labelPosition","boolean"===t.type?"sideForced":"auto")("ignoreExtraCell",!i.canManagePrivacy(t))("fieldSize",i.fieldSize(t))("required",t.required),b.zb(1),b.kc("ngIf",i.canEdit(t))("ngIfElse",e)}}function mo(e,t){if(1&e&&(b.Rb(0,6),b.Fc(1,fo,5,8,"label-value",45),b.Qb()),2&e){const e=t.$implicit,i=b.dc(2);b.kc("formGroup",i.user.get("customValues")),b.zb(1),b.kc("ngIf",i.canEdit(e)||!i.isEmpty(e))}}function po(e,t){if(1&e&&b.Ob(0,"input-field",57),2&e){const e=b.dc(3);b.kc("placeholder",e.data.phoneConfiguration.mobileExample)}}function ho(e,t){if(1&e&&b.Hc(0),2&e){const e=b.dc(3);b.Jc(" ",e.singleMobile.get("number").value," ")}}function go(e,t){if(1&e&&b.Ob(0,"field-privacy",58),2&e){const e=b.dc(3);b.kc("control",e.singleMobile.get("hidden"))}}function vo(e,t){if(1&e&&b.Ob(0,"boolean-field",61),2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.verified)("formControl",e.singleMobile.get("verified"))}}function ko(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Hc(1),b.Sb()),2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.verified),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.singleMobile.get("verified").value)," ")}}function yo(e,t){if(1&e&&(b.Rb(0),b.Fc(1,vo,1,2,"boolean-field",59),b.Fc(2,ko,2,2,"ng-template",null,60,b.Gc),b.Qb()),2&e){const e=b.uc(3),t=b.dc(3);b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e)}}function So(e,t){if(1&e){const e=b.Ub();b.Tb(0,"boolean-field",64),b.bc("click",(function(t){return b.wc(e),b.dc(4).maybeVerify(t)})),b.Sb()}if(2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.enabledSms)("formControl",e.singleMobile.get("enabledForSms"))}}function To(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Hc(1),b.Sb()),2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.enabledSms),b.zb(1),b.Jc(" ",e.format.formatBoolean(e.singleMobile.get("enabledForSms").value)," ")}}function Io(e,t){if(1&e&&(b.Rb(0),b.Fc(1,So,1,2,"boolean-field",62),b.Fc(2,To,2,2,"ng-template",null,63,b.Gc),b.Qb()),2&e){const e=b.uc(3),t=b.dc(3);b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e)}}function Fo(e,t){if(1&e&&(b.Rb(0,6),b.Tb(1,"label-value",53),b.Fc(2,po,1,1,"input-field",54),b.Fc(3,ho,1,1,"ng-template",null,55,b.Gc),b.Fc(5,go,1,1,"field-privacy",56),b.Sb(),b.Fc(6,yo,4,2,"ng-container",4),b.Fc(7,Io,4,2,"ng-container",4),b.Qb()),2&e){const e=b.uc(4),t=b.dc(2);b.kc("formGroup",t.singleMobile),b.zb(1),b.kc("label",t.i18n.phone.mobile)("required","required"===t.data.phoneConfiguration.mobileAvailability)("ignoreExtraCell",!t.canManagePrivacy("phone")),b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e),b.zb(4),b.kc("ngIf",t.phoneHasSms(t.singleMobileManage)),b.zb(1),b.kc("ngIf",t.showEnableForSms(t.singleMobile))}}function zo(e,t){if(1&e&&b.Ob(0,"input-field",57),2&e){const e=b.dc(3);b.kc("placeholder",e.data.phoneConfiguration.landLineExample)}}function Oo(e,t){if(1&e&&b.Hc(0),2&e){const e=b.dc(3);b.Jc(" ",e.singleLandLine.get("number").value," ")}}function Ao(e,t){if(1&e&&b.Ob(0,"field-privacy",58),2&e){const e=b.dc(3);b.kc("control",e.singleLandLine.get("hidden"))}}function Co(e,t){if(1&e&&b.Ob(0,"input-field",66),2&e){const e=b.dc(4);b.kc("label",e.i18n.phone.extension)}}function wo(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Co,1,1,"input-field",65),b.Qb()),2&e){const e=t.ngIf;b.zb(1),b.kc("ngIf",!e.disabled||e.value)}}function Eo(e,t){if(1&e&&(b.Rb(0,6),b.Tb(1,"label-value",53),b.Fc(2,zo,1,1,"input-field",54),b.Fc(3,Oo,1,1,"ng-template",null,55,b.Gc),b.Fc(5,Ao,1,1,"field-privacy",56),b.Sb(),b.Fc(6,wo,2,1,"ng-container",4),b.Qb()),2&e){const e=b.uc(4),t=b.dc(2);b.kc("formGroup",t.singleLandLine),b.zb(1),b.kc("label",t.i18n.phone.landLine)("required","required"===t.data.phoneConfiguration.landLineAvailability)("ignoreExtraCell",!t.canManagePrivacy("address")),b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e),b.zb(4),b.kc("ngIf",t.data.phoneConfiguration.extensionEnabled&&t.singleLandLine.get("extension"))}}function No(e,t){if(1&e&&b.Ob(0,"boolean-field",69),2&e){const e=b.dc(3);b.kc("formControl",e.defineSingleAddress)("label",e.i18n.user.addressDefine)}}function Ro(e,t){if(1&e){const e=b.Ub();b.Tb(0,"static-map",75),b.bc("imageLoaded",(function(){b.wc(e);const t=b.dc(5);return t.mapShown(t.singleAddress)})),b.Sb()}if(2&e){const e=b.dc(5);b.kc("address",e.singleAddress.value)}}function Do(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(6);return t.locateAddress(t.singleAddress)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(6);b.zb(1),b.Jc(" ",e.i18n.general.mapView," ")}}function Po(e,t){if(1&e&&(b.Fc(0,Do,2,1,"button",76),b.ec(1,"async")),2&e){const e=b.dc(5),t=b.uc(4);b.kc("ngIf",!1===b.fc(1,2,e.singleAddress.locating$))("ngIfElse",t)}}function Ho(e,t){if(1&e&&(b.Tb(0,"label-value",72),b.Fc(1,Ro,1,1,"static-map",73),b.Fc(2,Po,2,4,"ng-template",null,74,b.Gc),b.Sb()),2&e){const e=b.uc(3),t=b.dc(4);b.kc("label",t.i18n.general.map),b.zb(1),b.kc("ngIf",null!=t.singleAddress.get("location").value.latitude)("ngIfElse",e)}}function xo(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"address-form",70),b.Fc(2,Ho,4,3,"label-value",71),b.Qb()),2&e){const e=b.dc(3);b.zb(1),b.kc("addressForm",e.singleAddress)("configuration",e.data.addressConfiguration)("managePrivacy",e.data.addressConfiguration.managePrivacy)("binaryValues",e.data.addressBinaryValues[null==e.data.addresses[0]?null:e.data.addresses[0].id]),b.zb(1),b.kc("ngIf",e.maps.enabled)}}function _o(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",67),b.Hc(2),b.Sb(),b.Fc(3,No,1,2,"boolean-field",68),b.Fc(4,xo,3,5,"ng-container",4),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Ic(e.i18n.address.address),b.zb(1),b.kc("ngIf",e.canEdit("address")&&"required"!==e.data.addressConfiguration.availability),b.zb(1),b.kc("ngIf",e.defineSingleAddress.value)}}function Lo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",84,85),b.Tb(2,"button",86),b.bc("click",(function(){return b.wc(e),b.dc(4).addLandLine()})),b.Hc(3),b.Sb(),b.Tb(4,"button",86),b.bc("click",(function(){return b.wc(e),b.dc(4).addMobile()})),b.Hc(5),b.Sb(),b.Sb()}if(2&e){const e=b.dc(4);b.zb(3),b.Jc(" ",e.i18n.user.phoneAddLandLine," "),b.zb(2),b.Jc(" ",e.i18n.user.phoneAddMobile," ")}}function Mo(e,t){if(1&e&&(b.Tb(0,"div",81),b.Tb(1,"button",82),b.Hc(2),b.Sb(),b.Fc(3,Lo,6,2,"div",83),b.Sb()),2&e){const e=b.dc(3);b.zb(2),b.Jc(" ",e.i18n.user.phoneAdd," ")}}function Uo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",87),b.Tb(1,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(3).addLandLine()})),b.Hc(2),b.Sb(),b.Sb()}if(2&e){const e=b.dc(3);b.zb(2),b.Jc(" ",e.i18n.user.phoneAddLandLine," ")}}function $o(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",87),b.Tb(1,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(3).addMobile()})),b.Hc(2),b.Sb(),b.Sb()}if(2&e){const e=b.dc(3);b.zb(2),b.Jc(" ",e.i18n.user.phoneAddMobile," ")}}function Go(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.user.phoneNone," ")}}function Bo(e,t){if(1&e&&b.Ob(0,"input-field",66),2&e){const e=b.dc(5);b.kc("label",e.i18n.phone.extension)}}function Jo(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Bo,1,1,"input-field",65),b.Qb()),2&e){const e=t.ngIf;b.zb(1),b.kc("ngIf",!e.disabled||e.value)}}function Vo(e,t){if(1&e&&b.Ob(0,"boolean-field",92),2&e){const e=b.dc(5);b.kc("label",e.i18n.phone.verified)}}function qo(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Hc(1),b.Sb()),2&e){const e=b.dc(2).$implicit,t=b.dc(3);b.kc("label",t.i18n.phone.verified),b.zb(1),b.Jc(" ",t.format.formatBoolean(e.verified)," ")}}function jo(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Vo,1,1,"boolean-field",91),b.Fc(2,qo,2,2,"ng-template",null,60,b.Gc),b.Qb()),2&e){const e=b.uc(3),t=b.dc(4);b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e)}}function Qo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"boolean-field",94),b.bc("click",(function(t){b.wc(e);const i=b.dc(2).$implicit;return b.dc(3).maybeVerify(t,i.id)})),b.Sb()}if(2&e){const e=b.dc(5);b.kc("label",e.i18n.phone.enabledSms)}}function Yo(e,t){if(1&e&&(b.Tb(0,"label-value",37),b.Hc(1),b.Sb()),2&e){const e=b.dc(2).$implicit,t=b.dc(3);b.kc("label",t.i18n.phone.enabledSms),b.zb(1),b.Jc(" ",t.format.formatBoolean(e.enabledForSms)," ")}}function Ko(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Qo,1,1,"boolean-field",93),b.Fc(2,Yo,2,2,"ng-template",null,63,b.Gc),b.Qb()),2&e){const e=b.uc(3),t=b.dc(4);b.zb(1),b.kc("ngIf",t.canEdit("phone"))("ngIfElse",e)}}function Xo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).removePhone(t)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.user.phoneRemove," ")}}function Wo(e,t){if(1&e&&(b.Tb(0,"label-value",72),b.Tb(1,"div",95),b.Ob(2,"field-privacy",96),b.Fc(3,Xo,2,1,"button",97),b.ec(4,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.field.privacy.name),b.zb(2),b.kc("control",e.form.get("hidden")),b.zb(1),b.kc("ngIf",t.editableFields.has("phone")&&b.fc(4,3,t.layout.gtxxs$))}}function Zo(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).removePhone(t)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.user.phoneRemove," ")}}const er=function(e){return{"mt-3":e}};function tr(e,t){if(1&e&&(b.Tb(0,"div",98),b.Fc(1,Zo,2,1,"button",97),b.Sb()),2&e){const e=b.dc(4);b.kc("ngClass",b.nc(2,er,!e.data.phoneConfiguration.managePrivacy)),b.zb(1),b.kc("ngIf",e.editableFields.has("phone"))}}function ir(e,t){1&e&&b.Ob(0,"hr")}function nr(e,t){if(1&e&&(b.Rb(0,6),b.Ob(1,"input-field",88),b.Ob(2,"input-field",89),b.Fc(3,Jo,2,1,"ng-container",4),b.Fc(4,jo,4,2,"ng-container",4),b.Fc(5,Ko,4,2,"ng-container",4),b.Fc(6,Wo,5,5,"label-value",71),b.Fc(7,tr,2,4,"div",90),b.ec(8,"async"),b.Fc(9,ir,1,0,"hr",4),b.Qb()),2&e){const e=t.$implicit,i=t.last,n=b.dc(3);b.kc("formGroup",e.form),b.zb(1),b.kc("id","phone_name"+e.idSuffix)("label",n.phoneNameLabel(e)),b.zb(1),b.kc("id","phone_number"+e.idSuffix)("label",n.phoneNumberLabel(e))("placeholder",n.phoneExample(e)),b.zb(1),b.kc("ngIf",n.hasExtension(e)&&e.form.get("extension")),b.zb(1),b.kc("ngIf","mobile"===e.kind&&n.phoneHasSms(e.form)),b.zb(1),b.kc("ngIf","mobile"===e.kind&&n.showEnableForSms(e.form)),b.zb(1),b.kc("ngIf",n.canManagePrivacy("phone")),b.zb(1),b.kc("ngIf",b.fc(8,12,n.layout.xxs$)||!n.data.phoneConfiguration.managePrivacy),b.zb(2),b.kc("ngIf",!i)}}function ar(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",78),b.Tb(2,"div",27),b.Hc(3),b.Sb(),b.Fc(4,Mo,4,1,"div",79),b.Fc(5,Uo,3,1,"div",80),b.Fc(6,$o,3,1,"div",80),b.Sb(),b.Fc(7,Go,2,1,"div",4),b.Fc(8,nr,10,14,"ng-container",11),b.Qb()),2&e){const e=b.dc(2);b.zb(3),b.Jc(" ",e.i18n.user.title.phones," "),b.zb(1),b.kc("ngIf",e.canCreateLandLine&&e.canCreateMobile),b.zb(1),b.kc("ngIf",e.canCreateLandLine&&!e.canCreateMobile),b.zb(1),b.kc("ngIf",!e.canCreateLandLine&&e.canCreateMobile),b.zb(1),b.kc("ngIf",0==e.phones.length),b.zb(1),b.kc("ngForOf",e.phones)}}function sr(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(3).addAddress()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.user.addressAdd," ")}}function or(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.user.addressNone," ")}}function rr(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).removeAddress(t)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.user.addressRemove," ")}}function cr(e,t){if(1&e&&(b.Tb(0,"label-value",72),b.Tb(1,"div",95),b.Ob(2,"field-privacy",96),b.Fc(3,rr,2,1,"button",97),b.ec(4,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.field.privacy.name),b.zb(2),b.kc("control",e.form.get("hidden")),b.zb(1),b.kc("ngIf",t.editableFields.has("address")&&!t.maps.enabled&&b.fc(4,3,t.layout.gtxxs$))}}function lr(e,t){1&e&&b.Pb(0)}function ur(e,t){if(1&e){const e=b.Ub();b.Tb(0,"label-value",102),b.Tb(1,"static-map",75),b.bc("imageLoaded",(function(){b.wc(e);const t=b.dc().$implicit;return b.dc(3).mapShown(t.form)})),b.Sb(),b.Fc(2,lr,1,0,"ng-container",103),b.ec(3,"async"),b.Sb()}if(2&e){const e=b.dc().$implicit,t=b.dc(3),i=b.uc(4);b.kc("label",t.i18n.general.map),b.zb(1),b.kc("address",e.form.value),b.zb(1),b.kc("ngIf",b.fc(3,4,e.form.locating$))("ngIfThen",i)}}function dr(e,t){1&e&&b.Ob(0,"div",108)}function br(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).removeAddress(t)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.user.addressRemove," ")}}function fr(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Ob(1,"div",109),b.Tb(2,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).locateAddress(t.form)})),b.Hc(3),b.Sb(),b.Qb()}if(2&e){const e=b.dc(5);b.zb(3),b.Jc(" ",e.i18n.general.mapView," ")}}function mr(e,t){if(1&e&&(b.Tb(0,"div",104),b.Fc(1,dr,1,0,"div",105),b.ec(2,"async"),b.Tb(3,"div",106),b.Tb(4,"actions",107),b.Fc(5,br,2,1,"button",97),b.Fc(6,fr,4,1,"ng-container",4),b.ec(7,"async"),b.Sb(),b.Sb(),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.zb(1),b.kc("ngIf",b.fc(2,3,t.layout.gtxs$)),b.zb(4),b.kc("ngIf",t.editableFields.has("address")),b.zb(1),b.kc("ngIf",null==e.form.get("location").value.latitude&&!1===b.fc(7,5,e.form.locating$))}}function pr(e,t){1&e&&b.Ob(0,"hr")}function hr(e,t){if(1&e&&(b.Rb(0,6),b.Ob(1,"input-field",88),b.Ob(2,"address-form",99),b.Fc(3,cr,5,5,"label-value",71),b.Fc(4,ur,4,6,"label-value",100),b.ec(5,"async"),b.Fc(6,mr,8,7,"div",101),b.ec(7,"async"),b.Fc(8,pr,1,0,"hr",4),b.Qb()),2&e){const e=t.$implicit,i=t.last,n=b.dc(3);b.kc("formGroup",e.form),b.zb(1),b.kc("id","address_name"+e.idSuffix)("label",n.i18n.general.name),b.zb(1),b.kc("addressForm",e.form)("ignoreContactFields",1===n.addresses.length)("configuration",n.data.addressConfiguration)("idSuffix",e.idSuffix)("managePrivacy",!1)("binaryValues",n.data.addressBinaryValues[e.id]),b.zb(1),b.kc("ngIf",n.canManagePrivacy("address")),b.zb(1),b.kc("ngIf",n.maps.enabled&&(null!=e.form.get("location").value.latitude||b.fc(5,13,e.form.locating$))),b.zb(2),b.kc("ngIf",n.maps.enabled||b.fc(7,15,n.layout.xxs$)||!n.data.addressConfiguration.managePrivacy),b.zb(2),b.kc("ngIf",!i)}}function gr(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",78),b.Tb(2,"div",27),b.Hc(3),b.Sb(),b.Tb(4,"div",87),b.Fc(5,sr,2,1,"button",25),b.Sb(),b.Sb(),b.Fc(6,or,2,1,"div",4),b.Fc(7,hr,9,17,"ng-container",11),b.Qb()),2&e){const e=b.dc(2);b.zb(3),b.Jc(" ",e.i18n.user.title.addresses," "),b.zb(2),b.kc("ngIf",e.canCreateAddress),b.zb(1),b.kc("ngIf",0==e.data.addresses.length),b.zb(1),b.kc("ngForOf",e.addresses)}}function vr(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",24),b.bc("click",(function(){return b.wc(e),b.dc(3).addContactInfo()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.user.contactInfoAdd," ")}}function kr(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Jc(" ",e.i18n.user.contactInfoNone," ")}}function yr(e,t){if(1&e&&b.Ob(0,"input-field",118),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("id","contact-info_landLineExtension"+e.idSuffix)("label",t.i18n.phone.extension)}}function Sr(e,t){if(1&e&&b.Ob(0,"field-option",120),2&e){const e=b.dc().$implicit;b.kc("value",e.id)("text",e.name)}}function Tr(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Sr,1,2,"field-option",119),b.Qb()),2&e){const e=t.$implicit;b.zb(1),b.kc("ngIf",e.id)}}function Ir(e,t){if(1&e&&(b.Rb(0,6),b.Ob(1,"custom-field-input",121),b.Qb()),2&e){const e=t.$implicit,i=b.dc().$implicit,n=b.dc(3);b.kc("formGroup",i.form.get("customValues")),b.zb(1),b.kc("field",e)("formControlName",e.internalName)("binaryValues",n.data.contactInfoBinaryValues[i.id])}}function Fr(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc(2).$implicit;return b.dc(3).removeContactInfo(t)})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(5);b.zb(1),b.Jc(" ",e.i18n.user.contactInfoRemove," ")}}function zr(e,t){if(1&e&&(b.Tb(0,"label-value",72),b.Tb(1,"div",95),b.Ob(2,"field-privacy",96),b.Fc(3,Fr,2,1,"button",97),b.ec(4,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(3);b.kc("label",t.i18n.field.privacy.name),b.zb(2),b.kc("control",e.form.get("hidden")),b.zb(1),b.kc("ngIf",b.fc(4,3,t.layout.gtxxs$))}}function Or(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",36),b.Tb(1,"button",77),b.bc("click",(function(){b.wc(e);const t=b.dc().$implicit;return b.dc(3).removeContactInfo(t)})),b.Hc(2),b.Sb(),b.Sb()}if(2&e){const e=b.dc(4);b.zb(2),b.Jc(" ",e.i18n.user.contactInfoRemove," ")}}function Ar(e,t){1&e&&b.Ob(0,"hr")}function Cr(e,t){if(1&e&&(b.Rb(0,6),b.Ob(1,"images-field",110),b.Ob(2,"input-field",111),b.Ob(3,"input-field",112),b.Ob(4,"input-field",113),b.Ob(5,"input-field",114),b.Fc(6,yr,1,2,"input-field",115),b.Tb(7,"single-selection-field",116),b.Fc(8,Tr,2,1,"ng-container",117),b.Sb(),b.Fc(9,Ir,2,4,"ng-container",11),b.Fc(10,zr,5,5,"label-value",71),b.Fc(11,Or,3,1,"div",30),b.ec(12,"async"),b.Fc(13,Ar,1,0,"hr",4),b.Qb()),2&e){const e=t.$implicit,i=t.last,n=b.dc(3);b.kc("formGroup",e.form),b.zb(1),b.kc("label",n.i18n.general.image)("initialImages",null==n.data.contactInfoBinaryValues[e.id]?null:n.data.contactInfoBinaryValues[e.id].image),b.zb(1),b.kc("id","contact-info_name"+e.idSuffix)("label",n.i18n.general.name),b.zb(1),b.kc("id","contact-info_email"+e.idSuffix)("label",n.i18n.user.email),b.zb(1),b.kc("id","contact-info_mobilePhone"+e.idSuffix)("label",n.i18n.phone.mobile),b.zb(1),b.kc("id","contact-info_landLinePhone"+e.idSuffix)("label",n.i18n.phone.landLine),b.zb(1),b.kc("ngIf",n.data.phoneConfiguration.extensionEnabled),b.zb(1),b.kc("id","contact-info_address"+e.idSuffix)("label",n.i18n.address.address),b.zb(1),b.kc("ngForOf",n.data.addresses),b.zb(1),b.kc("ngForOf",n.data.contactInfoConfiguration.customFields),b.zb(1),b.kc("ngIf",n.canManagePrivacy("contactInfo")),b.zb(1),b.kc("ngIf",b.fc(12,19,n.layout.xxs$)||!n.data.contactInfoConfiguration.managePrivacy),b.zb(2),b.kc("ngIf",!i)}}function wr(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",78),b.Tb(2,"div",27),b.Hc(3),b.Sb(),b.Tb(4,"div",87),b.Fc(5,vr,2,1,"button",25),b.Sb(),b.Sb(),b.Fc(6,kr,2,1,"div",4),b.Fc(7,Cr,14,21,"ng-container",11),b.Qb()),2&e){const e=b.dc(2);b.zb(3),b.Jc(" ",e.i18n.user.title.contactInfos," "),b.zb(2),b.kc("ngIf",e.canCreateContactInfo),b.zb(1),b.kc("ngIf",0==e.contactInfos.length),b.zb(1),b.kc("ngForOf",e.contactInfos)}}function Er(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Fc(2,io,3,2,"ng-container",4),b.Tb(3,"h2",5),b.Hc(4),b.Sb(),b.Rb(5,6),b.Fc(6,no,2,2,"label-value",7),b.Fc(7,ao,1,2,"input-field",8),b.Fc(8,so,1,2,"input-field",9),b.Fc(9,ro,3,4,"label-value",10),b.Fc(10,co,2,2,"label-value",7),b.Qb(),b.Fc(11,mo,2,2,"ng-container",11),b.Fc(12,Fo,8,8,"ng-container",12),b.Fc(13,Eo,7,7,"ng-container",12),b.Fc(14,_o,5,3,"ng-container",4),b.Fc(15,ar,9,6,"ng-container",4),b.Fc(16,gr,8,4,"ng-container",4),b.Fc(17,wr,8,4,"ng-container",4),b.Tb(18,"actions"),b.Tb(19,"button",13),b.bc("click",(function(){return b.wc(e),b.dc().saveOrConfirm()})),b.ec(20,"async"),b.Hc(21),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.editProfile)("mobileHeading",e.i18n.user.mobileTitle.editProfile)("headingActions",b.fc(1,21,e.headingActions$)),b.zb(2),b.kc("ngIf","disabled"!==e.imagesAvailability),b.zb(1),b.kc("ngClass","disabled"===e.imagesAvailability?"border-0 mt-2 mt-md-0":null),b.zb(1),b.Jc(" ",e.i18n.user.title.fields," "),b.zb(1),b.kc("formGroup",e.user),b.zb(1),b.kc("ngIf",e.operatorOfManagedUser),b.zb(1),b.kc("ngIf",e.hasField("name")),b.zb(1),b.kc("ngIf",e.hasField("username")),b.zb(1),b.kc("ngIf",e.hasField("email")),b.zb(1),b.kc("ngIf",e.hasField("email")&&e.data.userConfiguration.emailPendingValidation),b.zb(1),b.kc("ngForOf",null==e.data.userConfiguration?null:e.data.userConfiguration.customFields),b.zb(1),b.kc("ngIf",e.singleMobile),b.zb(1),b.kc("ngIf",e.singleLandLine),b.zb(1),b.kc("ngIf",e.singleAddress),b.zb(1),b.kc("ngIf","multiple"===e.landLineAvailability||"multiple"===e.mobileAvailability),b.zb(1),b.kc("ngIf","multiple"===e.addressAvailability),b.zb(1),b.kc("ngIf","disabled"!==e.contactInfoAvailability),b.zb(2),b.kc("disabled",b.fc(20,23,e.requesting$)),b.zb(2),b.Jc(" ",e.i18n.general.save," ")}}function Nr(e,t){1&e&&b.Ob(0,"spinner")}const Rr=["name","username","email"];let Dr=0,Pr=(()=>{class e extends ze.a{constructor(e,t,i,n,a,s,o){super(e),this.usersService=t,this.imagesService=i,this.phonesService=n,this.addressHelper=a,this.modal=s,this.changeDetector=o,this.ConfirmationMode=Rs.a,this.ready$=new ut.a(!1),this.confirmationMode$=new ut.a(null),this.createLandLinePhones=[],this.modifyLandLinePhones=[],this.createMobilePhones=[],this.modifyMobilePhones=[],this.createAddresses=[],this.modifyAddresses=[],this.createContactInfos=[],this.modifyContactInfos=[]}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||be.a.SELF,this.createDeviceConfirmation=()=>({type:Fe.s.EDIT_PROFILE}),this.headingActions=[new G.c("search",this.i18n.general.view,()=>this.router.navigate(["users",this.param,"profile"]),!0)],this.addSub(this.usersService.getDataForEditFullProfile({user:this.param}).subscribe(e=>{this.data=e;const t=e.userConfiguration.role,i=e.userConfiguration.details,n=this.authHelper.isSelf(i);this.byManager=!this.authHelper.isSelfOrOwner(i),this.operatorOfManagedUser="operator"===t&&!this.authHelper.isSelf(i.user),n&&this.login.user$.next({id:this.login.user.id,display:e.userConfiguration.details.display,image:Object(B.h)(e.images)?null:e.images[0]}),this.initialize(e),this.canConfirm=this.authHelper.canConfirm(e.confirmationPasswordInput),this.canConfirm||(this.notification.warning(this.authHelper.getConfirmationMessage(e.confirmationPasswordInput)),this.router.navigate(["users","profile"])),this.ready$.next(!0)}))}locateControl(e){return Object(B.t)(this,e)}hasField(e){return this.enabledFields.has(e)}isRequired(e){if(!this.canEdit(e))return!1;if("name"===e||"username"===e)return!0;if("email"===e)return this.data.userConfiguration.emailRequired;{const t=this.userCustomFields.get(e);return t&&t.required}}fieldName(e){return"string"==typeof e?e:e.internalName}isEmpty(e){const t=this.fieldName(e);if("string"==typeof e)return Object(B.h)(this.user.get(t).value);{const e=this.user.get("customValues");return!e||Object(B.h)(e.get(t).value)}}canEdit(e){return this.editableFields.has(this.fieldName(e))}canManagePrivacy(e){if(!this.data.userConfiguration.enablePrivacy)return!1;switch(e){case"phone":return this.data.phoneConfiguration.managePrivacy;case"address":return this.data.addressConfiguration.managePrivacy;case"contactInfo":return this.data.contactInfoConfiguration.managePrivacy;default:return this.managePrivacyFields.has(this.fieldName(e))}}get landLineAvailability(){return this.getAvailability((this.data.phoneConfiguration||{}).maxLandLines)}get mobileAvailability(){return this.getAvailability((this.data.phoneConfiguration||{}).maxMobiles)}get addressAvailability(){return this.getAvailability((this.data.addressConfiguration||{}).maxAddresses)}get contactInfoAvailability(){return this.getAvailability((this.data.contactInfoConfiguration||{}).maxContactInfos)}get imagesAvailability(){return this.getAvailability((this.data.imageConfiguration||{}).maxImages)}getAvailability(e){return null==e||e<=0?"disabled":1===e?"single":"multiple"}saveOrConfirm(){this.data.confirmationPasswordInput?this.notification.confirm({title:this.i18n.user.title.confirmation,passwordInput:this.data.confirmationPasswordInput,createDeviceConfirmation:this.createDeviceConfirmation,callback:e=>{this.save(e.confirmationPassword)}}):this.save()}save(e){const t=new V.m({user:this.user,createLandLinePhones:new V.g(this.createLandLinePhones),modifyLandLinePhones:new V.g(this.modifyLandLinePhones),createMobilePhones:new V.g(this.createMobilePhones),modifyMobilePhones:new V.g(this.modifyMobilePhones),createAddresses:new V.g(this.createAddresses),modifyAddresses:new V.g(this.modifyAddresses),createContactInfos:new V.g(this.createContactInfos),modifyContactInfos:new V.g(this.modifyContactInfos)});!e&&this.confirmationPassword&&(t.setControl("confirmationPassword",this.confirmationPassword),e=this.confirmationPassword.value),Object(B.F)(t)&&this.addSub(this.usersService.saveUserFullProfile({user:this.param,confirmationPassword:e,body:this.editForSubmit()}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profileSaved),this.reload(),Object(B.y)()}))}editForSubmit(){const e={user:Object(B.s)(this.user)?this.user.value:null,createLandLinePhones:this.createLandLinePhones.map(e=>e.value),modifyLandLinePhones:this.modifyLandLinePhones.map(e=>e.value),createMobilePhones:this.createMobilePhones.map(e=>e.value),modifyMobilePhones:this.modifyMobilePhones.map(e=>e.value),removePhones:this.removedPhones,createAddresses:this.createAddresses.map(e=>e.value),modifyAddresses:this.modifyAddresses.map(e=>e.value),removeAddresses:this.removedAddresses,createContactInfos:this.createContactInfos.map(e=>e.value),modifyContactInfos:this.modifyContactInfos.map(e=>e.value),removeContactInfos:this.removedContactInfos};if("single"===this.mobileAvailability){const t=this.singleMobile.value,i=t.id;i?Object(B.h)(t.number)?e.removePhones.push(i):Object(B.s)(this.singleMobile)&&(e.modifyMobilePhones=[t]):Object(B.h)(t.number)||(e.createMobilePhones=[t])}if("single"===this.landLineAvailability){const t=this.singleLandLine.value,i=t.id;i?Object(B.h)(t.number)?e.removePhones.push(i):Object(B.s)(this.singleLandLine)&&(e.modifyLandLinePhones=[t]):Object(B.h)(t.number)||(e.createLandLinePhones=[t])}if("single"===this.addressAvailability){const t=this.singleAddress.value,i=t.id,n=this.defineSingleAddress.value;i?n?Object(B.s)(this.singleAddress)&&(e.modifyAddresses=[t]):e.removeAddresses.push(i):n&&(e.createAddresses=[t])}return e}initialize(e){this.userCustomFields=new Map,this.enabledFields=new Set,this.editableFields=new Set,this.managePrivacyFields=new Set,this.removedPhones=[],this.removedAddresses=[],this.removedContactInfos=[],e.contactInfoConfiguration&&e.contactInfoConfiguration.availability!==Fe.i.DISABLED&&(e.addressConfiguration.contactInfoEnabled=!0,e.addressConfiguration.contactInfoFields=e.contactInfoConfiguration.customFields);const t=e.userConfiguration.profileFieldActions;for(const i in t){if(!t.hasOwnProperty(i))continue;this.enabledFields.add(i);const e=t[i];e.edit&&this.editableFields.add(i),e.managePrivacy&&this.managePrivacyFields.add(i);const n=this.data.userConfiguration.customFields.find(e=>e.internalName===i);n&&this.userCustomFields.set(i,n)}this.user=this.buildUserForm(),e.confirmationPasswordInput&&(this.confirmationPassword=this.formBuilder.control("",V.G.required)),this.images=this.data.images.slice(),this.phones=[],"single"===this.mobileAvailability?(this.singleMobileManage=Object(B.h)(e.mobilePhones)?e.phoneConfiguration.mobilePhone:e.mobilePhones[0],this.singleMobile=this.buildMobileForm(this.singleMobileManage)):(e.mobilePhones||[]).forEach(e=>{const t=this.buildMobileForm(e);"multiple"===this.mobileAvailability&&(this.phones.push(e),this.addSub(t.valueChanges.subscribe(()=>{this.modifyMobilePhones.includes(t)||this.modifyMobilePhones.push(t)})))}),"single"===this.landLineAvailability?(this.singleLandLineManage=Object(B.h)(e.landLinePhones)?e.phoneConfiguration.landLinePhone:e.landLinePhones[0],this.singleLandLine=this.buildLandLineForm(this.singleLandLineManage)):(e.landLinePhones||[]).forEach(e=>{const t=this.buildLandLineForm(e);"multiple"===this.landLineAvailability&&(this.phones.push(e),this.addSub(t.valueChanges.subscribe(()=>{this.modifyLandLinePhones.includes(t)||this.modifyLandLinePhones.push(t)})))}),"single"===this.addressAvailability?(this.defineSingleAddress=this.formBuilder.control(!Object(B.h)(e.addresses)||"required"===e.addressConfiguration.availability),this.singleAddressManage=Object(B.h)(e.addresses)?e.addressConfiguration.address:e.addresses[0],this.singleAddress=this.buildAddressForm(this.singleAddressManage)):((e.addresses||[]).forEach(e=>{const t=this.buildAddressForm(e);"multiple"===this.addressAvailability&&this.addSub(t.valueChanges.subscribe(()=>{this.modifyAddresses.includes(t)||this.modifyAddresses.push(t)}))}),this.addresses=(e.addresses||[]).slice()),(e.contactInfos||[]).forEach(e=>{const t=this.buildContactInfoForm(e);this.addSub(t.valueChanges.subscribe(()=>{this.modifyContactInfos.includes(t)||this.modifyContactInfos.push(t)}))}),this.contactInfos=(e.contactInfos||[]).slice()}buildUserForm(){const e=this.data.userConfiguration,t=this.data.user,i=this.formBuilder.group({version:t.version,hiddenFields:[t.hiddenFields||[]]});for(const n of Rr)this.hasField(n)?i.setControl(n,this.formBuilder.control({value:t[n],disabled:!this.canEdit(n)},this.isRequired(n)?V.G.required:null)):i.removeControl(n);return i.setControl("customValues",this.fieldHelper.customValuesFormGroup(e.customFields,{currentValues:t.customValues,disabledProvider:e=>!this.canEdit(e.internalName)})),i}stampDataAndInitForm(e,t){e.idSuffix=`_${e.id||Dr++}`,e.form=t,t.locating$=new ut.a(!1),t.patchValue(e)}buildLandLineForm(e){e.kind=Fe.X.LAND_LINE;const t=this.data.phoneConfiguration,i=this.buildPhoneForm(1===t.maxLandLines,t.landLineAvailability===Fe.i.REQUIRED);if(t.extensionEnabled){const e=this.formBuilder.control(null);this.editableFields.has("phone")||e.disable(),i.setControl("extension",e)}return this.stampDataAndInitForm(e,i),i}buildMobileForm(e){e.kind=Fe.X.MOBILE;const t=this.data.phoneConfiguration,i=this.buildPhoneForm(1===t.maxMobiles,t.mobileAvailability===Fe.i.REQUIRED);return t.smsEnabled&&(i.setControl("verified",this.formBuilder.control(e.verified)),i.setControl("enabledForSms",this.formBuilder.control(e.enabledForSms))),this.stampDataAndInitForm(e,i),i}buildPhoneForm(e,t){const i=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,V.G.required],number:[null,!e||t?V.G.required:null]});return this.editableFields.has("phone")||i.disable(),i}buildAddressForm(e){const t=this.data.addressConfiguration,i=this.addressHelper.addressFormGroup(t);this.stampDataAndInitForm(e,i);for(const n of t.enabledFields){let t=e[n]||null;this.addSub(i.get(n).valueChanges.subscribe(e=>{t!==e&&i.get("location").patchValue({latitude:null,longitude:null}),t=e}))}return this.editableFields.has("address")||i.disable(),i}buildContactInfoForm(e){const t=this.data.contactInfoConfiguration,i=this.formBuilder.group({id:null,version:null,hidden:null,name:[null,V.G.required],image:null,email:null,mobilePhone:null,landLinePhone:null,landLineExtension:null,address:null});return i.setControl("customValues",this.fieldHelper.customValuesFormGroup(t.customFields)),this.stampDataAndInitForm(e,i),i}phoneNameLabel(e){return e.kind===Fe.X.LAND_LINE?this.i18n.phone.nameLandLine:this.i18n.phone.nameMobile}phoneExample(e){return e.kind===Fe.X.LAND_LINE?this.data.phoneConfiguration.landLineExample:this.data.phoneConfiguration.mobileExample}phoneNumberLabel(e){return e.kind===Fe.X.LAND_LINE?this.i18n.phone.numberLandLine:this.i18n.phone.numberMobile}phoneHasSms(e){return!!this.data.phoneConfiguration.smsEnabled&&e.id&&e.kind===Fe.X.MOBILE&&e.number===e.form.value.number}hasExtension(e){return this.data.phoneConfiguration.extensionEnabled&&e.kind===Fe.X.LAND_LINE}get canCreateLandLine(){if("multiple"!==this.landLineAvailability||!this.editableFields.has("phone"))return!1;const e=this.data.phoneConfiguration.maxLandLines;return this.phones.filter(e=>e.kind===Fe.X.LAND_LINE).length<e}get canCreateMobile(){if("multiple"!==this.mobileAvailability||!this.editableFields.has("phone"))return!1;const e=this.data.phoneConfiguration.maxMobiles;return this.phones.filter(e=>e.kind===Fe.X.MOBILE).length<e}get canCreateAddress(){return!("multiple"!==this.addressAvailability||!this.editableFields.has("address"))&&this.addresses.length<this.data.addressConfiguration.maxAddresses}get canCreateContactInfo(){return"multiple"===this.contactInfoAvailability&&this.contactInfos.length<this.data.contactInfoConfiguration.maxContactInfos}get canUploadImages(){return this.images.length<this.data.imageConfiguration.maxImages}addMobile(){const e=Object(lt.cloneDeep)(this.data.phoneConfiguration.mobilePhone);e.name="",this.createMobilePhones.push(this.buildMobileForm(e)),this.phones=[e,...this.phones],this.setFocus("phone_name",e)}addLandLine(){const e=Object(lt.cloneDeep)(this.data.phoneConfiguration.landLinePhone);e.name="",this.createLandLinePhones.push(this.buildLandLineForm(e)),this.phones=[e,...this.phones],this.setFocus("phone_name",e)}addAddress(){const e=Object(lt.cloneDeep)(this.data.addressConfiguration.address);e.name="",this.createAddresses.push(this.buildAddressForm(e)),this.addresses=[e,...this.addresses],this.setFocus("address_name",e)}addContactInfo(){const e=Object(lt.cloneDeep)(this.data.contactInfoConfiguration.contactInfo);this.createContactInfos.push(this.buildContactInfoForm(e)),this.contactInfos=[e,...this.contactInfos],this.setFocus("contact-info_name",e)}removePhone(e){this.phones=this.phones.filter(t=>t!==e);const t=e.id;if(t)this.removedPhones.push(t);else{const t=e.form;this.createMobilePhones=this.createMobilePhones.filter(e=>e!==t),this.createLandLinePhones=this.createLandLinePhones.filter(e=>e!==t)}}removeAddress(e){this.addresses=this.addresses.filter(t=>t!==e);const t=e.id;if(t)this.removedAddresses.push(t);else{const t=e.form;this.createAddresses=this.createAddresses.filter(e=>e!==t)}}removeContactInfo(e){this.contactInfos=this.contactInfos.filter(t=>t!==e);const t=e.id;if(t)this.removedContactInfos.push(t);else{const t=e.form;this.createContactInfos=this.createContactInfos.filter(e=>e!==t)}}setFocus(e,t){const i=e+t.idSuffix;setTimeout(()=>document.getElementById(i).focus(),10)}showEnableForSms(e){return!!this.data.phoneConfiguration.smsEnabled&&(!this.byManager||e.value.verified)}maybeVerify(e,t){if(this.byManager)return;let i;if(i=this.singleMobile?this.singleMobileManage:this.phones.find(e=>e.id===t),null==i)throw new Error(`Mobile phone not found: ${t}`);i.verified||(this.verify(i),e.preventDefault(),e.stopPropagation())}verify(e){const t=this.modal.show(Hs,{class:"modal-form",initialState:{phone:e}});this.addSub(t.content.verified.pipe(Object(xs.a)(1)).subscribe(i=>{i&&this.phonesService.getPhoneDataForEdit({id:e.id,fields:["phone"]}).subscribe(i=>{const n=i.phone;n.id=e.id,n.enabledForSms=!0;const a=this.buildMobileForm(n);a.markAsTouched();const s=(this.phones||[]).findIndex(t=>t.id===e.id);if(s>=0){const t=this.phones.slice();t[s]=n,this.phones=t;const i=this.modifyMobilePhones.findIndex(t=>t.value.id===e.id),o=this.modifyMobilePhones.slice();i>=0?o[i]=a:o.push(a),this.modifyMobilePhones=o}this.singleMobile&&(this.singleMobile=a),t.hide(),this.changeDetector.detectChanges()})}))}onUploadDone(e){this.images=[...this.images,...e],this.changeDetector.detectChanges()}manageImages(){const e=this.modal.show(Ds.a,{class:"modal-form",initialState:{images:this.images}});e.content.result.pipe(Object(_s.a)()).subscribe(t=>{if(!Object(B.h)(t.removedImages)){for(const e of t.removedImages)this.addSub(this.imagesService.deleteImage({idOrKey:e}).subscribe());this.images=this.images.filter(e=>!t.removedImages.includes(e.id))}!Object(B.h)(t.order)&&(this.images=t.order.map(e=>this.images.find(t=>t.id===e)),this.addSub(this.imagesService.reorderProfileImages({ids:t.order,user:this.param}).subscribe())),e.hide()})}removeAllImages(){for(const e of this.images||[])this.addSub(this.imagesService.deleteImage({idOrKey:e.id}).subscribe());this.images=[],this.changeDetector.detectChanges()}fieldSize(e){return this.fieldHelper.fieldSize(e)}locateAddress(e){const t=e.value;e.locating$.next(!0),this.addSub(this.maps.geocode(t).subscribe(t=>{e.patchValue({location:t}),this.changeDetector.detectChanges()},()=>this.mapShown(e)))}mapShown(e){e.locating$.next(!1),this.changeDetector.detectChanges()}resolveMenu(e){return this.authHelper.userMenu(e.userConfiguration.details,d.b.EDIT_MY_PROFILE)}fieldValue(e){const t=this.user.get("customValues").get(e.internalName).value;return this.fieldHelper.asFieldValue(e,t,this.data.userConfiguration.binaryValues)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.K),b.Nb(r.p),b.Nb(r.A),b.Nb(Ns.a),b.Nb(f.b),b.Nb(b.h))},e.\u0275cmp=b.Hb({type:e,selectors:[["edit-profile"]],features:[b.wb],decls:5,vars:4,consts:[[3,"ready"],["last","",3,"heading","mobileHeading","headingActions",4,"ngIf"],["locatingSpinner",""],["last","",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[1,"mt-4","mb-2",3,"ngClass"],[3,"formGroup"],["kind","fieldView",3,"label",4,"ngIf"],["formControlName","name",3,"label","required",4,"ngIf"],["formControlName","username",3,"label","required",4,"ngIf"],[3,"label","kind","ignoreExtraCell",4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[1,"btn","btn-primary","btn-main",3,"disabled","click"],[1,"mb-3","border-0","mt-2","mt-md-0"],[1,"d-flex","justify-content-center","justify-content-sm-start"],["size","huge","useLightbox","",3,"image","roundBorders",4,"ngIf"],["class","my-3",4,"ngIf"],["containerClass","mt-3","target","profile",3,"owner","uploadDone"],["singleUpload",""],["class","mt-3","forceRow","",4,"ngIf"],["size","huge","useLightbox","",3,"image","roundBorders"],[1,"my-3"],["forceRow","",1,"mt-3"],[1,"btn","btn-outline-primary",3,"click"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"border-0","d-flex","mb-3","flex-column","flex-xs-row","justify-content-between","mt-2","mt-md-0"],[1,"mb-2","mb-xs-0"],[1,"row","no-gutters"],["class","col-12 col-xs-6 col-sm-4 col-md-3 d-flex justify-content-center justify-content-center",4,"ngFor","ngForOf"],["class","d-flex justify-content-end",4,"ngIf"],["target","profile",3,"owner","max","uploadDone"],["multiUpload",""],[1,"col-12","col-xs-6","col-sm-4","col-md-3","d-flex","justify-content-center","justify-content-center"],["size","huge","useLightbox","",1,"mb-1","mb-xs-3",3,"image","roundBorders","additionalImages"],[1,"col-12"],[1,"d-flex","justify-content-end"],["kind","fieldView",3,"label"],[3,"user"],["formControlName","name",3,"label","required"],["formControlName","username",3,"label","required"],[3,"label","kind","ignoreExtraCell"],["formControlName","email",3,"required"],["field","email",3,"control",4,"extraCell"],["field","email",3,"control"],[3,"label","kind","labelPosition","ignoreExtraCell","fieldSize","required",4,"ngIf"],[3,"label","kind","labelPosition","ignoreExtraCell","fieldSize","required"],["hideLabel","",3,"field","formControlName","binaryValues",4,"ngIf","ngIfElse"],["plainFieldValue",""],[3,"field","control",4,"extraCell"],["hideLabel","",3,"field","formControlName","binaryValues"],[3,"fieldValue"],[3,"field","control"],["kind","field","fieldSize","small",3,"label","required","ignoreExtraCell"],["formControlName","number",3,"placeholder",4,"ngIf","ngIfElse"],["plainPhoneNumber",""],[3,"control",4,"extraCell"],["formControlName","number",3,"placeholder"],[3,"control"],[3,"label","formControl",4,"ngIf","ngIfElse"],["plainVerified",""],[3,"label","formControl"],[3,"label","formControl","click",4,"ngIf","ngIfElse"],["plainSms",""],[3,"label","formControl","click"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],[1,"mb-2"],[3,"formControl","label",4,"ngIf"],[3,"formControl","label"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy","binaryValues"],["kind","field",3,"label",4,"ngIf"],["kind","field",3,"label"],[3,"address","imageLoaded",4,"ngIf","ngIfElse"],["viewMap",""],[3,"address","imageLoaded"],["class","btn btn-outline-primary","type","button",3,"click",4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"mt-4","mb-2","d-flex","flex-column","flex-xs-row","justify-content-between"],["class","section-title-action","dropdown","",4,"ngIf"],["class","section-title-action",4,"ngIf"],["dropdown","",1,"section-title-action"],["dropdownToggle","","type","button","type","button","aria-controls","newPhoneDropDown",1,"btn","btn-outline-primary","dropdown-toggle"],["class","dropdown-menu dropdown-menu-right","role","listbox","id","newPhoneDropDown",4,"dropdownMenu"],["role","listbox","id","newPhoneDropDown",1,"dropdown-menu","dropdown-menu-right"],["dropDownMenu",""],[1,"dropdown-item",3,"click"],[1,"section-title-action"],["formControlName","name","required","",3,"id","label"],["type","tel","formControlName","number","required","",3,"id","label","placeholder"],["class","d-flex justify-content-end",3,"ngClass",4,"ngIf"],["formControlName","verified",3,"label",4,"ngIf","ngIfElse"],["formControlName","verified",3,"label"],["formControlName","enabledForSms",3,"label","click",4,"ngIf","ngIfElse"],["formControlName","enabledForSms",3,"label","click"],[1,"d-flex","w-100","justify-content-between"],["justifyStart","",3,"control"],["class","btn btn-outline-primary","type","button",3,"click",4,"ngIf"],[1,"d-flex","justify-content-end",3,"ngClass"],["idPrefix","address_",3,"addressForm","ignoreContactFields","configuration","idSuffix","managePrivacy","binaryValues"],["kind","field","class","pb-0",3,"label",4,"ngIf"],["class","row mt-3 no-gutters",4,"ngIf"],["kind","field",1,"pb-0",3,"label"],[4,"ngIf","ngIfThen"],[1,"row","mt-3","no-gutters"],["class","col-4",4,"ngIf"],[1,"col-12","col-sm-8"],["forceRow","",1,"mt-0"],[1,"col-4"],[1,"flex-grow-1"],["formControlName","image","target","contactInfo","separator","@","avatarSize","xlarge",3,"label","initialImages"],["formControlName","name",3,"id","label"],["formControlName","email",3,"id","label"],["formControlName","mobilePhone",3,"id","label"],["formControlName","landLinePhone",3,"id","label"],["formControlName","landLineExtension",3,"id","label",4,"ngIf"],["formControlName","address",3,"id","label"],[4,"ngFor","ngForOf"],["formControlName","landLineExtension",3,"id","label"],[3,"value","text",4,"ngIf"],[3,"value","text"],[3,"field","formControlName","binaryValues"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Er,22,25,"page-content",1),b.Sb(),b.Fc(3,Nr,1,0,"ng-template",null,2,b.Gc)),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,p.q,V.w,V.n,p.s,j.a,Ls.a,ve.a,q.a,dt.a,bt.a,V.v,V.l,V.D,Ms.a,Us.a,wt.a,La.a,Oe.a,V.k,$s.a,Gs.a,Bs.a,Bs.d,Bs.b,Js.a,pe.a,he.a,Vs.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Hr=i("cvAk");function xr(e,t){if(1&e){const e=b.Ub();b.Tb(0,"actions",4),b.Tb(1,"button",5),b.bc("click",(function(){return b.wc(e),b.dc(2).goToLogin()})),b.Hc(2),b.Sb(),b.Sb()}if(2&e){const e=b.dc(2);b.zb(2),b.Jc(" ",e.i18n.menu.login," ")}}function _r(e,t){if(1&e&&(b.Tb(0,"page-content"),b.Tb(1,"notification",2),b.Hc(2),b.Sb(),b.Fc(3,xr,3,1,"actions",3),b.ec(4,"async"),b.Sb()),2&e){const e=b.dc();b.zb(1),b.kc("allowClose",!1),b.zb(1),b.Jc(" ",e.i18n.user.newEmailConfirmed," "),b.zb(1),b.kc("ngIf",null==b.fc(4,3,e.login.user$))}}let Lr=(()=>{class e extends ze.a{constructor(e,t){super(e),this.validationService=t}get userId(){return this.data}ngOnInit(){this.addSub(this.validationService.validateEmailChange(this.route.snapshot.params.key).subscribe(()=>{this.login.user?(this.login.logout(),this.notification.info(this.i18n.user.newEmailConfirmed)):this.data=""}))}goToLogin(){this.login.goToLoginPage("")}resolveMenu(){return this.authHelper.homeMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.L))},e.\u0275cmp=b.Hb({type:e,selectors:[["validate-email-change"]],features:[b.wb],decls:3,vars:4,consts:[["size","medium","hideMenu","",3,"ready"],[4,"ngIf"],[3,"allowClose"],["ngClass","mt-3","forceRow","",4,"ngIf"],["ngClass","mt-3","forceRow",""],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,_r,5,5,"page-content",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,Hr.a,j.a,p.q],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Mr=i("TV7p"),Ur=i("mwYl"),$r=i("LRne"),Gr=i("PqYM"),Br=i("eIep"),Jr=i("lJxs"),Vr=i("wR2l");function qr(e,t){if(1&e&&(b.Tb(0,"div",6),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.name,"")}}const jr=function(e){return{"ml-3":e}};function Qr(e,t){if(1&e&&(b.Tb(0,"div",7),b.Ob(1,"input",8),b.Tb(2,"label",9),b.Tb(3,"div",10),b.Hc(4),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc().$implicit,n=b.dc(2);b.kc("ngClass",b.nc(6,jr,i)),b.zb(1),b.kc("formControl",n.control)("id","group_"+e.id)("value",e.id),b.zb(1),b.kc("for","group_"+e.id),b.zb(2),b.Jc(" ",e.name," ")}}function Yr(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div"),b.Fc(2,qr,2,1,"div",4),b.Fc(3,Qr,5,8,"div",5),b.Sb(),b.Qb()),2&e){const e=t.$implicit,i=b.dc(2);b.zb(2),b.kc("ngIf",e),b.zb(1),b.kc("ngForOf",i.groupsForSet(e))}}function Kr(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",2),b.Hc(2),b.Sb(),b.Fc(3,Yr,4,2,"ng-container",3),b.Qb()),2&e){const e=b.dc();b.zb(2),b.Ic(e.i18n.user.registration.groupManager),b.zb(1),b.kc("ngForOf",e.groupSets)}}function Xr(e,t){if(1&e&&b.Ob(0,"field-option",15),2&e){const e=t.$implicit;b.kc("value",e.id)("text",e.name)}}function Wr(e,t){if(1&e&&(b.Tb(0,"radio-group-field",13),b.Fc(1,Xr,1,2,"field-option",14),b.Sb()),2&e){const e=b.dc(2);b.kc("formControl",e.control),b.zb(1),b.kc("ngForOf",e.groups)}}function Zr(e,t){if(1&e&&(b.Tb(0,"div",21),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc(" ",e.description," ")}}function ec(e,t){if(1&e&&(b.Tb(0,"div",17),b.Tb(1,"div",18),b.Tb(2,"div",19),b.Ob(3,"input",8),b.Tb(4,"label",9),b.Tb(5,"div",10),b.Hc(6),b.Fc(7,Zr,2,1,"div",20),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(3),b.kc("formControl",i.control)("id","group_"+e.id)("value",e.id),b.zb(1),b.kc("for","group_"+e.id),b.zb(2),b.Jc(" ",e.name," "),b.zb(1),b.kc("ngIf",e.description)}}function tc(e,t){if(1&e&&b.Fc(0,ec,8,6,"div",16),2&e){const e=b.dc(2);b.kc("ngForOf",e.groups)}}function ic(e,t){if(1&e&&(b.Tb(0,"div",2),b.Hc(1),b.Sb(),b.Fc(2,Wr,2,2,"radio-group-field",11),b.Fc(3,tc,1,1,"ng-template",null,12,b.Gc)),2&e){const e=b.uc(4),t=b.dc();b.zb(1),b.Ic(t.i18n.user.registration.groupPublic),b.zb(1),b.kc("ngIf",t.singleLine)("ngIfElse",e)}}let nc=(()=>{class e extends Ha.a{constructor(e){super(e)}ngOnInit(){super.ngOnInit(),this.singleLine=this.groups.length<=3&&0===this.groups.filter(e=>e.description).length}groupsForSet(e){return this.groups.filter(null==e?e=>null==e.groupSet:t=>t.groupSet===e.id)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r))},e.\u0275cmp=b.Hb({type:e,selectors:[["registration-step-group"]],inputs:{groupSets:"groupSets",groups:"groups",control:"control"},features:[b.wb],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["asGuest",""],[1,"mb-3"],[4,"ngFor","ngForOf"],["class","mt-3 mb-2","font-weight-bold","",4,"ngIf"],["class","custom-control custom-radio mb-1",3,"ngClass",4,"ngFor","ngForOf"],["font-weight-bold","",1,"mt-3","mb-2"],[1,"custom-control","custom-radio","mb-1",3,"ngClass"],["type","radio",1,"custom-control-input",3,"formControl","id","value"],[1,"custom-control-label",3,"for"],[1,"ml-1"],[3,"formControl",4,"ngIf","ngIfElse"],["multiLine",""],[3,"formControl"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"row","mb-2"],[1,"col-12","col-6","col-sm-8"],[1,"custom-control","custom-radio"],["class","text-muted mt-1 mb-3",4,"ngIf"],[1,"text-muted","mt-1","mb-3"]],template:function(e,t){if(1&e&&(b.Fc(0,Kr,4,2,"ng-container",0),b.Fc(1,ic,5,3,"ng-template",null,1,b.Gc)),2&e){const e=b.uc(2);b.kc("ngIf",t.login.user)("ngIfElse",e)}},directives:[p.t,p.s,p.q,V.A,V.e,V.v,V.k,Vr.a,he.a],encapsulation:2,changeDetection:0}),e})();function ac(e,t){if(1&e&&b.Ob(0,"img",8),2&e){const e=b.dc().$implicit;b.kc("src",e.image.url,b.yc)("alt",e.name)}}const sc=function(e,t,i){return{border:e,background:t,color:i}};function oc(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",5),b.bc("click",(function(){b.wc(e);const i=t.$implicit;return b.dc().registerWith(i)})),b.Fc(1,ac,1,2,"img",6),b.Ob(2,"span",7),b.ec(3,"trust"),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc();b.kc("ngStyle",b.pc(5,sc,"1px solid "+e.borderColor,e.backgroundColor,e.textColor)),b.zb(1),b.kc("ngIf",e.image),b.zb(1),b.kc("innerHTML",b.fc(3,3,i.i18n.identityProvider.login(e.name)),b.xc)}}let rc=(()=>{class e extends Ha.a{constructor(e){super(e),this.continue=new b.n}registerWith(e){this.continue.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r))},e.\u0275cmp=b.Hb({type:e,selectors:[["registration-step-idp"]],inputs:{identityProviders:"identityProviders"},outputs:{continue:"continue"},features:[b.wb],decls:9,vars:10,consts:[[1,"text-center"],["type","button","class","identity-provider",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"text-center","my-3"],[1,"mx-auto",3,"disabled","label","action"],[1,"text-muted","text-justify","my-3",3,"innerHTML"],["type","button",1,"identity-provider",3,"ngStyle","click"],["class","aria-hidden",3,"src","alt",4,"ngIf"],[3,"innerHTML"],[1,"aria-hidden",3,"src","alt"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Hc(1),b.Sb(),b.Fc(2,oc,4,9,"button",1),b.Tb(3,"div",2),b.Hc(4),b.Sb(),b.Tb(5,"action-button",3),b.bc("action",(function(){return t.registerWith(null)})),b.ec(6,"async"),b.Sb(),b.Ob(7,"div",4),b.ec(8,"trust")),2&e&&(b.zb(1),b.Ic(t.i18n.identityProvider.registration),b.zb(1),b.kc("ngForOf",t.identityProviders),b.zb(2),b.Ic(t.i18n.identityProvider.registrationOr),b.zb(1),b.kc("disabled",b.fc(6,6,t.requesting$))("label",t.i18n.identityProvider.registrationFillForm),b.zb(2),b.kc("innerHTML",b.fc(8,8,t.i18n.identityProvider.registrationDisclaimer(t.format.appTitleSmall)),b.xc))},directives:[p.s,Q.a,p.w,p.t],pipes:[p.b,Nt.a],styles:[".button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{display:block!important;width:100%}@media (min-width:576px){.button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:18rem;margin-left:auto;margin-right:auto}}"],changeDetection:0}),e})();var cc=i("HDdC");function lc(e,t){if(1&e&&b.Ob(0,"avatar",17),2&e){const e=b.dc(2);b.kc("image",e.image)}}function uc(e,t){if(1&e&&b.Hc(0),2&e){const e=b.dc(2);b.Jc(" ",e.i18n.user.noImage," ")}}function dc(e,t){if(1&e){const e=b.Ub();b.Tb(0,"action-button",21),b.bc("action",(function(){return b.wc(e),b.dc(3).removeImage()})),b.ec(1,"async"),b.Sb()}if(2&e){const e=b.dc(3);b.kc("disabled",b.fc(1,2,e.requesting$))("label",e.i18n.field.image.remove)}}function bc(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",18),b.Tb(1,"action-button",19),b.bc("action",(function(){return b.wc(e),b.dc(),b.uc(11).perform()})),b.ec(2,"async"),b.Sb(),b.Fc(3,dc,2,4,"action-button",20),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.kc("disabled",b.fc(2,3,e.requesting$))("label",e.i18n.field.image.upload),b.zb(2),b.kc("ngIf",e.image)}}function fc(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"h2",7),b.Hc(2),b.Sb(),b.Tb(3,"div",8),b.Tb(4,"div",9),b.Tb(5,"div",10),b.Fc(6,lc,1,1,"avatar",11),b.ec(7,"async"),b.Fc(8,uc,1,1,"ng-template",null,12,b.Gc),b.Sb(),b.Tb(10,"image-upload",13,14),b.bc("uploadDone",(function(t){return b.wc(e),b.dc().onUploadDone(t[0])})),b.Sb(),b.Sb(),b.Fc(12,bc,4,5,"div",15),b.ec(13,"async"),b.Sb(),b.Tb(14,"h2",16),b.Hc(15),b.Sb(),b.Qb()}if(2&e){const e=b.uc(9),t=b.uc(11),i=b.dc();b.zb(2),b.Ic(i.i18n.user.title.image),b.zb(4),b.kc("ngIf",b.fc(7,5,i.image$))("ngIfElse",e),b.zb(6),b.kc("ngIf",!1===b.fc(13,7,t.uploading$)),b.zb(3),b.Ic(i.i18n.user.title.fields)}}function mc(e,t){if(1&e&&b.Ob(0,"input-field",22),2&e){const e=b.dc();b.kc("label",e.i18n.user.name)}}function pc(e,t){if(1&e&&b.Ob(0,"input-field",23),2&e){const e=b.dc();b.kc("label",e.i18n.user.username)}}function hc(e,t){if(1&e&&b.Ob(0,"field-privacy",28),2&e){const e=b.dc(2);b.kc("control",e.form.get("hiddenFields"))}}function gc(e,t){if(1&e&&b.Ob(0,"boolean-field",29),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.registration.skipActivationEmail)}}function vc(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"label-value",24),b.Ob(2,"input-field",25),b.Fc(3,hc,1,1,"field-privacy",26),b.Sb(),b.Fc(4,gc,1,1,"boolean-field",27),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("label",e.i18n.user.email)("ignoreExtraCell",!e.canManagePrivacy("email"))("required",e.data.emailRequired),b.zb(1),b.kc("required",e.data.emailRequired),b.zb(2),b.kc("ngIf",e.data.allowSetSendActivationEmail)}}function kc(e,t){if(1&e&&b.Ob(0,"field-privacy",34),2&e){const e=b.dc(2).$implicit,t=b.dc();b.kc("field",e.internalName)("control",t.form.get("hiddenFields"))}}function yc(e,t){if(1&e){const e=b.Ub();b.Tb(0,"label-value",31),b.Tb(1,"custom-field-input",32),b.bc("imagesUploaded",(function(t){return b.wc(e),b.dc(2).customImagesUploaded.emit(t)}))("filesUploaded",(function(t){return b.wc(e),b.dc(2).customFilesUploaded.emit(t)})),b.Sb(),b.Fc(2,kc,1,2,"field-privacy",33),b.Sb()}if(2&e){const e=b.dc().$implicit,t=b.dc();b.kc("label",e.name)("ignoreExtraCell",!t.canManagePrivacy(e))("fieldSize",e.size)("required",e.required),b.zb(1),b.kc("field",e)("formControlName",e.internalName)}}function Sc(e,t){if(1&e&&(b.Rb(0,1),b.Fc(1,yc,3,6,"label-value",30),b.Qb()),2&e){const e=t.$implicit,i=b.dc();b.kc("formGroup",i.form.get("customValues")),b.zb(1),b.kc("ngIf",i.canEdit(e))}}function Tc(e,t){if(1&e&&b.Ob(0,"field-privacy",38),2&e){const e=b.dc(2);b.kc("control",e.mobileForm.get("hidden"))}}function Ic(e,t){if(1&e&&(b.Tb(0,"label-value",35),b.Ob(1,"input-field",36),b.Fc(2,Tc,1,1,"field-privacy",37),b.Sb()),2&e){const e=b.dc();b.kc("label",e.i18n.phone.mobile)("required","required"===e.mobileAvailability)("formGroup",e.mobileForm),b.zb(1),b.kc("placeholder",e.data.phoneConfiguration.mobileExample)}}function Fc(e,t){if(1&e&&b.Ob(0,"field-privacy",38),2&e){const e=b.dc(2);b.kc("control",e.landLineForm.get("hidden"))}}function zc(e,t){if(1&e&&b.Ob(0,"input-field",41),2&e){const e=b.dc(2);b.kc("label",e.i18n.phone.extension)}}function Oc(e,t){if(1&e&&(b.Rb(0,1),b.Tb(1,"label-value",39),b.Ob(2,"input-field",36),b.Fc(3,Fc,1,1,"field-privacy",37),b.Sb(),b.Fc(4,zc,1,1,"input-field",40),b.Qb()),2&e){const e=b.dc();b.kc("formGroup",e.landLineForm),b.zb(1),b.kc("label",e.i18n.phone.landLine)("required","required"===e.data.phoneConfiguration.landLineAvailability),b.zb(1),b.kc("placeholder",e.data.phoneConfiguration.landLineExample),b.zb(2),b.kc("ngIf",e.data.phoneConfiguration.extensionEnabled)}}function Ac(e,t){if(1&e&&b.Ob(0,"boolean-field",45),2&e){const e=b.dc(2);b.kc("formControl",e.defineAddress)("label",e.i18n.user.addressDefine)}}function Cc(e,t){if(1&e&&b.Ob(0,"address-form",46),2&e){const e=b.dc(2);b.kc("addressForm",e.addressForm)("configuration",e.data.addressConfiguration)("managePrivacy",e.data.addressConfiguration.managePrivacy)}}function wc(e,t){if(1&e){const e=b.Ub();b.Tb(0,"static-map",50),b.bc("imageLoaded",(function(){return b.wc(e),b.dc(3).mapShown()})),b.Sb()}if(2&e){const e=b.dc(3);b.kc("address",e.addressForm.value)}}function Ec(e,t){if(1&e){const e=b.Ub();b.Tb(0,"action-button",21),b.bc("action",(function(){return b.wc(e),b.dc(4).locateAddress()})),b.ec(1,"async"),b.Sb()}if(2&e){const e=b.dc(4);b.kc("disabled",b.fc(1,2,e.locatingAddress$))("label",e.i18n.general.mapView)}}function Nc(e,t){if(1&e&&b.Fc(0,Ec,2,4,"action-button",20),2&e){const e=b.dc(3);b.kc("ngIf",e.image)}}function Rc(e,t){if(1&e&&(b.Tb(0,"label-value",47),b.Fc(1,wc,1,1,"static-map",48),b.Fc(2,Nc,1,1,"ng-template",null,49,b.Gc),b.Sb()),2&e){const e=b.uc(3),t=b.dc(2);b.kc("label",t.i18n.general.map),b.zb(1),b.kc("ngIf",null!=t.addressForm.get("location").value.latitude)("ngIfElse",e)}}function Dc(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2",16),b.Hc(2),b.Sb(),b.Fc(3,Ac,1,2,"boolean-field",42),b.Fc(4,Cc,1,3,"address-form",43),b.Fc(5,Rc,4,3,"label-value",44),b.Qb()),2&e){const e=b.dc();b.zb(2),b.Ic(e.i18n.address.address),b.zb(1),b.kc("ngIf","required"!==e.data.addressConfiguration.availability),b.zb(1),b.kc("ngIf",e.defineAddress.value),b.zb(1),b.kc("ngIf",e.defineAddress.value&&e.maps.enabled)}}let Pc=(()=>{class e extends Ha.a{constructor(e,t,i,n){super(e),this.userHelper=t,this.imagesService=i,this.changeDetector=n,this.imageUploaded=new b.n,this.imageRemoved=new b.n,this.customImagesUploaded=new b.n,this.customFilesUploaded=new b.n,this.image$=new ut.a(null),this.location$=new ut.a(null),this.locatingAddress$=new ut.a(!1)}get image(){return this.image$.value}set image(e){this.image$.next(e)}get location(){return this.location$.value}set location(e){this.location$.next(e)}ngOnInit(){super.ngOnInit(),this.editableFields=this.userHelper.fieldNamesByAction(this.data,"edit"),this.managePrivacyFields=this.userHelper.fieldNamesByAction(this.data,"managePrivacy")}get mobileAvailability(){return this.data.phoneConfiguration.mobileAvailability}get landLineAvailability(){return this.data.phoneConfiguration.landLineAvailability}get addressAvailability(){return this.data.addressConfiguration.availability}get imageAvailability(){return this.data.imageConfiguration.availability}onUploadDone(e){this.addSub(this.doRemoveImage().subscribe(()=>{this.image=e,this.imageUploaded.emit(this.image),this.changeDetector.detectChanges()}))}removeImage(){this.addSub(this.doRemoveImage().subscribe())}doRemoveImage(){if(this.image){const e=this.image;return this.errorHandler.requestWithCustomErrorHandler(()=>new cc.a(t=>{this.imagesService.deleteImage({idOrKey:this.image.id}).subscribe(()=>{this.imageRemoved.emit(this.image),this.image=null,this.changeDetector.detectChanges(),t.next(e)})}))}return Object($r.a)(null)}canEdit(e){return this.editableFields.has(this.fieldHelper.fieldName(e))}canManagePrivacy(e){return this.managePrivacyFields.has(this.fieldHelper.fieldName(e))}locateAddress(){const e=this.addressForm.value;this.locatingAddress$.next(!0),this.addSub(this.maps.geocode(e).subscribe(e=>{this.addressForm.patchValue({location:e}),this.changeDetector.detectChanges()},()=>this.mapShown()))}mapShown(){this.locatingAddress$.next(!1),this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(r.p),b.Nb(b.h))},e.\u0275cmp=b.Hb({type:e,selectors:[["registration-step-fields"]],inputs:{data:"data",form:"form",mobileForm:"mobileForm",landLineForm:"landLineForm",addressForm:"addressForm",defineAddress:"defineAddress",image:"image"},outputs:{imageUploaded:"imageUploaded",imageRemoved:"imageRemoved",customImagesUploaded:"customImagesUploaded",customFilesUploaded:"customFilesUploaded"},features:[b.wb],decls:9,vars:9,consts:[[4,"ngIf"],[3,"formGroup"],["formControlName","name","required","",3,"label",4,"ngIf"],["formControlName","username","required","",3,"label",4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],["kind","field",3,"label","required","formGroup",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"border-0"],[1,"row"],[1,"col-12","col-sm-4"],[1,"d-flex","justify-content-center","justify-content-sm-start"],["size","huge","useLightbox","",3,"image",4,"ngIf","ngIfElse"],["noImage",""],["containerClass","mt-3","target","userRegistration","keepUrls","",3,"uploadDone"],["upload",""],["class","col-12 col-sm-8 mt-3 mt-sm-0 d-flex justify-content-between justify-content-sm-end align-items-end",4,"ngIf"],[1,"mt-4"],["size","huge","useLightbox","",3,"image"],[1,"col-12","col-sm-8","mt-3","mt-sm-0","d-flex","justify-content-between","justify-content-sm-end","align-items-end"],["outline","",3,"disabled","label","action"],["class","ml-3","outline","",3,"disabled","label","action",4,"ngIf"],["outline","",1,"ml-3",3,"disabled","label","action"],["formControlName","name","required","",3,"label"],["formControlName","username","required","",3,"label"],["kind","field",3,"label","ignoreExtraCell","required"],["formControlName","email",3,"required"],["field","email",3,"control",4,"extraCell"],["formControlName","skipActivationEmail",3,"label",4,"ngIf"],["field","email",3,"control"],["formControlName","skipActivationEmail",3,"label"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required",4,"ngIf"],["kind","field",3,"label","ignoreExtraCell","fieldSize","required"],["hideLabel","",3,"field","formControlName","imagesUploaded","filesUploaded"],[3,"field","control",4,"extraCell"],[3,"field","control"],["kind","field",3,"label","required","formGroup"],["formControlName","number",3,"placeholder"],[3,"control",4,"extraCell"],[3,"control"],["kind","field",3,"label","required"],["formControlName","extension","fieldSize","tiny",3,"label",4,"ngIf"],["formControlName","extension","fieldSize","tiny",3,"label"],[3,"formControl","label",4,"ngIf"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy",4,"ngIf"],["kind","field",3,"label",4,"ngIf"],[3,"formControl","label"],["ignoreContactFields","",3,"addressForm","configuration","managePrivacy"],["kind","field",3,"label"],[3,"address","imageLoaded",4,"ngIf","ngIfElse"],["viewMap",""],[3,"address","imageLoaded"]],template:function(e,t){1&e&&(b.Fc(0,fc,16,9,"ng-container",0),b.Rb(1,1),b.Fc(2,mc,1,1,"input-field",2),b.Fc(3,pc,1,1,"input-field",3),b.Fc(4,vc,5,5,"ng-container",0),b.Qb(),b.Fc(5,Sc,2,2,"ng-container",4),b.Fc(6,Ic,3,4,"label-value",5),b.Fc(7,Oc,5,5,"ng-container",6),b.Fc(8,Dc,6,4,"ng-container",0)),2&e&&(b.kc("ngIf","disabled"!==t.imageAvailability),b.zb(1),b.kc("formGroup",t.form),b.zb(1),b.kc("ngIf",t.canEdit("name")),b.zb(1),b.kc("ngIf",t.canEdit("username")),b.zb(1),b.kc("ngIf",t.canEdit("email")),b.zb(1),b.kc("ngForOf",t.data.customFields),b.zb(1),b.kc("ngIf","disabled"!==t.mobileAvailability),b.zb(1),b.kc("ngIf","disabled"!==t.landLineAvailability),b.zb(1),b.kc("ngIf","disabled"!==t.addressAvailability))},directives:[p.t,V.w,V.n,p.s,Ls.a,ve.a,Q.a,bt.a,V.v,V.l,V.D,q.a,Ms.a,Us.a,Oe.a,wt.a,V.k,$s.a,Gs.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Hc=i("7qm1"),xc=i("g9Ug");const _c=["securityAnswer"];function Lc(e,t){if(1&e&&(b.Tb(0,"div",10),b.Ob(1,"avatar",11),b.Sb()),2&e){const e=b.dc();b.zb(1),b.kc("image",e.image)}}function Mc(e,t){if(1&e&&(b.Tb(0,"div",12),b.Ob(1,"avatar",13),b.Sb()),2&e){const e=b.dc();b.zb(1),b.kc("size",e.image?200:128)("image",e.image)}}function Uc(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.user.group)("value",e.group.name)}}function $c(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.user.name)("value",e.name)}}function Gc(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.user.username)("value",e.username)}}function Bc(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.user.email)("value",e.email)}}function Jc(e,t){if(1&e&&(b.Tb(0,"label-value",15),b.Ob(1,"format-field-value",16),b.Sb()),2&e){const e=t.$implicit,i=b.dc();b.kc("label",e.name),b.zb(1),b.kc("fields",i.customFields)("fieldName",e.internalName)("object",i.user)("images",i.customImages)("files",i.customFiles)}}function Vc(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.phone.mobile)("value",e.mobile)}}function qc(e,t){if(1&e&&b.Ob(0,"label-value",14),2&e){const e=b.dc();b.kc("label",e.i18n.user.phoneAddLandLine)("value",e.landLine)}}function jc(e,t){if(1&e&&(b.Tb(0,"label-value",15),b.Ob(1,"address-details",17),b.Sb()),2&e){const e=b.dc();b.kc("label",e.i18n.address.address),b.zb(1),b.kc("address",e.address)}}function Qc(e,t){if(1&e&&(b.Tb(0,"div",20),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Ic(e.description)}}function Yc(e,t){if(1&e&&b.Ob(0,"boolean-field",21),2&e){const e=b.dc(2);b.kc("label",e.i18n.user.registration.passwordAssign)}}function Kc(e,t){if(1&e&&b.Ob(0,"boolean-field",25),2&e){const e=b.dc(3);b.kc("label",e.i18n.user.registration.passwordForceChange)}}function Xc(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"input-field",22),b.Ob(2,"input-field",23),b.Fc(3,Kc,1,1,"boolean-field",24),b.Qb()),2&e){const e=b.dc().$implicit,t=b.dc();b.zb(1),b.kc("label",e.name),b.zb(1),b.kc("label",t.i18n.user.passwordConfirmation(e.name)),b.zb(1),b.kc("ngIf",e.canForceChange)}}function Wc(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2"),b.Hc(2),b.Sb(),b.Rb(3,7),b.Fc(4,Qc,2,1,"div",18),b.Fc(5,Yc,1,1,"boolean-field",19),b.Fc(6,Xc,4,3,"ng-container",9),b.Qb(),b.Qb()),2&e){const e=t.$implicit,i=t.index,n=b.dc();b.zb(2),b.Ic(e.name),b.zb(1),b.kc("formGroup",n.passwordForm(i)),b.zb(1),b.kc("ngIf",e.description),b.zb(1),b.kc("ngIf",n.login.user),b.zb(1),b.kc("ngIf",n.passwordForm(i).get("defined").value)}}function Zc(e,t){if(1&e&&b.Ob(0,"field-option",32),2&e){const e=t.$implicit;b.kc("value",e.internalName)("text",e.name)}}function el(e,t){if(1&e&&b.Ob(0,"input-field",33,34),2&e){const e=b.dc(3);b.kc("label",e.i18n.securityQuestion.answer)}}function tl(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"h2"),b.Hc(2),b.Sb(),b.Tb(3,"div",20),b.Hc(4),b.Sb(),b.Tb(5,"single-selection-field",29),b.Fc(6,Zc,1,2,"field-option",30),b.Sb(),b.Fc(7,el,2,1,"input-field",31),b.ec(8,"async"),b.Qb()),2&e){const e=b.dc(2);b.zb(2),b.Ic(e.i18n.securityQuestion.question),b.zb(2),b.Jc(" ",e.i18n.user.securityQuestionMessage," "),b.zb(1),b.kc("label",e.i18n.securityQuestion.question)("emptyOption",e.i18n.user.securityQuestionEmpty),b.zb(1),b.kc("ngForOf",e.data.securityQuestions),b.zb(1),b.kc("ngIf",!e.empty(b.fc(8,6,e.form.get("securityQuestion").valueChanges)))}}function il(e,t){if(1&e&&(b.Tb(0,"h2"),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.user.title.registrationConfirmation," ")}}function nl(e,t){if(1&e&&(b.Tb(0,"div",35),b.Tb(1,"div",36),b.Hc(2),b.Sb(),b.Tb(3,"div",36),b.Ob(4,"captcha",37),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(2),b.Ic(e.i18n.user.captcha),b.zb(2),b.kc("form",e.form.get("captcha"))}}function al(e,t){if(1&e&&(b.Tb(0,"div",38),b.Tb(1,"div",36),b.Hc(2),b.Sb(),b.Ob(3,"accept-agreements",39),b.Sb()),2&e){const e=b.dc(2);b.zb(2),b.Ic(e.i18n.pendingAgreements.preface),b.zb(1),b.kc("agreements",e.data.agreements)}}function sl(e,t){if(1&e&&(b.Rb(0),b.Fc(1,tl,9,8,"ng-container",9),b.Fc(2,il,2,1,"h2",9),b.Tb(3,"div",26),b.Fc(4,nl,5,2,"div",27),b.Fc(5,al,4,2,"div",28),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("ngIf",(null==e.data.securityQuestions?null:e.data.securityQuestions.length)>0),b.zb(1),b.kc("ngIf",(null==e.data.agreements?null:e.data.agreements.length)>0||null!=e.data.captchaType),b.zb(2),b.kc("ngIf",null!=e.data.captchaType),b.zb(1),b.kc("ngIf",(null==e.data.agreements?null:e.data.agreements.length)>0)}}let ol=(()=>{class e extends Ha.a{constructor(e){super(e),this.empty=B.h,this.focusSecurityAnswer=!1}ngOnInit(){if(super.ngOnInit(),Object(B.h)(this.data.securityQuestions)||this.addSub(this.form.get("securityQuestion").valueChanges.subscribe(e=>{this.focusSecurityAnswer=!Object(B.a)(e)})),!Object(B.h)(this.data.agreements)){const e=this.data.agreements.map(()=>!1);this.agreementsControl=this.formBuilder.array(e),this.addSub(this.agreementsControl.valueChanges.subscribe(e=>{const t=e.length===e.filter(e=>e).length;this.form.patchValue({acceptAgreement:t})}))}}ngAfterViewChecked(){this.focusSecurityAnswer&&(this.securityAnswer.forEach(e=>Object(B.j)(e)),this.focusSecurityAnswer=!1)}passwordForm(e){return this.form.get("passwords").controls[e]}get group(){const e=this.dataForUiHolder.dataForUi.publicRegistrationGroups||[];return 1===e.length?null:e.find(e=>e.id===this.user.group)}get name(){return(this.user.name||"").trim()}get username(){return(this.user.username||"").trim()}get email(){return(this.user.email||"").trim()}get mobile(){const e=this.user.mobilePhones||[];return Object(B.h)(e)?null:(e[0].number||"").trim()}get landLine(){const e=this.user.landLinePhones||[],t=Object(B.h)(e)?null:(e[0].number||"").trim();if(Object(B.h)(t))return"";const i=Object(B.h)(e)?null:(e[0].extension||"").trim();return""===i?t:this.i18n.phone.numberExtensionValue({number:t,extension:i})}get address(){const e=this.user.addresses||[];return Object(B.h)(e)?null:e[0]}get customFields(){return this.data.customFields.filter(e=>!Object(B.a)(this.user.customValues[e.internalName]))}get autocompletePasswords(){return(this.login.auth||{}).role?"off":"on"}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r))},e.\u0275cmp=b.Hb({type:e,selectors:[["registration-step-confirm"]],viewQuery:function(e,t){var i;1&e&&b.Lc(_c,!0),2&e&&b.tc(i=b.cc())&&(t.securityAnswer=i)},inputs:{data:"data",form:"form",user:"user",image:"image",customImages:"customImages",customFiles:"customFiles"},features:[b.wb],decls:17,vars:17,consts:[["class","image d-flex justify-content-center mt-2 mb-4",4,"ngIf"],[1,"d-flex","flex-row-reverse"],["class","image ml-4 mb-3",4,"ngIf"],[1,"flex-grow-1","mb-ls"],[3,"label","value",4,"ngIf"],["valueFormat","component",3,"label",4,"ngFor","ngForOf"],["valueFormat","component",3,"label",4,"ngIf"],[3,"formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"image","d-flex","justify-content-center","mt-2","mb-4"],["size","160","imageSize","200","useLightbox","",3,"image"],[1,"image","ml-4","mb-3"],["iconSize","128px","useLightbox","",3,"size","image"],[3,"label","value"],["valueFormat","component",3,"label"],[3,"fields","fieldName","object","images","files"],[3,"address"],["class","mb-2",4,"ngIf"],["formControlName","defined",3,"label",4,"ngIf"],[1,"mb-2"],["formControlName","defined",3,"label"],["required","","formControlName","value","type","password","autocomplete","new-password",3,"label"],["required","","formControlName","confirmationValue","type","password","autocomplete","new-password",3,"label"],["formControlName","forceChange",3,"label",4,"ngIf"],["formControlName","forceChange",3,"label"],[1,"row","no-gutters"],["class","col-12 col-sm-6 col-md-5",4,"ngIf"],["class","col-12 col-sm-6 col-md-7",4,"ngIf"],["formControlName","securityQuestion",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","securityAnswer","required","",3,"label",4,"ngIf"],[3,"value","text"],["formControlName","securityAnswer","required","",3,"label"],["securityAnswer",""],[1,"col-12","col-sm-6","col-md-5"],[1,"mb-3"],[3,"form"],[1,"col-12","col-sm-6","col-md-7"],["formControlName","acceptAgreements",3,"agreements"]],template:function(e,t){1&e&&(b.Fc(0,Lc,2,1,"div",0),b.ec(1,"async"),b.Tb(2,"div",1),b.Fc(3,Mc,2,2,"div",2),b.ec(4,"async"),b.Tb(5,"div",3),b.Fc(6,Uc,1,2,"label-value",4),b.Fc(7,$c,1,2,"label-value",4),b.Fc(8,Gc,1,2,"label-value",4),b.Fc(9,Bc,1,2,"label-value",4),b.Fc(10,Jc,2,6,"label-value",5),b.Fc(11,Vc,1,2,"label-value",4),b.Fc(12,qc,1,2,"label-value",4),b.Fc(13,jc,2,2,"label-value",6),b.Sb(),b.Sb(),b.Tb(14,"form",7),b.Fc(15,Wc,7,5,"ng-container",8),b.Fc(16,sl,6,4,"ng-container",9),b.Sb()),2&e&&(b.kc("ngIf",t.image&&b.fc(1,13,t.layout.ltsm$)),b.zb(3),b.kc("ngIf",t.image&&b.fc(4,15,t.layout.gtxs$)),b.zb(3),b.kc("ngIf",t.group),b.zb(1),b.kc("ngIf",!t.empty(t.name)),b.zb(1),b.kc("ngIf",!t.empty(t.username)),b.zb(1),b.kc("ngIf",!t.empty(t.email)),b.zb(1),b.kc("ngForOf",t.customFields),b.zb(1),b.kc("ngIf",!t.empty(t.mobile)),b.zb(1),b.kc("ngIf",!t.empty(t.landLine)),b.zb(1),b.kc("ngIf",t.address),b.zb(1),b.kc("formGroup",t.form),b.zb(1),b.kc("ngForOf",t.data.passwordTypes),b.zb(1),b.kc("ngIf",!t.login.user))},directives:[p.t,p.s,V.I,V.w,V.n,ve.a,q.a,La.a,Hc.a,Oe.a,V.v,V.l,bt.a,V.D,pe.a,he.a,xc.a,J.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function rl(e,t){if(1&e&&(b.Rb(0),b.Ob(1,"p",0),b.ec(2,"trust"),b.Tb(3,"p"),b.Hc(4),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("innerHTML",b.fc(2,2,e.principalsHtml),b.xc),b.zb(3),b.Ic(e.passwordsMessage)}}let cl=(()=>{class e extends Ha.a{constructor(e){super(e)}get messageHtml(){const e=!!this.login.user,t=this.result.user.display;switch(this.result.status){case Fe.Db.ACTIVE:return e?this.i18n.user.registration.activeManager(t):this.i18n.user.registration.activePublic;case Fe.Db.INACTIVE:return e?this.i18n.user.registration.inactiveManager(t):this.i18n.user.registration.inactivePublic;case Fe.Db.EMAIL_VALIDATION:return e?this.i18n.user.registration.pendingManager(t):this.i18n.user.registration.pendingPublic}}get principalsHtml(){const e=this.result.principals;if(null==e||0===e.length)return"";if(1===e.length){const t=e[0];return this.i18n.user.registration.principalSingle({principal:t.type.name,value:t.value,channels:t.channels.map(e=>e.name).join(", ")})}const t=[];t.push(this.i18n.user.registration.principalMultiplePreface),t.push("<ul>");for(const i of e)t.push("<li>"),t.push(this.i18n.user.registration.principalMultipleItem({principal:i.type.name,value:i.value,channels:i.channels.map(e=>e.name).join(", ")})),t.push("</li>");return t.push("</ul>"),t.join("")}get passwordsMessage(){const e=this.result.generatedPasswords;return Object(B.h)(e)?this.i18n.user.registration.generatedPasswordsNone:1===e.length?this.i18n.user.registration.generatedPasswordsSingle(e[0].name):this.i18n.user.registration.generatedPasswordsMultiple(e.map(e=>e.name).join(", "))}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r))},e.\u0275cmp=b.Hb({type:e,selectors:[["registration-step-done"]],inputs:{result:"result"},features:[b.wb],decls:3,vars:4,consts:[[3,"innerHTML"],[4,"ngIf"]],template:function(e,t){1&e&&(b.Ob(0,"p",0),b.ec(1,"trust"),b.Fc(2,rl,5,4,"ng-container",1)),2&e&&(b.kc("innerHTML",b.fc(1,2,t.messageHtml),b.xc),b.zb(2),b.kc("ngIf",null==t.login.user&&"active"==t.result.status))},directives:[p.t],pipes:[Nt.a],encapsulation:2,changeDetection:0}),e})();function ll(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"div",4),b.Ob(3,"registration-step-group",5),b.Sb(),b.Tb(4,"actions",6),b.Tb(5,"action-button",7),b.bc("action",(function(){return b.wc(e),b.dc().showIdentityProviders()})),b.ec(6,"async"),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.registration)("mobileHeading",e.i18n.user.mobileTitle.registration)("mode",b.fc(1,8,e.layout.ltsm$)?"fullHeight":"normal"),b.zb(3),b.kc("groupSets",e.groupSets)("groups",e.groups)("control",e.group),b.zb(2),b.kc("disabled",b.fc(6,10,e.requesting$))("label",e.i18n.general.next)}}function ul(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(){return b.wc(e),b.dc(2).backToGroup()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.general.previous," ")}}function dl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"div",4),b.Tb(3,"registration-step-idp",8),b.bc("continue",(function(t){return b.wc(e),b.dc().continueWithProvider(t)})),b.Sb(),b.Sb(),b.Tb(4,"actions",6),b.Ob(5,"span"),b.Fc(6,ul,2,1,"button",9),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.registration)("mobileHeading",e.i18n.user.mobileTitle.registration)("mode",b.fc(1,5,e.layout.ltsm$)?"fullHeight":"normal"),b.zb(3),b.kc("identityProviders",e.data.identityProviders),b.zb(3),b.kc("ngIf",e.groups.length>1)}}function bl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",10),b.bc("click",(function(){return b.wc(e),b.dc(2).backToIdentityProviders()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.general.previous," ")}}function fl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"div",4),b.Tb(3,"registration-step-fields",11),b.bc("imageUploaded",(function(t){return b.wc(e),b.dc().image=t}))("imageRemoved",(function(){return b.wc(e),b.dc().image=null}))("customImagesUploaded",(function(t){return b.wc(e),b.dc().addCustomImages(t)}))("customFilesUploaded",(function(t){return b.wc(e),b.dc().addCustomFiles(t)})),b.Sb(),b.Sb(),b.Tb(4,"actions",6),b.Tb(5,"action-button",7),b.bc("action",(function(){return b.wc(e),b.dc().showConfirm()})),b.ec(6,"async"),b.Sb(),b.Fc(7,bl,2,1,"button",9),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.registration)("mobileHeading",e.i18n.user.mobileTitle.registration)("mode",b.fc(1,13,e.layout.ltsm$)?"fullHeight":"normal"),b.zb(3),b.kc("data",e.data)("form",e.form)("mobileForm",e.mobileForm)("landLineForm",e.landLineForm)("defineAddress",e.defineAddress)("addressForm",e.addressForm)("image",e.image),b.zb(2),b.kc("disabled",b.fc(6,15,e.requesting$))("label",e.i18n.general.next),b.zb(2),b.kc("ngIf",e.groups.length>1||(null==e.data.identityProviders?null:e.data.identityProviders.length)>0)}}function ml(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"div",4),b.Ob(3,"registration-step-confirm",12),b.Sb(),b.Tb(4,"actions",6),b.Tb(5,"action-button",7),b.bc("action",(function(){return b.wc(e),b.dc().register()})),b.ec(6,"async"),b.Sb(),b.Tb(7,"button",10),b.bc("click",(function(){return b.wc(e),b.dc().backToFields()})),b.Hc(8),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.registrationConfirmation)("mobileHeading",e.i18n.user.mobileTitle.registrationConfirmation)("mode",b.fc(1,12,e.layout.ltsm$)?"fullHeight":"normal"),b.zb(3),b.kc("data",e.data)("form",e.confirmForm)("user",e.userNew)("image",e.image)("customImages",e.customImages)("customFiles",e.customFiles),b.zb(2),b.kc("disabled",b.fc(6,14,e.requesting$))("label",e.i18n.general.submit),b.zb(3),b.Jc(" ",e.i18n.general.previous," ")}}function pl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",15),b.bc("click",(function(){return b.wc(e),b.dc(2).reload()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.user.registration.registerAnotherUser," ")}}function hl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",15),b.bc("click",(function(){return b.wc(e),b.dc(2).viewProfile()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.user.registration.viewProfile," ")}}function gl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",15),b.bc("click",(function(){return b.wc(e),b.dc(2).goToLogin()})),b.Hc(1),b.Sb()}if(2&e){const e=b.dc(2);b.zb(1),b.Jc(" ",e.i18n.menu.login," ")}}function vl(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"div",4),b.Ob(3,"registration-step-done",13),b.ec(4,"async"),b.Sb(),b.Tb(5,"actions",6),b.Fc(6,pl,2,1,"button",14),b.Fc(7,hl,2,1,"button",14),b.Fc(8,gl,2,1,"button",14),b.Sb(),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.i18n.user.title.registrationDone)("mobileHeading",e.i18n.user.mobileTitle.registrationDone)("mode",b.fc(1,7,e.layout.ltsm$)?"fullHeight":"normal"),b.zb(3),b.kc("result",b.fc(4,9,e.result$)),b.zb(3),b.kc("ngIf",e.login.user),b.zb(1),b.kc("ngIf",e.login.user),b.zb(1),b.kc("ngIf",!e.login.user)}}function kl(e,t){1&e&&(b.Tb(0,"page-content"),b.Ob(1,"spinner"),b.Sb())}const yl=e=>{if(e.touched){const t=e.parent,i=null==t.get("securityQuestion")?"":t.get("securityQuestion").value,n=e.value;if(null!=i&&""!==i&&(null==n||""===n))return{required:!0}}return null};let Sl=(()=>{class e extends ze.a{constructor(e,t,i,n,a,s){super(e),this.usersService=t,this.userHelper=i,this.imagesService=n,this.addressHelper=a,this.nextRequestState=s,this.steps=["group","idp","fields","confirm","done"],this.customImages=[],this.customFiles=[],this.asyncValidatorsEnabled=!1,this.step$=new ut.a(null),this.result$=new ut.a(null)}get step(){return this.step$.value}set step(e){this.step$.next(e)}get result(){return this.result$.value}set result(e){this.result$.next(e)}ngOnInit(){super.ngOnInit();const e=(this.login.auth||{}).role;null==e?this.initializeGroups(this.dataForUiHolder.dataForUi.publicRegistrationGroups):this.addSub(this.usersService.getUserDataForSearch({broker:e===Fe.eb.BROKER?be.a.SELF:null,fields:["groupsForRegistration"]}).subscribe(e=>{this.groupSets=e.groupsForRegistration.filter(e=>e.kind===Fe.A.GROUP_SET),e.groupsForRegistration.find(e=>e.kind!==Fe.A.GROUP_SET&&null==e.groupSet)&&this.groupSets.unshift(null),this.initializeGroups(e.groupsForRegistration.filter(e=>e.kind!==Fe.A.GROUP_SET))}))}initializeGroups(e){null==this.groups&&(this.groups=e,Object(B.h)(this.groups)?this.router.navigateByUrl("/"):(this.group=new V.j(e[0].id,V.G.required),1===e.length?(this.steps=this.steps.filter(e=>"group"!==e),this.showIdentityProviders()):this.step="group"))}ngOnDestroy(){super.ngOnDestroy(),this.image&&(URL.revokeObjectURL(this.image.url),this.errorHandler.requestWithCustomErrorHandler(()=>{this.addSub(this.imagesService.deleteImage({idOrKey:this.image.id}).subscribe())}))}showIdentityProviders(){this.addSub(this.usersService.getUserDataForNew({group:this.group.value,fields:["-agreements.content"]}).subscribe(e=>{this.data=e,Object(B.h)(e.identityProviders)?this.showFields():this.step="idp"}))}continueWithProvider(e){e?this.authHelper.identityProviderPopup(e,"register",this.group.value).pipe(Object(_s.a)()).subscribe(e=>{switch(e.status){case Fe.B.REGISTRATION_DONE:this.nextRequestState.replaceSession(e.sessionToken).pipe(Object(_s.a)()).subscribe(()=>{Object(B.B)(!0),this.dataForUiHolder.initialize().subscribe(e=>{Object(B.B)(!1),be.a.isRestrictedAccess(e)||this.router.navigateByUrl("")})});break;case Fe.B.REGISTRATION_DATA:this.identityProviderRequestId=e.requestId,this.data.captchaType=null;const t=this.data.user;if(e.name&&(t.name=e.name),e.username&&(t.username=e.username),e.email&&(t.email=e.email),e.mobilePhone&&(t.mobilePhones=[{number:e.mobilePhone}]),e.landLinePhone&&(t.landLinePhones=[{number:e.landLinePhone,extension:e.landLineExtension}]),e.customValues){t.customValues||(t.customValues={});for(const i of Object.keys(e.customValues))t.customValues[i]=e.customValues[i]}e.image&&(t.images=[e.image.id],this.image=e.image),this.showFields();break;default:this.notification.error(e.errorMessage||this.i18n.error.general)}}):this.showFields()}showFields(){this.prepareForms(this.data),Object(B.k)()}backToGroup(){this.form=null,this.data=null,this.step="group"}backToIdentityProviders(){this.data&&!Object(B.h)(this.data.identityProviders)?this.step="idp":this.backToGroup()}backToFields(){this.confirmForm=null,this.step="fields"}prepareForms(e){this.form=this.formBuilder.group({group:this.group.value,hiddenFields:[e.user.hiddenFields||[]]}),[this.mobileForm,this.landLineForm]=this.userHelper.setupRegistrationForm(this.form,e,e=>this.serverSideValidator(e));const t=e.addressConfiguration,i=t.availability;if(i!==Fe.i.DISABLED){this.defineAddress=this.formBuilder.control(i===Fe.i.REQUIRED),this.addressForm=this.addressHelper.addressFormGroup(t);const n=e.addressConfiguration.address;this.addressForm.patchValue(n);for(const e of t.enabledFields){let t=n[e]||null;this.addSub(this.addressForm.get(e).valueChanges.subscribe(e=>{t!==e&&this.addressForm.get("location").patchValue({latitude:null,longitude:null}),t=e}))}}else this.addressForm=null,this.defineAddress=null;this.data=e,this.step="fields"}serverSideValidator(e){return this.login.user?null:t=>{if(!this.asyncValidatorsEnabled)return Object($r.a)(null);let i=t.value;return Object(B.h)(i)||!t.dirty?Object($r.a)(null):(i instanceof Array&&(i=i.join("|")),Object(Gr.a)(be.a.DEBOUNCE_TIME).pipe(Object(Br.a)(()=>this.usersService.validateUserRegistrationField({group:this.group.value,field:e,value:i})),Object(Jr.a)(e=>e?{message:e}:null)))}}showConfirm(){const e=new V.m({user:this.form});this.mobileForm&&e.setControl("mobile",this.mobileForm),this.landLineForm&&e.setControl("landLine",this.landLineForm),this.addressForm&&this.defineAddress.value&&e.setControl("address",this.addressForm),this.asyncValidatorsEnabled=!0;const t=Object(B.F)(e,!0);this.addSub(Object(B.u)(t).subscribe(e=>{this.asyncValidatorsEnabled=!1,e?this.doShowConfirm():Object(B.l)()}))}doShowConfirm(){const e=this.data;this.confirmForm=this.formBuilder.group({});const t=this.userHelper.passwordRegistrationForms(e);this.confirmForm.setControl("passwords",this.formBuilder.array(t)),Object(B.h)(e.securityQuestions)||(this.confirmForm.setControl("securityQuestion",this.formBuilder.control("")),this.confirmForm.setControl("securityAnswer",this.formBuilder.control("",yl))),Object(B.h)(e.agreements)||this.confirmForm.setControl("acceptAgreements",this.formBuilder.control([])),null!=e.captchaType&&this.confirmForm.setControl("captcha",this.authHelper.captchaFormGroup()),this.step="confirm",Object(B.y)()}register(){const e=Object(B.F)(this.confirmForm,!0);this.addSub(Object(B.u)(e).subscribe(e=>{e?this.addSub(this.usersService.createUser({body:this.userNew}).subscribe(e=>{this.result=e,this.image=null,this.step="done"})):Object(B.l)()}))}get userNew(){const e=this.form.value;e.identityProviderRequestId=this.identityProviderRequestId;const t=(this.mobileForm||{}).value,i=(this.landLineForm||{}).value,n=(this.addressForm||{}).value;return this.image&&(e.images=[this.image.id]),t&&!Object(B.a)(t.number)&&(e.mobilePhones=[t]),i&&!Object(B.a)(i.number)&&(e.landLinePhones=[i]),n&&this.defineAddress.value&&(e.addresses=[n]),Object(B.e)(this.confirmForm.value,e),e}goToLogin(){this.login.goToLoginPage("")}viewProfile(){const e=this.result;e&&this.router.navigate(["users",e.user.id,"profile"])}addCustomImages(e){this.customImages=[...this.customImages,...e]}addCustomFiles(e){this.customFiles=[...this.customFiles,...e]}resolveMenu(){switch(this.dataForUiHolder.role){case Fe.eb.ADMINISTRATOR:return d.b.ADMIN_REGISTRATION;case Fe.eb.BROKER:return d.b.BROKER_REGISTRATION;default:return d.b.PUBLIC_REGISTRATION}}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.K),b.Nb(c.a),b.Nb(r.p),b.Nb(Ns.a),b.Nb(Ur.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["user-registration"]],features:[b.wb],decls:9,vars:11,consts:[["size","large",3,"ready","ngSwitch"],["last","",3,"heading","mobileHeading","mode",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["last","",3,"heading","mobileHeading","mode"],[1,"flex-grow-1"],[3,"groupSets","groups","control"],["forceRow",""],[3,"disabled","label","action"],[3,"identityProviders","continue"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[3,"data","form","mobileForm","landLineForm","defineAddress","addressForm","image","imageUploaded","imageRemoved","customImagesUploaded","customFilesUploaded"],[3,"data","form","user","image","customImages","customFiles"],[3,"result"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.ec(2,"async"),b.Fc(3,ll,7,12,"page-content",1),b.Fc(4,dl,7,7,"page-content",1),b.Fc(5,fl,8,17,"page-content",1),b.Fc(6,ml,9,16,"page-content",1),b.Fc(7,vl,9,11,"page-content",1),b.Fc(8,kl,2,0,"page-content",2),b.Sb()),2&e&&(b.kc("ready",b.fc(1,7,t.step$))("ngSwitch",b.fc(2,9,t.step$)),b.zb(3),b.kc("ngSwitchCase","group"),b.zb(1),b.kc("ngSwitchCase","idp"),b.zb(1),b.kc("ngSwitchCase","fields"),b.zb(1),b.kc("ngSwitchCase","confirm"),b.zb(1),b.kc("ngSwitchCase","done"))},directives:[m.a,p.x,p.y,p.z,h.a,nc,j.a,Q.a,rc,p.t,Pc,ol,cl,Vs.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function Tl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content"),b.Ob(1,"registration-step-done",2),b.Tb(2,"actions"),b.Tb(3,"button",3),b.bc("click",(function(){return b.wc(e),b.dc().goToLogin()})),b.Hc(4),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.dc();b.zb(1),b.kc("result",e.result),b.zb(3),b.Jc(" ",e.i18n.menu.login," ")}}let Il=(()=>{class e extends ze.a{constructor(e,t){super(e),this.validationService=t}get result(){return this.data}ngOnInit(){this.addSub(this.validationService.validateUserRegistration({key:this.route.snapshot.params.key}).subscribe(e=>{this.data=e}))}goToLogin(){this.login.goToLoginPage("")}resolveMenu(){return this.authHelper.homeMenu()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.L))},e.\u0275cmp=b.Hb({type:e,selectors:[["validate-registration"]],features:[b.wb],decls:3,vars:4,consts:[["size","medium","hideMenu","",3,"ready"],[4,"ngIf"],[3,"result"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Tl,5,2,"page-content",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,cl,j.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();const Fl=["field"],zl=function(){return{excludeContacts:!0}};let Ol=(()=>{class e extends Ha.a{constructor(e,t,i){super(e),this.modalRef=t,this.contactsService=i,this.done=new b.n,this.control=new V.j(null,V.G.required)}addContact(){if(Object(B.F)(this.control),!this.control.valid)return;const e=this.field.selection;this.addSub(this.contactsService.createContact({user:be.a.SELF,body:{contact:this.control.value}}).subscribe(()=>{this.done.emit(e),this.modalRef.hide()}))}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.a),b.Nb(r.i))},e.\u0275cmp=b.Hb({type:e,selectors:[["add-contact-dialog"]],viewQuery:function(e,t){var i;1&e&&b.Cc(Fl,!0),2&e&&b.tc(i=b.cc())&&(t.field=i.first)},outputs:{done:"done"},features:[b.wb],decls:10,vars:12,consts:[["focused","",3,"filters","allowContacts","allowPrincipal","formControl","label"],["field",""],["forceRow",""],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-outline-primary",3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"h1"),b.Hc(1),b.Sb(),b.Ob(2,"user-field",0,1),b.Tb(4,"actions",2),b.Tb(5,"button",3),b.bc("click",(function(){return t.addContact()})),b.ec(6,"async"),b.Hc(7),b.Sb(),b.Tb(8,"button",4),b.bc("click",(function(){return t.modalRef.hide()})),b.Hc(9),b.Sb(),b.Sb()),2&e&&(b.zb(1),b.Ic(t.i18n.user.title.addContact),b.zb(1),b.kc("filters",b.mc(11,zl))("allowContacts",!1)("allowPrincipal",!1)("formControl",t.control)("label",t.i18n.user.contact),b.zb(3),b.kc("disabled",b.fc(6,9,t.requesting$)),b.zb(2),b.Jc(" ",t.i18n.general.submit," "),b.zb(2),b.Jc(" ",t.i18n.general.cancel," "))},directives:[ge.a,Et.a,V.v,V.k,j.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Al=i("PzFp");const Cl=["usersResults"];function wl(e,t){1&e&&b.Pb(0)}const El=function(e){return{"d-none":e}};function Nl(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.ec(2,"async"),b.Tb(3,"div",4),b.Ob(4,"result-type-field",5),b.ec(5,"async"),b.Sb(),b.Sb(),b.Tb(6,"users-results",6,7),b.bc("update",(function(t){return b.wc(e),b.dc().update(t)})),b.ec(8,"async"),b.ec(9,"async"),b.ec(10,"async"),b.ec(11,"async"),b.Sb()}if(2&e){const e=b.dc();b.kc("ngClass",b.nc(25,El,b.fc(1,11,e.layout.xxs$)))("heading",e.i18n.user.title.contactList)("mobileHeading",e.i18n.user.mobileTitle.contactList)("headingActions",b.fc(2,13,e.headingActions$)),b.zb(4),b.kc("formControl",e.resultTypeControl)("allowedResultTypes",b.fc(5,15,e.allowedResultTypes$)),b.zb(2),b.kc("ngClass",b.nc(27,El,b.fc(8,17,e.rendering$)))("results",b.fc(9,19,e.results$))("rendering$",e.rendering$)("data",b.fc(10,21,e.data$))("resultType",b.fc(11,23,e.resultType$))}}let Rl=(()=>{class e extends fe.a{constructor(e,t,i){super(e),this.modal=t,this.contactsService=i,this.ResultType=Pa.a}getFormControlNames(){return["user","keywords"]}getInitialResultType(){return this.layout.xxs?Pa.a.LIST:Pa.a.TILES}ngOnInit(){super.ngOnInit(),this.allowedResultTypes=[Pa.a.TILES,Pa.a.LIST],this.stateManager.cache("data",this.contactsService.getContactListDataForSearch({user:be.a.SELF})).subscribe(e=>{this.data=e})}toSearchParams(e){return e.user=be.a.SELF,e}doSearch(e){return this.contactsService.searchContactList$Response(e)}onDataInitialized(e){super.onDataInitialized(e);const t=(e.fieldsInList||[]).slice();t.includes("display")||(t.unshift("display"),e.fieldsInList=t),(((this.login.auth||{}).permissions||{}).users||{}).search&&(this.headingActions=[new G.c("add",this.i18n.general.addNew,()=>this.addNew(),!0)])}addNew(){const e=this.modal.show(Ol,{class:"modal-form"});this.addSub(e.content.done.subscribe(e=>{this.notification.snackBar(this.i18n.user.profile.addContactDone(e.display)),this.reload()}))}resolveMenu(e){return this.authHelper.userMenu(e.user,d.b.CONTACTS)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.b),b.Nb(r.i))},e.\u0275cmp=b.Hb({type:e,selectors:[["contact-list"]],viewQuery:function(e,t){var i;1&e&&b.Lc(Cl,!0),2&e&&b.tc(i=b.cc())&&(t.usersResults=i.first)},features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"ngClass","heading","mobileHeading","headingActions"],[1,"filters-row"],[3,"formControl","allowedResultTypes"],["resultKind","contact",3,"ngClass","results","rendering$","data","resultType","update"],["usersResults",""]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,wl,1,0,"ng-container",1),b.Sb(),b.Fc(3,Nl,12,29,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,p.q,Al.a,V.v,V.k,ss],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Dl=i("z3FF"),Pl=i("fe3a"),Hl=i("uao2");function xl(e,t){1&e&&b.Pb(0)}function _l(e,t){if(1&e&&(b.Tb(0,"div",14),b.Tb(1,"label-value",15),b.Ob(2,"user-link",16),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",e.broker)}}function Ll(e,t){1&e&&b.Ob(0,"div",17)}function Ml(e,t){if(1&e&&(b.Tb(0,"div",14),b.Ob(1,"input-field",18),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.general.keywords)}}function Ul(e,t){if(1&e&&b.Ob(0,"field-option",21),2&e){const e=t.$implicit,i=b.dc(4);b.kc("value",i.ApiHelper.internalNameOrId(e))("internalName",e.internalName)("id",e.id)("text",e.name)("parent",e.groupSet)}}function $l(e,t){if(1&e&&(b.Tb(0,"div",14),b.Tb(1,"multi-selection-field",19),b.Fc(2,Ul,1,5,"field-option",20),b.Sb(),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.kc("label",e.i18n.user.groupFilter),b.zb(1),b.kc("ngForOf",e.data.groups)}}function Gl(e,t){if(1&e&&(b.Tb(0,"div",14),b.Ob(1,"max-distance-field",22),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.kc("data",e.data.searchByDistanceData)("label",e.i18n.general.distanceFilter)}}function Bl(e,t){if(1&e&&(b.Tb(0,"div",14),b.Ob(1,"basic-profile-field-filter",24),b.Sb()),2&e){const e=t.$implicit,i=b.dc(4);b.zb(1),b.kc("field",e)("formControl",i.form.get("profileFields").get(e.field))}}function Jl(e,t){if(1&e&&(b.Tb(0,"div",14),b.Ob(1,"custom-field-filter",24),b.Sb()),2&e){const e=t.$implicit,i=b.dc(4);b.zb(1),b.kc("field",e)("formControl",i.form.get("profileFields").get(e.internalName))}}function Vl(e,t){if(1&e&&(b.Rb(0),b.Fc(1,Bl,2,2,"div",23),b.Fc(2,Jl,2,2,"div",23),b.Qb()),2&e){const e=b.dc(3);b.zb(1),b.kc("ngForOf",e.data.basicFields),b.zb(1),b.kc("ngForOf",e.customFieldsInSearch)}}function ql(e,t){if(1&e&&(b.Rb(0),b.Fc(1,$l,3,2,"div",6),b.Fc(2,Gl,2,2,"div",6),b.Fc(3,Vl,3,2,"ng-container",8),b.ec(4,"async"),b.Qb()),2&e){const e=b.dc(2);b.zb(1),b.kc("ngIf",(null==e.data.groups?null:e.data.groups.length)>1),b.zb(1),b.kc("ngIf",e.data.searchByDistanceData),b.zb(1),b.kc("ngIf",b.fc(4,3,e.moreFilters$))}}function jl(e,t){if(1&e&&(b.Tb(0,"div",25),b.Tb(1,"single-selection-field",26),b.Ob(2,"field-option",27),b.Ob(3,"field-option",28),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("formControl",e.form.get("orderBy"))("display",e.i18n.general.orderBy)("emptyOption",e.i18n.general.orderByRelevance),b.zb(1),b.kc("text",e.i18n.user.orderBy.alphabeticallyAsc),b.zb(1),b.kc("text",e.i18n.user.orderBy.alphabeticallyDesc)}}function Ql(e,t){if(1&e){const e=b.Ub();b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"form",4),b.Tb(3,"div",5),b.Fc(4,_l,3,2,"div",6),b.Fc(5,Ll,1,0,"div",7),b.ec(6,"async"),b.Fc(7,Ml,2,1,"div",6),b.Fc(8,ql,5,5,"ng-container",8),b.ec(9,"async"),b.Sb(),b.Sb(),b.Tb(10,"div",9),b.Tb(11,"div",10),b.Ob(12,"result-type-field",11),b.ec(13,"async"),b.Sb(),b.Fc(14,jl,4,5,"div",12),b.ec(15,"async"),b.ec(16,"async"),b.Sb(),b.Sb(),b.Tb(17,"users-results",13),b.bc("update",(function(t){return b.wc(e),b.dc().update(t)})),b.ec(18,"async"),b.ec(19,"async"),b.ec(20,"async"),b.ec(21,"async"),b.Sb()}if(2&e){const e=b.dc();b.kc("heading",e.heading)("mobileHeading",e.mobileHeading)("headingActions",b.fc(1,16,e.headingActions$)),b.zb(2),b.kc("formGroup",e.form),b.zb(2),b.kc("ngIf",!e.self&&e.broker),b.zb(1),b.kc("ngIf",b.fc(6,18,e.layout.gtsm$)&&!e.self&&e.broker),b.zb(2),b.kc("ngIf",e.data.allowKeywords),b.zb(1),b.kc("ngIf",b.fc(9,20,e.layout.gtxxs$)),b.zb(4),b.kc("allowedResultTypes",b.fc(13,22,e.allowedResultTypes$))("formControl",e.resultTypeControl),b.zb(2),b.kc("ngIf",b.fc(15,24,e.layout.gtxxs$)&&"map"!==b.fc(16,26,e.resultType$)),b.zb(3),b.kc("results",b.fc(18,28,e.results$))("rendering$",e.rendering$)("data",b.fc(19,30,e.data$))("resultType",b.fc(20,32,e.resultType$))("referencePoint",(b.fc(21,34,e.form.valueChanges)||e.form.value).distanceFilter)}}var Yl=function(e){return e[e.Public=0]="Public",e[e.Member=1]="Member",e[e.Admin=2]="Admin",e[e.Broker=3]="Broker",e}({});let Kl=(()=>{class e extends fe.a{constructor(e,t,i){super(e),this.usersService=t,this.countriesResolve=i,this.ResultType=Pa.a,this.UserSearchKind=Yl,this.empty=B.h}getFormControlNames(){return["keywords","groups","customValues","distanceFilter","orderBy"]}getInitialResultType(){const e=this.layout.getBreakpointConfiguration("defaultUsersResultType");return e&&this.allowedResultTypes.includes(e)?e:this.layout.xxs?Pa.a.LIST:Pa.a.TILES}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user||be.a.SELF,this.self=this.authHelper.isSelf(this.param);const e=this.login.auth,t=null==e?null:e.role,i=this.router.url;i.includes("search")?this.kind=null==t?Yl.Public:t===Fe.eb.ADMINISTRATOR?Yl.Admin:Yl.Member:i.includes("brokerings")&&(this.kind=Yl.Broker),this.manager=[Yl.Admin,Yl.Broker].includes(this.kind);const n=[Yl.Public,Yl.Member].includes(this.kind);n?(this.heading=this.i18n.user.title.directory,this.mobileHeading=this.i18n.user.mobileTitle.directory):this.kind===Yl.Broker?this.self?(this.heading=this.i18n.user.title.myBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.myBrokerings):(this.heading=this.i18n.user.title.userBrokerings,this.mobileHeading=this.i18n.user.mobileTitle.userBrokerings):this.kind===Yl.Admin&&(this.heading=this.i18n.user.title.search,this.mobileHeading=this.i18n.user.mobileTitle.search);const a=((e||{}).permissions||{}).users||{};if(this.canSearch=this.kind===Yl.Broker||!!a.search,this.canViewMap=n&&a.map,!this.canSearch&&!this.canViewMap)return void this.errorHandler.handleForbiddenError({});const s=[];this.canSearch&&(s.push(Pa.a.TILES),s.push(Pa.a.LIST)),(this.canViewMap||this.manager)&&s.push(Pa.a.MAP),this.allowedResultTypes=s,this.countries$=this.countriesResolve.data,this.resultType=this.getInitialResultType(),this.onResultTypeChanged(this.resultType,null)}shouldUpdateOnResultTypeChange(){return!1}onResultTypeChanged(e,t){const i=e===Pa.a.MAP;(i!==(t===Pa.a.MAP)||null==t)&&(this.data=null,this.resetPage());const n=e=>{Object(B.h)(e.fieldsInList)&&(e.fieldsInList=["display"]),this.doIgnoringUpdate(()=>{this.customFieldsInSearch=e.customFields.filter(t=>e.fieldsInSearch.includes(t.internalName)),this.form.setControl("profileFields",this.fieldHelper.profileFieldsForSearchFormGroup(e.basicFields,this.customFieldsInSearch)),!this.broker&&e.broker&&(this.broker=e.broker),this.data=e,this.headingActions=[...Object(B.h)(e.fieldsInSearch)?[]:[this.moreFiltersAction],...this.exportHelper.headingActions(this.data.exportFormats,e=>this.usersService.exportUsers$Response(Object.assign({format:e.internalName},this.toSearchParams(this.form.value))))]})};null==this.data&&(this.rendering=!0,i&&!this.manager?this.stateManager.cache("dataForMap",this.usersService.getDataForMapDirectory()).subscribe(n):this.stateManager.cache("dataForSearch",this.usersService.getUserDataForSearch({fromMenu:!0,broker:this.kind===Yl.Broker?this.param:null})).subscribe(n))}toSearchParams(e){const t=Object.assign({},e);this.kind===Yl.Broker&&(t.brokers=[this.param]),t.profileFields=this.fieldHelper.toProfileFieldsFilter(e.profileFields);const i=e.distanceFilter;i&&(t.maxDistance=i.maxDistance,t.latitude=i.latitude,t.longitude=i.longitude);const n=this.resultType===Pa.a.MAP;return t.fromMenu=this.kind!==Yl.Broker,n&&(t.pageSize=99999,t.addressResult=Fe.wb.ALL),t}doSearch(e){return this.resultType!==Pa.a.MAP||this.manager?this.usersService.searchUsers$Response(e):this.usersService.searchMapDirectory$Response(e)}resolveMenu(){switch(this.kind){case Yl.Broker:return d.b.MY_BROKERED_USERS;case Yl.Public:return d.b.PUBLIC_DIRECTORY;default:return d.b.SEARCH_USERS}}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(r.K),b.Nb(s.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-users"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],["class","col-md-6",4,"ngIf"],[4,"ngIf"],[1,"row","filters-row"],[1,"col-12","col-xs-7","col-md-9"],[3,"allowedResultTypes","formControl"],["class","col-12 col-xs-5 col-md-3",4,"ngIf"],[3,"results","rendering$","data","resultType","referencePoint","update"],[1,"col-12","col-md-6"],["labelPosition","side",3,"label"],[3,"user"],[1,"col-md-6"],["labelPosition","side","formControlName","keywords",3,"label"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],["labelPosition","side","formControlName","distanceFilter",3,"data","label"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["labelPosition","side",3,"field","formControl"],[1,"col-12","col-xs-5","col-md-3"],[3,"formControl","display","emptyOption"],["value","alphabeticallyAsc",3,"text"],["value","alphabeticallyDesc",3,"text"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,xl,1,0,"ng-container",1),b.Sb(),b.Fc(3,Ql,22,36,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,V.I,V.w,V.n,Al.a,V.v,V.k,ss,q.a,dt.a,bt.a,V.l,Ke.a,p.s,he.a,Dl.a,Pl.a,Hl.a,pe.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var Xl=i("XS/k");function Wl(e,t){1&e&&b.Pb(0)}function Zl(e,t){if(1&e&&(b.Tb(0,"div",11),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.zb(1),b.Kc(" ",t.i18n.general.performedBy,": ",e.by.display," ")}}function eu(e,t){if(1&e&&(b.Tb(0,"mobile-result",8),b.Tb(1,"div",9),b.Hc(2),b.Sb(),b.Fc(3,Zl,2,2,"div",10),b.Sb()),2&e){const e=t.$implicit,i=b.dc(2);b.kc("date",null==e.period?null:e.period.date),b.zb(2),b.Kc(" ",i.i18n.general.status,": ",i.userHelper.userStatus(e.status)," "),b.zb(1),b.kc("ngIf",e.by)}}function tu(e,t){if(1&e&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Hc(2),b.ec(3,"date"),b.Sb(),b.Tb(4,"td"),b.Hc(5),b.Sb(),b.Tb(6,"td"),b.Hc(7),b.Sb(),b.Sb()),2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.Ic(b.fc(3,3,null==e.period?null:e.period.begin)),b.zb(3),b.Ic(i.userHelper.userStatus(e.status)),b.zb(2),b.Ic(null==e.by?null:e.by.display)}}function iu(e,t){if(1&e&&(b.Tb(0,"table",12),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Tb(6,"th"),b.Hc(7),b.Sb(),b.Sb(),b.Tb(8,"tbody"),b.Fc(9,tu,8,5,"tr",13),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(3),b.Ic(e.i18n.general.date),b.zb(2),b.Ic(e.i18n.general.status),b.zb(2),b.Ic(e.i18n.general.performedBy),b.zb(2),b.kc("ngForOf",e.data.history)}}function nu(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.Ob(1,"user-info",4),b.Sb(),b.Tb(2,"results-layout",5),b.Fc(3,eu,4,4,"mobile-result",6),b.Fc(4,iu,10,4,"table",7),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.operator?e.i18n.userStatus.title.historyOperator:e.i18n.userStatus.title.historyUser)("mobileHeading",e.operator?e.i18n.userStatus.mobileTitle.historyOperator:e.i18n.userStatus.mobileTitle.historyUser),b.zb(1),b.kc("user",e.data.user),b.zb(1),b.kc("results",e.data.history)}}let au=(()=>{class e extends u.a{constructor(e,t,i){super(e),this.userStatusService=t,this.userHelper=i}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:["user","history"]}).subscribe(e=>{this.data=e}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(e){return this.authHelper.searchUsersMenu(e.user)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(Xl.a),b.Nb(c.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-user-status-history"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],[3,"heading","mobileHeading"],[3,"user"],[3,"results"],[3,"date",4,"mobileResult"],["class","table table-hover",4,"resultTable"],[3,"date"],[1,"cell-main"],["class","cell-text",4,"ngIf"],[1,"cell-text"],[1,"table","table-hover"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Wl,1,0,"ng-container",1),b.Sb(),b.Fc(3,nu,5,4,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,y.a,g.a,v.a,k.a,S.a,p.s],pipes:[p.b,F.a],encapsulation:2,changeDetection:0}),e})();function su(e,t){if(1&e&&b.Ob(0,"field-option",11),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",e)("text",i.userHelper.userStatus(e))}}function ou(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Ob(1,"hr"),b.Tb(2,"form",6),b.Tb(3,"single-selection-field",7),b.Fc(4,su,1,2,"field-option",8),b.Sb(),b.Ob(5,"textarea-field",9),b.Sb(),b.Tb(6,"actions"),b.Tb(7,"button",10),b.bc("click",(function(){return b.wc(e),b.dc(2).save()})),b.Hc(8),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=b.dc(2);b.zb(2),b.kc("formGroup",e.form),b.zb(1),b.kc("label",e.i18n.userStatus.new),b.zb(1),b.kc("ngForOf",e.data.possibleNewStatuses),b.zb(1),b.kc("label",e.i18n.general.comments),b.zb(3),b.Ic(e.i18n.general.submit)}}function ru(e,t){if(1&e&&(b.Tb(0,"page-content",2),b.ec(1,"async"),b.Ob(2,"user-info",3),b.Tb(3,"label-value",4),b.Hc(4),b.Sb(),b.Fc(5,ou,9,5,"ng-container",5),b.Sb()),2&e){const e=b.dc();b.kc("heading",e.operator?e.i18n.userStatus.title.statusOperator:e.i18n.userStatus.title.statusUser)("mobileHeading",e.operator?e.i18n.userStatus.mobileTitle.statusOperator:e.i18n.userStatus.mobileTitle.statusUser)("headingActions",b.fc(1,7,e.headingActions$)),b.zb(2),b.kc("user",e.data.user),b.zb(1),b.kc("label",e.i18n.userStatus.current),b.zb(1),b.Jc(" ",e.userHelper.userStatus(e.data.status)," "),b.zb(1),b.kc("ngIf",e.editable)}}let cu=(()=>{class e extends u.a{constructor(e,t,i){super(e),this.userStatusService=t,this.userHelper=i}get editable(){return!Object(B.h)(this.data.possibleNewStatuses)}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.user,this.addSub(this.userStatusService.getUserStatus({user:this.param,fields:["-history"]}).subscribe(e=>{this.data=e})),this.form=this.formBuilder.group({status:[null,V.G.required],comment:null}),this.headingActions=[new G.c("history",this.i18n.general.viewHistory,()=>this.router.navigate(["users",this.param,"status","history"]),!0)]}save(){if(Object(B.F)(this.form),!this.form.valid)return;const e=this.form.value.status;let t;const i=this.data.user,n=this.userHelper.isOperator(i);switch(e){case Fe.Fb.ACTIVE:t=this.i18n.userStatus.confirm.active(i.display);break;case Fe.Fb.BLOCKED:t=this.i18n.userStatus.confirm.blocked(i.display);break;case Fe.Fb.DISABLED:t=this.i18n.userStatus.confirm.disabled(i.display);break;case Fe.Fb.REMOVED:t=this.i18n.userStatus.confirm.removed(i.display);break;case Fe.Fb.PURGED:t=this.i18n.userStatus.confirm.purged(i.display)}let a;a=n?this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeOperator:this.i18n.userStatus.title.changeOperator:this.layout.ltsm?this.i18n.userStatus.mobileTitle.changeUser:this.i18n.userStatus.title.changeUser,this.notification.confirm({title:a,message:t,callback:()=>this.submit(e)})}submit(e){const t=this.data.user.display;this.addSub(this.userStatusService.changeUserStatus({user:this.param,body:this.form.value}).subscribe(()=>{let i;switch(e){case Fe.Fb.ACTIVE:i=this.i18n.userStatus.done.active(t);break;case Fe.Fb.BLOCKED:i=this.i18n.userStatus.done.blocked(t);break;case Fe.Fb.DISABLED:i=this.i18n.userStatus.done.disabled(t);break;case Fe.Fb.REMOVED:i=this.i18n.userStatus.done.removed(t);break;case Fe.Fb.PURGED:i=this.i18n.userStatus.done.purged(t)}this.notification.snackBar(i),this.reload()}))}get operator(){return this.userHelper.isOperator(this.data.user)}resolveMenu(e){return this.authHelper.searchUsersMenu(e.user)}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(Xl.a),b.Nb(c.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-user-status"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading","headingActions",4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[3,"user"],[3,"label"],[4,"ngIf"],[3,"formGroup"],["formControlName","status","required","",3,"label"],[3,"value","text",4,"ngFor","ngForOf"],["formControlName","comment",3,"label"],[1,"btn","btn-primary",3,"click"],[3,"value","text"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,ru,6,9,"page-content",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,y.a,q.a,V.I,V.w,V.n,pe.a,V.v,V.l,V.D,p.s,ft.a,j.a,he.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();var lu=i("Aw04");function uu(e,t){if(1&e&&(b.Tb(0,"label-value",10),b.Hc(1),b.Sb()),2&e){const e=b.dc();b.kc("label",e.i18n.general.user),b.zb(1),b.Jc(" ",e.user.display," ")}}function du(e,t){if(1&e&&b.Ob(0,"user-field",11),2&e){const e=b.dc();b.kc("label",e.i18n.general.user)}}function bu(e,t){if(1&e&&b.Ob(0,"field-option",14),2&e){const e=t.$implicit;b.kc("value",e.id)("text",e.name)}}function fu(e,t){if(1&e&&(b.Tb(0,"single-selection-field",12),b.Fc(1,bu,1,2,"field-option",13),b.ec(2,"async"),b.Sb()),2&e){const e=b.dc();b.kc("label",e.i18n.general.operator)("emptyOption",e.i18n.general.notSet),b.zb(1),b.kc("ngForOf",b.fc(2,3,e.operators$))}}function mu(e,t){if(1&e&&b.Ob(0,"boolean-field",15),2&e){const e=b.dc();b.kc("label",e.i18n.token.action.activate)}}function pu(e,t){1&e&&b.Hc(0,"\xa0")}let hu=(()=>{class e extends Ha.a{constructor(e,t,i,n){super(e),this.modalRef=t,this.tokensService=i,this.operatorsService=n,this.operators$=new ut.a(null),this.canActivate$=new ut.a(!!this.user)}ngOnInit(){this.form=this.formBuilder.group({user:this.user?this.user.id:null,operator:null,value:[null,V.G.required],activateNow:!1}),this.user||this.form.get("user").valueChanges.subscribe(()=>this.fillOperatorsField())}fillOperatorsField(){const e=this.form.get("user").value;e?(this.canActivate$.next(!0),this.operatorsService.searchUserOperators$Response({user:e,skipTotalCount:!0,pageSize:9999999}).subscribe(e=>{var t;e.ok&&(null===(t=e.body)||void 0===t?void 0:t.length)>0?this.operators$.next(e.body):this.operators$.next(null)})):(this.canActivate$.next(!1),this.operators$.next(null))}submit(){if(Object(B.F)(this.form),!this.form.valid)return;const e=Object(lt.cloneDeep)(this.form.value);e.operator&&(e.user=e.operator,delete e.operator),this.tokensService.createToken({type:this.type.id,body:e}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.created),this.updateAction()}),this.modalRef.hide()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.a),b.Nb(r.G),b.Nb(r.w))},e.\u0275cmp=b.Hb({type:e,selectors:[["create-token"]],inputs:{type:"type",user:"user",required:"required",updateAction:"updateAction"},features:[b.wb],decls:16,vars:18,consts:[[1,"d-flex","flex-grow-1","flex-column",3,"formGroup"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],["formControlName","user",3,"label",4,"ngIf"],["formControlName","operator",3,"label","emptyOption",4,"ngIf"],["required","","formControlName","value",3,"mask","label","placeholder"],["formControlName","activateNow",3,"label",4,"ngIf"],["forceRow",""],[3,"label","disabled","action"],["blank",""],["outline","",3,"label","action"],["kind","fieldView","labelPosition","side",3,"label"],["formControlName","user",3,"label"],["formControlName","operator",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"],["formControlName","activateNow",3,"label"]],template:function(e,t){if(1&e&&(b.Tb(0,"h1"),b.Hc(1),b.Sb(),b.Tb(2,"form",0),b.Fc(3,uu,2,2,"label-value",1),b.Fc(4,du,1,1,"user-field",2),b.Fc(5,fu,3,5,"single-selection-field",3),b.ec(6,"async"),b.Ob(7,"input-field",4),b.Fc(8,mu,1,1,"boolean-field",5),b.ec(9,"async"),b.Tb(10,"actions",6),b.Tb(11,"action-button",7),b.bc("action",(function(){return t.submit()})),b.ec(12,"async"),b.Sb(),b.Fc(13,pu,1,0,"ng-template",null,8,b.Gc),b.Tb(15,"action-button",9),b.bc("action",(function(){return t.modalRef.hide()})),b.Sb(),b.Sb(),b.Sb()),2&e){var i;const e=(null==(i=b.fc(6,12,t.operators$))?null:i.length)>0;b.zb(1),b.Ic(t.i18n.token.title.new(t.type.name)),b.zb(1),b.kc("formGroup",t.form),b.zb(1),b.kc("ngIf",t.user),b.zb(1),b.kc("ngIf",!t.user),b.zb(1),b.kc("ngIf",e),b.zb(2),b.kc("mask",t.type.mask)("label",t.i18n.token.value)("placeholder",t.type.mask?t.type.mask:""),b.zb(1),b.kc("ngIf",b.fc(9,14,t.canActivate$)),b.zb(3),b.kc("label",t.i18n.general.submit)("disabled",b.fc(12,16,t.requesting$)),b.zb(4),b.kc("label",t.i18n.general.cancel)}},directives:[V.I,V.w,V.n,p.t,bt.a,V.D,V.v,V.l,lu.a,j.a,Q.a,q.a,ge.a,pe.a,p.s,he.a,Oe.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function gu(e,t){if(1&e&&b.Ob(0,"user-info",7),2&e){const e=b.dc(2);b.kc("user",e.data.user)}}function vu(e,t){if(1&e&&(b.Tb(0,"label-value",10),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit,t=b.dc(2);b.kc("label",t.i18n.general.operator),b.zb(1),b.Jc(" ",null!=e.user&&e.user.user?e.user.display:""," ")}}function ku(e,t){if(1&e){const e=b.Ub();b.Tb(0,"mobile-result"),b.Tb(1,"div",8),b.Tb(2,"div"),b.Fc(3,vu,2,2,"label-value",9),b.Tb(4,"label-value",10),b.Hc(5),b.Sb(),b.Tb(6,"label-value",10),b.Hc(7),b.ec(8,"date"),b.Sb(),b.Tb(9,"label-value",10),b.Hc(10),b.ec(11,"date"),b.Sb(),b.Tb(12,"label-value",10),b.Hc(13),b.ec(14,"date"),b.Sb(),b.Tb(15,"label-value",10),b.Hc(16),b.Sb(),b.Sb(),b.Tb(17,"div",11),b.Tb(18,"button",12),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(2);return a.router.navigate(a.view(n)),i.stopPropagation(),i.preventDefault()})),b.Ob(19,"icon",13),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(2);b.zb(3),b.kc("ngIf",!i.self),b.zb(1),b.kc("label",i.isNfc()?i.i18n.token.label:i.i18n.token.value),b.zb(1),b.Jc(" ",e.value," "),b.zb(1),b.kc("label",i.i18n.token.creationDate),b.zb(1),b.Jc(" ",b.fc(8,12,e.creationDate)," "),b.zb(2),b.kc("label",i.i18n.token.activationDate),b.zb(1),b.Jc(" ",b.fc(11,14,e.activationDate)," "),b.zb(2),b.kc("label",i.i18n.token.expiryDate),b.zb(1),b.Jc(" ",b.fc(14,16,e.expiryDate)," "),b.zb(2),b.kc("label",i.i18n.general.status),b.zb(1),b.Jc(" ",i.statusDisplay(e.status)," "),b.zb(2),b.kc("tooltip",i.i18n.general.view)}}function yu(e,t){if(1&e&&(b.Tb(0,"th"),b.Hc(1),b.Sb()),2&e){const e=b.dc(3);b.zb(1),b.Ic(e.i18n.general.operator)}}function Su(e,t){if(1&e&&(b.Tb(0,"td"),b.Hc(1),b.Sb()),2&e){const e=b.dc().$implicit;b.zb(1),b.Jc("",null!=e.user&&e.user.user?e.user.display:""," ")}}function Tu(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",16),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(3);return a.router.navigate(a.view(n)),i.stopPropagation(),i.preventDefault()})),b.Fc(1,Su,2,1,"td",1),b.Tb(2,"td"),b.Hc(3),b.Sb(),b.Tb(4,"td"),b.Hc(5),b.ec(6,"date"),b.Sb(),b.Tb(7,"td"),b.Hc(8),b.ec(9,"date"),b.Sb(),b.Tb(10,"td"),b.Hc(11),b.ec(12,"date"),b.Sb(),b.Tb(13,"td"),b.Hc(14),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(1),b.kc("ngIf",!i.self),b.zb(2),b.Ic(e.value),b.zb(2),b.Ic(b.fc(6,6,e.creationDate)),b.zb(3),b.Ic(b.fc(9,8,e.activationDate)),b.zb(3),b.Ic(b.fc(12,10,e.expiryDate)),b.zb(3),b.Ic(i.statusDisplay(e.status))}}function Iu(e,t){if(1&e&&(b.Tb(0,"table",14),b.Tb(1,"thead"),b.Fc(2,yu,2,1,"th",1),b.Tb(3,"th"),b.Hc(4),b.Sb(),b.Tb(5,"th"),b.Hc(6),b.Sb(),b.Tb(7,"th"),b.Hc(8),b.Sb(),b.Tb(9,"th"),b.Hc(10),b.Sb(),b.Tb(11,"th"),b.Hc(12),b.Sb(),b.Sb(),b.Tb(13,"tbody"),b.Fc(14,Tu,15,12,"tr",15),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(2),b.kc("ngIf",!e.self),b.zb(2),b.Ic(e.isNfc()?e.i18n.token.label:e.i18n.token.value),b.zb(2),b.Ic(e.i18n.token.creationDate),b.zb(2),b.Ic(e.i18n.token.activationDate),b.zb(2),b.Ic(e.i18n.token.expiryDate),b.zb(2),b.Ic(e.i18n.general.status),b.zb(2),b.kc("ngForOf",e.data.tokens)}}function Fu(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"page-content",2),b.ec(2,"async"),b.Fc(3,gu,1,1,"user-info",3),b.Sb(),b.Tb(4,"results-layout",4),b.Fc(5,ku,20,18,"mobile-result",5),b.Fc(6,Iu,15,7,"table",6),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(1),b.kc("heading",null==e.data?null:e.data.type.pluralName)("mobileHeading",null==e.data?null:e.data.type.pluralName)("headingActions",b.fc(2,6,e.headingActions$))("mode",e.self?"empty":"normal"),b.zb(2),b.kc("ngIf",!e.self),b.zb(1),b.kc("results",e.data.tokens)}}let zu=(()=>{class e extends ze.a{constructor(e,t,i,n){super(e),this.modal=t,this.userHelper=i,this.tokenService=n}ngOnInit(){super.ngOnInit(),this.user=this.route.snapshot.params.user,this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getUserTokens({user:this.user,type:this.type}).subscribe(e=>this.data=e))}onDataInitialized(e){super.onDataInitialized(e),this.self=this.authHelper.isSelf(e.user),this.canCreate()&&e.type.physicalType!==Fe.Y.NFC_TAG&&(this.headingActions=[new G.c("add",this.i18n.general.add,()=>{this.modal.show(hu,{class:"modal-form",initialState:{type:e.type,user:e.user,required:!0,updateAction:()=>this.reload()}})},!0)]),this.canActivate()&&(this.headingActions=[new G.c("how_to_reg",this.i18n.token.action.activate,()=>{this.notification.confirm({title:this.i18n.token.action.changeExpiry,customFields:[{internalName:"value",name:this.i18n.token.value,type:Fe.p.STRING,pattern:e.type.mask,required:!0}],callback:e=>this.tokenService.activateToken({user:this.user,type:this.type,body:e.customValues.value}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.expiryChanged),this.reload()})})},!0)])}isNfc(){return this.data.type.physicalType===Fe.Y.NFC_TAG}canCreate(){var e;return!this.self&&(null===(e=this.dataForUiHolder.auth.permissions.tokens.user.find(e=>e.type.id===this.type))||void 0===e?void 0:e.create)}canActivate(){var e;return!!this.self&&(null===(e=this.dataForUiHolder.auth.permissions.tokens.my.find(e=>e.type.id===this.type))||void 0===e?void 0:e.activate)}statusDisplay(e){return this.userHelper.tokenStatus(e)}view(e){return["/users","tokens","view",e.id]}resolveMenu(e){return this.authHelper.isSelf(e.user)?new d.a(d.b.MY_TOKENS,{tokenType:e.type}):e.user.user&&this.authHelper.isSelf(e.user.user)?d.b.MY_OPERATORS:this.dataForUiHolder.role===Fe.eb.BROKER?d.b.MY_BROKERED_USERS:d.b.SEARCH_USERS}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.b),b.Nb(c.a),b.Nb(r.G))},e.\u0275cmp=b.Hb({type:e,selectors:[["list-token"]],features:[b.wb],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions","mode"],[3,"user",4,"ngIf"],[3,"results"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"user"],[1,"d-flex"],["labelPosition","above",3,"label",4,"ngIf"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"],[1,"table","table-hover","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Fu,7,8,"ng-container",1),b.Sb()),2&e&&(b.kc("ready",b.fc(1,2,t.data$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,p.t,h.a,g.a,v.a,k.a,y.a,S.a,q.a,T.b,I.a,p.s],pipes:[p.b,F.a],encapsulation:2,changeDetection:0}),e})();function Ou(e,t){1&e&&b.Pb(0)}function Au(e,t){if(1&e&&b.Ob(0,"field-option",20),2&e){const e=t.$implicit,i=b.dc(3);b.kc("value",i.ApiHelper.internalNameOrId(e))("internalName",e.internalName)("id",e.id)("text",e.name)("parent",e.groupSet)}}function Cu(e,t){if(1&e&&(b.Tb(0,"div",6),b.Tb(1,"multi-selection-field",18),b.Fc(2,Au,1,5,"field-option",19),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(1),b.kc("label",e.i18n.user.groupFilter),b.zb(1),b.kc("ngForOf",e.data.groups)}}function wu(e,t){if(1&e){const e=b.Ub();b.Tb(0,"mobile-result"),b.Tb(1,"div",21),b.Tb(2,"div"),b.Tb(3,"label-value",22),b.Hc(4),b.Sb(),b.Tb(5,"label-value",22),b.Hc(6),b.Sb(),b.Tb(7,"label-value",22),b.Hc(8),b.ec(9,"date"),b.Sb(),b.Tb(10,"label-value",22),b.Hc(11),b.ec(12,"date"),b.Sb(),b.Tb(13,"label-value",22),b.Hc(14),b.ec(15,"date"),b.Sb(),b.Tb(16,"label-value",22),b.Hc(17),b.Sb(),b.Sb(),b.Tb(18,"div",23),b.Tb(19,"button",24),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(2);return a.router.navigate(a.view(n)),i.stopPropagation(),i.preventDefault()})),b.Ob(20,"icon",25),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(2);b.zb(3),b.kc("label",i.i18n.general.user),b.zb(1),b.Jc(" ",e.user?e.user.display:i.i18n.token.unassigned," "),b.zb(1),b.kc("label",i.isNfc()?i.i18n.token.label:i.i18n.token.value),b.zb(1),b.Jc(" ",e.value," "),b.zb(1),b.kc("label",i.i18n.token.creationDate),b.zb(1),b.Jc(" ",b.fc(9,13,e.creationDate)," "),b.zb(2),b.kc("label",i.i18n.token.activationDate),b.zb(1),b.Jc(" ",b.fc(12,15,e.activationDate)," "),b.zb(2),b.kc("label",i.i18n.token.expiryDate),b.zb(1),b.Jc(" ",b.fc(15,17,e.expiryDate)," "),b.zb(2),b.kc("label",i.i18n.general.status),b.zb(1),b.Jc(" ",i.statusDisplay(e.status)," "),b.zb(2),b.kc("tooltip",i.i18n.general.view)}}function Eu(e,t){if(1&e){const e=b.Ub();b.Tb(0,"tr",28),b.bc("click",(function(i){b.wc(e);const n=t.$implicit,a=b.dc(3);return a.router.navigate(a.view(n)),i.stopPropagation(),i.preventDefault()})),b.Tb(1,"td"),b.Hc(2),b.Sb(),b.Tb(3,"td"),b.Hc(4),b.Sb(),b.Tb(5,"td"),b.Hc(6),b.ec(7,"date"),b.Sb(),b.Tb(8,"td"),b.Hc(9),b.ec(10,"date"),b.Sb(),b.Tb(11,"td"),b.Hc(12),b.ec(13,"date"),b.Sb(),b.Tb(14,"td"),b.Hc(15),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=b.dc(3);b.zb(2),b.Ic(e.user?e.user.display:i.i18n.token.unassigned),b.zb(2),b.Ic(e.value),b.zb(2),b.Ic(b.fc(7,6,e.creationDate)),b.zb(3),b.Ic(b.fc(10,8,e.activationDate)),b.zb(3),b.Ic(b.fc(13,10,e.expiryDate)),b.zb(3),b.Ic(i.statusDisplay(e.status))}}function Nu(e,t){if(1&e&&(b.Tb(0,"table",26),b.Tb(1,"thead"),b.Tb(2,"th"),b.Hc(3),b.Sb(),b.Tb(4,"th"),b.Hc(5),b.Sb(),b.Tb(6,"th"),b.Hc(7),b.Sb(),b.Tb(8,"th"),b.Hc(9),b.Sb(),b.Tb(10,"th"),b.Hc(11),b.Sb(),b.Tb(12,"th"),b.Hc(13),b.Sb(),b.Sb(),b.Tb(14,"tbody"),b.Fc(15,Eu,16,12,"tr",27),b.ec(16,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc(2);var i;const t=null==(i=b.fc(16,7,e.results$))?null:i.results;b.zb(3),b.Ic(e.i18n.general.user),b.zb(2),b.Ic(e.isNfc()?e.i18n.token.label:e.i18n.token.value),b.zb(2),b.Ic(e.i18n.token.creationDate),b.zb(2),b.Ic(e.i18n.token.activationDate),b.zb(2),b.Ic(e.i18n.token.expiryDate),b.zb(2),b.Ic(e.i18n.general.status),b.zb(2),b.kc("ngForOf",t)}}function Ru(e,t){if(1&e&&(b.Tb(0,"page-content",3),b.ec(1,"async"),b.Tb(2,"form",4),b.Tb(3,"div",5),b.Tb(4,"div",6),b.Ob(5,"user-field",7),b.Sb(),b.Ob(6,"div",8),b.Tb(7,"div",6),b.Ob(8,"date-field",9),b.Sb(),b.Tb(9,"div",6),b.Ob(10,"date-field",10),b.Sb(),b.Ob(11,"div",8),b.Tb(12,"div",6),b.Ob(13,"date-field",11),b.Sb(),b.Tb(14,"div",6),b.Ob(15,"date-field",12),b.Sb(),b.Sb(),b.Tb(16,"div",6),b.Ob(17,"multi-selection-field",13),b.Sb(),b.Fc(18,Cu,3,2,"div",14),b.Sb(),b.Sb(),b.Tb(19,"results-layout",15),b.ec(20,"async"),b.Fc(21,wu,21,19,"mobile-result",16),b.Fc(22,Nu,17,9,"table",17),b.Sb()),2&e){const e=b.dc();b.kc("heading",null==e.data?null:e.data.type.pluralName)("mobileHeading",null==e.data?null:e.data.type.pluralName)("headingActions",b.fc(1,15,e.headingActions$)),b.zb(2),b.kc("formGroup",e.form),b.zb(3),b.kc("label",e.i18n.general.user),b.zb(3),b.kc("label",e.i18n.token.activationBeginDate),b.zb(2),b.kc("label",e.i18n.token.activationEndDate),b.zb(3),b.kc("label",e.i18n.token.expiryBeginDate),b.zb(2),b.kc("label",e.i18n.token.expiryEndDate),b.zb(2),b.kc("emptyLabel",e.i18n.general.notApplied)("label",e.i18n.general.status)("fieldOptions",e.statusOptions),b.zb(1),b.kc("ngIf",(null==e.data.groups?null:e.data.groups.length)>1),b.zb(1),b.kc("results",b.fc(20,17,e.results$))("rendering$",e.rendering$)}}let Du=(()=>{class e extends fe.a{constructor(e,t,i,n){super(e),this.userHelper=t,this.modal=i,this.tokenService=n}getFormControlNames(){return["user","statuses","groups","activationBeginDate","activationEndDate","expiryBeginDate","expiryEndDate"]}ngOnInit(){super.ngOnInit(),this.type=this.route.snapshot.params.type,this.addSub(this.tokenService.getGeneralTokensDataForSearch({type:this.type}).subscribe(e=>this.data=e))}onDataInitialized(e){super.onDataInitialized(e),e.type.physicalType!==Fe.Y.NFC_TAG&&(this.headingActions=[new G.c("add",this.i18n.general.add,()=>{this.modal.show(hu,{class:"modal-form",initialState:{type:e.type,updateAction:()=>this.reload()}})},!0)])}doSearch(e){return this.tokenService.searchGeneralTokens$Response(e)}toSearchParams(e){const t=e;return t.type=this.type,t.activationPeriod=be.a.dateRangeFilter(e.activationBeginDate,e.activationEndDate),t.expiryPeriod=be.a.dateRangeFilter(e.expiryBeginDate,e.expiryEndDate),t}get statusOptions(){return Object.values(Fe.ob).map(e=>({value:e,text:this.statusDisplay(e)}))}statusDisplay(e){return this.userHelper.tokenStatus(e)}isNfc(){return this.data.type.physicalType===Fe.Y.NFC_TAG}view(e){return["/users","tokens","view",e.id]}resolveMenu(e){return new d.a(d.b.USER_TOKENS,{tokenType:e.type})}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(f.b),b.Nb(r.G))},e.\u0275cmp=b.Hb({type:e,selectors:[["search-token"]],features:[b.wb],decls:5,vars:5,consts:[[3,"ready"],[4,"ngIf","ngIfThen"],["content",""],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row","no-gutters"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","user",3,"label"],[1,"w-100"],["labelPosition","side","formControlName","activationBeginDate","minDate","past100","maxDate","today","fieldSize","full",3,"label"],["labelPosition","side","formControlName","activationEndDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","expiryBeginDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","expiryEndDate","minDate","past100","fieldSize","full",3,"label"],["labelPosition","side","formControlName","statuses",3,"emptyLabel","label","fieldOptions"],["class","col-12 col-md-6",4,"ngIf"],[3,"results","rendering$"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],[1,"d-flex"],["labelPosition","above",3,"label"],[1,"ml-auto","text-right","d-flex","flex-column"],[1,"btn","btn-icon",3,"tooltip","click"],["icon","search"],[1,"table","table-hover","cursor-pointer"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){if(1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Fc(2,Ou,1,0,"ng-container",1),b.Sb(),b.Fc(3,Ru,23,19,"ng-template",null,2,b.Gc)),2&e){const e=b.uc(4);b.kc("ready",b.fc(1,3,t.data$)),b.zb(2),b.kc("ngIf",t.data)("ngIfThen",e)}},directives:[m.a,p.t,h.a,V.I,V.w,V.n,ge.a,V.v,V.l,me.a,Ke.a,g.a,v.a,k.a,p.s,he.a,S.a,q.a,T.b,I.a],pipes:[p.b,F.a],encapsulation:2,changeDetection:0}),e})();function Pu(e,t){if(1&e&&b.Ob(0,"field-option",9),2&e){const e=t.$implicit;b.kc("value",e.id)("text",e.display)}}function Hu(e,t){if(1&e&&(b.Tb(0,"single-selection-field",7),b.Fc(1,Pu,1,2,"field-option",8),b.ec(2,"async"),b.Sb()),2&e){const e=b.dc();b.kc("label",e.i18n.general.operator)("emptyOption",e.i18n.general.notSet),b.zb(1),b.kc("ngForOf",b.fc(2,3,e.operators$))}}function xu(e,t){1&e&&b.Hc(0,"\xa0")}let _u=(()=>{class e extends Ha.a{constructor(e,t,i,n){super(e),this.modalRef=t,this.tokensService=i,this.operatorsService=n,this.operators$=new ut.a(null)}ngOnInit(){this.form=this.formBuilder.group({user:[null,V.G.required],operator:null}),this.form.get("user").valueChanges.subscribe(e=>this.fillOperatorsField(e))}fillOperatorsField(e){this.operatorsService.searchUserOperators$Response({user:e.id,skipTotalCount:!0,pageSize:999999}).subscribe(e=>{this.operators$.next(e.ok?e.body:null)})}submit(){if(Object(B.F)(this.form),!this.form.valid)return;const e=Object(lt.cloneDeep)(this.form.value);this.tokensService.assignToken({id:this.token,user:e.operator?e.operator:e.user}).subscribe(()=>{this.notification.snackBar(this.i18n.token.action.done.assigned),this.updateAction()}),this.modalRef.hide()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(f.a),b.Nb(r.G),b.Nb(r.w))},e.\u0275cmp=b.Hb({type:e,selectors:[["assign-token"]],inputs:{token:"token",updateAction:"updateAction"},features:[b.wb],decls:12,vars:11,consts:[[1,"d-flex","flex-grow-1","flex-column",3,"formGroup"],["required","","formControlName","user",3,"label"],["formControlName","operator",3,"label","emptyOption",4,"ngIf"],["forceRow",""],[3,"label","disabled","action"],["blank",""],["outline","",3,"label","action"],["formControlName","operator",3,"label","emptyOption"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(e,t){if(1&e&&(b.Tb(0,"h1"),b.Hc(1),b.Sb(),b.Tb(2,"form",0),b.Ob(3,"user-field",1),b.Fc(4,Hu,3,5,"single-selection-field",2),b.ec(5,"async"),b.Tb(6,"actions",3),b.Tb(7,"action-button",4),b.bc("action",(function(){return t.submit()})),b.ec(8,"async"),b.Sb(),b.Fc(9,xu,1,0,"ng-template",null,5,b.Gc),b.Tb(11,"action-button",6),b.bc("action",(function(){return t.modalRef.hide()})),b.Sb(),b.Sb(),b.Sb()),2&e){var i;const e=(null==(i=b.fc(5,7,t.operators$))?null:i.length)>0;b.zb(1),b.Ic(t.i18n.token.title.assign),b.zb(1),b.kc("formGroup",t.form),b.zb(1),b.kc("label",t.i18n.general.user),b.zb(1),b.kc("ngIf",e),b.zb(3),b.kc("label",t.i18n.general.submit)("disabled",b.fc(8,9,t.requesting$)),b.zb(4),b.kc("label",t.i18n.general.cancel)}},directives:[V.I,V.w,V.n,ge.a,V.D,V.v,V.l,p.t,j.a,Q.a,pe.a,p.s,he.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e})();function Lu(e,t){if(1&e&&(b.Tb(0,"label-value",7),b.Ob(1,"user-link",8),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.user),b.zb(1),b.kc("user",null!=e.data.user&&e.data.user.user?e.data.user.user:e.data.user)}}function Mu(e,t){if(1&e&&(b.Tb(0,"label-value",7),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.operator),b.zb(1),b.Jc(" ",e.data.user.display," ")}}function Uu(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.ec(2,"date"),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.creationDate),b.zb(1),b.Jc(" ",b.fc(2,2,e.data.creationDate)," ")}}function $u(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.ec(2,"date"),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.document.category),b.zb(1),b.Jc(" ",b.fc(2,2,e.data.activationDate)," ")}}function Gu(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.general.status),b.zb(1),b.Jc(" ",e.statusDisplay(e.data.status)," ")}}function Bu(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.ec(2,"date"),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.token.activationDeadline),b.zb(1),b.Jc(" ",e.data.activationDeadline?b.fc(2,2,e.data.activationDeadline):e.i18n.token.noDeadline," ")}}function Ju(e,t){if(1&e&&(b.Tb(0,"label-value",5),b.Hc(1),b.ec(2,"date"),b.Sb()),2&e){const e=b.dc(2);b.kc("label",e.i18n.token.expiryDate),b.zb(1),b.Jc(" ",e.data.expiryDate?b.fc(2,2,e.data.expiryDate):e.i18n.token.noExpiryDate," ")}}function Vu(e,t){1&e&&(b.Ob(0,"img",12),b.ec(1,"trust")),2&e&&b.kc("src",b.gc(1,1,t.ngIf,"url"),b.yc)}function qu(e,t){if(1&e&&(b.Tb(0,"div"),b.Ob(1,"hr",9),b.Tb(2,"div",10),b.Fc(3,Vu,2,4,"img",11),b.ec(4,"async"),b.Sb(),b.Sb()),2&e){const e=b.dc(2);b.zb(3),b.kc("ngIf",b.fc(4,1,e.qrCodeUrl$))}}function ju(e,t){if(1&e&&(b.Rb(0),b.Tb(1,"div",3),b.Fc(2,Lu,2,2,"label-value",4),b.Fc(3,Mu,2,2,"label-value",4),b.Tb(4,"label-value",5),b.Hc(5),b.Sb(),b.Fc(6,Uu,3,4,"label-value",6),b.Fc(7,$u,3,4,"label-value",6),b.Fc(8,Gu,2,2,"label-value",6),b.Fc(9,Bu,3,4,"label-value",6),b.Fc(10,Ju,3,4,"label-value",6),b.Fc(11,qu,5,3,"div",2),b.Sb(),b.Qb()),2&e){const e=b.dc();b.zb(2),b.kc("ngIf",e.showUser()),b.zb(1),b.kc("ngIf",null==e.data.user?null:e.data.user.user),b.zb(1),b.kc("label",e.valueLabel()),b.zb(1),b.Jc(" ",e.data.value," "),b.zb(1),b.kc("ngIf",e.data.creationDate),b.zb(1),b.kc("ngIf",e.data.activationDate),b.zb(1),b.kc("ngIf",e.data.status),b.zb(1),b.kc("ngIf",e.showDeadLine()),b.zb(1),b.kc("ngIf",e.showExpiryDate()),b.zb(1),b.kc("ngIf",e.isQrCode(e.data))}}const Qu=[{path:"",children:[{path:"search",component:Kl},{path:"brokerings",component:Kl,canActivate:[o.a]},{path:":user/brokerings",component:Kl,canActivate:[o.a]},{path:":user/brokers",component:Ue,canActivate:[o.a]},{path:":user/brokers/history",component:Ye,canActivate:[o.a]},{path:":user/brokers/new",component:we,canActivate:[o.a]},{path:":user/profile",component:Mr.b,resolve:{countries:s.a}},{path:":user/profile/edit",component:Pr,canActivate:[o.a],resolve:{countries:s.a}},{path:"operators",component:bs,canActivate:[o.a]},{path:":user/operators",component:bs,canActivate:[o.a]},{path:":user/operators/registration",component:Ra,canActivate:[o.a]},{path:"operators/:user",component:Mr.b,canActivate:[o.a]},{path:"operators/:user/edit",component:Pr,canActivate:[o.a]},{path:":user/status",component:cu,canActivate:[o.a]},{path:":user/status/history",component:au,canActivate:[o.a]},{path:":user/group",component:mi,canActivate:[o.a]},{path:":user/group/history",component:li,canActivate:[o.a]},{path:":user/agreements",component:ue,canActivate:[o.a]},{path:":user/agreements/history",component:$,canActivate:[o.a]},{path:"operator-groups",component:rn,canActivate:[o.a]},{path:":user/operator-groups",component:rn,canActivate:[o.a]},{path:":user/operator-groups/new",component:Rn,canActivate:[o.a]},{path:"operator-groups/:id",component:ua,canActivate:[o.a]},{path:"operator-groups/:id/edit",component:Rn,canActivate:[o.a]},{path:"contacts",component:Rl,canActivate:[o.a]},{path:"contacts/:user",component:Mr.b,canActivate:[o.a],resolve:{countries:s.a}},{path:":user/passwords",component:Es,canActivate:[o.a]},{path:":user/identity-providers",component:Ei,canActivate:[o.a]},{path:"registration",component:Sl,resolve:{countries:s.a}},{path:"validate-registration/:key",component:Il},{path:"connected",component:ct},{path:"alerts",component:Ie},{path:"validate-email-change/:key",component:Lr},{path:":user/notification-settings",component:en,canActivate:[o.a]},{path:"documents",component:At,canActivate:[o.a]},{path:":user/documents/search",component:Yt,canActivate:[o.a]},{path:"documents/edit/:id",component:vt,canActivate:[o.a]},{path:"documents/view/:id",component:ii,canActivate:[o.a]},{path:":user/documents/new",component:vt,canActivate:[o.a]},{path:"documents/process-dynamic/:id",component:Ht,canActivate:[o.a]},{path:":user/tokens/:type",component:zu,canActivate:[o.a]},{path:"tokens/search/:type",component:Du,canActivate:[o.a]},{path:"tokens/view/:id",component:(()=>{class e extends u.a{constructor(e,t,i,n){super(e),this.userHelper=t,this.modal=i,this.tokenService=n,this.qrCodeUrl$=new ut.a(null)}ngOnInit(){super.ngOnInit(),this.id=this.route.snapshot.paramMap.get("id"),this.addSub(this.tokenService.viewToken({id:this.id}).subscribe(e=>this.data=e))}isQrCode(e){return e.type.physicalType===Fe.Y.QR_CODE}onDataInitialized(e){this.isQrCode(e)&&this.getTokenQrCodeUrl();const t=[];e.assign&&t.push(new G.c("account_box",this.i18n.token.action.assign,()=>{e.status===Fe.ob.UNASSIGNED&&this.modal.show(_u,{class:"modal-form",initialState:{token:this.id,updateAction:()=>this.reload()}})})),e.setActivationDeadline&&t.push(new G.c("calendar_today",this.i18n.token.action.changeDeadline,()=>{this.notification.confirm({title:this.i18n.token.action.changeDeadline,customFields:[{internalName:"deadline",name:this.i18n.token.activationDeadline,type:Fe.p.DATE,required:!0}],callback:e=>this.tokenService.setTokenActivationDeadline({id:this.id,date:e.customValues.deadline}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.deadlineChanged))})})),e.setExpiryDate&&t.push(new G.c("calendar_today",this.i18n.token.action.changeExpiry,()=>{this.notification.confirm({title:this.i18n.token.action.changeExpiry,customFields:[{internalName:"expiry",name:this.i18n.token.expiryDate,type:Fe.p.DATE,required:!0}],callback:e=>this.tokenService.setTokenExpiryDate({id:this.id,date:e.customValues.expiry}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.expiryChanged))})})),e.block&&t.push(new G.c("lock",this.i18n.token.action.block,()=>{this.tokenService.blockToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.blocked))})),e.unblock&&t.push(new G.c("lock_open",this.i18n.token.action.unblock,()=>{this.tokenService.unblockToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.unblocked))})),e.activate&&t.push(new G.c("how_to_reg",this.i18n.token.action.activate,()=>{this.tokenService.activatePendingToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.activated))})),e.cancel&&t.push(new G.c("cancel",this.i18n.token.action.cancel,()=>{this.notification.confirm({title:this.i18n.token.action.cancel,message:this.i18n.token.action.message.cancel,callback:()=>this.tokenService.cancelToken({id:this.id}).subscribe(()=>this.notifyDoneAndReload(this.i18n.token.action.done.canceled))})})),this.headingActions=t}notifyDoneAndReload(e){this.notification.snackBar(e),this.reload()}getTokenQrCodeUrl(){this.addSub(this.tokenService.getTokenQrCode({id:this.id,size:Fe.D.MEDIUM}).subscribe(e=>this.qrCodeUrl$.next(URL.createObjectURL(e))))}statusDisplay(e){return this.userHelper.tokenStatus(e)}showUser(){var e;return!(this.authHelper.isSelf(this.data.user)||(null===(e=this.data.user)||void 0===e?void 0:e.user)&&this.authHelper.isSelf(this.data.user.user))}valueLabel(){return this.data.type.physicalType===Fe.Y.NFC_TAG?this.i18n.token.label:this.i18n.token.value}showDeadLine(){return this.data.status===Fe.ob.ACTIVATION_EXPIRED||this.data.status===Fe.ob.PENDING}showExpiryDate(){return[Fe.ob.ACTIVE,Fe.ob.BLOCKED,Fe.ob.CANCELED,Fe.ob.EXPIRED].includes(this.data.status)}resolveMenu(e){return this.dataForUiHolder.role===Fe.eb.ADMINISTRATOR?new d.a(d.b.USER_TOKENS,{tokenType:e.type}):this.authHelper.isSelf(e.user)?new d.a(d.b.MY_TOKENS,{tokenType:e.type}):e.user.user&&this.authHelper.isSelf(e.user.user)?d.b.MY_OPERATORS:this.dataForUiHolder.role===Fe.eb.BROKER?d.b.MY_BROKERED_USERS:d.b.SEARCH_USERS}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(b.r),b.Nb(c.a),b.Nb(f.b),b.Nb(r.G))},e.\u0275cmp=b.Hb({type:e,selectors:[["view-token"]],features:[b.wb],decls:5,vars:9,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],["kind","fieldView","labelPosition","side",3,"label",4,"ngIf"],[3,"label"],[3,"label",4,"ngIf"],["kind","fieldView","labelPosition","side",3,"label"],[3,"user"],[1,"mt-3"],[1,"qr-container","image","d-flex","justify-content-center","mb-4","align-self-center"],["alt","QR-code","class","mw-100",3,"src",4,"ngIf"],["alt","QR-code",1,"mw-100",3,"src"]],template:function(e,t){1&e&&(b.Tb(0,"page-layout",0),b.ec(1,"async"),b.Tb(2,"page-content",1),b.ec(3,"async"),b.Fc(4,ju,12,10,"ng-container",2),b.Sb(),b.Sb()),2&e&&(b.kc("ready",b.fc(1,5,t.data$)),b.zb(2),b.kc("heading",t.i18n.token.title.view(null==t.data?null:t.data.type.name))("mobileHeading",t.i18n.token.mobileTitle.view(null==t.data?null:t.data.type.name))("headingActions",b.fc(3,7,t.headingActions$)),b.zb(2),b.kc("ngIf",t.data))},directives:[m.a,h.a,p.t,q.a,dt.a],pipes:[p.b,F.a,Nt.a],encapsulation:2,changeDetection:0}),e})(),canActivate:[o.a]}]}];let Yu=(()=>{class e{}return e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({factory:function(t){return new(t||e)},imports:[[a.i.forChild(Qu)],a.i]}),e})(),Ku=(()=>{class e{}return e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({factory:function(t){return new(t||e)},imports:[[Yu,n.a]]}),e})()}}]);